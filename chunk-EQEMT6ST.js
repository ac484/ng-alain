import{a as X}from"./chunk-6AOWKASD.js";import"./chunk-KNP3MJAK.js";import"./chunk-ERNLQ6N4.js";import"./chunk-VAGS5EVQ.js";import{a as le,b as se}from"./chunk-NJ7DRAUT.js";import{d as Ut,f as Zt}from"./chunk-L3HMFE5E.js";import"./chunk-5UL4OGVR.js";import{f as ge,k as Ce}from"./chunk-RSNPD6EB.js";import{c as pe,f as ue,h as de,j as me,k as fe,l as _e,n as ze}from"./chunk-QXXECWUW.js";import"./chunk-CKQ6FBZR.js";import"./chunk-NMCFBNRY.js";import"./chunk-F7UE2Z2N.js";import"./chunk-GFX7JDKS.js";import"./chunk-OTGL7XGI.js";import"./chunk-5NDUH4BM.js";import"./chunk-7INLARAR.js";import"./chunk-3LZSSZ2Q.js";import{d as ie,g as oe,m as re,o as ae,y as ce}from"./chunk-4AYNG3KP.js";import"./chunk-Q6QAL4XK.js";import"./chunk-2HVL4WVD.js";import"./chunk-ZDNPLYMC.js";import"./chunk-KR7JNVYJ.js";import{t as ut}from"./chunk-H53TJUCR.js";import"./chunk-QBQXGPEE.js";import{d as ne}from"./chunk-QRKJYL4P.js";import"./chunk-JE6KLO7C.js";import"./chunk-W5FC2PZ7.js";import"./chunk-TPNYXQ4U.js";import{h as Kt,q as te,s as ee,t as Y}from"./chunk-5PLKKHJ2.js";import{Nc as P,Oc as H,Pc as Jt,a as q,aa as pt,e as qt,ea as Yt,f as jt,ga as Xt,o as j}from"./chunk-Z6UJEHZN.js";import{q as st,y as $t}from"./chunk-KF7OGFLI.js";import{Aa as p,Ac as Pt,Ba as u,Cc as w,Dc as x,Dd as ct,Ec as S,Fa as xt,Fb as h,Fc as rt,Ga as nt,Gb as Ft,Hc as Ht,Hd as lt,Ic as D,Kc as W,Lb as v,Mc as Rt,Nc as z,Ob as Q,Oc as Lt,Pb as It,Pc as M,R as yt,Ra as St,Sc as B,Tc as V,Uc as O,_b as F,ac as I,b as Ct,cc as Nt,dc as kt,dd as At,ec as Et,fc as s,g as ht,ga as vt,gc as a,hc as c,ic as _,kd as b,mc as Bt,nb as Mt,nc as Vt,oa as Tt,oc as ot,pa as Dt,pc as T,pd as $,q as bt,qd as Qt,r as et,rd as Wt,sa as wt,sb as l,ta as C,ud as Gt,vc as f,vd as y,yb as it,yc as d,yd as at,zc as Ot}from"./chunk-IDL4MXQM.js";import{a as zt,b as gt,g as tt,i as G}from"./chunk-57BLH6QZ.js";function we(i,o){}function xe(i,o){if(i&1&&(a(0,"div",2),v(1,we,0,0,"ng-template",4),c()),i&2){let t=d(2);l(),s("ngTemplateOutlet",t.nzIcon)}}function Se(i,o){if(i&1&&(Bt(0),z(1),Vt()),i&2){let t=d(3);l(),M(" ",t.nzDescription," ")}}function Me(i,o){if(i&1&&(a(0,"div",3),v(1,Se,2,1,"ng-container",5),c()),i&2){let t=d(2);l(),s("nzStringTemplateOutlet",t.nzDescription)}}function Fe(i,o){if(i&1&&(F(0,xe,2,1,"div",2),F(1,Me,2,1,"div",3)),i&2){let t=d();I(t.nzIcon?0:-1),l(),I(t.nzDescription&&t.nzShape==="square"?1:-1)}}function Ie(i,o){i&1&&(a(0,"div",2),_(1,"nz-icon",6),c())}function Ne(i,o){if(i&1){let t=T();a(0,"a",2),f("click",function(){p(t);let e=d();return u(e.nzOnClick.emit(!0))}),_(1,"nz-float-button-content",3),c()}if(i&2){let t=d();W("ant-float-btn-default",t.nzType==="default"),s("target",t.nzTarget)("href",t.nzHref,Mt)("nzType",t.nzType),l(),s("nzIcon",t.nzIcon)("nzDescription",t.nzDescription)("nzShape",t.nzShape)}}function ke(i,o){if(i&1){let t=T();a(0,"button",4),f("click",function(){p(t);let e=d();return u(e.nzOnClick.emit(!0))}),_(1,"nz-float-button-content",3),c()}if(i&2){let t=d();W("ant-float-btn-default",t.nzType==="default"),s("nzType",t.nzType),l(),s("nzIcon",t.nzIcon)("nzDescription",t.nzDescription)("nzShape",t.nzShape)}}var Ee=["backTop"];function Be(i,o){i&1&&_(0,"nz-icon",3)}var Ve=["*"];function Oe(i,o){i&1&&ot(0)}function Pe(i,o){if(i&1&&v(0,Oe,1,0,"ng-container",2),i&2){d();let t=D(3);s("ngTemplateOutlet",t)}}function He(i,o){i&1&&ot(0)}function Re(i,o){if(i&1&&(a(0,"div",3),v(1,He,1,0,"ng-container",2),c()),i&2){d(2);let t=D(3);s("@fadeMotion",void 0),l(),s("ngTemplateOutlet",t)}}function Le(i,o){if(i&1){let t=T();F(0,Re,2,2,"div",3),a(1,"nz-float-button",4),f("nzOnClick",function(){p(t);let e=d();return u(e.open()?e.clickCloseMenu():e.clickOpenMenu())})("mouseover",function(){p(t);let e=d();return u(e.hoverOpenMenu())}),c()}if(i&2){let t=d(),n=D(5);I(t.open()?0:-1),l(),s("nzType",t.nzType())("nzIcon",t.open()?n:t.nzIcon())("nzShape",t.nzShape())("nzDescription",t.open()?null:t.nzDescription())}}function Ae(i,o){i&1&&Pt(0)}function Qe(i,o){i&1&&_(0,"nz-icon",5)}var he=(()=>{class i{nzIcon=null;nzDescription=null;nzShape="circle";static \u0275fac=function(n){return new(n||i)};static \u0275cmp=h({type:i,selectors:[["nz-float-button-content"]],inputs:{nzIcon:"nzIcon",nzDescription:"nzDescription",nzShape:"nzShape"},exportAs:["nzFloatButtonContent"],decls:4,vars:1,consts:[[1,"ant-float-btn-body"],[1,"ant-float-btn-content"],[1,"ant-float-btn-icon"],[1,"ant-float-btn-description"],[3,"ngTemplateOutlet"],[4,"nzStringTemplateOutlet"],["nzType","file-text","nzTheme","outline"]],template:function(n,e){n&1&&(a(0,"div",0)(1,"div",1),F(2,Fe,2,2)(3,Ie,2,0,"div",2),c()()),n&2&&(l(2),I(e.nzDescription||e.nzIcon?2:3))},dependencies:[H,P,st,Jt],encapsulation:2,changeDetection:0})}return i})(),N=(()=>{class i{directionality=C(j);cdr=C(ct);destroyRef=C(nt);nzHref=null;nzTarget=null;nzType="default";nzShape="circle";nzIcon=null;nzDescription=null;nzOnClick=new Q;dir="ltr";constructor(){this.dir=this.directionality.value}ngOnInit(){this.directionality.change?.pipe(q(this.destroyRef)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=h({type:i,selectors:[["nz-float-button"]],hostAttrs:[1,"ant-float-btn"],hostVars:6,hostBindings:function(n,e){n&2&&W("ant-float-btn-circle",e.nzShape==="circle")("ant-float-btn-square",e.nzShape==="square")("ant-float-btn-rtl",e.dir==="rtl")},inputs:{nzHref:"nzHref",nzTarget:"nzTarget",nzType:"nzType",nzShape:"nzShape",nzIcon:"nzIcon",nzDescription:"nzDescription"},outputs:{nzOnClick:"nzOnClick"},exportAs:["nzFloatButton"],decls:2,vars:1,consts:[["nz-button","",1,"ant-float-btn-inner",3,"target","href","nzType","ant-float-btn-default"],["nz-button","",1,"ant-float-btn-inner",3,"nzType","ant-float-btn-default"],["nz-button","",1,"ant-float-btn-inner",3,"click","target","href","nzType"],[3,"nzIcon","nzDescription","nzShape"],["nz-button","",1,"ant-float-btn-inner",3,"click","nzType"]],template:function(n,e){n&1&&F(0,Ne,2,8,"a",0)(1,ke,2,6,"button",1),n&2&&I(e.nzHref?0:1)},dependencies:[Y,ee,Kt,te,he],encapsulation:2,changeDetection:0})}return i})(),We="backTop",Ge=jt({passive:!0}),dt=(()=>{var n;let i,o=[],t=[];return n=class{nzConfigService=C(Yt);scrollSrv=C(ne);platform=C(qt);ngZone=C(It);cdr=C(ct);directionality=C(j);destroyRef=C(nt);_nzModuleName=We;scrollListenerDestroy$=new ht;target=null;visible=!1;dir="ltr";nzHref=null;nzType="default";nzShape="circle";nzIcon=null;nzDescription=null;nzTemplate;nzVisibilityHeight=et(this,o,400);nzTarget=et(this,t);nzDuration=450;nzOnClick=new Q;set backTop(r){r&&(this.backTopClickSubscription.unsubscribe(),this.backTopClickSubscription=pt(r.nativeElement,"click").pipe(q(this.destroyRef)).subscribe(()=>{this.scrollSrv.scrollTo(this.getTarget(),0,{duration:this.nzDuration}),this.nzOnClick.observers.length&&this.ngZone.run(()=>this.nzOnClick.emit(!0))}))}doc=C(xt);backTopClickSubscription=Ct.EMPTY;constructor(){this.destroyRef.onDestroy(()=>{this.scrollListenerDestroy$.next(),this.scrollListenerDestroy$.complete()})}ngOnInit(){this.registerScrollEvent(),this.dir=this.directionality.value,this.directionality.change?.pipe(q(this.destroyRef)).subscribe(r=>{this.dir=r,this.cdr.detectChanges()})}getTarget(){return this.target||window}handleScroll(){this.visible!==this.scrollSrv.getScroll(this.getTarget())>this.nzVisibilityHeight&&(this.visible=!this.visible,this.cdr.detectChanges())}registerScrollEvent(){this.platform.isBrowser&&(this.scrollListenerDestroy$.next(),this.handleScroll(),pt(this.getTarget(),"scroll",Ge).pipe(yt(50),vt(this.scrollListenerDestroy$)).subscribe(()=>this.handleScroll()))}detectChanges(){this.cdr.detectChanges()}ngOnChanges(r){let{nzTarget:m}=r;m&&(this.target=typeof this.nzTarget=="string"?this.doc.querySelector(this.nzTarget):this.nzTarget,this.registerScrollEvent())}},(()=>{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[Xt()],bt(null,null,i,{kind:"field",name:"nzVisibilityHeight",static:!1,private:!1,access:{has:m=>"nzVisibilityHeight"in m,get:m=>m.nzVisibilityHeight,set:(m,g)=>{m.nzVisibilityHeight=g}},metadata:r},o,t),r&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),tt(n,"\u0275fac",function(m){return new(m||n)}),tt(n,"\u0275cmp",h({type:n,selectors:[["nz-float-button-top"]],viewQuery:function(m,g){if(m&1&&w(Ee,5),m&2){let E;x(E=S())&&(g.backTop=E.first)}},hostAttrs:[1,"ant-float-btn","ant-float-btn-top"],hostVars:8,hostBindings:function(m,g){m&2&&W("ant-float-btn-circle",g.nzShape==="circle")("ant-float-btn-hidden",!g.visible)("ant-float-btn-square",g.nzShape==="square")("ant-float-btn-rtl",g.dir==="rtl")},inputs:{nzHref:"nzHref",nzType:"nzType",nzShape:"nzShape",nzIcon:"nzIcon",nzDescription:"nzDescription",nzTemplate:"nzTemplate",nzVisibilityHeight:[2,"nzVisibilityHeight","nzVisibilityHeight",lt],nzTarget:"nzTarget",nzDuration:[2,"nzDuration","nzDuration",lt]},outputs:{nzOnClick:"nzOnClick"},exportAs:["nzFloatButtonTop"],features:[St],decls:5,vars:6,consts:[["backTop",""],["top",""],[3,"nzIcon","nzDescription","nzHref","nzType","nzShape"],["nzType","vertical-align-top","nzTheme","outline"]],template:function(m,g){if(m&1&&(a(0,"div",null,0),_(2,"nz-float-button",2),v(3,Be,1,0,"ng-template",null,1,b),c()),m&2){let E=D(4);s("@fadeMotion",void 0),l(2),s("nzIcon",g.nzIcon||E)("nzDescription",g.nzDescription)("nzHref",g.nzHref)("nzType",g.nzType)("nzShape",g.nzShape)}},dependencies:[N,H,P],encapsulation:2,data:{animation:[ut]},changeDetection:0})),n})(),mt=(()=>{class i{nzFloatButtonComponents=at(N);nzFloatButtonTopComponents=at(dt);nzHref=y(null);nzTarget=y(null);nzType=y("default");nzIcon=y(null);nzDescription=y(null);nzShape=y("circle");nzTrigger=y(null);nzOpen=y(null);nzPlacement=y("top");nzOnOpenChange=Gt();dir=C(j).valueSignal;open=Wt(()=>!!this.nzOpen());isMenuMode=$(()=>!!this.nzTrigger()&&["click","hover"].includes(this.nzTrigger()));isControlledMode=$(()=>this.nzOpen()!==null);class=$(()=>{let t=this.nzShape(),n=this.dir(),e=["ant-float-btn-group",this.generateClass(t)];return this.isMenuMode()?e.push(this.generateClass(this.nzPlacement())):e.push(this.generateClass(`${t}-shadow`)),n==="rtl"&&e.push(this.generateClass(n)),e});constructor(){Qt(()=>{this.nzFloatButtonComponents()&&this.nzFloatButtonComponents().forEach(t=>{t.nzShape=this.nzShape()}),this.nzFloatButtonTopComponents()&&this.nzFloatButtonTopComponents().forEach(t=>{t.nzShape=this.nzShape(),t.detectChanges()})})}clickOpenMenu(){this.handleEvent("click",!0)}hoverOpenMenu(){this.handleEvent("hover",!0)}clickCloseMenu(){this.handleEvent("click",!1)}hoverCloseMenu(){this.handleEvent("hover",!1)}handleEvent(t,n){this.nzTrigger()!==t||this.isControlledMode()||this.open()===n||(this.open.set(n),this.nzOnOpenChange.emit(n))}generateClass(t){return`ant-float-btn-group-${t}`}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=h({type:i,selectors:[["nz-float-button-group"]],contentQueries:function(n,e,r){n&1&&(rt(r,e.nzFloatButtonComponents,N,4),rt(r,e.nzFloatButtonTopComponents,dt,4)),n&2&&Ht(2)},hostVars:2,hostBindings:function(n,e){n&1&&f("mouseleave",function(){return e.hoverCloseMenu()}),n&2&&Rt(e.class())},inputs:{nzHref:[1,"nzHref"],nzTarget:[1,"nzTarget"],nzType:[1,"nzType"],nzIcon:[1,"nzIcon"],nzDescription:[1,"nzDescription"],nzShape:[1,"nzShape"],nzTrigger:[1,"nzTrigger"],nzOpen:[1,"nzOpen"],nzPlacement:[1,"nzPlacement"]},outputs:{nzOnOpenChange:"nzOnOpenChange"},exportAs:["nzFloatButtonGroup"],ngContentSelectors:Ve,decls:6,vars:1,consts:[["menu",""],["close",""],[4,"ngTemplateOutlet"],[1,"ant-float-btn-group-wrap"],[1,"ant-float-btn-group-trigger",3,"nzOnClick","mouseover","nzType","nzIcon","nzShape","nzDescription"],["nzType","close","nzTheme","outline"]],template:function(n,e){n&1&&(Ot(),F(0,Pe,1,1,"ng-container")(1,Le,2,5),v(2,Ae,1,0,"ng-template",null,0,b)(4,Qe,1,0,"ng-template",null,1,b)),n&2&&I(e.isMenuMode()?1:0)},dependencies:[N,H,P,st],encapsulation:2,data:{animation:[ut]},changeDetection:0})}return i})(),be=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ft({type:i});static \u0275inj=Dt({imports:[N,mt,dt,he]})}return i})();var qe=["upIcon"],je=["downIcon"],Ye=["leftIcon"],Xe=["rightIcon"],Ue=["commentIcon"],Ze=(i,o)=>({x:i,y:o});function Je(i,o){i&1&&_(0,"nz-icon",8)}function Ke(i,o){i&1&&_(0,"nz-icon",9)}function tn(i,o){i&1&&_(0,"nz-icon",10)}function en(i,o){i&1&&_(0,"nz-icon",11)}function nn(i,o){i&1&&_(0,"nz-icon",12)}var R=class R{constructor(){this.dragX=0;this.dragY=0;this.smartPlacement="top";this.currentX=0;this.currentY=0;this.onAction=new Q}get currentIcon(){return{top:this.upIcon,bottom:this.downIcon,left:this.leftIcon,right:this.rightIcon}[this.smartPlacement]}onDragMove(o){let t=o.source.element.nativeElement.getBoundingClientRect();this.currentX=t.left,this.currentY=t.top,this.smartPlacement=this.calculateSmartPlacement(this.currentX,this.currentY)}onDragEnd(o){this.dragX=o.source.getFreeDragPosition().x,this.dragY=o.source.getFreeDragPosition().y,this.smartPlacement=this.calculateSmartPlacement(this.currentX,this.currentY)}calculateSmartPlacement(o,t){let n=window.innerWidth,e=window.innerHeight,r=56,m=o+r/2,g=t+r/2,E=n/2,Te=e/2,ft=m-E,_t=g-Te;return Math.abs(ft)>Math.abs(_t)?ft>0?"left":"right":_t>0?"top":"bottom"}openChange(o){}};R.\u0275fac=function(t){return new(t||R)},R.\u0275cmp=h({type:R,selectors:[["app-fab"]],viewQuery:function(t,n){if(t&1&&(w(qe,7),w(je,7),w(Ye,7),w(Xe,7),w(Ue,7)),t&2){let e;x(e=S())&&(n.upIcon=e.first),x(e=S())&&(n.downIcon=e.first),x(e=S())&&(n.leftIcon=e.first),x(e=S())&&(n.rightIcon=e.first),x(e=S())&&(n.commentIcon=e.first)}},outputs:{onAction:"onAction"},decls:13,vars:7,consts:[["upIcon",""],["downIcon",""],["leftIcon",""],["rightIcon",""],["commentIcon",""],["cdkDrag","",1,"fab-drag-anchor",3,"cdkDragEnded","cdkDragMoved","cdkDragFreeDragPosition"],["nzType","primary","nzTrigger","click",3,"nzOnOpenChange","nzIcon","nzPlacement"],[3,"click","nzIcon"],["nzType","up","nzTheme","outline"],["nzType","down","nzTheme","outline"],["nzType","left","nzTheme","outline"],["nzType","right","nzTheme","outline"],["nzType","plus","nzTheme","outline"]],template:function(t,n){if(t&1){let e=T();a(0,"div",5),f("cdkDragEnded",function(m){return p(e),u(n.onDragEnd(m))})("cdkDragMoved",function(m){return p(e),u(n.onDragMove(m))}),a(1,"nz-float-button-group",6),f("nzOnOpenChange",function(m){return p(e),u(n.openChange(m))}),a(2,"nz-float-button",7),f("click",function(){return p(e),u(n.onAction.emit("add"))}),c()(),v(3,Je,1,0,"ng-template",null,0,b)(5,Ke,1,0,"ng-template",null,1,b)(7,tn,1,0,"ng-template",null,2,b)(9,en,1,0,"ng-template",null,3,b)(11,nn,1,0,"ng-template",null,4,b),c()}if(t&2){let e=D(12);s("cdkDragFreeDragPosition",At(4,Ze,n.dragX,n.dragY)),l(),s("nzIcon",n.currentIcon)("nzPlacement",n.smartPlacement),l(),s("nzIcon",e)}},dependencies:[be,N,mt,H,P,Zt,Ut],styles:[".fab-drag-anchor[_ngcontent-%COMP%]{position:fixed;z-index:1000;right:32px;bottom:32px;cursor:grab;-webkit-user-select:none;user-select:none}.fab-drag-anchor[_ngcontent-%COMP%]:active{cursor:grabbing}nz-float-button-group[_ngcontent-%COMP%]{position:absolute}"]});var Z=R;var k=class k{constructor(o){this.hubCrud=o}list(){return this.hubCrud.useCollection("hub_contract")}add(o){return this.hubCrud.add("hub_contract",o)}update(o,t){return this.hubCrud.update("hub_contract",o,t)}delete(o){return this.hubCrud.delete("hub_contract",o)}};k.\u0275fac=function(t){return new(t||k)(wt(X))},k.\u0275prov=Tt({token:k,factory:k.\u0275fac,providedIn:"root"});var J=k;function an(i,o){if(i&1){let t=T();a(0,"tr",3)(1,"td"),z(2),c(),a(3,"td")(4,"div",4),f("click",function(){let e=p(t).$implicit,r=d();return u(r.startEdit(e.key))}),z(5),c(),a(6,"input",5),O("ngModelChange",function(e){let r=p(t).$implicit;return V(r.client,e)||(r.client=e),u(e)}),f("blur",function(){let e=p(t).$implicit,r=d();return u(r.stopEdit(e))}),c()(),a(7,"td")(8,"div",4),f("click",function(){let e=p(t).$implicit,r=d();return u(r.startEdit(e.key))}),z(9),c(),a(10,"input",5),O("ngModelChange",function(e){let r=p(t).$implicit;return V(r.contractName,e)||(r.contractName=e),u(e)}),f("blur",function(){let e=p(t).$implicit,r=d();return u(r.stopEdit(e))}),c()(),a(11,"td")(12,"div",4),f("click",function(){let e=p(t).$implicit,r=d();return u(r.startEdit(e.key))}),z(13),c(),a(14,"input",5),O("ngModelChange",function(e){let r=p(t).$implicit;return V(r.contractCode,e)||(r.contractCode=e),u(e)}),f("blur",function(){let e=p(t).$implicit,r=d();return u(r.stopEdit(e))}),c()(),a(15,"td")(16,"div",4),f("click",function(){let e=p(t).$implicit,r=d();return u(r.startEdit(e.key))}),z(17),c(),a(18,"input",5),O("ngModelChange",function(e){let r=p(t).$implicit;return V(r.feeCode,e)||(r.feeCode=e),u(e)}),f("blur",function(){let e=p(t).$implicit,r=d();return u(r.stopEdit(e))}),c()(),a(19,"td")(20,"div",4),f("click",function(){let e=p(t).$implicit,r=d();return u(r.startEdit(e.key))}),z(21),c(),a(22,"input",6),O("ngModelChange",function(e){let r=p(t).$implicit;return V(r.amount,e)||(r.amount=e),u(e)}),f("blur",function(){let e=p(t).$implicit,r=d();return u(r.stopEdit(e))}),c()(),a(23,"td")(24,"a",7),f("nzOnConfirm",function(){let e=p(t).$implicit,r=d();return u(r.deleteRow(e.key))}),z(25,"\u522A\u9664"),c()()()}if(i&2){let t=o.$implicit,n=d();l(2),Lt(t.contractSerial),l(2),s("hidden",n.editId===t.key),l(),M(" ",t.client," "),l(),s("hidden",n.editId!==t.key),B("ngModel",t.client),l(2),s("hidden",n.editId===t.key),l(),M(" ",t.contractName," "),l(),s("hidden",n.editId!==t.key),B("ngModel",t.contractName),l(2),s("hidden",n.editId===t.key),l(),M(" ",t.contractCode," "),l(),s("hidden",n.editId!==t.key),B("ngModel",t.contractCode),l(2),s("hidden",n.editId===t.key),l(),M(" ",t.feeCode," "),l(),s("hidden",n.editId!==t.key),B("ngModel",t.feeCode),l(2),s("hidden",n.editId===t.key),l(),M(" ",t.amount," "),l(),s("hidden",n.editId!==t.key),B("ngModel",t.amount)}}var L=class L{constructor(o,t){this.contractService=o;this.hubCrud=t;this.contracts=[];this.editId=null;this.clients=[]}ngOnInit(){this.refresh(),this.hubCrud.getClientsSettings().then(o=>{this.clients=o?.list||[]})}refresh(){this.contractService.list().subscribe(o=>this.contracts=o)}addRow(){return G(this,null,function*(){let[o,t]=yield Promise.all([this.hubCrud.getDefaultClient(),this.hubCrud.getNextContractSerial()]),n={contractSerial:t,client:o,contractName:"",contractCode:"",feeCode:"",amount:0},e=yield this.contractService.add(n);this.contracts=[...this.contracts,gt(zt({},n),{key:e})],setTimeout(()=>{this.startEdit(e)},200)})}startEdit(o){o&&(this.editId=o,setTimeout(()=>{let t=document.querySelector("input[nz-input]:not([hidden])");t&&t.focus()},50))}stopEdit(o){return G(this,null,function*(){o.key&&(yield this.contractService.update(o.key,o)),this.editId=null})}deleteRow(o){return G(this,null,function*(){o&&(yield this.contractService.delete(o),this.contracts=this.contracts.filter(t=>t.key!==o))})}};L.\u0275fac=function(t){return new(t||L)(it(J),it(X))},L.\u0275cmp=h({type:L,selectors:[["contract-list"]],decls:24,vars:1,consts:[["editRowTable",""],[3,"onAction"],["nzBordered","",3,"nzData"],[1,"editable-row"],[1,"editable-cell",3,"click","hidden"],["type","text","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","\u78BA\u5B9A\u522A\u9664\uFF1F",3,"nzOnConfirm"]],template:function(t,n){if(t&1){let e=T();a(0,"app-fab",1),f("onAction",function(){return p(e),u(n.addRow())}),c(),_(1,"br")(2,"br"),a(3,"nz-table",2,0)(5,"thead")(6,"tr")(7,"th"),z(8,"\u5E8F\u865F"),c(),a(9,"th"),z(10,"\u696D\u4E3B"),c(),a(11,"th"),z(12,"\u5408\u7D04\u540D\u7A31"),c(),a(13,"th"),z(14,"\u5408\u7D04\u6848\u865F\u8B58\u5225\u78BC"),c(),a(15,"th"),z(16,"\u5408\u7D04\u8CBB\u7528\u8B58\u5225\u78BC"),c(),a(17,"th"),z(18,"\u5408\u7D04\u91D1\u984D"),c(),a(19,"th"),z(20,"\u64CD\u4F5C"),c()()(),a(21,"tbody"),kt(22,an,26,21,"tr",3,Nt),c()()}if(t&2){let e=D(4);l(3),s("nzData",n.contracts),l(19),Et(e.data)}},dependencies:[$t,ce,ie,ae,oe,re,ze,me,pe,ue,_e,de,fe,Y,Ce,ge,se,le,Z],styles:[".editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}"]});var K=L;var A=class A{};A.\u0275fac=function(t){return new(t||A)},A.\u0275cmp=h({type:A,selectors:[["hub-contract"]],decls:1,vars:0,template:function(t,n){t&1&&_(0,"contract-list")},dependencies:[K],encapsulation:2});var ve=A;export{ve as HubContractComponent};
