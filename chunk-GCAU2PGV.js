import{a as it}from"./chunk-RC77VZGO.js";import{a as tt,b as et,c as nt}from"./chunk-FRDEHW2K.js";import{a as Y,b as Z}from"./chunk-7HKXGGQW.js";import"./chunk-LJN6UZUT.js";import"./chunk-3XJPIDKW.js";import"./chunk-FNQFXT4L.js";import{c as $,f as q,h as G,j as J,k as K,l as L,n as Q}from"./chunk-5IJWE22G.js";import"./chunk-BDB47AP6.js";import"./chunk-UEJJLST4.js";import"./chunk-X4BKJH5O.js";import"./chunk-FMCAUVD2.js";import"./chunk-7OVKJLC6.js";import"./chunk-FNIJTO6G.js";import"./chunk-YLT4J452.js";import"./chunk-PUYN37MU.js";import"./chunk-Q4M6B46D.js";import"./chunk-ZUQ3JNJU.js";import{a as j,b as W}from"./chunk-JAU2U3S7.js";import"./chunk-LGE3RKIU.js";import{i as w,m as N}from"./chunk-XKNLJG3X.js";import"./chunk-WAQYDUON.js";import"./chunk-67AL53VY.js";import"./chunk-CGTTSKG2.js";import"./chunk-QHSDKNHJ.js";import"./chunk-HG76SPUR.js";import"./chunk-VECD6G7R.js";import"./chunk-JKCE4WUB.js";import{i as M,j as k,k as V,t as R,v as H,w as O}from"./chunk-HFO44OZB.js";import{$b as z,$h as U,Aa as d,Ed as x,Gc as F,Hd as A,Id as I,Lc as c,Nc as C,Ob as u,Oc as y,Pb as e,Qb as n,Rb as S,Yb as h,Yd as P,ai as X,cb as r,cc as b,hb as D,mc as T,ob as _,rc as i,sc as l,tc as g,ub as E,za as s,zd as B}from"./chunk-C2TUN3UK.js";import"./chunk-57BLH6QZ.js";var rt=()=>[];function ot(f,o){if(f&1){let a=h();e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),c(5,"currency"),n(),e(6,"td"),S(7,"nz-progress",30),e(8,"span",31),i(9),n()(),e(10,"td")(11,"nz-tag",10),i(12),n()(),e(13,"td")(14,"nz-tag",10),i(15),n()(),e(16,"td"),i(17),c(18,"date"),n(),e(19,"td")(20,"button",32),z("click",function(){let m=s(a).$implicit,p=b();return d(p.managePayment(m))}),i(21," \u8ACB\u6B3E\u7BA1\u7406 "),n()()()}if(f&2){let a=o.$implicit,t=b();r(2),l(a.round),r(2),l(y(5,12,a.amount,"TWD","symbol","1.0-0")),r(3),u("nzPercent",a.progress)("nzSize","small")("nzShowInfo",!1),r(2),g("",a.progress,"%"),r(2),u("nzColor",t.getPaymentStatusColor(a.paymentStatus)),r(),g(" ",t.getPaymentStatusText(a.paymentStatus)," "),r(2),u("nzColor",a.status==="paid"?"success":"processing"),r(),g(" ",a.status==="paid"?"\u5DF2\u4ED8\u6B3E":"\u5F85\u4ED8\u6B3E"," "),r(2),l(C(18,17,a.date,"yyyy-MM-dd")),r(3),u("disabled",a.paymentStatus==="completed")}}function lt(f,o){if(f&1&&(e(0,"tr")(1,"td")(2,"nz-tag",10),i(3),n()(),e(4,"td"),i(5),n(),e(6,"td"),i(7),c(8,"currency"),n(),e(9,"td"),i(10),n(),e(11,"td"),i(12),c(13,"date"),n()()),f&2){let a=o.$implicit;r(2),u("nzColor",a.type==="\u8FFD\u52A0"?"success":"error"),r(),g(" ",a.type," "),r(2),l(a.description),r(2),l(y(8,6,a.amount,"TWD","symbol","1.0-0")),r(3),l(a.version),r(2),l(C(13,11,a.date,"yyyy-MM-dd"))}}var v=class v{constructor(o,a,t){this.route=o;this.router=a;this.http=t}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&this.loadContractDetail(o)}loadContractDetail(o){this.http.get(`/contract/${o}`).subscribe(a=>{this.contract=a})}getStatusColor(o){switch(o){case"draft":return"default";case"pending":return"processing";case"approved":return"success";case"rejected":return"error";default:return"default"}}getStatusText(o){switch(o){case"draft":return"\u8349\u7A3F";case"pending":return"\u5F85\u5BE9\u6838";case"approved":return"\u5DF2\u6838\u51C6";case"rejected":return"\u5DF2\u62D2\u7D55";default:return"\u672A\u77E5"}}editContract(){this.contract&&this.router.navigate(["/contract/edit",this.contract.id])}goBack(){this.router.navigate(["/contract/list"])}getProgressStatus(o){return o>=100?"success":o>=80?"normal":o>=50?"active":"exception"}requestPayment(){this.router.navigate(["/contract/payment",this.contract?.id])}addChange(){this.router.navigate(["/contract/change",this.contract?.id])}manageAttachment(){this.router.navigate(["/contract/attachment",this.contract?.id])}getPaymentStatusColor(o){switch(o){case"draft":return"default";case"submitted":return"processing";case"reviewing":return"warning";case"invoiced":return"blue";case"completed":return"success";default:return"default"}}getPaymentStatusText(o){switch(o){case"draft":return"\u8349\u7A3F";case"submitted":return"\u9001\u51FA";case"reviewing":return"\u5BE9\u67E5";case"invoiced":return"\u958B\u7968";case"completed":return"\u5B8C\u6210";default:return"\u672A\u77E5"}}managePayment(o){this.router.navigate(["/contract/payment",this.contract?.id],{queryParams:{round:o.round}})}};v.\u0275fac=function(a){return new(a||v)(D(w),D(N),D(P))},v.\u0275cmp=_({type:v,selectors:[["app-contract-detail"]],decls:91,vars:55,consts:[["paymentTable",""],["changeTable",""],["title","\u5408\u7D04\u8A73\u60C5"],["nzTitle","\u57FA\u672C\u8CC7\u8A0A","nzBordered","",3,"nzColumn"],["nzTitle","\u5408\u7D04\u6A19\u984C"],["nzTitle","\u5BA2\u6236\u540D\u7A31"],["nzTitle","\u539F\u59CB\u91D1\u984D"],["nzTitle","\u8B8A\u66F4\u91D1\u984D"],["nzTitle","\u73FE\u884C\u91D1\u984D"],["nzTitle","\u5408\u7D04\u72C0\u614B"],[3,"nzColor"],["nzTitle","\u958B\u59CB\u65E5\u671F"],["nzTitle","\u7D50\u675F\u65E5\u671F"],["nzTitle","\u5EFA\u7ACB\u65E5\u671F"],["nzTitle","\u66F4\u65B0\u65E5\u671F"],["nzTitle","\u5408\u7D04\u63CF\u8FF0",3,"nzSpan"],["nzTitle","\u7248\u672C\u865F"],["nzTitle","\u8B8A\u66F4\u7248\u672C\u865F"],["nzTitle","\u9032\u5EA6"],["title","\u9032\u5EA6\u6458\u8981",2,"margin-top","16px"],[3,"nzPercent","nzStatus"],["title","\u8ACB\u6B3E\u8F2A\u6B21",2,"margin-top","16px"],[3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["title","\u5408\u7D04\u8B8A\u66F4",2,"margin-top","16px"],[2,"margin-top","16px"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-button","",3,"click"],[2,"margin-top","16px",3,"contractId"],[3,"nzPercent","nzSize","nzShowInfo"],[2,"font-size","12px","color","#666"],["nz-button","","nzType","primary","nzSize","small",3,"click","disabled"]],template:function(a,t){if(a&1){let m=h();e(0,"nz-card",2)(1,"nz-descriptions",3)(2,"nz-descriptions-item",4),i(3),n(),e(4,"nz-descriptions-item",5),i(5),n(),e(6,"nz-descriptions-item",6),i(7),c(8,"currency"),n(),e(9,"nz-descriptions-item",7),i(10),c(11,"currency"),n(),e(12,"nz-descriptions-item",8),i(13),c(14,"currency"),n(),e(15,"nz-descriptions-item",9)(16,"nz-tag",10),i(17),n()(),e(18,"nz-descriptions-item",11),i(19),c(20,"date"),n(),e(21,"nz-descriptions-item",12),i(22),c(23,"date"),n(),e(24,"nz-descriptions-item",13),i(25),c(26,"date"),n(),e(27,"nz-descriptions-item",14),i(28),c(29,"date"),n(),e(30,"nz-descriptions-item",15),i(31),n(),e(32,"nz-descriptions-item",16),i(33),n(),e(34,"nz-descriptions-item",17),i(35),n(),e(36,"nz-descriptions-item",18),i(37),n()(),e(38,"nz-card",19),S(39,"nz-progress",20),n(),e(40,"nz-card",21)(41,"nz-table",22,0)(43,"thead")(44,"tr")(45,"th"),i(46,"\u8F2A\u6B21"),n(),e(47,"th"),i(48,"\u91D1\u984D"),n(),e(49,"th"),i(50,"\u9032\u5EA6"),n(),e(51,"th"),i(52,"\u8ACB\u6B3E\u72C0\u614B"),n(),e(53,"th"),i(54,"\u4ED8\u6B3E\u72C0\u614B"),n(),e(55,"th"),i(56,"\u65E5\u671F"),n(),e(57,"th"),i(58,"\u64CD\u4F5C"),n()()(),e(59,"tbody"),E(60,ot,22,20,"tr",23),n()()(),e(61,"nz-card",24)(62,"nz-table",22,1)(64,"thead")(65,"tr")(66,"th"),i(67,"\u985E\u578B"),n(),e(68,"th"),i(69,"\u63CF\u8FF0"),n(),e(70,"th"),i(71,"\u91D1\u984D"),n(),e(72,"th"),i(73,"\u7248\u672C"),n(),e(74,"th"),i(75,"\u65E5\u671F"),n()()(),e(76,"tbody"),E(77,lt,14,14,"tr",23),n()()(),e(78,"div",25)(79,"nz-space")(80,"button",26),z("click",function(){return s(m),d(t.editContract())}),i(81,"\u7DE8\u8F2F\u5408\u7D04"),n(),e(82,"button",27),z("click",function(){return s(m),d(t.requestPayment())}),i(83,"\u8ACB\u6B3E"),n(),e(84,"button",27),z("click",function(){return s(m),d(t.addChange())}),i(85,"\u8FFD\u52A0\u8FFD\u6E1B"),n(),e(86,"button",27),z("click",function(){return s(m),d(t.manageAttachment())}),i(87,"\u9644\u4EF6\u7BA1\u7406"),n(),e(88,"button",28),z("click",function(){return s(m),d(t.goBack())}),i(89,"\u8FD4\u56DE\u5217\u8868"),n()()()(),S(90,"app-contract-attachment",29)}if(a&2){let m=T(42),p=T(63);r(),u("nzColumn",2),r(2),l(t.contract==null?null:t.contract.title),r(2),l(t.contract==null?null:t.contract.client),r(2),l(y(8,26,t.contract==null?null:t.contract.originalAmount,"TWD","symbol","1.0-0")),r(3),l(y(11,31,t.contract==null?null:t.contract.changeAmount,"TWD","symbol","1.0-0")),r(3),l(y(14,36,t.contract==null?null:t.contract.currentAmount,"TWD","symbol","1.0-0")),r(3),u("nzColor",t.getStatusColor(t.contract==null?null:t.contract.status)),r(),g(" ",t.getStatusText(t.contract==null?null:t.contract.status)," "),r(2),l(C(20,41,t.contract==null?null:t.contract.startDate,"yyyy-MM-dd")),r(3),l(C(23,44,t.contract==null?null:t.contract.endDate,"yyyy-MM-dd")),r(3),l(C(26,47,t.contract==null?null:t.contract.createDate,"yyyy-MM-dd HH:mm")),r(3),l(C(29,50,t.contract==null?null:t.contract.updateDate,"yyyy-MM-dd HH:mm")),r(2),u("nzSpan",2),r(),l((t.contract==null?null:t.contract.description)||"\u7121\u63CF\u8FF0"),r(2),l(t.contract==null?null:t.contract.version),r(2),l(t.contract==null?null:t.contract.changeVersion),r(2),g("",t.contract==null?null:t.contract.progress,"%"),r(2),u("nzPercent",(t.contract==null?null:t.contract.progress)||0)("nzStatus",t.getProgressStatus((t.contract==null?null:t.contract.progress)||0)),r(2),u("nzData",(t.contract==null?null:t.contract.paymentRounds)||F(53,rt))("nzPageSize",5),r(19),u("ngForOf",m.data),r(2),u("nzData",(t.contract==null?null:t.contract.changes)||F(54,rt))("nzPageSize",5),r(15),u("ngForOf",p.data),r(13),u("contractId",(t.contract==null?null:t.contract.id)||"")}},dependencies:[I,B,X,U,nt,et,tt,O,H,V,R,W,j,k,M,Z,Y,Q,J,$,q,L,G,K,it,A,x],encapsulation:2});var at=v;export{at as ContractDetailComponent};
