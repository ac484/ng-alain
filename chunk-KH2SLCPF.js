import{b as Jt,d as te,e as ee,f as ne,g as ut,h as ie,i as Q,n as oe,p as re}from"./chunk-KNP3MJAK.js";import"./chunk-ERNLQ6N4.js";import"./chunk-VAGS5EVQ.js";import{d as Wt,f as Y,k as Kt}from"./chunk-XGBD26OG.js";import{b as Se,e as xe}from"./chunk-DASMK4QW.js";import"./chunk-O2PB7OSS.js";import{f as Te,k as De}from"./chunk-4VST3FZU.js";import{c as ge,f as he,h as Ce,j as be,k as _e,l as ve,n as ye}from"./chunk-H3J7ELB2.js";import"./chunk-EJKOIAYO.js";import"./chunk-KBNNDNJV.js";import"./chunk-HZSZRH6S.js";import"./chunk-GFX7JDKS.js";import"./chunk-YLV3GK25.js";import"./chunk-H4GAAKOU.js";import"./chunk-5NDUH4BM.js";import"./chunk-7INLARAR.js";import"./chunk-3LZSSZ2Q.js";import{d as le,e as P,g as ce,h as se,n as pe,o as ue,q as me,t as de,x as fe,z as ze}from"./chunk-4AYNG3KP.js";import"./chunk-3SU3GSZ3.js";import"./chunk-4SZXT3LZ.js";import"./chunk-ZDNPLYMC.js";import"./chunk-KR7JNVYJ.js";import{t as pt}from"./chunk-7LB7LNHT.js";import"./chunk-3FZ46UDR.js";import{d as ae}from"./chunk-QRKJYL4P.js";import"./chunk-JE6KLO7C.js";import"./chunk-W5FC2PZ7.js";import"./chunk-TPNYXQ4U.js";import{h as X,q as $,s as U,t as W}from"./chunk-5PLKKHJ2.js";import{Nc as k,Oc as V,Pc as Zt,a as j,aa as st,e as Yt,ea as $t,f as Xt,ga as Ut,o as L}from"./chunk-Z6UJEHZN.js";import{o as Qt,p as qt,q as ct,w as jt,y as Lt}from"./chunk-KF7OGFLI.js";import{Aa as g,Ac as Bt,Ba as h,Cc as S,Dc as x,Dd as at,Ec as N,Fa as Dt,Fb as T,Fc as ot,Ga as et,Gb as Nt,Hc as Ot,Hd as lt,Ic as I,Kc as G,Lb as b,Mc as Et,Nc as u,Ob as A,Oc as w,Pb as Ft,Pc as kt,R as _t,Ra as St,_b as F,ac as M,b as ht,dd as Vt,fc as p,g as Ct,ga as vt,gc as r,gd as Pt,hc as a,ic as m,id as Ht,kd as _,mc as Mt,nb as xt,nc as It,oa as yt,oc as it,pa as Tt,pc as D,pd as q,q as bt,qd as Rt,r as tt,rd as At,sb as s,ta as z,ud as Gt,vc as C,vd as v,yb as nt,yc as d,yd as rt,zc as wt}from"./chunk-IDL4MXQM.js";import{g as J,i as y}from"./chunk-57BLH6QZ.js";function ke(n,o){}function Ve(n,o){if(n&1&&(r(0,"div",2),b(1,ke,0,0,"ng-template",4),a()),n&2){let t=d(2);s(),p("ngTemplateOutlet",t.nzIcon)}}function Pe(n,o){if(n&1&&(Mt(0),u(1),It()),n&2){let t=d(3);s(),kt(" ",t.nzDescription," ")}}function He(n,o){if(n&1&&(r(0,"div",3),b(1,Pe,2,1,"ng-container",5),a()),n&2){let t=d(2);s(),p("nzStringTemplateOutlet",t.nzDescription)}}function Re(n,o){if(n&1&&(F(0,Ve,2,1,"div",2),F(1,He,2,1,"div",3)),n&2){let t=d();M(t.nzIcon?0:-1),s(),M(t.nzDescription&&t.nzShape==="square"?1:-1)}}function Ae(n,o){n&1&&(r(0,"div",2),m(1,"nz-icon",6),a())}function Ge(n,o){if(n&1){let t=D();r(0,"a",2),C("click",function(){g(t);let i=d();return h(i.nzOnClick.emit(!0))}),m(1,"nz-float-button-content",3),a()}if(n&2){let t=d();G("ant-float-btn-default",t.nzType==="default"),p("target",t.nzTarget)("href",t.nzHref,xt)("nzType",t.nzType),s(),p("nzIcon",t.nzIcon)("nzDescription",t.nzDescription)("nzShape",t.nzShape)}}function Qe(n,o){if(n&1){let t=D();r(0,"button",4),C("click",function(){g(t);let i=d();return h(i.nzOnClick.emit(!0))}),m(1,"nz-float-button-content",3),a()}if(n&2){let t=d();G("ant-float-btn-default",t.nzType==="default"),p("nzType",t.nzType),s(),p("nzIcon",t.nzIcon)("nzDescription",t.nzDescription)("nzShape",t.nzShape)}}var qe=["backTop"];function je(n,o){n&1&&m(0,"nz-icon",3)}var Le=["*"];function Ye(n,o){n&1&&it(0)}function Xe(n,o){if(n&1&&b(0,Ye,1,0,"ng-container",2),n&2){d();let t=I(3);p("ngTemplateOutlet",t)}}function $e(n,o){n&1&&it(0)}function Ue(n,o){if(n&1&&(r(0,"div",3),b(1,$e,1,0,"ng-container",2),a()),n&2){d(2);let t=I(3);p("@fadeMotion",void 0),s(),p("ngTemplateOutlet",t)}}function We(n,o){if(n&1){let t=D();F(0,Ue,2,2,"div",3),r(1,"nz-float-button",4),C("nzOnClick",function(){g(t);let i=d();return h(i.open()?i.clickCloseMenu():i.clickOpenMenu())})("mouseover",function(){g(t);let i=d();return h(i.hoverOpenMenu())}),a()}if(n&2){let t=d(),e=I(5);M(t.open()?0:-1),s(),p("nzType",t.nzType())("nzIcon",t.open()?e:t.nzIcon())("nzShape",t.nzShape())("nzDescription",t.open()?null:t.nzDescription())}}function Ze(n,o){n&1&&Bt(0)}function Ke(n,o){n&1&&m(0,"nz-icon",5)}var Ne=(()=>{class n{nzIcon=null;nzDescription=null;nzShape="circle";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["nz-float-button-content"]],inputs:{nzIcon:"nzIcon",nzDescription:"nzDescription",nzShape:"nzShape"},exportAs:["nzFloatButtonContent"],decls:4,vars:1,consts:[[1,"ant-float-btn-body"],[1,"ant-float-btn-content"],[1,"ant-float-btn-icon"],[1,"ant-float-btn-description"],[3,"ngTemplateOutlet"],[4,"nzStringTemplateOutlet"],["nzType","file-text","nzTheme","outline"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),F(2,Re,2,2)(3,Ae,2,0,"div",2),a()()),e&2&&(s(2),M(i.nzDescription||i.nzIcon?2:3))},dependencies:[V,k,ct,Zt],encapsulation:2,changeDetection:0})}return n})(),B=(()=>{class n{directionality=z(L);cdr=z(at);destroyRef=z(et);nzHref=null;nzTarget=null;nzType="default";nzShape="circle";nzIcon=null;nzDescription=null;nzOnClick=new A;dir="ltr";constructor(){this.dir=this.directionality.value}ngOnInit(){this.directionality.change?.pipe(j(this.destroyRef)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["nz-float-button"]],hostAttrs:[1,"ant-float-btn"],hostVars:6,hostBindings:function(e,i){e&2&&G("ant-float-btn-circle",i.nzShape==="circle")("ant-float-btn-square",i.nzShape==="square")("ant-float-btn-rtl",i.dir==="rtl")},inputs:{nzHref:"nzHref",nzTarget:"nzTarget",nzType:"nzType",nzShape:"nzShape",nzIcon:"nzIcon",nzDescription:"nzDescription"},outputs:{nzOnClick:"nzOnClick"},exportAs:["nzFloatButton"],decls:2,vars:1,consts:[["nz-button","",1,"ant-float-btn-inner",3,"target","href","nzType","ant-float-btn-default"],["nz-button","",1,"ant-float-btn-inner",3,"nzType","ant-float-btn-default"],["nz-button","",1,"ant-float-btn-inner",3,"click","target","href","nzType"],[3,"nzIcon","nzDescription","nzShape"],["nz-button","",1,"ant-float-btn-inner",3,"click","nzType"]],template:function(e,i){e&1&&F(0,Ge,2,8,"a",0)(1,Qe,2,6,"button",1),e&2&&M(i.nzHref?0:1)},dependencies:[W,U,X,$,Ne],encapsulation:2,changeDetection:0})}return n})(),Je="backTop",tn=Xt({passive:!0}),mt=(()=>{var e;let n,o=[],t=[];return e=class{nzConfigService=z($t);scrollSrv=z(ae);platform=z(Yt);ngZone=z(Ft);cdr=z(at);directionality=z(L);destroyRef=z(et);_nzModuleName=Je;scrollListenerDestroy$=new Ct;target=null;visible=!1;dir="ltr";nzHref=null;nzType="default";nzShape="circle";nzIcon=null;nzDescription=null;nzTemplate;nzVisibilityHeight=tt(this,o,400);nzTarget=tt(this,t);nzDuration=450;nzOnClick=new A;set backTop(l){l&&(this.backTopClickSubscription.unsubscribe(),this.backTopClickSubscription=st(l.nativeElement,"click").pipe(j(this.destroyRef)).subscribe(()=>{this.scrollSrv.scrollTo(this.getTarget(),0,{duration:this.nzDuration}),this.nzOnClick.observers.length&&this.ngZone.run(()=>this.nzOnClick.emit(!0))}))}doc=z(Dt);backTopClickSubscription=ht.EMPTY;constructor(){this.destroyRef.onDestroy(()=>{this.scrollListenerDestroy$.next(),this.scrollListenerDestroy$.complete()})}ngOnInit(){this.registerScrollEvent(),this.dir=this.directionality.value,this.directionality.change?.pipe(j(this.destroyRef)).subscribe(l=>{this.dir=l,this.cdr.detectChanges()})}getTarget(){return this.target||window}handleScroll(){this.visible!==this.scrollSrv.getScroll(this.getTarget())>this.nzVisibilityHeight&&(this.visible=!this.visible,this.cdr.detectChanges())}registerScrollEvent(){this.platform.isBrowser&&(this.scrollListenerDestroy$.next(),this.handleScroll(),st(this.getTarget(),"scroll",tn).pipe(_t(50),vt(this.scrollListenerDestroy$)).subscribe(()=>this.handleScroll()))}detectChanges(){this.cdr.detectChanges()}ngOnChanges(l){let{nzTarget:c}=l;c&&(this.target=typeof this.nzTarget=="string"?this.doc.querySelector(this.nzTarget):this.nzTarget,this.registerScrollEvent())}},(()=>{let l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Ut()],bt(null,null,n,{kind:"field",name:"nzVisibilityHeight",static:!1,private:!1,access:{has:c=>"nzVisibilityHeight"in c,get:c=>c.nzVisibilityHeight,set:(c,f)=>{c.nzVisibilityHeight=f}},metadata:l},o,t),l&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),J(e,"\u0275fac",function(c){return new(c||e)}),J(e,"\u0275cmp",T({type:e,selectors:[["nz-float-button-top"]],viewQuery:function(c,f){if(c&1&&S(qe,5),c&2){let E;x(E=N())&&(f.backTop=E.first)}},hostAttrs:[1,"ant-float-btn","ant-float-btn-top"],hostVars:8,hostBindings:function(c,f){c&2&&G("ant-float-btn-circle",f.nzShape==="circle")("ant-float-btn-hidden",!f.visible)("ant-float-btn-square",f.nzShape==="square")("ant-float-btn-rtl",f.dir==="rtl")},inputs:{nzHref:"nzHref",nzType:"nzType",nzShape:"nzShape",nzIcon:"nzIcon",nzDescription:"nzDescription",nzTemplate:"nzTemplate",nzVisibilityHeight:[2,"nzVisibilityHeight","nzVisibilityHeight",lt],nzTarget:"nzTarget",nzDuration:[2,"nzDuration","nzDuration",lt]},outputs:{nzOnClick:"nzOnClick"},exportAs:["nzFloatButtonTop"],features:[St],decls:5,vars:6,consts:[["backTop",""],["top",""],[3,"nzIcon","nzDescription","nzHref","nzType","nzShape"],["nzType","vertical-align-top","nzTheme","outline"]],template:function(c,f){if(c&1&&(r(0,"div",null,0),m(2,"nz-float-button",2),b(3,je,1,0,"ng-template",null,1,_),a()),c&2){let E=I(4);p("@fadeMotion",void 0),s(2),p("nzIcon",f.nzIcon||E)("nzDescription",f.nzDescription)("nzHref",f.nzHref)("nzType",f.nzType)("nzShape",f.nzShape)}},dependencies:[B,V,k],encapsulation:2,data:{animation:[pt]},changeDetection:0})),e})(),ft=(()=>{class n{nzFloatButtonComponents=rt(B);nzFloatButtonTopComponents=rt(mt);nzHref=v(null);nzTarget=v(null);nzType=v("default");nzIcon=v(null);nzDescription=v(null);nzShape=v("circle");nzTrigger=v(null);nzOpen=v(null);nzPlacement=v("top");nzOnOpenChange=Gt();dir=z(L).valueSignal;open=At(()=>!!this.nzOpen());isMenuMode=q(()=>!!this.nzTrigger()&&["click","hover"].includes(this.nzTrigger()));isControlledMode=q(()=>this.nzOpen()!==null);class=q(()=>{let t=this.nzShape(),e=this.dir(),i=["ant-float-btn-group",this.generateClass(t)];return this.isMenuMode()?i.push(this.generateClass(this.nzPlacement())):i.push(this.generateClass(`${t}-shadow`)),e==="rtl"&&i.push(this.generateClass(e)),i});constructor(){Rt(()=>{this.nzFloatButtonComponents()&&this.nzFloatButtonComponents().forEach(t=>{t.nzShape=this.nzShape()}),this.nzFloatButtonTopComponents()&&this.nzFloatButtonTopComponents().forEach(t=>{t.nzShape=this.nzShape(),t.detectChanges()})})}clickOpenMenu(){this.handleEvent("click",!0)}hoverOpenMenu(){this.handleEvent("hover",!0)}clickCloseMenu(){this.handleEvent("click",!1)}hoverCloseMenu(){this.handleEvent("hover",!1)}handleEvent(t,e){this.nzTrigger()!==t||this.isControlledMode()||this.open()===e||(this.open.set(e),this.nzOnOpenChange.emit(e))}generateClass(t){return`ant-float-btn-group-${t}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["nz-float-button-group"]],contentQueries:function(e,i,l){e&1&&(ot(l,i.nzFloatButtonComponents,B,4),ot(l,i.nzFloatButtonTopComponents,mt,4)),e&2&&Ot(2)},hostVars:2,hostBindings:function(e,i){e&1&&C("mouseleave",function(){return i.hoverCloseMenu()}),e&2&&Et(i.class())},inputs:{nzHref:[1,"nzHref"],nzTarget:[1,"nzTarget"],nzType:[1,"nzType"],nzIcon:[1,"nzIcon"],nzDescription:[1,"nzDescription"],nzShape:[1,"nzShape"],nzTrigger:[1,"nzTrigger"],nzOpen:[1,"nzOpen"],nzPlacement:[1,"nzPlacement"]},outputs:{nzOnOpenChange:"nzOnOpenChange"},exportAs:["nzFloatButtonGroup"],ngContentSelectors:Le,decls:6,vars:1,consts:[["menu",""],["close",""],[4,"ngTemplateOutlet"],[1,"ant-float-btn-group-wrap"],[1,"ant-float-btn-group-trigger",3,"nzOnClick","mouseover","nzType","nzIcon","nzShape","nzDescription"],["nzType","close","nzTheme","outline"]],template:function(e,i){e&1&&(wt(),F(0,Xe,1,1,"ng-container")(1,We,2,5),b(2,Ze,1,0,"ng-template",null,0,_)(4,Ke,1,0,"ng-template",null,1,_)),e&2&&M(i.isMenuMode()?1:0)},dependencies:[B,V,k,ct],encapsulation:2,data:{animation:[pt]},changeDetection:0})}return n})(),Fe=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Nt({type:n});static \u0275inj=Tt({imports:[B,ft,mt,Ne]})}return n})();var on=["upIcon"],rn=["downIcon"],an=["leftIcon"],ln=["rightIcon"],cn=["commentIcon"],sn=(n,o)=>({x:n,y:o});function pn(n,o){n&1&&m(0,"nz-icon",8)}function un(n,o){n&1&&m(0,"nz-icon",9)}function mn(n,o){n&1&&m(0,"nz-icon",10)}function dn(n,o){n&1&&m(0,"nz-icon",11)}function fn(n,o){n&1&&m(0,"nz-icon",12)}var H=class H{constructor(){this.dragX=0;this.dragY=0;this.smartPlacement="top";this.currentX=0;this.currentY=0;this.onAction=new A}get currentIcon(){return{top:this.upIcon,bottom:this.downIcon,left:this.leftIcon,right:this.rightIcon}[this.smartPlacement]}onDragMove(o){let t=o.source.element.nativeElement.getBoundingClientRect();this.currentX=t.left,this.currentY=t.top,this.smartPlacement=this.calculateSmartPlacement(this.currentX,this.currentY)}onDragEnd(o){this.dragX=o.source.getFreeDragPosition().x,this.dragY=o.source.getFreeDragPosition().y,this.smartPlacement=this.calculateSmartPlacement(this.currentX,this.currentY)}calculateSmartPlacement(o,t){let e=window.innerWidth,i=window.innerHeight,l=56,c=o+l/2,f=t+l/2,E=e/2,Ie=i/2,zt=c-E,gt=f-Ie;return Math.abs(zt)>Math.abs(gt)?zt>0?"left":"right":gt>0?"top":"bottom"}openChange(o){}};H.\u0275fac=function(t){return new(t||H)},H.\u0275cmp=T({type:H,selectors:[["app-fab"]],viewQuery:function(t,e){if(t&1&&(S(on,7),S(rn,7),S(an,7),S(ln,7),S(cn,7)),t&2){let i;x(i=N())&&(e.upIcon=i.first),x(i=N())&&(e.downIcon=i.first),x(i=N())&&(e.leftIcon=i.first),x(i=N())&&(e.rightIcon=i.first),x(i=N())&&(e.commentIcon=i.first)}},outputs:{onAction:"onAction"},decls:13,vars:7,consts:[["upIcon",""],["downIcon",""],["leftIcon",""],["rightIcon",""],["commentIcon",""],["cdkDrag","",1,"fab-drag-anchor",3,"cdkDragEnded","cdkDragMoved","cdkDragFreeDragPosition"],["nzType","primary","nzTrigger","click",3,"nzOnOpenChange","nzIcon","nzPlacement"],[3,"click","nzIcon"],["nzType","up","nzTheme","outline"],["nzType","down","nzTheme","outline"],["nzType","left","nzTheme","outline"],["nzType","right","nzTheme","outline"],["nzType","plus","nzTheme","outline"]],template:function(t,e){if(t&1){let i=D();r(0,"div",5),C("cdkDragEnded",function(c){return g(i),h(e.onDragEnd(c))})("cdkDragMoved",function(c){return g(i),h(e.onDragMove(c))}),r(1,"nz-float-button-group",6),C("nzOnOpenChange",function(c){return g(i),h(e.openChange(c))}),r(2,"nz-float-button",7),C("click",function(){return g(i),h(e.onAction.emit("add"))}),a()(),b(3,pn,1,0,"ng-template",null,0,_)(5,un,1,0,"ng-template",null,1,_)(7,mn,1,0,"ng-template",null,2,_)(9,dn,1,0,"ng-template",null,3,_)(11,fn,1,0,"ng-template",null,4,_),a()}if(t&2){let i=I(12);p("cdkDragFreeDragPosition",Vt(4,sn,e.dragX,e.dragY)),s(),p("nzIcon",e.currentIcon)("nzPlacement",e.smartPlacement),s(),p("nzIcon",i)}},dependencies:[Fe,B,ft,V,k,Y,Wt],styles:[".fab-drag-anchor[_ngcontent-%COMP%]{position:fixed;z-index:1000;right:32px;bottom:32px;cursor:grab;-webkit-user-select:none;user-select:none}.fab-drag-anchor[_ngcontent-%COMP%]:active{cursor:grabbing}nz-float-button-group[_ngcontent-%COMP%]{position:absolute}"]});var Z=H;var O=class O{constructor(){this.firestore=z(Jt)}useCollection(o){let t=ut(this.firestore,o);return te(t,{idField:"key"})}useDoc(o,t){let e=Q(this.firestore,o,t);return ee(e,{idField:"key"})}add(o,t){return y(this,null,function*(){let e=ut(this.firestore,o);return(yield ne(e,t)).id})}update(o,t,e){return y(this,null,function*(){let i=Q(this.firestore,o,t);yield re(i,e)})}delete(o,t){return y(this,null,function*(){let e=Q(this.firestore,o,t);yield ie(e)})}getNextContractSerial(){return y(this,null,function*(){let o=Q(this.firestore,"hub/meta/counters/contractSerial"),t=1;return yield oe(this.firestore,e=>y(this,null,function*(){let i=yield e.get(o);i.exists()?(t=(i.data().value||0)+1,e.update(o,{value:t})):(e.set(o,{value:1}),t=1)})),"C"+String(t).padStart(5,"0")})}};O.\u0275fac=function(t){return new(t||O)},O.\u0275prov=yt({token:O,factory:O.\u0275fac,providedIn:"root"});var K=O;function gn(n,o){if(n&1){let t=D();r(0,"div",6)(1,"form",7),C("ngSubmit",function(){g(t);let i=d();return h(i.submit())}),r(2,"div",8)(3,"div",9)(4,"label"),u(5,"\u5E8F\u865F"),a()(),r(6,"div",10),m(7,"input",11),a()(),r(8,"div",8)(9,"div",9)(10,"label"),u(11,"\u696D\u4E3B"),a()(),r(12,"div",10),m(13,"input",12),a()(),r(14,"div",8)(15,"div",9)(16,"label"),u(17,"\u5408\u7D04\u540D\u7A31"),a()(),r(18,"div",10),m(19,"input",13),a()(),r(20,"div",8)(21,"div",9)(22,"label"),u(23,"\u5408\u7D04\u6848\u865F\u8B58\u5225\u78BC"),a()(),r(24,"div",10),m(25,"input",14),a()(),r(26,"div",8)(27,"div",9)(28,"label"),u(29,"\u5408\u7D04\u8CBB\u7528\u8B58\u5225\u78BC"),a()(),r(30,"div",10),m(31,"input",15),a()(),r(32,"div",8)(33,"div",9)(34,"label"),u(35,"\u5408\u7D04\u91D1\u984D"),a()(),r(36,"div",10),m(37,"input",16),a()(),r(38,"div",17)(39,"button",18),u(40,"\u65B0\u589E\u5408\u7D04"),a(),r(41,"button",19),C("click",function(){g(t);let i=d();return h(i.toggleForm())}),u(42,"\u53D6\u6D88"),a()()()()}if(n&2){let t=d();s(),p("formGroup",t.form),s(38),p("nzLoading",t.isSubmitting)("disabled",t.form.invalid)}}function hn(n,o){if(n&1&&(r(0,"tr")(1,"td"),u(2),a(),r(3,"td"),u(4),a(),r(5,"td"),u(6),a(),r(7,"td"),u(8),a(),r(9,"td"),u(10),a(),r(11,"td"),u(12),Pt(13,"number"),a()()),n&2){let t=o.$implicit;s(2),w(t.contractSerial),s(2),w(t.client),s(2),w(t.contractName),s(2),w(t.contractCode),s(2),w(t.feeCode),s(2),w(Ht(13,6,t.amount,"1.0-0"))}}var R=class R{constructor(o,t){this.fb=o;this.hubCrud=t;this.listOfData=[];this.isSubmitting=!1;this.showForm=!1;this.editKey=null;this.editField=null;this.form=this.fb.group({contractSerial:["",[P.required]],client:["",[P.required]],contractName:["",[P.required]],contractCode:[""],feeCode:[""],amount:[0,[P.required,P.min(1)]]}),this.hubCrud.useCollection("hub_contract").subscribe(e=>{this.listOfData=e})}handleFabAction(o){return y(this,null,function*(){if(o==="add"){let e={contractSerial:yield this.hubCrud.getNextContractSerial(),client:"",contractName:"",contractCode:"",feeCode:"",amount:0},i=yield this.hubCrud.add("hub_contract",e);this.editKey=i,this.editField="client",this.showForm=!1}})}toggleForm(){this.showForm=!this.showForm,this.showForm&&this.form.reset()}submit(){return y(this,null,function*(){if(!this.form.invalid){this.isSubmitting=!0;try{yield this.hubCrud.add("hub_contract",this.form.value),this.showForm=!1,this.form.reset()}finally{this.isSubmitting=!1}}})}};R.\u0275fac=function(t){return new(t||R)(nt(fe),nt(K))},R.\u0275cmp=T({type:R,selectors:[["hub-contract"]],decls:20,vars:3,consts:[["nzTable",""],[3,"onAction"],["class","fab-form",4,"ngIf"],["nzTableLayout","fixed",3,"nzData"],["nzWidth","100px"],[4,"ngFor","ngForOf"],[1,"fab-form"],["nz-form","",3,"ngSubmit","formGroup"],["nz-form-item",""],["nz-form-label",""],["nz-form-control",""],["nz-input","","formControlName","contractSerial"],["nz-input","","formControlName","client"],["nz-input","","formControlName","contractName"],["nz-input","","formControlName","contractCode"],["nz-input","","formControlName","feeCode"],["nz-input","","type","number","formControlName","amount"],[2,"text-align","right","margin-top","8px"],["nz-button","","nzType","primary","htmlType","submit",3,"nzLoading","disabled"],["nz-button","","type","button",2,"margin-left","8px",3,"click"]],template:function(t,e){if(t&1){let i=D();r(0,"app-fab",1),C("onAction",function(c){return g(i),h(e.handleFabAction(c))}),a(),b(1,gn,43,3,"div",2),r(2,"nz-table",3,0)(4,"thead")(5,"tr")(6,"th",4),u(7,"\u5E8F\u865F"),a(),r(8,"th"),u(9,"\u696D\u4E3B"),a(),r(10,"th"),u(11,"\u5408\u7D04\u540D\u7A31"),a(),r(12,"th"),u(13,"\u5408\u7D04\u6848\u865F\u8B58\u5225\u78BC"),a(),r(14,"th"),u(15,"\u5408\u7D04\u8CBB\u7528\u8B58\u5225\u78BC"),a(),r(16,"th"),u(17,"\u5408\u7D04\u91D1\u984D"),a()()(),r(18,"tbody"),b(19,hn,14,9,"tr",5),a()()}t&2&&(s(),p("ngIf",e.showForm),s(),p("nzData",e.listOfData),s(17),p("ngForOf",e.listOfData))},dependencies:[Lt,Qt,qt,Z,ye,be,ge,he,ve,Ce,_e,De,Te,W,U,X,$,Kt,xe,Se,ze,pe,le,ue,ce,se,me,de,Y,jt],styles:[".fab-form[_ngcontent-%COMP%]{position:fixed;width:260px;background:#fff;box-shadow:0 2px 16px #0000002e;border-radius:8px;padding:12px 12px 8px;z-index:1100}.fab-form[_ngcontent-%COMP%]   .nz-form-item[_ngcontent-%COMP%]{margin-bottom:8px}.fab-form[_ngcontent-%COMP%]   input[nz-input][_ngcontent-%COMP%]{font-size:13px;padding:2px 8px;height:28px}.fab-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:2px}.fab-form[_ngcontent-%COMP%]   button[nz-button][_ngcontent-%COMP%]{height:28px;font-size:13px;padding:0 10px}"],changeDetection:0});var Me=R;export{Me as HubContractComponent};
