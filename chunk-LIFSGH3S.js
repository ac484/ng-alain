import{a as Se,b as Fe,c as xe}from"./chunk-KXXW7CII.js";import{a as ye,c as he}from"./chunk-KN2WMLT5.js";import{a as ze,b as ge,c as fe,d as ve,e as Ee}from"./chunk-JSW4L7WF.js";import{a as ce,b as de}from"./chunk-3AJA4UAR.js";import{d as $}from"./chunk-RHSNDLDC.js";import{j as Y,k as H}from"./chunk-VPG4RKW7.js";import{f as le,k as se}from"./chunk-UGOQL7HW.js";import{a as me,f as pe,k as ue}from"./chunk-A6I6NVJK.js";import"./chunk-H7YPP55E.js";import{a as ne,b as ie}from"./chunk-S3APEFK2.js";import"./chunk-RYKA7J56.js";import{b as oe,c as re,d as ae}from"./chunk-VDEGG43N.js";import"./chunk-PU46QXHH.js";import"./chunk-FSJ6KERW.js";import"./chunk-UATVLLJJ.js";import"./chunk-BRKXCE7P.js";import"./chunk-WHJAXXAS.js";import{d as U,e as g,g as J,h as K,n as Q,q as X,t as Z,x as ee,z as te}from"./chunk-NB4EIDVA.js";import"./chunk-43QWISWI.js";import"./chunk-4OGGW47F.js";import"./chunk-JHZVO6A4.js";import"./chunk-Z2B7QBBP.js";import"./chunk-QNTYQDQV.js";import{Aa as c,Ac as V,Dd as I,Fc as k,Hd as P,Ih as W,Jh as L,Kc as B,Mc as O,Nb as o,Ob as n,Oc as F,Pb as r,Qb as s,Th as G,Xb as y,_b as v,ai as R,bb as i,bc as d,ci as j,di as q,gb as S,lc as M,mc as N,nb as x,ni as Ce,oi as _e,qc as l,rc as E,sc as T,tb as _,uc as b,vc as D,wc as w,yd as A,za as u}from"./chunk-VMD4HRQF.js";import{a as C}from"./chunk-57BLH6QZ.js";var Ne=()=>({minRows:3,maxRows:5});function Te(p,e){if(p&1){let t=y();n(0,"button",26),v("click",function(){u(t);let m=d();return c(m.showAddEventModal())}),s(1,"span",27),l(2," \u65B0\u589E\u4E8B\u4EF6 "),r()}}function be(p,e){if(p&1&&s(0,"span",44),p&2){let t=d().$implicit,a=d();N("color",a.getEventColor(t.status)),o("nzType",a.getEventIcon(t.type))}}function De(p,e){if(p&1){let t=y();n(0,"nz-timeline-item",28),_(1,be,1,3,"ng-template",null,1,F),n(3,"div",29)(4,"div",30)(5,"h4",31),l(6),r(),n(7,"div",32)(8,"nz-tag",33),l(9),r(),n(10,"span",34),l(11),B(12,"date"),r()()(),n(13,"p",35),l(14),r(),n(15,"div",36),s(16,"nz-avatar",37),n(17,"span",38),l(18),r(),n(19,"div",39)(20,"button",40),v("click",function(){let m=u(t).$implicit,z=d();return c(z.editEvent(m))}),s(21,"span",41),r(),n(22,"button",42),v("click",function(){let m=u(t).$implicit,z=d();return c(z.deleteEvent(m.id))}),s(23,"span",43),r()()()()()}if(p&2){let t=e.$implicit,a=d();o("nzColor",a.getEventColor(t.status))("nzDot",a.getEventDot(t)),i(6),E(t.title),i(2),o("nzColor",a.getStatusColor(t.status)),i(),T(" ",a.getStatusText(t.status)," "),i(2),E(O(12,11,t.date,"yyyy-MM-dd HH:mm")),i(3),E(t.description),i(2),o("nzText",V(t.user.charAt(0)))("nzSize",24),i(2),E(t.user)}}var f=class f{constructor(e,t){this.fb=e;this.message=t;this.timelineEvents=[];this.isEventModalVisible=!1;this.isEditing=!1;this.editingEventId=null;this.eventForm=this.fb.group({title:["",[g.required]],description:[""],type:["task",[g.required]],status:["pending",[g.required]],date:[null,[g.required]],user:["",[g.required]]}),this.initializeSampleEvents()}initializeSampleEvents(){let e=new Date;this.timelineEvents=[{id:"1",title:"\u5C08\u6848\u555F\u52D5\u6703\u8B70",description:"\u53EC\u958B\u65B0\u5C08\u6848\u555F\u52D5\u6703\u8B70\uFF0C\u8A0E\u8AD6\u5C08\u6848\u76EE\u6A19\u548C\u6642\u9593\u5B89\u6392",type:"meeting",status:"completed",date:new Date(e.getFullYear(),e.getMonth(),e.getDate()-7,10,0),user:"\u5F35\u4E09"},{id:"2",title:"\u9700\u6C42\u5206\u6790\u5B8C\u6210",description:"\u5B8C\u6210\u7528\u6236\u9700\u6C42\u5206\u6790\uFF0C\u5236\u5B9A\u8A73\u7D30\u7684\u529F\u80FD\u898F\u683C",type:"milestone",status:"completed",date:new Date(e.getFullYear(),e.getMonth(),e.getDate()-5,14,30),user:"\u674E\u56DB"},{id:"3",title:"UI\u8A2D\u8A08\u958B\u59CB",description:"\u958B\u59CB\u9032\u884C\u7528\u6236\u4ECB\u9762\u8A2D\u8A08\u5DE5\u4F5C",type:"task",status:"in-progress",date:new Date(e.getFullYear(),e.getMonth(),e.getDate()-3,9,0),user:"\u738B\u4E94"},{id:"4",title:"\u767C\u73FE\u6280\u8853\u554F\u984C",description:"\u5728\u958B\u767C\u904E\u7A0B\u4E2D\u767C\u73FE\u8CC7\u6599\u5EAB\u6027\u80FD\u554F\u984C",type:"issue",status:"pending",date:new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,16,0),user:"\u8D99\u516D"},{id:"5",title:"\u7B2C\u4E00\u968E\u6BB5\u6E2C\u8A66",description:"\u958B\u59CB\u9032\u884C\u7B2C\u4E00\u968E\u6BB5\u7684\u529F\u80FD\u6E2C\u8A66",type:"task",status:"pending",date:new Date(e.getFullYear(),e.getMonth(),e.getDate()+2,10,0),user:"\u9322\u4E03"}]}getEventColor(e){switch(e){case"completed":return"green";case"in-progress":return"blue";case"pending":return"orange";case"delayed":return"red";default:return"gray"}}getEventIcon(e){switch(e){case"project":return"rocket";case"task":return"check-circle";case"milestone":return"flag";case"meeting":return"team";case"issue":return"exclamation-circle";default:return"info-circle"}}getEventDot(e){return e.icon?"customDot":void 0}getStatusColor(e){switch(e){case"completed":return"green";case"in-progress":return"blue";case"pending":return"orange";case"delayed":return"red";default:return"default"}}getStatusText(e){switch(e){case"completed":return"\u5DF2\u5B8C\u6210";case"in-progress":return"\u9032\u884C\u4E2D";case"pending":return"\u5F85\u8655\u7406";case"delayed":return"\u5EF6\u9072";default:return"\u672A\u77E5"}}showAddEventModal(){this.isEditing=!1,this.editingEventId=null,this.isEventModalVisible=!0,this.eventForm.reset({type:"task",status:"pending"})}editEvent(e){this.isEditing=!0,this.editingEventId=e.id,this.isEventModalVisible=!0,this.eventForm.patchValue({title:e.title,description:e.description,type:e.type,status:e.status,date:e.date,user:e.user})}handleEventModalCancel(){this.isEventModalVisible=!1,this.eventForm.reset()}handleEventModalOk(){if(this.eventForm.valid){let e=this.eventForm.value;if(this.isEditing&&this.editingEventId){let t=this.timelineEvents.findIndex(a=>a.id===this.editingEventId);t!==-1&&(this.timelineEvents[t]=C(C({},this.timelineEvents[t]),e),this.message.success("\u4E8B\u4EF6\u66F4\u65B0\u6210\u529F"))}else{let t=C({id:Date.now().toString()},e);this.timelineEvents.push(t),this.message.success("\u4E8B\u4EF6\u65B0\u589E\u6210\u529F")}this.isEventModalVisible=!1,this.eventForm.reset()}else this.message.error("\u8ACB\u586B\u5BEB\u5B8C\u6574\u8CC7\u8A0A")}deleteEvent(e){this.timelineEvents=this.timelineEvents.filter(t=>t.id!==e),this.message.success("\u4E8B\u4EF6\u522A\u9664\u6210\u529F")}};f.\u0275fac=function(t){return new(t||f)(S(ee),S($))},f.\u0275cmp=x({type:f,selectors:[["app-workspace-timeline"]],decls:53,vars:20,consts:[["extraTemplate",""],["customDot",""],["nzTitle","\u5DE5\u4F5C\u5340\u6642\u9593\u7DDA",3,"nzExtra"],[1,"timeline-container"],[3,"nzColor","nzDot",4,"ngFor","ngForOf"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],["nz-form","","nz-row","",3,"formGroup","nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","","formControlName","title","placeholder","\u8ACB\u8F38\u5165\u4E8B\u4EF6\u6A19\u984C"],["nz-input","","formControlName","description","placeholder","\u8ACB\u8F38\u5165\u4E8B\u4EF6\u63CF\u8FF0",3,"nzAutosize"],["nz-col","","nzSpan","12"],["formControlName","type","placeholder","\u8ACB\u9078\u64C7\u4E8B\u4EF6\u985E\u578B"],["nzValue","project","nzLabel","\u5C08\u6848"],["nzValue","task","nzLabel","\u4EFB\u52D9"],["nzValue","milestone","nzLabel","\u91CC\u7A0B\u7891"],["nzValue","meeting","nzLabel","\u6703\u8B70"],["nzValue","issue","nzLabel","\u554F\u984C"],["formControlName","status","placeholder","\u8ACB\u9078\u64C7\u72C0\u614B"],["nzValue","pending","nzLabel","\u5F85\u8655\u7406"],["nzValue","in-progress","nzLabel","\u9032\u884C\u4E2D"],["nzValue","completed","nzLabel","\u5DF2\u5B8C\u6210"],["nzValue","delayed","nzLabel","\u5EF6\u9072"],["formControlName","date","nzShowTime","","nzFormat","yyyy-MM-dd HH:mm"],["nz-input","","formControlName","user","placeholder","\u8ACB\u8F38\u5165\u8CA0\u8CAC\u4EBA"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"nzColor","nzDot"],[1,"timeline-content"],[1,"timeline-header"],[1,"timeline-title"],[1,"timeline-meta"],[3,"nzColor"],[1,"timeline-date"],[1,"timeline-description"],[1,"timeline-footer"],[3,"nzSize","nzText"],[1,"timeline-user"],[1,"timeline-actions"],["nz-button","","nzType","link","nzSize","small",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","link","nzSize","small","nzDanger","",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","",3,"nzType"]],template:function(t,a){if(t&1){let m=y();n(0,"nz-card",2),_(1,Te,3,0,"ng-template",null,0,F),n(3,"div",3)(4,"nz-timeline"),_(5,De,24,14,"nz-timeline-item",4),r()()(),n(6,"nz-modal",5),w("nzVisibleChange",function(h){return u(m),D(a.isEventModalVisible,h)||(a.isEventModalVisible=h),c(h)}),v("nzOnCancel",function(){return u(m),c(a.handleEventModalCancel())})("nzOnOk",function(){return u(m),c(a.handleEventModalOk())}),n(7,"form",6)(8,"div",7)(9,"nz-form-item")(10,"nz-form-label",8),l(11,"\u4E8B\u4EF6\u6A19\u984C"),r(),n(12,"nz-form-control",9),s(13,"input",10),r()()(),n(14,"div",7)(15,"nz-form-item")(16,"nz-form-label",9),l(17,"\u4E8B\u4EF6\u63CF\u8FF0"),r(),n(18,"nz-form-control",9),s(19,"textarea",11),r()()(),n(20,"div",12)(21,"nz-form-item")(22,"nz-form-label",8),l(23,"\u4E8B\u4EF6\u985E\u578B"),r(),n(24,"nz-form-control",9)(25,"nz-select",13),s(26,"nz-option",14)(27,"nz-option",15)(28,"nz-option",16)(29,"nz-option",17)(30,"nz-option",18),r()()()(),n(31,"div",12)(32,"nz-form-item")(33,"nz-form-label",8),l(34,"\u72C0\u614B"),r(),n(35,"nz-form-control",9)(36,"nz-select",19),s(37,"nz-option",20)(38,"nz-option",21)(39,"nz-option",22)(40,"nz-option",23),r()()()(),n(41,"div",12)(42,"nz-form-item")(43,"nz-form-label",8),l(44,"\u65E5\u671F\u6642\u9593"),r(),n(45,"nz-form-control",9),s(46,"nz-date-picker",24),r()()(),n(47,"div",12)(48,"nz-form-item")(49,"nz-form-label",8),l(50,"\u8CA0\u8CAC\u4EBA"),r(),n(51,"nz-form-control",9),s(52,"input",25),r()()()()()}if(t&2){let m=M(2);o("nzExtra",m),i(5),o("ngForOf",a.timelineEvents),i(),b("nzVisible",a.isEventModalVisible),o("nzTitle",a.isEditing?"\u7DE8\u8F2F\u4E8B\u4EF6":"\u65B0\u589E\u4E8B\u4EF6"),i(),o("formGroup",a.eventForm)("nzGutter",16),i(3),o("nzSpan",6),i(2),o("nzSpan",18),i(4),o("nzSpan",6),i(2),o("nzSpan",18),i(),o("nzAutosize",k(19,Ne)),i(3),o("nzSpan",12),i(2),o("nzSpan",12),i(9),o("nzSpan",12),i(2),o("nzSpan",12),i(8),o("nzSpan",12),i(2),o("nzSpan",12),i(4),o("nzSpan",12),i(2),o("nzSpan",12)}},dependencies:[P,A,_e,Ce,xe,Se,Fe,q,j,G,R,L,W,ie,ne,he,ye,H,Y,Ee,de,ce,ge,ze,ve,fe,ue,pe,me,se,le,ae,oe,re,te,Q,U,J,K,X,Z,I],styles:[".timeline-container[_ngcontent-%COMP%]{padding:16px 0}.timeline-content[_ngcontent-%COMP%]{margin-left:16px}.timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.timeline-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#262626}.timeline-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.timeline-date[_ngcontent-%COMP%]{font-size:12px;color:#999}.timeline-description[_ngcontent-%COMP%]{margin:8px 0;color:#666;line-height:1.5}.timeline-footer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.timeline-user[_ngcontent-%COMP%]{font-size:12px;color:#1890ff}.timeline-actions[_ngcontent-%COMP%]{margin-left:auto}.timeline-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 4px}"],changeDetection:0});var Me=f;export{Me as WorkspaceTimelineComponent};
