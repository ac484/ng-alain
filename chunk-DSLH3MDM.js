import{a as Se,b as ve,c as Fe,d as ye,e as _e}from"./chunk-JSW4L7WF.js";import{a as Te,b as De}from"./chunk-3AJA4UAR.js";import{d as $}from"./chunk-RHSNDLDC.js";import{b as ne,c as re}from"./chunk-3DZYJQFR.js";import{j as Y,k as j}from"./chunk-VPG4RKW7.js";import{f as ge,k as fe}from"./chunk-UGOQL7HW.js";import{a as Ce,f as ke,k as he}from"./chunk-A6I6NVJK.js";import"./chunk-H7YPP55E.js";import{c as le,f as me,h as ue,j as pe,k as de,l as ce,n as ze}from"./chunk-OK3I4KMO.js";import"./chunk-V7W5MTAK.js";import{a as te,b as ie}from"./chunk-S3APEFK2.js";import"./chunk-SNCQL3XC.js";import"./chunk-AZFNH4NZ.js";import"./chunk-ASEGFJAE.js";import"./chunk-AIRUZAF5.js";import"./chunk-RYKA7J56.js";import{b as oe,c as ae,d as se}from"./chunk-VDEGG43N.js";import"./chunk-PU46QXHH.js";import"./chunk-FSJ6KERW.js";import"./chunk-UATVLLJJ.js";import"./chunk-BRKXCE7P.js";import"./chunk-FJUFVG4T.js";import"./chunk-WHJAXXAS.js";import{d as H,e as c,g as J,h as K,n as Q,q as U,t as X,x as Z,z as ee}from"./chunk-NB4EIDVA.js";import"./chunk-43QWISWI.js";import"./chunk-4OGGW47F.js";import"./chunk-JHZVO6A4.js";import"./chunk-Z2B7QBBP.js";import"./chunk-QNTYQDQV.js";import{Aa as d,Dd as I,Fc as x,Hd as O,Ih as P,Jh as W,Kc as M,Mc as A,Nb as o,Ob as t,Oc as V,Pb as i,Qb as m,Th as L,Xb as T,_b as g,ai as G,bb as r,bc as f,ci as q,di as R,gb as S,lc as F,nb as E,ni as Ee,oi as Ne,qc as a,rc as C,sc as y,tb as v,uc as N,vc as b,wc as w,yd as B,za as p}from"./chunk-VMD4HRQF.js";import{a as h,b as _}from"./chunk-57BLH6QZ.js";var we=()=>({minRows:3,maxRows:5});function xe(k,e){if(k&1){let n=T();t(0,"button",24),g("click",function(){p(n);let l=f();return d(l.showAddTaskModal())}),m(1,"span",25),a(2," \u65B0\u589E\u4EFB\u52D9 "),i()}}function Me(k,e){if(k&1){let n=T();t(0,"tr")(1,"td")(2,"div",26),a(3),i(),t(4,"div",27),a(5),i()(),t(6,"td"),a(7),i(),t(8,"td")(9,"nz-tag",28),a(10),i()(),t(11,"td")(12,"nz-tag",28),a(13),i()(),t(14,"td"),a(15),M(16,"date"),i(),t(17,"td")(18,"a",29),g("click",function(){let l=p(n).$implicit,u=f();return d(u.editTask(l))}),m(19,"span",30),i(),t(20,"nz-popconfirm",31),g("nzOnConfirm",function(){let l=p(n).$implicit,u=f();return d(u.deleteTask(l.id))}),t(21,"button",32),m(22,"span",33),i()()()()}if(k&2){let n=e.$implicit,s=f();r(3),C(n.title),r(2),C(n.description),r(2),C(n.assignee),r(2),o("nzColor",s.getPriorityColor(n.priority)),r(),y(" ",s.getPriorityText(n.priority)," "),r(2),o("nzColor",s.getStatusColor(n.status)),r(),y(" ",s.getStatusText(n.status)," "),r(2),C(A(16,8,n.dueDate,"yyyy-MM-dd"))}}var z=class z{constructor(e,n){this.fb=e;this.message=n;this.tasks=[];this.isTaskModalVisible=!1;this.isEditing=!1;this.editingTaskId=null;this.taskForm=this.fb.group({title:["",[c.required]],description:[""],assignee:["",[c.required]],priority:["medium",[c.required]],status:["pending",[c.required]],dueDate:[null,[c.required]]}),this.initializeSampleTasks()}initializeSampleTasks(){let e=new Date;this.tasks=[{id:"1",title:"\u5B8C\u6210\u5B63\u5EA6\u5831\u544A",description:"\u64B0\u5BEB\u672C\u5B63\u5EA6\u696D\u52D9\u5206\u6790\u5831\u544A",priority:"high",status:"in-progress",assignee:"\u5F35\u4E09",dueDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()+3),createdAt:new Date},{id:"2",title:"\u5BA2\u6236\u6703\u8B70\u6E96\u5099",description:"\u6E96\u5099\u4E0B\u9031\u5BA2\u6236\u6703\u8B70\u7684\u8CC7\u6599",priority:"medium",status:"pending",assignee:"\u674E\u56DB",dueDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),createdAt:new Date},{id:"3",title:"\u7CFB\u7D71\u7DAD\u8B77",description:"\u9032\u884C\u7CFB\u7D71\u4F8B\u884C\u7DAD\u8B77\u548C\u66F4\u65B0",priority:"low",status:"completed",assignee:"\u738B\u4E94",dueDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),createdAt:new Date}]}getPriorityColor(e){switch(e){case"high":return"red";case"medium":return"orange";case"low":return"green";default:return"default"}}getPriorityText(e){switch(e){case"high":return"\u9AD8";case"medium":return"\u4E2D";case"low":return"\u4F4E";default:return"\u672A\u77E5"}}getStatusColor(e){switch(e){case"pending":return"blue";case"in-progress":return"orange";case"completed":return"green";case"cancelled":return"red";default:return"default"}}getStatusText(e){switch(e){case"pending":return"\u5F85\u8655\u7406";case"in-progress":return"\u9032\u884C\u4E2D";case"completed":return"\u5DF2\u5B8C\u6210";case"cancelled":return"\u5DF2\u53D6\u6D88";default:return"\u672A\u77E5"}}showAddTaskModal(){this.isEditing=!1,this.editingTaskId=null,this.isTaskModalVisible=!0,this.taskForm.reset({priority:"medium",status:"pending"})}editTask(e){this.isEditing=!0,this.editingTaskId=e.id,this.isTaskModalVisible=!0,this.taskForm.patchValue({title:e.title,description:e.description,assignee:e.assignee,priority:e.priority,status:e.status,dueDate:e.dueDate})}handleTaskModalCancel(){this.isTaskModalVisible=!1,this.taskForm.reset()}handleTaskModalOk(){if(this.taskForm.valid){let e=this.taskForm.value;if(this.isEditing&&this.editingTaskId){let n=this.tasks.findIndex(s=>s.id===this.editingTaskId);n!==-1&&(this.tasks[n]=h(h({},this.tasks[n]),e),this.message.success("\u4EFB\u52D9\u66F4\u65B0\u6210\u529F"))}else{let n=_(h({id:Date.now().toString()},e),{createdAt:new Date});this.tasks.push(n),this.message.success("\u4EFB\u52D9\u65B0\u589E\u6210\u529F")}this.isTaskModalVisible=!1,this.taskForm.reset()}else this.message.error("\u8ACB\u586B\u5BEB\u5B8C\u6574\u8CC7\u8A0A")}deleteTask(e){this.tasks=this.tasks.filter(n=>n.id!==e),this.message.success("\u4EFB\u52D9\u522A\u9664\u6210\u529F")}};z.\u0275fac=function(n){return new(n||z)(S(Z),S($))},z.\u0275cmp=E({type:z,selectors:[["app-workspace-task"]],decls:66,vars:23,consts:[["extraTemplate",""],["basicTable",""],["nzTitle","\u4EFB\u52D9\u7BA1\u7406",3,"nzExtra"],[3,"nzData","nzPageSize","nzShowPagination"],[4,"ngFor","ngForOf"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],["nz-form","","nz-row","",3,"formGroup","nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","","formControlName","title","placeholder","\u8ACB\u8F38\u5165\u4EFB\u52D9\u6A19\u984C"],["nz-input","","formControlName","description","placeholder","\u8ACB\u8F38\u5165\u4EFB\u52D9\u63CF\u8FF0",3,"nzAutosize"],["nz-col","","nzSpan","12"],["nz-input","","formControlName","assignee","placeholder","\u8ACB\u8F38\u5165\u8CA0\u8CAC\u4EBA"],["formControlName","priority","placeholder","\u8ACB\u9078\u64C7\u512A\u5148\u7D1A"],["nzValue","low","nzLabel","\u4F4E"],["nzValue","medium","nzLabel","\u4E2D"],["nzValue","high","nzLabel","\u9AD8"],["formControlName","status","placeholder","\u8ACB\u9078\u64C7\u72C0\u614B"],["nzValue","pending","nzLabel","\u5F85\u8655\u7406"],["nzValue","in-progress","nzLabel","\u9032\u884C\u4E2D"],["nzValue","completed","nzLabel","\u5DF2\u5B8C\u6210"],["nzValue","cancelled","nzLabel","\u5DF2\u53D6\u6D88"],["formControlName","dueDate","nzFormat","yyyy-MM-dd"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[1,"task-title"],[1,"task-description"],[3,"nzColor"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","edit"],["nzTitle","\u78BA\u5B9A\u8981\u522A\u9664\u9019\u500B\u4EFB\u52D9\u55CE\uFF1F",3,"nzOnConfirm"],["nz-button","","nzType","link","nzDanger",""],["nz-icon","","nzType","delete"]],template:function(n,s){if(n&1){let l=T();t(0,"nz-card",2),v(1,xe,3,0,"ng-template",null,0,V),t(3,"nz-table",3,1)(5,"thead")(6,"tr")(7,"th"),a(8,"\u4EFB\u52D9\u6A19\u984C"),i(),t(9,"th"),a(10,"\u8CA0\u8CAC\u4EBA"),i(),t(11,"th"),a(12,"\u512A\u5148\u7D1A"),i(),t(13,"th"),a(14,"\u72C0\u614B"),i(),t(15,"th"),a(16,"\u622A\u6B62\u65E5\u671F"),i(),t(17,"th"),a(18,"\u64CD\u4F5C"),i()()(),t(19,"tbody"),v(20,Me,23,11,"tr",4),i()()(),t(21,"nz-modal",5),w("nzVisibleChange",function(D){return p(l),b(s.isTaskModalVisible,D)||(s.isTaskModalVisible=D),d(D)}),g("nzOnCancel",function(){return p(l),d(s.handleTaskModalCancel())})("nzOnOk",function(){return p(l),d(s.handleTaskModalOk())}),t(22,"form",6)(23,"div",7)(24,"nz-form-item")(25,"nz-form-label",8),a(26,"\u4EFB\u52D9\u6A19\u984C"),i(),t(27,"nz-form-control",9),m(28,"input",10),i()()(),t(29,"div",7)(30,"nz-form-item")(31,"nz-form-label",9),a(32,"\u4EFB\u52D9\u63CF\u8FF0"),i(),t(33,"nz-form-control",9),m(34,"textarea",11),i()()(),t(35,"div",12)(36,"nz-form-item")(37,"nz-form-label",8),a(38,"\u8CA0\u8CAC\u4EBA"),i(),t(39,"nz-form-control",9),m(40,"input",13),i()()(),t(41,"div",12)(42,"nz-form-item")(43,"nz-form-label",8),a(44,"\u512A\u5148\u7D1A"),i(),t(45,"nz-form-control",9)(46,"nz-select",14),m(47,"nz-option",15)(48,"nz-option",16)(49,"nz-option",17),i()()()(),t(50,"div",12)(51,"nz-form-item")(52,"nz-form-label",8),a(53,"\u72C0\u614B"),i(),t(54,"nz-form-control",9)(55,"nz-select",18),m(56,"nz-option",19)(57,"nz-option",20)(58,"nz-option",21)(59,"nz-option",22),i()()()(),t(60,"div",12)(61,"nz-form-item")(62,"nz-form-label",8),a(63,"\u622A\u6B62\u65E5\u671F"),i(),t(64,"nz-form-control",9),m(65,"nz-date-picker",23),i()()()()()}if(n&2){let l=F(2),u=F(4);o("nzExtra",l),r(3),o("nzData",s.tasks)("nzPageSize",10)("nzShowPagination",!0),r(17),o("ngForOf",u.data),r(),N("nzVisible",s.isTaskModalVisible),o("nzTitle",s.isEditing?"\u7DE8\u8F2F\u4EFB\u52D9":"\u65B0\u589E\u4EFB\u52D9"),r(),o("formGroup",s.taskForm)("nzGutter",16),r(3),o("nzSpan",6),r(2),o("nzSpan",18),r(4),o("nzSpan",6),r(2),o("nzSpan",18),r(),o("nzAutosize",x(22,we)),r(3),o("nzSpan",12),r(2),o("nzSpan",12),r(4),o("nzSpan",12),r(2),o("nzSpan",12),r(7),o("nzSpan",12),r(2),o("nzSpan",12),r(8),o("nzSpan",12),r(2),o("nzSpan",12)}},dependencies:[O,B,ze,pe,le,me,ce,ue,de,Ne,Ee,R,q,L,G,j,Y,_e,De,Te,ve,Se,ye,Fe,he,ke,Ce,fe,ge,se,oe,ae,ie,te,W,P,re,ne,ee,Q,H,J,K,U,X,I],styles:[".task-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}.task-description[_ngcontent-%COMP%]{color:#666;font-size:12px;line-height:1.4}"],changeDetection:0});var be=z;export{be as WorkspaceTaskComponent};
