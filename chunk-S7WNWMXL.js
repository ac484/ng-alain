import{a as D}from"./chunk-6GB6O4LL.js";import{a as ae,b as pe}from"./chunk-LVG2LAOY.js";import"./chunk-J6AG6JAU.js";import{b as j,d as G,f as q}from"./chunk-FI2MKTH7.js";import"./chunk-UCF3NJQY.js";import"./chunk-VAGS5EVQ.js";import"./chunk-CKYVJWE2.js";import{a as le}from"./chunk-RUD7LQCH.js";import"./chunk-JPGT6HBL.js";import"./chunk-45BKQ37Q.js";import"./chunk-LFVXFGPE.js";import"./chunk-66HWRA4I.js";import{f as ne,g as ie,h as oe,k as re}from"./chunk-RGYXGWNO.js";import{a as X,c as Y,i as Z,j as ee,k as te}from"./chunk-I3YMRPXC.js";import"./chunk-VIGI73B6.js";import"./chunk-O3DGGP5O.js";import{d as H,g as J,m as K,z as U}from"./chunk-7GKVL75V.js";import"./chunk-X5G25CLX.js";import"./chunk-PAIB6VMN.js";import"./chunk-YMEC4OFG.js";import"./chunk-ZFIXZIYB.js";import"./chunk-W6Z6A3Q5.js";import"./chunk-FJXMRBDK.js";import"./chunk-5V3RUN7K.js";import"./chunk-2DZ25YRQ.js";import"./chunk-PR6SM3R4.js";import"./chunk-5NB44RP4.js";import"./chunk-M2FMHT2I.js";import"./chunk-BA2SIH6H.js";import"./chunk-AEDV7UUM.js";import{Ad as $,Cd as A,Dd as L,Gc as B,Jd as Q,Lc as T,Mc as v,Nb as z,Ob as r,Oh as R,Pb as l,Pc as w,Ph as W,Qb as C,Ub as y,Vb as P,Xb as x,_b as u,bb as m,bc as f,fc as S,gb as E,gc as I,hc as k,lc as N,nb as V,qc as d,rc as h,sc as M,tb as g,vc as b,wc as F,xa as c,xc as O,ya as s}from"./chunk-GM6XQ5SX.js";import"./chunk-57BLH6QZ.js";var me=()=>[];function de(p,n){p&1&&C(0,"nz-icon",9)}function ue(p,n){if(p&1){let e=x();y(0),r(1,"nz-icon",13),u("click",function(){c(e);let i=f().$implicit,o=f();return s(o.openFolder(i))}),l(),r(2,"span",14),d(3),l(),r(4,"span",15),d(5),T(6,"lowercase"),l(),P()}if(p&2){let e=f(),t=e.$implicit,i=e.origin;m(),z("nzType",t.isExpanded?"folder-open":"folder"),m(2),h(t.title),m(2),M("created by ",v(6,3,i.author))}}function fe(p,n){if(p&1&&(C(0,"nz-icon",16),r(1,"span",17),d(2),l(),r(3,"span",18),d(4),T(5,"lowercase"),l()),p&2){let e=f(),t=e.$implicit,i=e.origin;m(2),h(t.title),m(2),M("modified by ",v(5,2,i.author))}}function _e(p,n){if(p&1){let e=x();r(0,"span",10)(1,"span",11),u("contextmenu",function(i){let o=c(e).$implicit,a=f(),se=N(11);return s(a.contextMenu(i,se,o))}),g(2,ue,7,5,"ng-container",12)(3,fe,6,4,"ng-template",null,3,w),l()()}if(p&2){let e=n.$implicit,t=N(4);m(2),z("ngIf",!e.isLeaf)("ngIfElse",t)}}var _=class _{constructor(n,e){this.nzContextMenuService=n;this.firestore=e;this.searchValue="";this.contextNode=null;let t=q(this.firestore,"tree-nodes");this.treeData$=G(t,{idField:"key"})}openFolder(n){if(n instanceof le)n.isExpanded=!n.isExpanded;else{let e=n.node;e&&(e.isExpanded=!e.isExpanded)}}activeNode(n){this.activatedNode=n.node}onDrop(n){console.log("\u62D6\u66F3\u5B8C\u6210:",n)}contextMenu(n,e,t){this.contextNode=t??null,this.nzContextMenuService.create(n,e)}addNode(){this.crud.showAddModal(this.contextNode?.key)}editNode(){this.contextNode&&this.crud.showEditModal(this.contextNode.origin)}deleteNode(){this.contextNode&&this.crud.deleteNode(this.contextNode.origin)}selectDropdown(n){alert(n)}};_.\u0275fac=function(e){return new(e||_)(E(te),E(j))},_.\u0275cmp=V({type:_,selectors:[["app-tree-panel"]],viewQuery:function(e,t){if(e&1&&S(D,5),e&2){let i;I(i=k())&&(t.crud=i.first)}},decls:19,vars:8,consts:[["suffixIcon",""],["nzTreeTemplate",""],["menu","nzDropdownMenu"],["fileIcon",""],[3,"nzSuffix"],["type","text","nz-input","","placeholder","\u641C\u5C0B\u7BC0\u9EDE",3,"ngModelChange","ngModel"],["nzBlockNode","","nzDraggable","","nzVirtualHeight","300px",3,"nzClick","nzDblClick","nzOnDrop","nzData","nzSearchValue","nzTreeTemplate"],["nz-menu",""],["nz-menu-item","",3,"click"],["nzType","search"],[1,"custom-node"],[3,"contextmenu"],[4,"ngIf","ngIfElse"],[3,"click","nzType"],[1,"folder-name"],[1,"folder-desc"],["nzType","file"],[1,"file-name"],[1,"file-desc"]],template:function(e,t){if(e&1){let i=x();C(0,"app-firebase-crud"),r(1,"nz-input-group",4)(2,"input",5),O("ngModelChange",function(a){return c(i),F(t.searchValue,a)||(t.searchValue=a),s(a)}),l()(),g(3,de,1,0,"ng-template",null,0,w),C(5,"br"),r(6,"nz-tree",6),T(7,"async"),u("nzClick",function(a){return c(i),s(t.activeNode(a))})("nzDblClick",function(a){return c(i),s(t.openFolder(a))})("nzOnDrop",function(a){return c(i),s(t.onDrop(a))}),l(),g(8,_e,5,2,"ng-template",null,1,w),r(10,"nz-dropdown-menu",null,2)(12,"ul",7)(13,"li",8),u("click",function(){return c(i),s(t.addNode())}),d(14,"\u65B0\u589E\u7BC0\u9EDE"),l(),r(15,"li",8),u("click",function(){return c(i),s(t.editNode())}),d(16,"\u7DE8\u8F2F\u7BC0\u9EDE"),l(),r(17,"li",8),u("click",function(){return c(i),s(t.deleteNode())}),d(18,"\u522A\u9664\u7BC0\u9EDE"),l()()()}if(e&2){let i=N(4),o=N(9);m(),z("nzSuffix",i),m(),b("ngModel",t.searchValue),m(4),z("nzData",v(7,5,t.treeData$)??B(7,me))("nzSearchValue",t.searchValue)("nzTreeTemplate",o)}},dependencies:[Q,$,U,H,J,K,pe,ae,ee,Y,X,Z,W,R,re,ne,oe,ie,D,A,L],styles:["nz-tree[_ngcontent-%COMP%]{overflow:hidden;margin:0 -24px;padding:0 24px}.custom-node[_ngcontent-%COMP%]{cursor:pointer;line-height:24px;margin-left:4px;display:inline-block}.file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:4px}.file-desc[_ngcontent-%COMP%], .folder-desc[_ngcontent-%COMP%]{padding:0 8px;display:inline-block;background:#87ceff;color:#fff;position:relative;left:12px}"]});var ce=_;export{ce as TreePanelComponent};
