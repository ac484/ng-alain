import{d as E}from"./chunk-BXCJBJTE.js";import{a as V,b as P,d as H,e as $,f as L,g as W,h as J}from"./chunk-63Y7AJU2.js";import{c as x,h as _}from"./chunk-DVMK5JOE.js";import{N as w,O as k,P as j,U as q,V as G,W as O,c as A,d as u,f as B,g as y,m as g,p as I,s as M,w as R,y as T}from"./chunk-K5NT3KUM.js";import"./chunk-X2TPOVG3.js";import"./chunk-JE3MAD4U.js";import{Fd as D,Gb as d,Gh as F,Jd as S,Pa as t,Ph as N,Rh as h,Sh as b,Ua as m,Xa as z,Yb as o,ai as K,bi as Q,ed as C,lc as f,sd as v,tb as e,ub as i,vb as n,wb as a}from"./chunk-F6QP76LV.js";import"./chunk-57BLH6QZ.js";var X=()=>({minRows:3,maxRows:5}),p=class p{constructor(r,c,l,s,Y){this.fb=r;this.route=c;this.router=l;this.message=s;this.http=Y;this.contractForm=this.fb.group({title:["",[u.required]],client:["",[u.required]],amount:[null,[u.required,u.min(0)]],startDate:[null,[u.required]],endDate:[null,[u.required]],description:[""]})}ngOnInit(){this.contractId=this.route.snapshot.paramMap.get("id")||void 0,this.contractId&&this.loadContractData()}loadContractData(){this.http.get(`/contract/${this.contractId}`).subscribe(r=>{this.contractForm.patchValue({title:r.title,client:r.client,amount:r.amount,startDate:new Date(r.startDate),endDate:new Date(r.endDate),description:r.description})})}onSubmit(){if(this.contractForm.valid){let r=this.contractForm.value;this.http.put(`/contract/${this.contractId}`,r).subscribe(()=>{this.message.success("\u5408\u7D04\u66F4\u65B0\u6210\u529F"),this.router.navigate(["/contract/detail",this.contractId])})}else Object.values(this.contractForm.controls).forEach(r=>{r.invalid&&r.markAsTouched()})}onCancel(){this.router.navigate(["/contract/detail",this.contractId])}};p.\u0275fac=function(c){return new(c||p)(m(R),m(D),m(S),m(E),m(v))},p.\u0275cmp=z({type:p,selectors:[["app-contract-edit"]],decls:38,vars:20,consts:[["title","\u7DE8\u8F2F\u5408\u7D04"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","",3,"nzSpan"],["nzErrorTip","\u8ACB\u8F38\u5165\u5408\u7D04\u6A19\u984C",3,"nzSpan"],["nz-input","","formControlName","title","placeholder","\u8ACB\u8F38\u5165\u5408\u7D04\u6A19\u984C"],["nzErrorTip","\u8ACB\u8F38\u5165\u5BA2\u6236\u540D\u7A31",3,"nzSpan"],["nz-input","","formControlName","client","placeholder","\u8ACB\u8F38\u5165\u5BA2\u6236\u540D\u7A31"],["nzErrorTip","\u8ACB\u8F38\u5165\u5408\u7D04\u91D1\u984D",3,"nzSpan"],["formControlName","amount","placeholder","\u8ACB\u8F38\u5165\u5408\u7D04\u91D1\u984D",2,"width","100%",3,"nzMin","nzStep"],["nzErrorTip","\u8ACB\u9078\u64C7\u958B\u59CB\u65E5\u671F",3,"nzSpan"],["formControlName","startDate","placeholder","\u8ACB\u9078\u64C7\u958B\u59CB\u65E5\u671F",2,"width","100%"],["nzErrorTip","\u8ACB\u9078\u64C7\u7D50\u675F\u65E5\u671F",3,"nzSpan"],["formControlName","endDate","placeholder","\u8ACB\u9078\u64C7\u7D50\u675F\u65E5\u671F",2,"width","100%"],[3,"nzSpan"],["nz-input","","formControlName","description","placeholder","\u8ACB\u8F38\u5165\u5408\u7D04\u63CF\u8FF0",3,"nzAutosize"],[3,"nzOffset","nzSpan"],["nz-button","","nzType","primary","type","submit",3,"disabled"],["nz-button","",2,"margin-left","8px",3,"click"]],template:function(c,l){c&1&&(i(0,"nz-card",0)(1,"form",1),d("ngSubmit",function(){return l.onSubmit()}),i(2,"nz-form-item")(3,"nz-form-label",2),o(4,"\u5408\u7D04\u6A19\u984C"),n(),i(5,"nz-form-control",3),a(6,"input",4),n()(),i(7,"nz-form-item")(8,"nz-form-label",2),o(9,"\u5BA2\u6236\u540D\u7A31"),n(),i(10,"nz-form-control",5),a(11,"input",6),n()(),i(12,"nz-form-item")(13,"nz-form-label",2),o(14,"\u5408\u7D04\u91D1\u984D"),n(),i(15,"nz-form-control",7),a(16,"nz-input-number",8),n()(),i(17,"nz-form-item")(18,"nz-form-label",2),o(19,"\u958B\u59CB\u65E5\u671F"),n(),i(20,"nz-form-control",9),a(21,"nz-date-picker",10),n()(),i(22,"nz-form-item")(23,"nz-form-label",2),o(24,"\u7D50\u675F\u65E5\u671F"),n(),i(25,"nz-form-control",11),a(26,"nz-date-picker",12),n()(),i(27,"nz-form-item")(28,"nz-form-label",13),o(29,"\u5408\u7D04\u63CF\u8FF0"),n(),i(30,"nz-form-control",13),a(31,"textarea",14),n()(),i(32,"nz-form-item")(33,"nz-form-control",15)(34,"button",16),o(35," \u66F4\u65B0\u5408\u7D04 "),n(),i(36,"button",17),d("click",function(){return l.onCancel()}),o(37," \u53D6\u6D88 "),n()()()()()),c&2&&(t(),e("formGroup",l.contractForm),t(2),e("nzSpan",4),t(2),e("nzSpan",20),t(3),e("nzSpan",4),t(2),e("nzSpan",20),t(3),e("nzSpan",4),t(2),e("nzSpan",20),t(),e("nzMin",0)("nzStep",1e3),t(2),e("nzSpan",4),t(2),e("nzSpan",20),t(3),e("nzSpan",4),t(2),e("nzSpan",20),t(3),e("nzSpan",4),t(2),e("nzSpan",20),t(),e("nzAutosize",f(19,X)),t(2),e("nzOffset",4)("nzSpan",20),t(),e("disabled",!l.contractForm.valid))},dependencies:[C,T,g,A,B,y,I,M,J,P,V,$,H,W,L,q,j,k,_,x,O,G,w,b,h,F,N,Q,K],encapsulation:2});var U=p;export{U as ContractEditComponent};
