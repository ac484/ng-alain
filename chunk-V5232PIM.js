import{H as _e,I as be,J as Z,L as Ie,R as X,S as Y,V as Re,W as x,X as z,Z as h,a as Te,d as we,h as y,v as G,z as ve}from"./chunk-2DVOMO4J.js";import{Fa as ge,Ha as v,Jd as Ae,Qa as I,ad as me,bd as ke,cd as R,ce as Ee,d as V,ja as fe,k as de,l as pe,ma as N,o as U,oa as k,p as q,pa as M,sa as he,ta as $,tb as g,ya as F}from"./chunk-67N3UCKF.js";import{i as p}from"./chunk-57BLH6QZ.js";var Ye="firebase",Je="11.10.0";h(Ye,Je,"app");var C=new me("ANGULARFIRE2_VERSION");function Pe(e,t,r){if(t){if(t.length===1)return t[0];let i=t.filter(s=>s.app===r);if(i.length===1)return i[0]}return r.container.getProvider(e).getImmediate({optional:!0})}var Se=(e,t)=>{let r=t?[t]:z(),n=[];return r.forEach(o=>{o.container.getProvider(e).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},_=function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e}(_||{}),ye=R()&&typeof Zone<"u"?_.WARN:_.SILENT;var H=class{zone;delegate;constructor(t,r=pe){this.zone=t,this.delegate=r}now(){return this.delegate.now()}schedule(t,r,n){let o=this.zone,i=function(s){o?o.runGuarded(()=>{t.apply(this,[s])}):t.apply(this,[s])};return this.delegate.schedule(i,r,n)}},P=(()=>{class e{outsideAngular;insideAngular;constructor(){let r=k(g);this.outsideAngular=r.runOutsideAngular(()=>new H(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=r.run(()=>new H(typeof Zone>"u"?void 0:Zone.current,de))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ce=!1;function Qe(e,t){!Ce&&(ye>_.SILENT||R())&&(Ce=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ye>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function et(e){let t=k(g,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function A(e){let t=k(g,{optional:!0});return t?t.run(()=>e()):e()}var tt=(e,t,r)=>(...n)=>(t&&setTimeout(t,0),$(r,()=>A(()=>e.apply(void 0,n)))),L=(e,t,r)=>(r||=t?_.WARN:_.VERBOSE,function(){let n,o=arguments,i,s,u;try{i=k(P),s=k(ge),u=k(he)}catch{return Qe(e,r),e.apply(this,o)}for(let a=0;a<arguments.length;a++)typeof o[a]=="function"&&(t&&(n||=A(()=>s.add())),o[a]=tt(o[a],n,u));let c=et(()=>e.apply(this,o));return t?c instanceof V?c.pipe(q(i.outsideAngular),U(i.insideAngular),Ee(u)):c instanceof Promise?A(()=>{let a=s.add();return new Promise((T,W)=>{c.then(w=>$(u,()=>A(()=>T(w))),w=>$(u,()=>A(()=>W(w)))).finally(a)})}):typeof c=="function"&&n?function(){return setTimeout(n,0),c.apply(this,arguments)}:A(()=>c):c instanceof V?c.pipe(q(i.outsideAngular),U(i.insideAngular)):A(()=>c)});var E=class{constructor(t){return t}},S=class{constructor(){return z()}};function rt(e){return e&&e.length===1?e[0]:new E(x())}var J=new N("angularfire2._apps"),nt={provide:E,useFactory:rt,deps:[[new v,J]]},ot={provide:S,deps:[[new v,J]]};function it(e){return(t,r)=>{let n=r.get(I);h("angularfire",C.full,"core"),h("angularfire",C.full,"app"),h("angular",ke.full,n.toString());let o=t.runOutsideAngular(()=>e(r));return new E(o)}}function hr(e,...t){return M([nt,ot,{provide:J,useFactory:it(e),multi:!0,deps:[g,F,P,...t]}])}var gr=L(Re,!0);var te=new Map,xe={activated:!1,tokenObservers:[]},st={initialized:!1,enabled:!1};function l(e){return te.get(e)||Object.assign({},xe)}function at(e,t){return te.set(e,t),te.get(e)}function K(){return st}var ze="https://content-firebaseappcheck.googleapis.com/v1";var ct="exchangeRecaptchaEnterpriseToken",ut="exchangeDebugToken",De={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},lt=24*60*60*1e3;var re=class{constructor(t,r,n,o,i){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return p(this,null,function*(){this.stop();try{this.pending=new y,this.pending.promise.catch(r=>{}),yield dt(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new y,this.pending.promise.catch(r=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}};function dt(e){return new Promise(t=>{setTimeout(t,e)})}var pt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},d=new ve("appCheck","AppCheck",pt);function Oe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function ie(e){if(!l(e).activated)throw d.create("use-before-activation",{appName:e.name})}function He(e){let t=Math.round(e/1e3),r=Math.floor(t/(3600*24)),n=Math.floor((t-r*3600*24)/3600),o=Math.floor((t-r*3600*24-n*3600)/60),i=t-r*3600*24-n*3600-o*60,s="";return r&&(s+=j(r)+"d:"),n&&(s+=j(n)+"h:"),s+=j(o)+"m:"+j(i)+"s",s}function j(e){return e===0?"00":e>=10?e.toString():"0"+e}function se(n,o){return p(this,arguments,function*({url:e,body:t},r){let i={"Content-Type":"application/json"},s=r.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(i["X-Firebase-Client"]=f)}let u={method:"POST",body:JSON.stringify(t),headers:i},c;try{c=yield fetch(e,u)}catch(f){throw d.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw d.create("fetch-status-error",{httpStatus:c.status});let a;try{a=yield c.json()}catch(f){throw d.create("fetch-parse-error",{originalErrorMessage:f?.message})}let T=a.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw d.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let W=Number(T[1])*1e3,w=Date.now();return{token:a.token,expireTimeMillis:w+W,issuedAtTimeMillis:w}})}function ft(e,t){let{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${ze}/projects/${r}/apps/${n}:${ct}?key=${o}`,body:{recaptcha_enterprise_token:t}}}function Le(e,t){let{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${ze}/projects/${r}/apps/${n}:${ut}?key=${o}`,body:{debug_token:t}}}var ht="firebase-app-check-database",gt=1,D="firebase-app-check-store",je="debug-token",B=null;function Be(){return B||(B=new Promise((e,t)=>{try{let r=indexedDB.open(ht,gt);r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{var o;t(d.create("storage-open",{originalErrorMessage:(o=n.target.error)===null||o===void 0?void 0:o.message}))},r.onupgradeneeded=n=>{let o=n.target.result;switch(n.oldVersion){case 0:o.createObjectStore(D,{keyPath:"compositeKey"})}}}catch(r){t(d.create("storage-open",{originalErrorMessage:r?.message}))}}),B)}function mt(e){return We(Ve(e))}function kt(e,t){return Ke(Ve(e),t)}function At(e){return Ke(je,e)}function Et(){return We(je)}function Ke(e,t){return p(this,null,function*(){let n=(yield Be()).transaction(D,"readwrite"),i=n.objectStore(D).put({compositeKey:e,value:t});return new Promise((s,u)=>{i.onsuccess=c=>{s()},n.onerror=c=>{var a;u(d.create("storage-set",{originalErrorMessage:(a=c.target.error)===null||a===void 0?void 0:a.message}))}})})}function We(e){return p(this,null,function*(){let r=(yield Be()).transaction(D,"readonly"),o=r.objectStore(D).get(e);return new Promise((i,s)=>{o.onsuccess=u=>{let c=u.target.result;i(c?c.value:void 0)},r.onerror=u=>{var c;s(d.create("storage-get",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function Ve(e){return`${e.options.appId}-${e.name}`}var m=new Ie("@firebase/app-check");function Tt(e){return p(this,null,function*(){if(G()){let t;try{t=yield mt(e)}catch(r){m.warn(`Failed to read token from IndexedDB. Error: ${r}`)}return t}})}function Q(e,t){return G()?kt(e,t).catch(r=>{m.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function wt(){return p(this,null,function*(){let e;try{e=yield Et()}catch{}if(e)return e;{let t=crypto.randomUUID();return At(t).catch(r=>m.warn(`Failed to persist debug token to IndexedDB. Error: ${r}`)),t}})}function ae(){return K().enabled}function ce(){return p(this,null,function*(){let e=K();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}function vt(){let e=we(),t=K();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;let r=new y;t.token=r,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(wt())}var _t={error:"UNKNOWN_ERROR"};function bt(e){return Te.encodeString(JSON.stringify(e),!1)}function ne(e,t=!1,r=!1){return p(this,null,function*(){let n=e.app;ie(n);let o=l(n),i=o.token,s;if(i&&!b(i)&&(o.token=void 0,i=void 0),!i){let a=yield o.cachedTokenPromise;a&&(b(a)?i=a:yield Q(n,void 0))}if(!t&&i&&b(i))return{token:i.token};let u=!1;if(ae())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=se(Le(n,yield ce()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let a=yield o.exchangeTokenPromise;return yield Q(n,a),o.token=a,{token:a.token}}catch(a){return a.code==="appCheck/throttled"||a.code==="appCheck/initial-throttle"?m.warn(a.message):r&&m.error(a),ee(a)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),i=yield l(n).exchangeTokenPromise}catch(a){a.code==="appCheck/throttled"||a.code==="appCheck/initial-throttle"?m.warn(a.message):r&&m.error(a),s=a}let c;return i?s?b(i)?c={token:i.token,internalError:s}:c=ee(s):(c={token:i.token},o.token=i,yield Q(n,i)):c=ee(s),u&&Ge(n,c),c})}function It(e){return p(this,null,function*(){let t=e.app;ie(t);let{provider:r}=l(t);if(ae()){let n=yield ce(),{token:o}=yield se(Le(t,n),e.heartbeatServiceProvider);return{token:o}}else{let{token:n}=yield r.getToken();return{token:n}}})}function Ue(e,t,r,n){let{app:o}=e,i=l(o),s={next:r,error:n,type:t};if(i.tokenObservers=[...i.tokenObservers,s],i.token&&b(i.token)){let u=i.token;Promise.resolve().then(()=>{r({token:u.token}),Ne(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Ne(e))}function qe(e,t){let r=l(e),n=r.tokenObservers.filter(o=>o.next!==t);n.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function Ne(e){let{app:t}=e,r=l(t),n=r.tokenRefresher;n||(n=Rt(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function Rt(e){let{app:t}=e;return new re(()=>p(null,null,function*(){let r=l(t),n;if(r.token?n=yield ne(e,!0):n=yield ne(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let r=l(t);if(r.token){let n=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,o=r.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,o),Math.max(0,n-Date.now())}else return 0},De.RETRIAL_MIN_WAIT,De.RETRIAL_MAX_WAIT)}function Ge(e,t){let r=l(e).tokenObservers;for(let n of r)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function b(e){return e.expireTimeMillis-Date.now()>0}function ee(e){return{token:bt(_t),error:e}}var oe=class{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){let{tokenObservers:t}=l(this.app);for(let r of t)qe(this.app,r.next);return Promise.resolve()}};function yt(e,t){return new oe(e,t)}function Ct(e){return{getToken:t=>ne(e,t),getLimitedUseToken:()=>It(e),addTokenListener:t=>Ue(e,"INTERNAL",t),removeTokenListener:t=>qe(e.app,t)}}var Pt="@firebase/app-check",St="0.10.1";var Dt="https://www.google.com/recaptcha/enterprise.js";function Ot(e,t){let r=new y,n=l(e);n.reCAPTCHAState={initialized:r};let o=Nt(e),i=Oe(!0);return i?Me(e,t,i,o,r):Ft(()=>{let s=Oe(!0);if(!s)throw new Error("no recaptcha");Me(e,t,s,o,r)}),r.promise}function Me(e,t,r,n,o){r.ready(()=>{$t(e,t,r,n),o.resolve(r)})}function Nt(e){let t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}function Mt(e){return p(this,null,function*(){ie(e);let r=yield l(e).reCAPTCHAState.initialized.promise;return new Promise((n,o)=>{let i=l(e).reCAPTCHAState;r.ready(()=>{n(r.execute(i.widgetId,{action:"fire_app_check"}))})})})}function $t(e,t,r,n){let o=r.render(n,{sitekey:t,size:"invisible",callback:()=>{l(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{l(e).reCAPTCHAState.succeeded=!1}}),i=l(e);i.reCAPTCHAState=Object.assign(Object.assign({},i.reCAPTCHAState),{widgetId:o})}function Ft(e){let t=document.createElement("script");t.src=Dt,t.onload=e,document.head.appendChild(t)}var $e=class e{constructor(t){this._siteKey=t,this._throttleData=null}getToken(){return p(this,null,function*(){var t,r,n;zt(this._throttleData);let o=yield Mt(this._app).catch(s=>{throw d.create("recaptcha-error")});if(!(!((t=l(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw d.create("recaptcha-error");let i;try{i=yield se(ft(this._app,o),this._heartbeatServiceProvider)}catch(s){throw!((r=s.code)===null||r===void 0)&&r.includes("fetch-status-error")?(this._throttleData=xt(Number((n=s.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),d.create("initial-throttle",{time:He(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,i})}initialize(t){this._app=t,this._heartbeatServiceProvider=Y(t,"heartbeat"),Ot(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof e?this._siteKey===t._siteKey:!1}};function xt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+lt,httpStatus:e};{let r=t?t.backoffCount:0,n=_e(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e}}}function zt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw d.create("throttled",{time:He(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function Ze(e=x(),t){e=be(e);let r=Y(e,"app-check");if(K().initialized||vt(),ae()&&ce().then(o=>console.log(`App Check debug token: ${o}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),r.isInitialized()){let o=r.getImmediate(),i=r.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return o;throw d.create("already-initialized",{appName:e.name})}let n=r.initialize({options:t});return Ht(e,t.provider,t.isTokenAutoRefreshEnabled),l(e).isTokenAutoRefreshEnabled&&Ue(n,"INTERNAL",()=>{}),n}function Ht(e,t,r=!1){let n=at(e,Object.assign({},xe));n.activated=!0,n.provider=t,n.cachedTokenPromise=Tt(e).then(o=>(o&&b(o)&&(n.token=o,Ge(e,{token:o.token})),o)),n.isTokenAutoRefreshEnabled=r&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&r&&m.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),n.provider.initialize(e)}var Lt="app-check",Fe="app-check-internal";function jt(){X(new Z(Lt,e=>{let t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return yt(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(Fe).initialize()})),X(new Z(Fe,e=>{let t=e.getProvider("app-check").getImmediate();return Ct(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),h(Pt,St)}jt();var Xe="app-check",O=class{constructor(t){return t}},ue=class{constructor(){return Se(Xe)}};var le=new N("angularfire2.app-check-instances");function Bt(e,t){let r=Pe(Xe,e,t);return r&&new O(r)}var Kt=["localhost","0.0.0.0","127.0.0.1"],Wt=typeof window<"u"&&Kt.includes(window.location.hostname);function Vt(e){return(t,r,n)=>{!Ae(n)&&(R()||Wt)&&(globalThis.FIREBASE_APPCHECK_DEBUG_TOKEN??=!0);let o=t.runOutsideAngular(()=>e(r));return new O(o)}}var Ut={provide:ue,deps:[[new v,le]]},qt={provide:O,useFactory:Bt,deps:[[new v,le],E,I]};function zr(e,...t){return h("angularfire",C.full,"app-check"),M([qt,Ut,{provide:le,useFactory:Vt(e),multi:!0,deps:[g,F,I,P,S,...t]}])}var Hr=L(Ze,!0);export{C as a,Pe as b,Se as c,P as d,L as e,E as f,S as g,hr as h,gr as i,$e as j,ue as k,zr as l,Hr as m};
