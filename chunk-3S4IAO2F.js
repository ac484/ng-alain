import{b as j}from"./chunk-4THNYPR7.js";import"./chunk-CVWZRLFH.js";import"./chunk-LGQCUHVE.js";import"./chunk-VAGS5EVQ.js";import{f as W,k as P}from"./chunk-55A3KN2A.js";import{b as A,c as L,d as V}from"./chunk-MYHW4YTP.js";import"./chunk-G3VEBS7K.js";import"./chunk-P43R2PK7.js";import{d as x,g as T,m as H,y as k,z as O}from"./chunk-TILQNZML.js";import"./chunk-LPDDJ3TV.js";import"./chunk-2APJHJ54.js";import"./chunk-AFUA6SNM.js";import"./chunk-7OUOMJSL.js";import"./chunk-NK4AO4BP.js";import"./chunk-F62RTV2J.js";import"./chunk-7FRFMFPD.js";import"./chunk-CB6IRRWZ.js";import"./chunk-QLO4SMLE.js";import{h as I,q as D,s as N,t as B}from"./chunk-ZP3JRH3N.js";import"./chunk-YKU44AMC.js";import{o as w,y as E}from"./chunk-M6U45NYK.js";import{Aa as S,Ba as y,Fb as b,Lb as g,Nc as r,Oc as F,Sc as f,Tc as C,Uc as _,fc as c,gc as l,hc as o,ic as z,pc as v,sb as s,ta as h,vc as d,yc as M}from"./chunk-MUKALFIJ.js";import{i as u}from"./chunk-57BLH6QZ.js";function R(m,t){if(m&1){let e=v();l(0,"li",10)(1,"span"),r(2),o(),l(3,"button",11),d("click",function(){let a=S(e).$implicit,n=M();return y(n.removeClient(a))}),r(4,"\u522A\u9664"),o()()}if(m&2){let e=t.$implicit;s(2),F(e)}}function q(m,t){if(m&1&&z(0,"nz-option",12),m&2){let e=t.$implicit;c("nzValue",e)("nzLabel",e)}}var p=class p{constructor(){this.clients=[];this.defaultClient="";this.clientInput="";this.isLoading=!1;this.contractService=h(j)}ngOnInit(){this.loadClients()}loadClients(){return u(this,null,function*(){this.isLoading=!0;let t=yield this.contractService.getClientsSettings();this.clients=t?.list||[],this.defaultClient=t?.default||"",this.isLoading=!1})}addClient(){return u(this,null,function*(){!this.clientInput.trim()||this.clients.includes(this.clientInput.trim())||(this.clients=[...this.clients,this.clientInput.trim()],this.clientInput="",yield this.saveClients())})}removeClient(t){return u(this,null,function*(){this.clients=this.clients.filter(e=>e!==t),this.defaultClient===t&&(this.defaultClient=this.clients[0]||""),yield this.saveClients()})}setDefaultClient(t){return u(this,null,function*(){this.defaultClient=t,yield this.saveClients()})}saveClients(){return u(this,null,function*(){yield this.contractService.setClientsSettings({list:this.clients,default:this.defaultClient})})}};p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=b({type:p,selectors:[["hub-settings"]],decls:17,vars:5,consts:[[1,"settings-page"],[1,"client-settings"],[2,"display","flex","gap","8px","align-items","center","margin-bottom","8px"],["nz-input","","placeholder","\u65B0\u589E\u696D\u4E3B",2,"width","180px",3,"ngModelChange","keyup.enter","ngModel"],["nz-button","","nzType","primary",3,"click","disabled"],[2,"padding-left","0","list-style","none"],["style","display: flex; align-items: center; gap: 8px; margin-bottom: 4px;",4,"ngFor","ngForOf"],[2,"margin-top","12px"],[2,"width","180px",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","4px"],["nz-button","","nzType","default","nzSize","small",3,"click"],[3,"nzValue","nzLabel"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2"),r(2,"\u7CFB\u7D71\u8A2D\u5B9A\uFF08Settings\uFF09"),o(),l(3,"section",1)(4,"h3"),r(5,"\u696D\u4E3B\u6E05\u55AE\u7BA1\u7406"),o(),l(6,"div",2)(7,"input",3),_("ngModelChange",function(n){return C(i.clientInput,n)||(i.clientInput=n),n}),d("keyup.enter",function(){return i.addClient()}),o(),l(8,"button",4),d("click",function(){return i.addClient()}),r(9,"\u65B0\u589E"),o()(),l(10,"ul",5),g(11,R,5,1,"li",6),o(),l(12,"div",7)(13,"label"),r(14,"\u9810\u8A2D\u696D\u4E3B\uFF1A"),o(),l(15,"nz-select",8),_("ngModelChange",function(n){return C(i.defaultClient,n)||(i.defaultClient=n),n}),d("ngModelChange",function(n){return i.setDefaultClient(n)}),g(16,q,1,2,"nz-option",9),o()()()()),e&2&&(s(7),f("ngModel",i.clientInput),s(),c("disabled",!i.clientInput.trim()),s(3),c("ngForOf",i.clients),s(4),f("ngModel",i.defaultClient),s(),c("ngForOf",i.clients))},dependencies:[E,w,k,x,T,H,O,V,A,L,P,W,B,N,I,D],encapsulation:2});var G=p;export{G as HubSettingsComponent};
