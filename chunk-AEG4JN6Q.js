import{a as g}from"./chunk-J6AG6JAU.js";import{a as x,b as H}from"./chunk-CKYVJWE2.js";import{a as q,b as K,c as R,d as W,e as P}from"./chunk-JPGT6HBL.js";import{a as L,b as j}from"./chunk-45BKQ37Q.js";import{d as E}from"./chunk-LFVXFGPE.js";import{f as k,k as A}from"./chunk-RGYXGWNO.js";import{A as I,d as V,e as u,g as _,h as B,n as D,q as w,t as O,y as T,z as G}from"./chunk-7GKVL75V.js";import{j as y,k as M}from"./chunk-X5G25CLX.js";import{e as b}from"./chunk-2DZ25YRQ.js";import{Jd as N,Nb as e,Ob as t,Pb as n,Ph as F,Qb as m,_b as h,bb as i,gb as d,nb as z,qc as l,vb as f,vc as v,wc as C,xc as S}from"./chunk-GM6XQ5SX.js";var s=class s{constructor(r,o,a){this.fb=r;this.service=o;this.message=a;this.crudCompleted=new f;this.isModalVisible=!1;this.isEditMode=!1;this.modalTitle="";this.nodeForm=this.fb.group({title:["",u.required],author:["",u.required],isLeaf:[!1],parentKey:[""],type:["branch"],status:["active"]})}showAddModal(r){this.isEditMode=!1,this.modalTitle="\u65B0\u589E\u7BC0\u9EDE",this.nodeForm.reset({type:"branch",status:"active",parentKey:r||""}),this.isModalVisible=!0}showEditModal(r){this.isEditMode=!0,this.modalTitle="\u7DE8\u8F2F\u7BC0\u9EDE",this.editingNode=r,this.nodeForm.patchValue(r),this.isModalVisible=!0}deleteNode(r){this.service.deleteNode(r.id).then(()=>{this.message.success("\u522A\u9664\u6210\u529F"),this.crudCompleted.emit()}).catch(o=>{this.message.error("\u522A\u9664\u5931\u6557: "+o.message)})}handleOk(){if(this.nodeForm.invalid)return;let r=this.nodeForm.value;this.isEditMode&&this.editingNode?this.service.updateNode(this.editingNode.id,r).then(()=>{this.message.success("\u66F4\u65B0\u6210\u529F"),this.isModalVisible=!1,this.crudCompleted.emit()}).catch(o=>{this.message.error("\u66F4\u65B0\u5931\u6557: "+o.message)}):this.service.addNode(r).then(()=>{this.message.success("\u5EFA\u7ACB\u6210\u529F"),this.isModalVisible=!1,this.crudCompleted.emit()}).catch(o=>{this.message.error("\u5EFA\u7ACB\u5931\u6557: "+o.message)})}handleCancel(){this.isModalVisible=!1,this.editingNode=void 0}};s.\u0275fac=function(o){return new(o||s)(d(T),d(g),d(E))},s.\u0275cmp=z({type:s,selectors:[["app-firebase-crud"]],outputs:{crudCompleted:"crudCompleted"},decls:38,vars:22,consts:[[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],["nz-form","","nz-row","",3,"formGroup","nzGutter"],["nz-col","",3,"nzSpan"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","","formControlName","title","placeholder","\u8ACB\u8F38\u5165\u7BC0\u9EDE\u6A19\u984C"],["nz-input","","formControlName","parentKey","placeholder","\u7236\u7BC0\u9EDE key\uFF08\u53EF\u9078\uFF09"],["nz-input","","formControlName","author","placeholder","\u8ACB\u8F38\u5165\u4F5C\u8005"],["formControlName","isLeaf"],["nz-input","","formControlName","type","placeholder","root/trunk/branch/leaf"],["nz-input","","formControlName","status","placeholder","active/inactive/archived"]],template:function(o,a){o&1&&(t(0,"nz-modal",0),S("nzVisibleChange",function(p){return C(a.isModalVisible,p)||(a.isModalVisible=p),p}),h("nzOnCancel",function(){return a.handleCancel()})("nzOnOk",function(){return a.handleOk()}),t(1,"form",1)(2,"div",2)(3,"nz-form-item")(4,"nz-form-label",3),l(5,"\u7BC0\u9EDE\u6A19\u984C"),n(),t(6,"nz-form-control",4),m(7,"input",5),n()()(),t(8,"div",2)(9,"nz-form-item")(10,"nz-form-label",4),l(11,"\u7236\u7BC0\u9EDE"),n(),t(12,"nz-form-control",4),m(13,"input",6),n()()(),t(14,"div",2)(15,"nz-form-item")(16,"nz-form-label",4),l(17,"\u4F5C\u8005"),n(),t(18,"nz-form-control",4),m(19,"input",7),n()()(),t(20,"div",2)(21,"nz-form-item")(22,"nz-form-label",4),l(23,"\u662F\u5426\u70BA\u8449\u7BC0\u9EDE"),n(),t(24,"nz-form-control",4),m(25,"nz-switch",8),n()()(),t(26,"div",2)(27,"nz-form-item")(28,"nz-form-label",4),l(29,"\u985E\u578B"),n(),t(30,"nz-form-control",4),m(31,"input",9),n()()(),t(32,"div",2)(33,"nz-form-item")(34,"nz-form-label",4),l(35,"\u72C0\u614B"),n(),t(36,"nz-form-control",4),m(37,"input",10),n()()()()()),o&2&&(v("nzVisible",a.isModalVisible),e("nzTitle",a.modalTitle),i(),e("formGroup",a.nodeForm)("nzGutter",24),i(),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18),i(2),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18),i(2),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18),i(2),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18),i(2),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18),i(2),e("nzSpan",24),i(2),e("nzSpan",6),i(2),e("nzSpan",18))},dependencies:[N,G,D,V,_,B,I,w,O,M,y,P,j,L,K,q,W,R,A,k,b,F,H,x],encapsulation:2});var J=s;export{J as a};
