import{a as Z,b as ee}from"./chunk-INLITOTZ.js";import"./chunk-VJSJY5UE.js";import{d as P}from"./chunk-FNQFXT4L.js";import{f as q,g as H,h as J,k as Q}from"./chunk-IKXE7RY5.js";import"./chunk-YLT4J452.js";import"./chunk-PUYN37MU.js";import{d as W,g as O,m as j,y as G}from"./chunk-Q4M6B46D.js";import{a as U,b as $}from"./chunk-JAU2U3S7.js";import"./chunk-QHSDKNHJ.js";import"./chunk-HG76SPUR.js";import"./chunk-VECD6G7R.js";import"./chunk-JKCE4WUB.js";import{i as L,j as B,k as b,t as I,v as V,w as R}from"./chunk-HFO44OZB.js";import{$b as h,$h as X,Aa as u,Ad as A,Id as M,Ob as m,Oh as F,Pb as o,Pc as v,Ph as K,Qb as r,Rb as S,Yb as C,ai as Y,cb as d,cc as y,hb as N,mc as x,ob as T,rc as a,tc as _,ub as g,vc as D,wc as E,xc as k,za as c,zd as w}from"./chunk-C2TUN3UK.js";import{a as z}from"./chunk-57BLH6QZ.js";function ie(p,t){p&1&&S(0,"span",11)}function ne(p,t){if(p&1){let i=C();o(0,"nz-tag",15),h("click",function(){let n=c(i).$implicit,s=y(2);return u(s.highlightNode(n.key))}),a(1),r()}if(p&2){let i=t.$implicit;m("nzColor","green"),d(),_(" ",i.title," ")}}function re(p,t){if(p&1&&(o(0,"div",3)(1,"nz-tag",12),a(2),r(),o(3,"div",13),g(4,ne,2,2,"nz-tag",14),r()()),p&2){let i=y();d(),m("nzColor","blue"),d(),_("\u641C\u5C0B\u7D50\u679C: ",i.searchResults.length," \u500B\u7BC0\u9EDE"),d(2),m("ngForOf",i.searchResults)}}var f=class f{constructor(t){this.message=t;this.treeData=[{title:"\u5C08\u6848\u7BA1\u7406",key:"0-0",icon:"anticon-cluster",children:[{title:"\u524D\u7AEF\u958B\u767C",key:"0-0-0",icon:"anticon-node-index",children:[{title:"Angular \u5C08\u6848",key:"0-0-0-0",isLeaf:!0,icon:"anticon-html5"},{title:"React \u5C08\u6848",key:"0-0-0-1",isLeaf:!0,icon:"anticon-code"},{title:"Vue \u5C08\u6848",key:"0-0-0-2",isLeaf:!0,icon:"anticon-code"}]},{title:"\u5F8C\u7AEF\u958B\u767C",key:"0-0-1",icon:"anticon-tree",children:[{title:"Node.js API",key:"0-0-1-0",isLeaf:!0,icon:"anticon-api"},{title:"Python \u670D\u52D9",key:"0-0-1-1",isLeaf:!0,icon:"anticon-code"}]},{title:"\u8A2D\u8A08\u8CC7\u6E90",key:"0-0-2",icon:"anticon-branches",children:[{title:"UI \u8A2D\u8A08\u7A3F",key:"0-0-2-0",isLeaf:!0,icon:"anticon-file-image"},{title:"\u5716\u6A19\u8CC7\u6E90",key:"0-0-2-1",isLeaf:!0,icon:"anticon-picture"}]}]},{title:"\u6587\u6A94\u7BA1\u7406",key:"0-1",icon:"anticon-branches",children:[{title:"\u6280\u8853\u6587\u6A94",key:"0-1-0",icon:"anticon-node-index",children:[{title:"API \u6587\u6A94",key:"0-1-0-0",isLeaf:!0,icon:"anticon-file-text"},{title:"\u4F7F\u7528\u624B\u518A",key:"0-1-0-1",isLeaf:!0,icon:"anticon-file-text"}]},{title:"\u6703\u8B70\u8A18\u9304",key:"0-1-1",icon:"anticon-tree",children:[{title:"\u9031\u6703\u8A18\u9304",key:"0-1-1-0",isLeaf:!0,icon:"anticon-calendar"},{title:"\u5C08\u6848\u6703\u8B70",key:"0-1-1-1",isLeaf:!0,icon:"anticon-calendar"}]}]}];this.filteredTreeData=[];this.searchText="";this.searchResults=[];this.expandedKeys=["0-0","0-0-0","0-0-1","0-1","0-1-0"];this.selectedKeys=[];this.filteredTreeData=[...this.treeData]}onSearch(t){if(this.searchText=t,!t.trim()){this.filteredTreeData=[...this.treeData],this.searchResults=[];return}this.searchResults=this.searchNodes(this.treeData,t.toLowerCase()),this.filteredTreeData=this.filterTreeData(this.treeData,t.toLowerCase()),this.expandedKeys=this.getExpandedKeysForSearch(this.treeData,t.toLowerCase())}searchNodes(t,i){let e=[];return t.forEach(n=>{n.title.toLowerCase().includes(i)&&e.push(n),n.children&&e.push(...this.searchNodes(n.children,i))}),e}filterTreeData(t,i){return t.map(e=>{let n=z({},e);if(e.children){let s=this.filterTreeData(e.children,i);if(s.length>0||e.title.toLowerCase().includes(i))return n.children=s,n}return e.title.toLowerCase().includes(i)?n:null}).filter(e=>e!==null)}getExpandedKeysForSearch(t,i){let e=[];return t.forEach(n=>{(n.title.toLowerCase().includes(i)||n.children&&this.hasMatchingChildren(n.children,i))&&e.push(n.key),n.children&&e.push(...this.getExpandedKeysForSearch(n.children,i))}),e}hasMatchingChildren(t,i){return t.some(e=>e.title.toLowerCase().includes(i)||e.children&&this.hasMatchingChildren(e.children,i))}clearSearch(){this.searchText="",this.filteredTreeData=[...this.treeData],this.searchResults=[],this.expandedKeys=["0-0","0-0-0","0-0-1","0-1","0-1-0"],this.message.info("\u641C\u5C0B\u5DF2\u6E05\u9664")}highlightNode(t){this.selectedKeys=[t],this.expandedKeys=[...this.expandedKeys,t],this.message.success(`\u5DF2\u5B9A\u4F4D\u5230\u7BC0\u9EDE: ${t}`)}onExpandChange(t){this.expandedKeys=t.keys}onNodeClick(t){console.log("\u7BC0\u9EDE\u9EDE\u64CA:",t),this.selectedKeys=[t.node.key]}expandAll(){this.expandedKeys=this.getAllKeys(this.filteredTreeData),this.message.info("\u5DF2\u5C55\u958B\u5168\u90E8\u7BC0\u9EDE")}collapseAll(){this.expandedKeys=[],this.message.info("\u5DF2\u6536\u5408\u5168\u90E8\u7BC0\u9EDE")}getAllKeys(t){let i=[];return t.forEach(e=>{i.push(e.key),e.children&&i.push(...this.getAllKeys(e.children))}),i}};f.\u0275fac=function(i){return new(i||f)(N(P))},f.\u0275cmp=T({type:f,selectors:[["app-tree-search"]],decls:30,vars:9,consts:[["suffixIconSearch",""],["tree",""],["title","\u6A39\u72C0\u641C\u7D22\u529F\u80FD"],[2,"margin-bottom","16px"],[3,"nzSuffix"],["nz-input","","placeholder","\u641C\u5C0B\u7BC0\u9EDE...",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],["style","margin-bottom: 16px;",4,"ngIf"],[3,"nzExpandChange","nzClick","nzData","nzBlockNode","nzShowLine","nzShowIcon","nzExpandedKeys","nzSelectedKeys"],[2,"margin-top","16px","padding","16px","background-color","#f5f5f5","border-radius","4px"],["nz-icon","","nzType","search"],[3,"nzColor"],[2,"margin-top","8px"],["style","margin-right: 8px; margin-bottom: 4px;",3,"nzColor","click",4,"ngFor","ngForOf"],[2,"margin-right","8px","margin-bottom","4px",3,"click","nzColor"]],template:function(i,e){if(i&1){let n=C();o(0,"nz-card",2)(1,"div",3)(2,"nz-space")(3,"nz-input-group",4)(4,"input",5),k("ngModelChange",function(l){return c(n),E(e.searchText,l)||(e.searchText=l),u(l)}),h("ngModelChange",function(l){return c(n),u(e.onSearch(l))}),r()(),o(5,"button",6),h("click",function(){return c(n),u(e.clearSearch())}),a(6,"\u6E05\u9664\u641C\u5C0B"),r(),o(7,"button",7),h("click",function(){return c(n),u(e.expandAll())}),a(8,"\u5C55\u958B\u5168\u90E8"),r(),o(9,"button",7),h("click",function(){return c(n),u(e.collapseAll())}),a(10,"\u6536\u5408\u5168\u90E8"),r()(),g(11,ie,1,0,"ng-template",null,0,v),r(),g(13,re,5,3,"div",8),o(14,"nz-tree",9,1),h("nzExpandChange",function(l){return c(n),u(e.onExpandChange(l))})("nzClick",function(l){return c(n),u(e.onNodeClick(l))}),r(),o(16,"div",10)(17,"h4"),a(18,"\u641C\u7D22\u529F\u80FD\u8AAA\u660E\uFF1A"),r(),o(19,"ul")(20,"li"),a(21,"\u8F38\u5165\u95DC\u9375\u5B57\u9032\u884C\u5373\u6642\u641C\u5C0B"),r(),o(22,"li"),a(23,"\u652F\u63F4\u6A21\u7CCA\u641C\u5C0B\u548C\u7CBE\u78BA\u5339\u914D"),r(),o(24,"li"),a(25,"\u641C\u5C0B\u7D50\u679C\u6703\u9AD8\u4EAE\u986F\u793A"),r(),o(26,"li"),a(27,"\u9EDE\u64CA\u641C\u5C0B\u7D50\u679C\u6A19\u7C64\u53EF\u5B9A\u4F4D\u5230\u5C0D\u61C9\u7BC0\u9EDE"),r(),o(28,"li"),a(29,"\u652F\u63F4\u5C55\u958B/\u6536\u5408\u64CD\u4F5C"),r()()()()}if(i&2){let n=x(12);d(3),m("nzSuffix",n),d(),D("ngModel",e.searchText),d(9),m("ngIf",e.searchResults.length>0),d(),m("nzData",e.filteredTreeData)("nzBlockNode",!0)("nzShowLine",!0)("nzShowIcon",!0)("nzExpandedKeys",e.expandedKeys)("nzSelectedKeys",e.selectedKeys)}},dependencies:[M,w,A,Y,X,ee,Z,Q,q,J,H,R,V,b,I,B,L,K,F,$,U,G,W,O,j],encapsulation:2});var te=f;export{te as TreeSearchComponent};
