import{a as D}from"./chunk-AEG4JN6Q.js";import{a as ae,b as pe}from"./chunk-LVG2LAOY.js";import"./chunk-J6AG6JAU.js";import{b as j,d as G,f as q}from"./chunk-FI2MKTH7.js";import"./chunk-UCF3NJQY.js";import"./chunk-VAGS5EVQ.js";import"./chunk-CKYVJWE2.js";import{a as le}from"./chunk-RUD7LQCH.js";import"./chunk-JPGT6HBL.js";import"./chunk-45BKQ37Q.js";import"./chunk-LFVXFGPE.js";import"./chunk-66HWRA4I.js";import{f as ne,g as ie,h as oe,k as re}from"./chunk-RGYXGWNO.js";import{a as X,c as Y,i as Z,j as ee,k as te}from"./chunk-I3YMRPXC.js";import"./chunk-VIGI73B6.js";import"./chunk-O3DGGP5O.js";import{d as H,g as J,m as K,z as U}from"./chunk-7GKVL75V.js";import"./chunk-X5G25CLX.js";import"./chunk-PAIB6VMN.js";import"./chunk-YMEC4OFG.js";import"./chunk-ZFIXZIYB.js";import"./chunk-W6Z6A3Q5.js";import"./chunk-FJXMRBDK.js";import"./chunk-5V3RUN7K.js";import"./chunk-2DZ25YRQ.js";import"./chunk-PR6SM3R4.js";import"./chunk-5NB44RP4.js";import"./chunk-M2FMHT2I.js";import"./chunk-BA2SIH6H.js";import"./chunk-AEDV7UUM.js";import{Ad as $,Cd as A,Dd as L,Gc as B,Jd as Q,Lc as T,Mc as v,Nb as C,Ob as r,Oh as R,Pb as l,Pc as w,Ph as W,Qb as g,Ub as y,Vb as P,Xb as x,_b as m,bb as d,bc as _,fc as S,gb as E,gc as I,hc as b,lc as z,nb as V,qc as u,rc as h,sc as M,tb as N,vc as k,wc as F,xa as p,xc as O,ya as c}from"./chunk-GM6XQ5SX.js";import"./chunk-57BLH6QZ.js";var de=()=>[];function me(s,n){s&1&&g(0,"nz-icon",10)}function ue(s,n){if(s&1){let t=x();y(0),r(1,"nz-icon",14),m("click",function(){p(t);let i=_().$implicit,o=_();return c(o.openFolder(i))}),l(),r(2,"span",15),u(3),l(),r(4,"span",16),u(5),T(6,"lowercase"),l(),P()}if(s&2){let t=_(),e=t.$implicit,i=t.origin;d(),C("nzType",e.isExpanded?"folder-open":"folder"),d(2),h(e.title),d(2),M("created by ",v(6,3,i.author))}}function _e(s,n){if(s&1&&(g(0,"nz-icon",17),r(1,"span",18),u(2),l(),r(3,"span",19),u(4),T(5,"lowercase"),l()),s&2){let t=_(),e=t.$implicit,i=t.origin;d(2),h(e.title),d(2),M("modified by ",v(5,2,i.author))}}function fe(s,n){if(s&1){let t=x();r(0,"span",11)(1,"span",12),m("contextmenu",function(i){let o=p(t).$implicit,a=_(),se=z(11);return c(a.contextMenu(i,se,o))}),N(2,ue,7,5,"ng-container",13)(3,_e,6,4,"ng-template",null,3,w),l()()}if(s&2){let t=n.$implicit,e=z(4);d(2),C("ngIf",!t.isLeaf)("ngIfElse",e)}}var f=class f{constructor(n,t){this.nzContextMenuService=n;this.firestore=t;this.searchValue="";this.contextNode=null;let e=q(this.firestore,"tree-nodes");this.treeData$=G(e,{idField:"key"})}reloadTree(){}openFolder(n){if(n instanceof le)n.isExpanded=!n.isExpanded;else{let t=n.node;t&&(t.isExpanded=!t.isExpanded)}}activeNode(n){this.activatedNode=n.node}onDrop(n){console.log("\u62D6\u66F3\u5B8C\u6210:",n)}contextMenu(n,t,e){this.contextNode=e??null,this.nzContextMenuService.create(n,t)}addNode(){this.crud.showAddModal(this.contextNode?.key)}editNode(){this.contextNode&&this.crud.showEditModal(this.contextNode.origin)}deleteNode(){this.contextNode&&this.crud.deleteNode(this.contextNode.origin)}selectDropdown(n){alert(n)}};f.\u0275fac=function(t){return new(t||f)(E(te),E(j))},f.\u0275cmp=V({type:f,selectors:[["app-tree-panel"]],viewQuery:function(t,e){if(t&1&&S(D,5),t&2){let i;I(i=b())&&(e.crud=i.first)}},decls:19,vars:8,consts:[["suffixIcon",""],["nzTreeTemplate",""],["menu","nzDropdownMenu"],["fileIcon",""],[3,"crudCompleted"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","\u641C\u5C0B\u7BC0\u9EDE",3,"ngModelChange","ngModel"],["nzBlockNode","","nzDraggable","","nzVirtualHeight","300px",3,"nzClick","nzDblClick","nzOnDrop","nzData","nzSearchValue","nzTreeTemplate"],["nz-menu",""],["nz-menu-item","",3,"click"],["nzType","search"],[1,"custom-node"],[3,"contextmenu"],[4,"ngIf","ngIfElse"],[3,"click","nzType"],[1,"folder-name"],[1,"folder-desc"],["nzType","file"],[1,"file-name"],[1,"file-desc"]],template:function(t,e){if(t&1){let i=x();r(0,"app-firebase-crud",4),m("crudCompleted",function(){return p(i),c(e.reloadTree())}),l(),r(1,"nz-input-group",5)(2,"input",6),O("ngModelChange",function(a){return p(i),F(e.searchValue,a)||(e.searchValue=a),c(a)}),l()(),N(3,me,1,0,"ng-template",null,0,w),g(5,"br"),r(6,"nz-tree",7),T(7,"async"),m("nzClick",function(a){return p(i),c(e.activeNode(a))})("nzDblClick",function(a){return p(i),c(e.openFolder(a))})("nzOnDrop",function(a){return p(i),c(e.onDrop(a))}),l(),N(8,fe,5,2,"ng-template",null,1,w),r(10,"nz-dropdown-menu",null,2)(12,"ul",8)(13,"li",9),m("click",function(){return p(i),c(e.addNode())}),u(14,"\u65B0\u589E\u7BC0\u9EDE"),l(),r(15,"li",9),m("click",function(){return p(i),c(e.editNode())}),u(16,"\u7DE8\u8F2F\u7BC0\u9EDE"),l(),r(17,"li",9),m("click",function(){return p(i),c(e.deleteNode())}),u(18,"\u522A\u9664\u7BC0\u9EDE"),l()()()}if(t&2){let i=z(4),o=z(9);d(),C("nzSuffix",i),d(),k("ngModel",e.searchValue),d(4),C("nzData",v(7,5,e.treeData$)??B(7,de))("nzSearchValue",e.searchValue)("nzTreeTemplate",o)}},dependencies:[Q,$,U,H,J,K,pe,ae,ee,Y,X,Z,W,R,re,ne,oe,ie,D,A,L],styles:["nz-tree[_ngcontent-%COMP%]{overflow:hidden;margin:0 -24px;padding:0 24px}.custom-node[_ngcontent-%COMP%]{cursor:pointer;line-height:24px;margin-left:4px;display:inline-block}.file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:4px}.file-desc[_ngcontent-%COMP%], .folder-desc[_ngcontent-%COMP%]{padding:0 8px;display:inline-block;background:#87ceff;color:#fff;position:relative;left:12px}"]});var ce=f;export{ce as TreePanelComponent};
