import{a as ve,b as ye}from"./chunk-SO4OO3IH.js";import{a as ue,c as fe,j as ze,k as ge,l as xe}from"./chunk-X327WCNV.js";import{a as re,b as se,c as le}from"./chunk-LQGMFTZI.js";import{a as oe,b as ae}from"./chunk-WN3VU6OR.js";import"./chunk-U4WBJKY4.js";import"./chunk-7JV6FWGR.js";import{G as ie}from"./chunk-FSB2M7TZ.js";import"./chunk-DZM7Z3MU.js";import"./chunk-XTYMWMVF.js";import{Ad as U,Cd as J,Fa as V,Hb as x,Ic as k,Jb as v,Jd as K,Mc as B,Ob as o,Oc as G,Pa as E,Pb as r,Qb as s,Qc as D,Rb as d,Re as ee,Rh as te,Sc as $,Sh as ne,Vb as T,Wb as N,Xb as R,Xh as pe,Yh as ce,ai as me,bi as de,cb as n,cc as c,ce as Q,ge as X,hd as H,jd as q,mc as A,ob as y,oc as j,pa as _,pb as h,pc as L,qe as Y,rb as O,rc as l,sb as F,sc as m,ta as g,tc as f,ub as u,vd as W,wb as I,xb as b,xd as Z}from"./chunk-AJP7JA3D.js";import"./chunk-57BLH6QZ.js";var Se=(()=>{class t{transform(e,i="HH:mm:ss"){let p=Number(e||0);return ie.reduce((z,[P,w])=>{if(z.indexOf(P)!==-1){let M=Math.floor(p/w);return p-=M*w,z.replace(new RegExp(`${P}+`,"g"),Ne=>ee(M.toString(),Ne.length,"0"))}return z},i)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=O({name:"nzTimeRange",type:t,pure:!0})}return t})(),_e=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=h({type:t});static \u0275inj=_({})}return t})();var Ee=t=>({$implicit:t});function Pe(t,a){if(t&1&&R(0,1),t&2){let e=c();o("ngTemplateOutlet",e.nzValueTemplate)("ngTemplateOutletContext",k(2,Ee,e.nzValue))}}function we(t,a){if(t&1&&(r(0,"span",2),l(1),s()),t&2){let e=c(2);n(),m(e.displayInt)}}function Me(t,a){if(t&1&&(r(0,"span",3),l(1),s()),t&2){let e=c(2);n(),m(e.displayDecimal)}}function Ve(t,a){if(t&1&&(x(0,we,2,1,"span",2),x(1,Me,2,1,"span",3)),t&2){let e=c();v(e.displayInt?0:-1),n(),v(e.displayDecimal?1:-1)}}function Oe(t,a){if(t&1&&(T(0),l(1),N()),t&2){let e=c();n(),m(e.nzTitle)}}function Fe(t,a){t&1&&d(0,"nz-skeleton",2),t&2&&o("nzParagraph",!1)}function Ie(t,a){if(t&1&&(T(0),l(1),N()),t&2){let e=c(3);n(),m(e.nzPrefix)}}function be(t,a){if(t&1&&(r(0,"span",5),u(1,Ie,2,1,"ng-container",1),s()),t&2){let e=c(2);n(),o("nzStringTemplateOutlet",e.nzPrefix)}}function Re(t,a){if(t&1&&(T(0),l(1),N()),t&2){let e=c(3);n(),m(e.nzSuffix)}}function Ae(t,a){if(t&1&&(r(0,"span",7),u(1,Re,2,1,"ng-container",1),s()),t&2){let e=c(2);n(),o("nzStringTemplateOutlet",e.nzSuffix)}}function je(t,a){if(t&1&&(r(0,"div",4),x(1,be,2,1,"span",5),d(2,"nz-statistic-number",6),x(3,Ae,2,1,"span",7),s()),t&2){let e=c();L(e.nzValueStyle),n(),v(e.nzPrefix?1:-1),n(),o("nzValue",e.nzValue)("nzValueTemplate",e.nzValueTemplate),n(),v(e.nzSuffix?3:-1)}}function Le(t,a){if(t&1&&(l(0),B(1,"nzTimeRange")),t&2){let e=c();m(G(1,1,e.diff,e.nzFormat))}}var ke=(()=>{class t{nzValue;nzValueTemplate;displayInt="";displayDecimal="";locale_id=g($);ngOnChanges(){this.formatNumber()}formatNumber(){let e=typeof this.nzValue=="number"?".":Z(this.locale_id,W.Decimal),i=String(this.nzValue),[p,z]=i.split(e);this.displayInt=p,this.displayDecimal=z?`${e}${z}`:""}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=y({type:t,selectors:[["nz-statistic-number"]],inputs:{nzValue:"nzValue",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatisticNumber"],features:[E],decls:3,vars:1,consts:[[1,"ant-statistic-content-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-statistic-content-value-int"],[1,"ant-statistic-content-value-decimal"]],template:function(i,p){i&1&&(r(0,"span",0),x(1,Pe,1,4,"ng-container",1)(2,Ve,2,2),s()),i&2&&(n(),v(p.nzValueTemplate?1:2))},dependencies:[J],encapsulation:2,changeDetection:0})}return t})(),S=(()=>{class t{nzPrefix;nzSuffix;nzTitle;nzValue;nzValueStyle={};nzValueTemplate;nzLoading=!1;dir="ltr";cdr=g(H);destroyRef=g(V);directionality=g(Y);ngOnInit(){this.directionality.change?.pipe(Q(this.destroyRef)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=y({type:t,selectors:[["nz-statistic"]],hostAttrs:[1,"ant-statistic"],hostVars:2,hostBindings:function(i,p){i&2&&j("ant-statistic-rtl",p.dir==="rtl")},inputs:{nzPrefix:"nzPrefix",nzSuffix:"nzSuffix",nzTitle:"nzTitle",nzValue:"nzValue",nzValueStyle:"nzValueStyle",nzValueTemplate:"nzValueTemplate",nzLoading:[2,"nzLoading","nzLoading",q]},exportAs:["nzStatistic"],decls:4,vars:2,consts:[[1,"ant-statistic-title"],[4,"nzStringTemplateOutlet"],[1,"ant-statistic-skeleton",3,"nzParagraph"],[1,"ant-statistic-content",3,"style"],[1,"ant-statistic-content"],[1,"ant-statistic-content-prefix"],[3,"nzValue","nzValueTemplate"],[1,"ant-statistic-content-suffix"]],template:function(i,p){i&1&&(r(0,"div",0),u(1,Oe,2,1,"ng-container",1),s(),x(2,Fe,1,1,"nz-skeleton",2)(3,je,4,6,"div",3)),i&2&&(n(),o("nzStringTemplateOutlet",p.nzTitle),n(),v(p.nzLoading?2:3))},dependencies:[ce,pe,ke,ne,te],encapsulation:2,changeDetection:0})}return t})(),Be=1e3/30,Ge=(()=>{class t extends S{ngZone=g(b);platform=g(X);nzFormat="HH:mm:ss";nzCountdownFinish=new I;diff;target=0;intervalId=null;constructor(){super(),this.destroyRef.onDestroy(()=>{this.stopTimer()})}ngOnChanges(e){let{nzValue:i}=e;i&&(this.target=Number(i.currentValue),i.isFirstChange()||this.syncTimer())}ngOnInit(){super.ngOnInit(),this.syncTimer()}syncTimer(){this.target>=Date.now()?this.startTimer():this.stopTimer()}startTimer(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.stopTimer(),this.intervalId=setInterval(()=>{this.updateValue(),this.cdr.detectChanges()},Be)})}stopTimer(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}updateValue(){this.diff=Math.max(this.target-Date.now(),0),this.diff===0&&(this.stopTimer(),this.nzCountdownFinish.observers.length&&this.ngZone.run(()=>this.nzCountdownFinish.emit()))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=y({type:t,selectors:[["nz-countdown"]],inputs:{nzFormat:"nzFormat"},outputs:{nzCountdownFinish:"nzCountdownFinish"},exportAs:["nzCountdown"],features:[F,E],decls:3,vars:6,consts:[["countDownTpl",""],[3,"nzValue","nzValueStyle","nzValueTemplate","nzTitle","nzPrefix","nzSuffix"]],template:function(i,p){if(i&1&&(d(0,"nz-statistic",1),u(1,Le,2,4,"ng-template",null,0,D)),i&2){let z=A(2);o("nzValue",p.diff)("nzValueStyle",p.nzValueStyle)("nzValueTemplate",p.nzValueTemplate||z)("nzTitle",p.nzTitle)("nzPrefix",p.nzPrefix)("nzSuffix",p.nzSuffix)}},dependencies:[S,_e,Se],encapsulation:2,changeDetection:0})}return t})(),he=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=h({type:t});static \u0275inj=_({imports:[S,Ge]})}return t})();function He(t,a){if(t&1&&(r(0,"div",17)(1,"div",18)(2,"span"),l(3),s(),r(4,"div",19)(5,"span"),l(6),s(),r(7,"nz-tag",20),l(8),s()()(),d(9,"nz-progress",21),r(10,"div",22),l(11),s()()),t&2){let e=a.$implicit,i=c();n(3),m(e.name),n(3),f("",e.progress,"%"),n(),o("nzColor",i.getSafetyColor(e.safetyLevel)),n(),f(" ",i.getSafetyText(e.safetyLevel)," "),n(),o("nzPercent",e.progress),n(2),f("\u5B8C\u5DE5\u671F\u9650\uFF1A",e.dueDate)}}function qe(t,a){if(t&1&&(r(0,"nz-list-item")(1,"div",23)(2,"div",24),l(3),r(4,"nz-tag",20),l(5),s()(),r(6,"div",25)(7,"span"),l(8),s(),r(9,"nz-tag",20),l(10),s(),r(11,"span"),l(12),s()()()()),t&2){let e=a.$implicit,i=c();n(3),f(" ",e.title," "),n(),o("nzColor",i.getTypeColor(e.type)),n(),f(" ",i.getTypeText(e.type)," "),n(3),f("\u6AA2\u67E5\u54E1\uFF1A",e.inspector),n(),o("nzColor",i.getStatusColor(e.status)),n(),f(" ",i.getStatusText(e.status)," "),n(2),m(e.time)}}function We(t,a){if(t&1&&(r(0,"nz-col",3)(1,"div",26)(2,"div",27),d(3,"nz-avatar",28),r(4,"nz-tag",20),l(5),s()(),r(6,"div",29)(7,"div",30),l(8),s(),r(9,"div",31),l(10),s(),r(11,"div",32),l(12),s()()()()),t&2){let e=a.$implicit,i=c();o("nzSpan",6),n(3),o("nzSize",48)("nzText",e.name.charAt(0)),n(),o("nzColor",e.status==="on-site"?"green":"red"),n(),f(" ",e.status==="on-site"?"\u5728\u5834":"\u96E2\u5834"," "),n(3),m(e.name),n(2),m(i.getRoleText(e.role)),n(2),m(e.phone)}}var C=class C{constructor(){this.constructionProjects=[{name:"\u4E3B\u9AD4\u7D50\u69CB\u65BD\u5DE5",progress:75,dueDate:"2024-03-15",safetyLevel:"high"},{name:"\u6A5F\u96FB\u8A2D\u5099\u5B89\u88DD",progress:45,dueDate:"2024-04-01",safetyLevel:"medium"},{name:"\u5916\u7246\u88DD\u4FEE",progress:90,dueDate:"2024-02-28",safetyLevel:"high"},{name:"\u5BA4\u5167\u88DD\u4FEE",progress:30,dueDate:"2024-05-15",safetyLevel:"low"}];this.safetyRecords=[{title:"\u9AD8\u7A7A\u4F5C\u696D\u5B89\u5168\u6AA2\u67E5",inspector:"\u738B\u516C\u5B89",time:"2\u5C0F\u6642\u524D",status:"passed",type:"safety"},{title:"\u92FC\u7B4B\u7D81\u7D2E\u54C1\u8CEA\u6AA2\u67E5",inspector:"\u674E\u76E3\u5DE5",time:"4\u5C0F\u6642\u524D",status:"passed",type:"quality"},{title:"\u74B0\u5883\u566A\u97F3\u6AA2\u6E2C",inspector:"\u5F35\u74B0\u4FDD",time:"1\u5929\u524D",status:"pending",type:"environment"},{title:"\u8D77\u91CD\u6A5F\u5B89\u5168\u6AA2\u67E5",inspector:"\u9673\u516C\u5B89",time:"2\u5929\u524D",status:"failed",type:"safety"}];this.sitePersonnel=[{role:"safety",name:"\u738B\u516C\u5B89",phone:"0912-345-678",status:"on-site"},{role:"supervisor",name:"\u674E\u76E3\u5DE5",phone:"0923-456-789",status:"on-site"},{role:"manager",name:"\u5F35\u8CA0\u8CAC\u4EBA",phone:"0934-567-890",status:"on-site"},{role:"safety",name:"\u9673\u516C\u5B89",phone:"0945-678-901",status:"off-site"},{role:"supervisor",name:"\u5289\u76E3\u5DE5",phone:"0956-789-012",status:"on-site"},{role:"worker",name:"\u9EC3\u5E2B\u5085",phone:"0967-890-123",status:"on-site"}]}getSafetyColor(a){return{high:"green",medium:"orange",low:"red"}[a]||"default"}getSafetyText(a){return{high:"\u5B89\u5168",medium:"\u6CE8\u610F",low:"\u5371\u96AA"}[a]||"\u672A\u77E5"}getStatusColor(a){return{passed:"green",failed:"red",pending:"orange"}[a]||"default"}getStatusText(a){return{passed:"\u901A\u904E",failed:"\u4E0D\u5408\u683C",pending:"\u5F85\u6AA2\u67E5"}[a]||"\u672A\u77E5"}getTypeColor(a){return{safety:"red",quality:"blue",environment:"green"}[a]||"default"}getTypeText(a){return{safety:"\u5B89\u5168",quality:"\u54C1\u8CEA",environment:"\u74B0\u4FDD"}[a]||"\u672A\u77E5"}getRoleText(a){return{safety:"\u516C\u5B89",supervisor:"\u76E3\u5DE5",manager:"\u8CA0\u8CAC\u4EBA",worker:"\u5DE5\u4EBA"}[a]||"\u672A\u77E5"}};C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=y({type:C,selectors:[["app-workspace-overview"]],decls:28,vars:19,consts:[["item",""],[1,"overview"],[1,"stats",3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u65BD\u5DE5\u9032\u5EA6","nzSuffix","%","nzPrefix","\u{1F3D7}\uFE0F",3,"nzValue"],["nzTitle","\u5B89\u5168\u6AA2\u67E5","nzSuffix","%","nzPrefix","\u{1F6E1}\uFE0F",3,"nzValue"],["nzTitle","\u73FE\u5834\u4EBA\u54E1","nzPrefix","\u{1F477}",3,"nzValue"],["nzTitle","\u5DE5\u5B89\u4E8B\u6545","nzPrefix","\u26A0\uFE0F",3,"nzValue"],[1,"content",3,"nzGutter"],["nzTitle","\u65BD\u5DE5\u9032\u5EA6"],["class","project-item",4,"ngFor","ngForOf"],["nzTitle","\u5B89\u5168\u6AA2\u67E5\u8A18\u9304"],[3,"nzDataSource","nzSize"],[1,"personnel",3,"nzGutter"],["nzTitle","\u5DE5\u5730\u4EBA\u54E1"],[3,"nzGutter"],[3,"nzSpan",4,"ngFor","ngForOf"],[1,"project-item"],[1,"project-header"],[1,"project-info"],[3,"nzColor"],[3,"nzPercent"],[1,"project-due"],[1,"safety-item"],[1,"safety-title"],[1,"safety-meta"],[1,"personnel-card"],[1,"personnel-avatar"],[3,"nzSize","nzText"],[1,"personnel-info"],[1,"personnel-name"],[1,"personnel-role"],[1,"personnel-phone"]],template:function(e,i){e&1&&(r(0,"div",1)(1,"nz-row",2)(2,"nz-col",3)(3,"nz-card"),d(4,"nz-statistic",4),s()(),r(5,"nz-col",3)(6,"nz-card"),d(7,"nz-statistic",5),s()(),r(8,"nz-col",3)(9,"nz-card"),d(10,"nz-statistic",6),s()(),r(11,"nz-col",3)(12,"nz-card"),d(13,"nz-statistic",7),s()()(),r(14,"nz-row",8)(15,"nz-col",3)(16,"nz-card",9),u(17,He,12,6,"div",10),s()(),r(18,"nz-col",3)(19,"nz-card",11)(20,"nz-list",12),u(21,qe,13,7,"ng-template",null,0,D),s()()()(),r(23,"nz-row",13)(24,"nz-col",3)(25,"nz-card",14)(26,"nz-row",15),u(27,We,13,8,"nz-col",16),s()()()()()),e&2&&(n(),o("nzGutter",16),n(),o("nzSpan",6),n(2),o("nzValue",68),n(),o("nzSpan",6),n(2),o("nzValue",95),n(),o("nzSpan",6),n(2),o("nzValue",42),n(),o("nzSpan",6),n(2),o("nzValue",0),n(),o("nzGutter",16),n(),o("nzSpan",12),n(2),o("ngForOf",i.constructionProjects),n(),o("nzSpan",12),n(2),o("nzDataSource",i.safetyRecords)("nzSize","small"),n(3),o("nzGutter",16),n(),o("nzSpan",24),n(2),o("nzGutter",16),n(),o("ngForOf",i.sitePersonnel))},dependencies:[K,U,de,me,he,S,le,se,re,ye,ve,xe,ze,ge,ae,oe,fe,ue],styles:[".overview[_ngcontent-%COMP%]{padding:16px}.stats[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .personnel[_ngcontent-%COMP%], .project-item[_ngcontent-%COMP%]{margin-bottom:16px}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.project-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.project-due[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#666}.safety-item[_ngcontent-%COMP%]{width:100%}.safety-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.safety-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px;color:#666}.personnel-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;border:1px solid #f0f0f0;border-radius:6px;margin-bottom:8px}.personnel-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.personnel-info[_ngcontent-%COMP%]{flex:1}.personnel-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:2px}.personnel-role[_ngcontent-%COMP%]{font-size:12px;color:#1890ff;margin-bottom:2px}.personnel-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}"],changeDetection:0});var Te=C;export{Te as WorkspaceOverviewComponent};
