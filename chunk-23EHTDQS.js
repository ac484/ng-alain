import{b as j,c as k,d as H}from"./chunk-CRDHOHHP.js";import{a as L,b as q}from"./chunk-6LJAMMMB.js";import"./chunk-HGJ7CNUT.js";import{a as w,b as R}from"./chunk-4JD3AECT.js";import{f as W,g as $}from"./chunk-PLG4CJNN.js";import"./chunk-RAZE6Q3N.js";import"./chunk-W2YKWTW6.js";import"./chunk-CY6EXYGR.js";import"./chunk-YJMONC3A.js";import"./chunk-56KVT4S4.js";import"./chunk-RO5CAZDG.js";import"./chunk-I3H5DCHT.js";import"./chunk-IA67MZC2.js";import"./chunk-XRAWGIG7.js";import{h as D,q as O,s as A,t as N}from"./chunk-557TQC7D.js";import"./chunk-EIQVRW2S.js";import{Cd as b,Dd as I,Id as B,Ld as F,Md as T,Nc as d,Pb as c,Pc as f,Qb as t,Qc as C,Rb as e,Rc as E,Sb as S,Wb as g,Xb as x,be as M,db as a,dc as s,ib as v,nc as _,pb as h,sc as n,tc as p,uc as y,vb as m,wc as P}from"./chunk-A26OGSUO.js";import"./chunk-57BLH6QZ.js";function K(r,o){if(r&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),d(5,"currency"),e(),t(6,"td"),S(7,"nz-progress",21),n(8),e(),t(9,"td")(10,"nz-tag",8),n(11),e()(),t(12,"td")(13,"nz-tag",8),n(14),e()(),t(15,"td"),n(16),d(17,"date"),e()()),r&2){let i=o.$implicit;a(2),p(i.round),a(2),p(C(5,11,i.amount,"TWD","symbol","1.0-0")),a(3),c("nzPercent",i.progress)("nzSize","small")("nzShowInfo",!1),a(),y(" ",i.progress,"%"),a(2),c("nzColor",i.paymentStatus==="completed"?"success":"processing"),a(),p(i.paymentStatus),a(2),c("nzColor",i.status==="paid"?"success":"default"),a(),p(i.status==="paid"?"\u5DF2\u4ED8\u6B3E":"\u5F85\u4ED8\u6B3E"),a(2),p(f(17,16,i.date,"yyyy-MM-dd"))}}function Q(r,o){if(r&1&&(g(0),t(1,"table",20)(2,"thead")(3,"tr")(4,"th"),n(5,"\u8F2A\u6B21"),e(),t(6,"th"),n(7,"\u91D1\u984D"),e(),t(8,"th"),n(9,"\u9032\u5EA6"),e(),t(10,"th"),n(11,"\u8ACB\u6B3E\u72C0\u614B"),e(),t(12,"th"),n(13,"\u4ED8\u6B3E\u72C0\u614B"),e(),t(14,"th"),n(15,"\u65E5\u671F"),e()()(),t(16,"tbody"),m(17,K,18,19,"tr",19),e()(),x()),r&2){let i=s(2);a(17),c("ngForOf",i.contract.paymentRounds)}}function U(r,o){r&1&&(t(0,"div",22),n(1,"\u5C1A\u7121\u8ACB\u6B3E\u8CC7\u6599"),e())}function V(r,o){if(r&1&&(t(0,"tr")(1,"td")(2,"nz-tag",8),n(3),e()(),t(4,"td"),n(5),e(),t(6,"td"),n(7),d(8,"currency"),e(),t(9,"td"),n(10),e(),t(11,"td"),n(12),d(13,"date"),e()()),r&2){let i=o.$implicit;a(2),c("nzColor",i.type==="\u8FFD\u52A0"?"success":"error"),a(),p(i.type),a(2),p(i.description),a(2),p(C(8,6,i.amount,"TWD","symbol","1.0-0")),a(3),p(i.version),a(2),p(f(13,11,i.date,"yyyy-MM-dd"))}}function X(r,o){if(r&1&&(g(0),t(1,"table",20)(2,"thead")(3,"tr")(4,"th"),n(5,"\u985E\u578B"),e(),t(6,"th"),n(7,"\u63CF\u8FF0"),e(),t(8,"th"),n(9,"\u91D1\u984D"),e(),t(10,"th"),n(11,"\u7248\u672C"),e(),t(12,"th"),n(13,"\u65E5\u671F"),e()()(),t(14,"tbody"),m(15,V,14,14,"tr",19),e()(),x()),r&2){let i=s(2);a(15),c("ngForOf",i.contract.changes)}}function Y(r,o){r&1&&(t(0,"div",22),n(1,"\u5C1A\u7121\u8B8A\u66F4\u7D00\u9304"),e())}function Z(r,o){if(r&1&&(t(0,"li")(1,"span"),n(2),e(),t(3,"button",24),n(4,"\u9810\u89BD"),e(),t(5,"button",24),n(6,"\u4E0B\u8F09"),e()()),r&2){let i=o.$implicit;a(2),p(i.name)}}function tt(r,o){if(r&1&&(g(0),t(1,"ul",23),m(2,Z,7,1,"li",19),e(),x()),r&2){let i=s(2);a(2),c("ngForOf",i.contract.attachments)}}function et(r,o){r&1&&(t(0,"div",22),n(1,"\u5C1A\u7121\u9644\u4EF6"),e())}function nt(r,o){if(r&1&&(t(0,"li"),n(1),d(2,"date"),e()),r&2){let i=o.$implicit;a(),P("",f(2,3,i.date,"yyyy-MM-dd")," - ",i.reviewer," - ",i.status)}}function it(r,o){if(r&1&&(t(0,"nz-card",4)(1,"div",5)(2,"div",6),n(3),e(),t(4,"div",7)(5,"nz-tag",8),n(6),e(),t(7,"span"),n(8),d(9,"currency"),e(),t(10,"span"),n(11,"\u9032\u5EA6\uFF1A"),e(),S(12,"nz-progress",9),e(),t(13,"div",10)(14,"button",11),n(15,"\u7DE8\u8F2F"),e(),t(16,"button",12),n(17,"\u65B0\u589E\u8ACB\u6B3E"),e(),t(18,"button",12),n(19,"\u65B0\u589E\u8B8A\u66F4"),e(),t(20,"button",12),n(21,"\u4E0A\u50B3\u9644\u4EF6"),e(),t(22,"button",12),n(23,"\u5BE9\u6838"),e()()(),t(24,"nz-tabset")(25,"nz-tab",13),m(26,Q,18,1,"ng-container",14)(27,U,2,0,"ng-template",null,0,E),e(),t(29,"nz-tab",15),m(30,X,16,1,"ng-container",14)(31,Y,2,0,"ng-template",null,1,E),e(),t(33,"nz-tab",16),m(34,tt,3,1,"ng-container",14)(35,et,2,0,"ng-template",null,2,E),e(),t(37,"nz-tab",17)(38,"div",18)(39,"div"),n(40,"\u72C0\u614B\uFF1A"),t(41,"nz-tag",8),n(42),e()(),t(43,"div"),n(44,"\u5BE9\u6838\u6B77\u53F2\uFF1A "),t(45,"ul"),m(46,nt,3,6,"li",19),e()()()()()()),r&2){let i=_(28),z=_(32),J=_(36),l=s();c("nzLoading",l.loading),a(3),p(l.contract.title),a(2),c("nzColor",l.getStatusColor(l.contract.status)),a(),p(l.getStatusText(l.contract.status)),a(2),y("\u91D1\u984D\uFF1A",C(9,17,l.contract.currentAmount,"TWD","symbol","1.0-0")),a(4),c("nzPercent",l.contract.progress)("nzStatus",l.getProgressStatus(l.contract.progress))("nzStrokeWidth",12),a(14),c("ngIf",l.contract.paymentRounds==null?null:l.contract.paymentRounds.length)("ngIfElse",i),a(4),c("ngIf",l.contract.changes==null?null:l.contract.changes.length)("ngIfElse",z),a(4),c("ngIf",l.contract.attachments==null?null:l.contract.attachments.length)("ngIfElse",J),a(7),c("nzColor",l.getStatusColor(l.contract.status)),a(),p(l.getStatusText(l.contract.status)),a(4),c("ngForOf",l.contract.reviews)}}var u=class u{constructor(o){this.http=o;this.contractId="1";this.loading=!1}ngOnInit(){this.loadContract()}loadContract(){this.loading=!0,this.http.get(`/contract/${this.contractId}`).subscribe(o=>{this.contract=o,this.loading=!1})}getStatusColor(o){switch(o){case"draft":return"default";case"pending":return"processing";case"approved":return"success";case"rejected":return"error";default:return"default"}}getStatusText(o){switch(o){case"draft":return"\u8349\u7A3F";case"pending":return"\u5F85\u5BE9\u6838";case"approved":return"\u5DF2\u6838\u51C6";case"rejected":return"\u5DF2\u62D2\u7D55";default:return"\u672A\u77E5"}}getProgressStatus(o){return o>=100?"success":o>=80?"normal":o>=50?"active":"exception"}};u.\u0275fac=function(i){return new(i||u)(v(M))},u.\u0275cmp=h({type:u,selectors:[["app-contract-panel"]],decls:1,vars:1,consts:[["noPayment",""],["noChange",""],["noAttachment",""],[3,"nzLoading",4,"ngIf"],[3,"nzLoading"],[1,"panel-summary"],[1,"panel-title"],[1,"panel-meta"],[3,"nzColor"],[2,"width","120px",3,"nzPercent","nzStatus","nzStrokeWidth"],[1,"panel-actions"],["nz-button","","nzType","primary"],["nz-button",""],["nzTitle","\u8ACB\u6B3E\u6458\u8981"],[4,"ngIf","ngIfElse"],["nzTitle","\u8B8A\u66F4\u6458\u8981"],["nzTitle","\u9644\u4EF6"],["nzTitle","\u5BE9\u6838"],[1,"panel-review"],[4,"ngFor","ngForOf"],[1,"panel-table"],[3,"nzPercent","nzSize","nzShowInfo"],[1,"panel-empty"],[1,"panel-attachment-list"],["nz-button","","nzType","link","nzSize","small"]],template:function(i,z){i&1&&m(0,it,47,22,"nz-card",3),i&2&&c("ngIf",z.contract)},dependencies:[T,b,I,$,W,N,A,D,O,q,L,R,w,H,k,j,F,B],styles:[".panel-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.panel-title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.panel-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.panel-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.panel-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:8px}.panel-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .panel-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;padding:8px 4px;text-align:left}.panel-empty[_ngcontent-%COMP%]{color:#aaa;text-align:center;padding:24px 0}.panel-attachment-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.panel-attachment-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 0}.panel-review[_ngcontent-%COMP%]{margin-top:8px}"]});var G=u;export{G as ContractPanelComponent};
