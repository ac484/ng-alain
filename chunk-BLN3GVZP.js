import{a as Re,b as Le}from"./chunk-D6JK3T4V.js";import{a as Ae,b as A}from"./chunk-EGO2GFGW.js";import{a as Ve,b as Be,c as Fe}from"./chunk-PSN4D3OI.js";import{a as Se,b as De,c as Ie}from"./chunk-4QHTU5SW.js";import"./chunk-S6UFPMGG.js";import"./chunk-ERNLQ6N4.js";import"./chunk-VAGS5EVQ.js";import{a as ve}from"./chunk-6VOJMXI2.js";import"./chunk-JT66WZ5X.js";import{a as Te,b as Ne,c as ye,g as Oe,h as we,i as Ee}from"./chunk-2AMD6T43.js";import"./chunk-KI55LBZZ.js";import"./chunk-GG7OQ426.js";import{f as be,g as Me,h as ke,k as Pe}from"./chunk-RSNPD6EB.js";import{a as _e,c as fe,i as ge,j as Ce,k as xe}from"./chunk-F7UE2Z2N.js";import{a as ue,b as me}from"./chunk-W7K4RWW3.js";import"./chunk-GFX7JDKS.js";import"./chunk-YLV3GK25.js";import"./chunk-XH5LE7FZ.js";import"./chunk-5NDUH4BM.js";import"./chunk-7INLARAR.js";import"./chunk-3LZSSZ2Q.js";import{d as ce,g as se,m as de,y as pe}from"./chunk-4AYNG3KP.js";import"./chunk-Q6QAL4XK.js";import"./chunk-2HVL4WVD.js";import{a as ze,c as he}from"./chunk-ZDNPLYMC.js";import"./chunk-KR7JNVYJ.js";import"./chunk-H53TJUCR.js";import"./chunk-QBQXGPEE.js";import"./chunk-QRKJYL4P.js";import"./chunk-JE6KLO7C.js";import"./chunk-W5FC2PZ7.js";import"./chunk-TPNYXQ4U.js";import{h as oe,q as re,s as ae,t as le}from"./chunk-5PLKKHJ2.js";import{Nc as ne,Oc as ie}from"./chunk-Z6UJEHZN.js";import{n as W,p as J,r as X,s as Z,u as ee,y as te}from"./chunk-KF7OGFLI.js";import{Aa as u,B as L,Ba as m,C as j,Cc as I,Dc as V,Dd as H,Ec as B,Fb as K,Ic as h,Kc as F,Lb as g,Mc as U,Nc as d,Oc as T,Pc as x,R as $,bd as Y,ca as q,dd as G,fc as s,g as R,ga as Q,gc as l,gd as M,h as E,hc as a,hd as P,ic as z,id as N,kd as b,mc as S,nc as D,pc as C,sb as r,vc as _,yb as v,yc as p}from"./chunk-IDL4MXQM.js";import{a as O,b as w}from"./chunk-57BLH6QZ.js";var $e=["rootMenu"],qe=()=>[],Qe=(o,e)=>[o,e];function Ke(o,e){o&1&&z(0,"nz-icon",27)}function Ue(o,e){if(o&1&&(S(0),z(1,"nz-icon",31),l(2,"span",32),d(3),a(),l(4,"span",33),d(5),a(),l(6,"span",34),d(7),M(8,"lowercase"),a(),D()),o&2){let t=p(),n=t.$implicit,i=t.origin;r(3),T(n.title),r(),s("ngClass","task-"+(i.taskStatus||"pending")),r(),x(" ",i.taskStatus||"pending"," "),r(2),x("created by ",P(8,4,i.author))}}function Ye(o,e){if(o&1){let t=C();S(0),l(1,"nz-icon",35),_("click",function(){u(t);let i=p(2).$implicit,c=p();return m(c.openFolder(i))}),a(),l(2,"span",36),d(3),a(),D()}if(o&2){let t=p(2).$implicit;r(),s("nzType",t.isExpanded?"folder-open":"folder"),r(2),T(t.title)}}function Ge(o,e){if(o&1&&(z(0,"nz-icon",37),l(1,"span",38),d(2),a()),o&2){let t=p(2).$implicit;r(2),T(t.title)}}function He(o,e){if(o&1&&g(0,Ye,4,2,"ng-container",30)(1,Ge,3,1,"ng-template",null,7,b),o&2){let t=h(2),n=p().$implicit;s("ngIf",!n.isLeaf)("ngIfElse",t)}}function We(o,e){if(o&1){let t=C();l(0,"span",28)(1,"span",29),_("contextmenu",function(i){let c=u(t).$implicit,f=p(),y=h(19);return m(f.contextMenu(i,y,c))}),g(2,Ue,9,6,"ng-container",30)(3,He,3,2,"ng-template",null,6,b),a()()}if(o&2){let t=e.$implicit,n=e.origin,i=h(4),c=p();F("selected",(c.activatedNode==null?null:c.activatedNode.key)===t.key),r(2),s("ngIf",n.isTask)("ngIfElse",i)}}function Je(o,e){if(o&1){let t=C();l(0,"li",19),_("click",function(){u(t);let i=p();return m(i.addTask())}),d(1,"\u65B0\u589E\u4EFB\u52D9"),a()}}function Xe(o,e){if(o&1){let t=C();l(0,"li",19),_("click",function(){u(t);let i=p();return m(i.editNode())}),d(1,"\u7DE8\u8F2F\u7BC0\u9EDE"),a()}}function Ze(o,e){if(o&1){let t=C();l(0,"li",19),_("click",function(){u(t);let i=p();return m(i.deleteNode())}),d(1,"\u522A\u9664\u7BC0\u9EDE"),a()}}function et(o,e){if(o&1&&(l(0,"nz-descriptions-item",55)(1,"nz-tag",46),d(2),a()()),o&2){let t=p().ngIf,n=p();r(),s("nzColor",n.getStatusColor(t.status)),r(),x(" ",t.status," ")}}function tt(o,e){if(o&1&&(l(0,"nz-descriptions-item",56),d(1),M(2,"date"),a()),o&2){let t=p().ngIf;r(),x(" ",N(2,1,t.createdAt,"short")," ")}}function nt(o,e){if(o&1&&(l(0,"nz-descriptions-item",57),d(1),M(2,"date"),a()),o&2){let t=p().ngIf;r(),x(" ",N(2,1,t.updatedAt,"short")," ")}}function it(o,e){if(o&1){let t=C();l(0,"div",39)(1,"div",40)(2,"h3"),z(3,"nz-icon",41),d(4),a(),l(5,"button",42),_("click",function(){let i=u(t).ngIf,c=p();return m(c.onEditNodeRequested(i))}),z(6,"nz-icon",43),a()(),l(7,"nz-descriptions",44)(8,"nz-descriptions-item",45)(9,"nz-tag",46),d(10),a()(),g(11,et,3,2,"nz-descriptions-item",47)(12,tt,3,4,"nz-descriptions-item",48)(13,nt,3,4,"nz-descriptions-item",49),a(),l(14,"div",50)(15,"button",51),_("click",function(){let i=u(t).ngIf,c=p();return m(c.onAddChildRequested(i))}),z(16,"nz-icon",52),d(17," \u65B0\u589E\u5B50\u7BC0\u9EDE "),a(),l(18,"button",53),_("click",function(){let i=u(t).ngIf,c=p();return m(c.onAddTaskRequested(i))}),z(19,"nz-icon",54),d(20," \u65B0\u589E\u4EFB\u52D9 "),a()()()}if(o&2){let t=e.ngIf,n=p();r(3),s("nzType",n.getNodeIcon(t)),r(),x(" ",t.title," "),r(3),s("nzColumn",1),r(2),s("nzColor",n.getTypeColor(t.type)),r(),x(" ",n.getTypeLabel(t.type)," "),r(),s("ngIf",t.status),r(),s("ngIf",t.createdAt),r(),s("ngIf",t.updatedAt)}}function ot(o,e){o&1&&(l(0,"nz-empty",58)(1,"div"),d(2,"\u9EDE\u64CA\u5DE6\u5074\u6A39\u72C0\u7D50\u69CB\u4E2D\u7684\u4EFB\u4E00\u7BC0\u9EDE\u5373\u53EF\u67E5\u770B\u8A73\u7D30\u8CC7\u8A0A"),a()())}function rt(o,e){if(o&1){let t=C();l(0,"button",64),_("click",function(){u(t);let i=p().$implicit,c=p(2);return m(c.onEditNodeRequested(i))}),d(1," \u7DE8\u8F2F "),a()}}function at(o,e){if(o&1){let t=C();l(0,"button",65),_("click",function(){u(t);let i=p(3);return m(i.deleteNode())}),d(1," \u522A\u9664 "),a()}}function lt(o,e){if(o&1&&(l(0,"nz-list-item",63)(1,"nz-list-item-meta")(2,"nz-list-item-meta-title")(3,"span"),d(4),a()(),l(5,"nz-list-item-meta-description"),d(6),M(7,"date"),a()(),l(8,"nz-tag",46),d(9),a(),g(10,rt,2,0,"ng-template",null,9,b)(12,at,2,0,"ng-template",null,10,b),a()),o&2){let t=e.$implicit,n=h(11),i=h(13),c=p(2);s("nzActions",G(10,Qe,n,i)),r(3),U("task-title task-"+(t.taskStatus||"pending")),r(),x(" ",t.title," "),r(2),x(" \u5EFA\u7ACB\u65BC ",N(7,7,t.createdAt,"short")," "),r(2),s("nzColor",c.getTaskStatusColor(t.taskStatus||"pending")),r(),x(" ",c.getTaskStatusLabel(t.taskStatus||"pending")," ")}}function ct(o,e){if(o&1){let t=C();l(0,"div",59)(1,"div",60)(2,"h4"),d(3,"\u76F8\u95DC\u4EFB\u52D9"),a(),l(4,"button",61),_("click",function(){let i=u(t).ngIf,c=p();return m(c.onAddTaskRequested(i))}),z(5,"nz-icon",52),d(6," \u65B0\u589E\u4EFB\u52D9 "),a()(),l(7,"nz-list",62),g(8,lt,14,13,"ng-template",null,8,b),a()()}if(o&2){let t=e.ngIf,n=p();r(7),s("nzDataSource",n.getRelatedTasks(t.id))}}function st(o,e){o&1&&(l(0,"nz-empty",66)(1,"div"),d(2,"\u4EFB\u52D9\u5C07\u986F\u793A\u5728\u6B64\u5340\u57DF"),a()())}var k=class k{constructor(e,t,n){this.nzContextMenuService=e;this.crudService=t;this.cdr=n;this.searchValue="";this.contextNode=null;this.destroy$=new R;this.selectedNodeSubject=new E(null);this.searchSubject=new E("");this.leftPanelCollapsed=!1;this.selectedNodeForDetail$=this.selectedNodeSubject.asObservable();this.treeData$=j([this.crudService.getNodes(),this.searchSubject.asObservable().pipe($(300))]).pipe(L(([e,t])=>{let n=dt(e);return t?this.filterTree(n,t):n}),Q(this.destroy$),q(1))}ngOnInit(){this.searchSubject.next(this.searchValue)}ngAfterViewInit(){this.cdr.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.selectedNodeSubject.complete(),this.searchSubject.complete()}onSearchChange(e){this.searchValue=e,this.searchSubject.next(e)}filterTree(e,t){return t.trim()?e.filter(n=>this.matchesSearch(n,t)).map(n=>w(O({},n),{children:n.children?this.filterTree(n.children,t):[]})):e}matchesSearch(e,t){let n=e.title.toLowerCase().includes(t.toLowerCase()),i=e.children?.some(c=>this.matchesSearch(c,t));return n||!!i}activeNode(e){this.activatedNode=e.node;let t=e.node?.origin;this.selectedNodeSubject.next(t),this.cdr.markForCheck()}onLeftPanelCollapse(e){this.leftPanelCollapsed=e,this.cdr.markForCheck()}onEditNodeRequested(e){this.crud.showEditModal(e)}onAddChildRequested(e){this.crud.showAddModal(e.key)}onAddTaskRequested(e){this.addTaskToNode(e)}onTaskUpdated(e){this.cdr.markForCheck()}onAddTaskFromList(e){this.cdr.markForCheck()}addTaskToNode(e){let t=new Date().toISOString(),n=`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i={id:n,key:n,title:"\u65B0\u4EFB\u52D9",name:"\u65B0\u4EFB\u52D9",type:"leaf",isTask:!0,order:0,parentKey:e.key,createdAt:t,updatedAt:t};this.crudService.addNode(i).then(()=>{}).catch(c=>{console.error("\u65B0\u589E\u4EFB\u52D9\u5931\u6557:",c)})}openFolder(e){if(e instanceof ve)e.isExpanded=!e.isExpanded;else{let t=e.node;t&&(t.isExpanded=!t.isExpanded)}}onDrop(e){let t=e.dragNode,n=e.node;if(!t||!n)return;let i=n.key;this.crudService.updateNode(t.key,{parentKey:i,order:0}).then(()=>{}).catch(f=>{console.error("\u62D6\u66F3\u66F4\u65B0\u5931\u6557:",f)})}contextMenu(e,t,n){this.contextNode=n??null,this.nzContextMenuService.create(e,t)}onPanelContextMenu(e){e.target.closest(".ant-tree-node")||(e.preventDefault(),e.stopPropagation(),this.contextNode=null,this.rootMenu&&this.nzContextMenuService.create(e,this.rootMenu))}addNode(){this.crud.showAddModal(this.contextNode?.key)}editNode(){this.contextNode&&this.crud.showEditModal(this.contextNode.origin)}deleteNode(){this.contextNode&&this.crud.deleteNode(this.contextNode.origin)}addRootNode(){this.crud.showAddModal(null)}addTask(){if(!this.contextNode)return;let e=this.contextNode.origin;this.addTaskToNode(e)}selectDropdown(e){alert(e)}getNodeIcon(e){return e.isTask?"check-circle":e.type==="root"?"cluster":e.type==="branch"?"folder":"file"}getTypeColor(e){return{root:"purple",trunk:"blue",branch:"green",leaf:"orange"}[e]||"default"}getTypeLabel(e){return{root:"\u6839\u7BC0\u9EDE",trunk:"\u4E3B\u5E79",branch:"\u5206\u652F",leaf:"\u8449\u5B50\u7BC0\u9EDE"}[e]||e}getStatusColor(e){return e&&{active:"green",inactive:"gray",archived:"orange"}[e]||"default"}getRelatedTasks(e){return[]}getTaskStatusColor(e){return{pending:"orange","in-progress":"blue",completed:"green",cancelled:"red"}[e]||"default"}getTaskStatusLabel(e){return{pending:"\u5F85\u8FA6","in-progress":"\u9032\u884C\u4E2D",completed:"\u5DF2\u5B8C\u6210",cancelled:"\u5DF2\u53D6\u6D88"}[e]||e}};k.\u0275fac=function(t){return new(t||k)(v(xe),v(Ae),v(H))},k.\u0275cmp=K({type:k,selectors:[["app-tree-panel"]],viewQuery:function(t,n){if(t&1&&(I(A,5),I($e,5)),t&2){let i;V(i=B())&&(n.crud=i.first),V(i=B())&&(n.rootMenu=i.first)}},decls:40,vars:28,consts:[["suffixIcon",""],["nzTreeTemplate",""],["rootMenu","nzDropdownMenu"],["menu","nzDropdownMenu"],["noNodeSelected",""],["noTasksAvailable",""],["folderOrFile",""],["fileIcon",""],["item",""],["editAction",""],["deleteAction",""],[2,"height","calc(100vh - 100px)","min-height","600px","overflow","hidden",3,"nzLayout"],[3,"nzMin","nzMax","nzDefaultSize"],[1,"tree-exploration-panel"],[1,"search-input",3,"nzSuffix"],["type","text","nz-input","","placeholder","\u641C\u5C0B\u7BC0\u9EDE",3,"ngModelChange","ngModel"],[1,"tree-container"],["nzBlockNode","","nzDraggable","","nzVirtualHeight","calc(100vh - 180px)",3,"nzClick","nzDblClick","nzOnDrop","contextmenu","nzData","nzSearchValue","nzTreeTemplate"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","",3,"click",4,"ngIf"],[2,"height","100%","min-height","400px",3,"nzLayout"],[3,"nzMin","nzDefaultSize"],[1,"node-details-section"],["class","node-details",4,"ngIf","ngIfElse"],[1,"task-list-section"],["class","task-list",4,"ngIf","ngIfElse"],["nzType","search"],[1,"custom-node"],[3,"contextmenu"],[4,"ngIf","ngIfElse"],["nzType","check-circle",2,"color","#52c41a"],[1,"task-name"],[1,"task-status",3,"ngClass"],[1,"task-desc"],[3,"click","nzType"],[1,"folder-name"],["nzType","file"],[1,"file-name"],[1,"node-details"],[1,"details-header"],[3,"nzType"],["nz-button","","nzType","text",3,"click"],["nzType","edit"],["nzBordered","","nzSize","small",3,"nzColumn"],["nzTitle","\u985E\u578B"],[3,"nzColor"],["nzTitle","\u72C0\u614B",4,"ngIf"],["nzTitle","\u5EFA\u7ACB\u6642\u9593",4,"ngIf"],["nzTitle","\u66F4\u65B0\u6642\u9593",4,"ngIf"],[1,"actions-section"],["nz-button","","nzType","primary",3,"click"],["nzType","plus"],["nz-button","",3,"click"],["nzType","check-circle"],["nzTitle","\u72C0\u614B"],["nzTitle","\u5EFA\u7ACB\u6642\u9593"],["nzTitle","\u66F4\u65B0\u6642\u9593"],["nzNotFoundContent","\u8ACB\u9078\u64C7\u4E00\u500B\u7BC0\u9EDE\u67E5\u770B\u8A73\u60C5",1,"empty-state"],[1,"task-list"],[1,"task-header"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nzSize","small",3,"nzDataSource"],[3,"nzActions"],["nz-button","","nzType","link","nzSize","small",3,"click"],["nz-button","","nzType","link","nzSize","small","nzDanger","",3,"click"],["nzNotFoundContent","\u9078\u64C7\u7BC0\u9EDE\u4EE5\u67E5\u770B\u76F8\u95DC\u4EFB\u52D9",1,"empty-state"]],template:function(t,n){if(t&1){let i=C();z(0,"app-firebase-crud"),l(1,"nz-splitter",11)(2,"nz-splitter-panel",12)(3,"div",13)(4,"nz-input-group",14)(5,"input",15),_("ngModelChange",function(f){return u(i),m(n.onSearchChange(f))}),a()(),g(6,Ke,1,0,"ng-template",null,0,b),l(8,"div",16)(9,"nz-tree",17),M(10,"async"),_("nzClick",function(f){return u(i),m(n.activeNode(f))})("nzDblClick",function(f){return u(i),m(n.openFolder(f))})("nzOnDrop",function(f){return u(i),m(n.onDrop(f))})("contextmenu",function(f){return u(i),m(n.onPanelContextMenu(f))}),a()(),g(11,We,5,4,"ng-template",null,1,b),l(13,"nz-dropdown-menu",null,2)(15,"ul",18)(16,"li",19),_("click",function(){return u(i),m(n.addRootNode())}),d(17,"\u65B0\u589E\u6839\u7BC0\u9EDE"),a()()(),l(18,"nz-dropdown-menu",null,3)(20,"ul",18)(21,"li",19),_("click",function(){return u(i),m(n.addNode())}),d(22,"\u65B0\u589E\u7BC0\u9EDE"),a(),g(23,Je,2,0,"li",20)(24,Xe,2,0,"li",20)(25,Ze,2,0,"li",20),a()()()(),l(26,"nz-splitter-panel")(27,"nz-splitter",21)(28,"nz-splitter-panel",22)(29,"div",23),g(30,it,21,8,"div",24),M(31,"async"),g(32,ot,3,0,"ng-template",null,4,b),a()(),l(34,"nz-splitter-panel")(35,"div",25),g(36,ct,10,1,"div",26),M(37,"async"),g(38,st,3,0,"ng-template",null,5,b),a()()()()()}if(t&2){let i=h(7),c=h(12),f=h(33),y=h(39);r(),s("nzLayout","horizontal"),r(),s("nzMin",280)("nzMax",800)("nzDefaultSize",360),r(),F("collapsed",n.leftPanelCollapsed),r(),s("nzSuffix",i),r(),s("ngModel",n.searchValue),r(4),s("nzData",P(10,21,n.treeData$)??Y(27,qe))("nzSearchValue",n.searchValue)("nzTreeTemplate",c),r(14),s("ngIf",n.contextNode),r(),s("ngIf",n.contextNode),r(),s("ngIf",n.contextNode),r(2),s("nzLayout","vertical"),r(),s("nzMin",200)("nzDefaultSize","50%"),r(2),s("ngIf",P(31,23,n.selectedNodeForDetail$))("ngIfElse",f),r(6),s("ngIf",P(37,25,n.selectedNodeForDetail$))("ngIfElse",y)}},dependencies:[te,W,J,pe,ce,se,de,Le,Re,Ce,fe,_e,ge,ie,ne,Pe,be,ke,Me,A,Fe,Be,Ve,Ie,De,Se,me,ue,le,ae,oe,re,Ee,Oe,we,ye,Te,Ne,he,ze,X,Z,ee],styles:['.tree-exploration-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;border-right:1px solid #f0f0f0;transition:all .3s;min-width:280px;max-width:800px}.tree-exploration-panel.collapsed[_ngcontent-%COMP%]{min-width:60px;overflow:hidden}.toolbar[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #f0f0f0;background:#fafafa}.toolbar[_ngcontent-%COMP%]   .add-root-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;font-weight:500}.toolbar[_ngcontent-%COMP%]   .add-root-btn[_ngcontent-%COMP%]:hover{background:#e6f7ff;color:#1890ff}.search-input[_ngcontent-%COMP%]{margin:16px}.tree-container[_ngcontent-%COMP%]{flex:1;padding:0 16px 16px;overflow:hidden}nz-tree[_ngcontent-%COMP%]{overflow:hidden;height:100%}nz-tree[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]{background:transparent}nz-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{border-radius:4px;transition:all .2s}nz-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]:hover{background:#f5f5f5}nz-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper.ant-tree-node-selected[_ngcontent-%COMP%]{background:#e6f7ff;border:1px solid #91d5ff}.custom-node[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:4px 8px;line-height:28px;cursor:pointer;transition:all .2s}.custom-node.selected[_ngcontent-%COMP%]{font-weight:500}.custom-node[_ngcontent-%COMP%]   nz-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:14px}.file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:6px;font-size:14px;color:#262626}.folder-name[_ngcontent-%COMP%]{font-weight:500;color:#1890ff}.task-name[_ngcontent-%COMP%]{margin-left:6px;font-size:14px;font-weight:500}.task-status[_ngcontent-%COMP%]{margin-left:8px;padding:2px 6px;border-radius:10px;font-size:11px;font-weight:500;text-transform:uppercase}.task-status.task-pending[_ngcontent-%COMP%]{background:#fff7e6;color:#fa8c16;border:1px solid #ffd591}.task-status.task-in-progress[_ngcontent-%COMP%]{background:#e6f7ff;color:#1890ff;border:1px solid #91d5ff}.task-status.task-completed[_ngcontent-%COMP%]{background:#f6ffed;color:#52c41a;border:1px solid #b7eb8f}.task-status.task-cancelled[_ngcontent-%COMP%]{background:#fff2f0;color:#ff4d4f;border:1px solid #ffccc7}.task-desc[_ngcontent-%COMP%]{margin-left:8px;font-size:12px;color:#8c8c8c;font-style:italic}.resizer-handle[_ngcontent-%COMP%]{background:#f0f0f0;position:relative}.resizer-handle[_ngcontent-%COMP%]:before{content:"";position:absolute;background:#d9d9d9}.resizer-handle[_ngcontent-%COMP%]:hover{background:#e6f7ff}.resizer-handle[_ngcontent-%COMP%]:hover:before{background:#1890ff}.vertical-resizer[_ngcontent-%COMP%]{width:4px;cursor:ew-resize}.vertical-resizer[_ngcontent-%COMP%]:before{top:50%;left:50%;transform:translate(-50%,-50%);width:2px;height:40px}.horizontal-resizer[_ngcontent-%COMP%]{height:4px;cursor:ns-resize;margin:8px 0}.horizontal-resizer[_ngcontent-%COMP%]:before{top:50%;left:50%;transform:translate(-50%,-50%);height:2px;width:40px}.details-analysis-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;min-width:300px}.node-details-section[_ngcontent-%COMP%]{height:100%;padding:20px;border-bottom:1px solid #f0f0f0;overflow-y:auto}.node-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid #f0f0f0}.node-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#262626;display:flex;align-items:center;gap:8px}.node-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   nz-icon[_ngcontent-%COMP%]{font-size:20px;color:#1890ff}.node-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#8c8c8c}.node-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1890ff;background:#f0f9ff}.node-details[_ngcontent-%COMP%]   nz-descriptions[_ngcontent-%COMP%]{margin-bottom:20px}.node-details[_ngcontent-%COMP%]   .actions-section[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:16px}.node-details[_ngcontent-%COMP%]   .actions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:40px;border-radius:6px;font-weight:500;display:flex;align-items:center;justify-content:center;gap:8px}.node-details[_ngcontent-%COMP%]   .actions-section[_ngcontent-%COMP%]   button[nztype=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,#1890ff,#096dd9);border:none}.node-details[_ngcontent-%COMP%]   .actions-section[_ngcontent-%COMP%]   button[nztype=primary][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40a9ff,#1890ff);transform:translateY(-1px);box-shadow:0 4px 12px #1890ff4d}.task-list-section[_ngcontent-%COMP%]{height:100%;padding:20px;overflow-y:auto}.task-list[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #f0f0f0}.task-list[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#262626}.task-list[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:32px;border-radius:6px;font-size:12px}.task-list[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1890ff4d}.task-list[_ngcontent-%COMP%]   nz-list[_ngcontent-%COMP%]   .ant-list-item[_ngcontent-%COMP%]{margin-bottom:8px;padding:12px}.task-list[_ngcontent-%COMP%]   nz-list[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.empty-state[_ngcontent-%COMP%]{padding:40px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   .ant-empty-description[_ngcontent-%COMP%]{color:#8c8c8c;font-size:14px}@media (max-width: 1200px){.tree-exploration-panel[_ngcontent-%COMP%]{min-width:280px}}@media (max-width: 768px){.tree-exploration-panel[_ngcontent-%COMP%]{min-width:200px;border-right:none;border-bottom:1px solid #f0f0f0}.details-analysis-panel[_ngcontent-%COMP%]{min-height:400px}.node-details-section[_ngcontent-%COMP%], .task-list-section[_ngcontent-%COMP%]{min-height:200px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.node-details[_ngcontent-%COMP%], .task-list[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease}.tree-container[_ngcontent-%COMP%]::-webkit-scrollbar, .node-details-section[_ngcontent-%COMP%]::-webkit-scrollbar, .task-list-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.tree-container[_ngcontent-%COMP%]::-webkit-scrollbar-track, .node-details-section[_ngcontent-%COMP%]::-webkit-scrollbar-track, .task-list-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:3px}.tree-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .node-details-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .task-list-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d9d9d9;border-radius:3px}.tree-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .node-details-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .task-list-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#bfbfbf}'],changeDetection:0});var je=k;function dt(o){let e=new Map,t=[];return o.forEach(n=>{e.set(n.key,w(O({},n),{children:[],isLeaf:n.type==="leaf"||n.isTask||!1,expanded:!1,selected:!1}))}),e.forEach(n=>{let i=n.parentKey;i&&e.has(i)?e.get(i).children.push(n):t.push(n)}),t}export{je as TreePanelComponent};
