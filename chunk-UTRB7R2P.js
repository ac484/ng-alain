import"./chunk-2LN4EHZF.js";import"./chunk-KRG23TDB.js";import{b as L}from"./chunk-YAMUXADI.js";import"./chunk-I2RAQBWN.js";import"./chunk-AF73PXIT.js";import"./chunk-LRIKAP6Q.js";import{d as k,e as E}from"./chunk-N6FWTAY6.js";import"./chunk-EN66NFTF.js";import"./chunk-T5MCIH7C.js";import{g as _,h as I}from"./chunk-SSVHKAP3.js";import"./chunk-RBQJB5J6.js";import"./chunk-6NWUZ65L.js";import{c as U}from"./chunk-J6PITLOE.js";import"./chunk-DG4OKOF5.js";import"./chunk-SEOFM5BO.js";import"./chunk-XNHGXBRR.js";import{c as V}from"./chunk-5MJX7RAE.js";import{k as T}from"./chunk-IEIGPFXF.js";import"./chunk-LVRF6LE6.js";import"./chunk-GFRFZT36.js";import"./chunk-XY7ZTW3N.js";import"./chunk-2QP5ASAP.js";import"./chunk-P65TELVZ.js";import"./chunk-7Y7RPWKD.js";import"./chunk-4YTDYDIC.js";import"./chunk-L7MYJ753.js";import{b as O}from"./chunk-NB2WFYBW.js";import"./chunk-2SMWRKZV.js";import{d as F}from"./chunk-2WTG2XMQ.js";import"./chunk-OBGYZQEU.js";import"./chunk-AW7N2FUZ.js";import"./chunk-SVONCNS6.js";import"./chunk-VKW3WH5F.js";import"./chunk-75AQQ352.js";import"./chunk-BB66XR64.js";import"./chunk-2M5CHBKO.js";import"./chunk-AHBW3B6E.js";import"./chunk-23I64B73.js";import"./chunk-PCDTQVOY.js";import"./chunk-OW7234XQ.js";import"./chunk-OG6J75NL.js";import"./chunk-QJMKMVSR.js";import"./chunk-ZYDPBZFO.js";import"./chunk-QESUVVYF.js";import{f as $,g as B}from"./chunk-VKEWEKUN.js";import{h as S,q as z,s as M,t as P}from"./chunk-3RRHG5WX.js";import"./chunk-LRVALGQA.js";import"./chunk-LBUPYOOJ.js";import"./chunk-YIOOD6AO.js";import{A as N}from"./chunk-7CV657US.js";import{B as v,Ba as d,Ca as m,Gb as C,Oc as w,Ta as b,cd as h,gc as D,h as s,hc as u,ic as p,jc as g,pa as A,qc as x,tb as y,u as c,ua as l,wc as f}from"./chunk-ARNVYSUA.js";import"./chunk-57BLH6QZ.js";var n=class n extends L{constructor(){super(...arguments);this.users$=new s([]);this.loading$=new s(!1)}getAccounts(){return this.loading$.next(!0),this.getAllUsers().pipe(v(e=>{let o=e.map(i=>({id:i.uid,displayName:i.displayName||"\u672A\u547D\u540D\u7528\u6236",email:i.email||"",status:i.isActive?"active":"inactive",avatar:i.photoURL||void 0,role:i.role||"\u4E00\u822C\u7528\u6236",department:"\u672A\u5206\u914D",lastLogin:i.lastLoginAt?new Date(i.lastLoginAt):void 0,createdAt:i.createdAt?new Date(i.createdAt):new Date}));return this.users$.next(e),this.loading$.next(!1),o}))}deleteAccount(e){return c(Promise.resolve())}batchUpdateStatus(e,o){return c(Promise.resolve())}loadUsers(e){this.loading$.next(!0),this.getAllUsers().subscribe({next:o=>{this.users$.next(o),this.loading$.next(!1)},error:()=>this.loading$.next(!1)})}};n.\u0275fac=(()=>{let e;return function(i){return(e||(e=b(n)))(i||n)}})(),n.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"});var a=n;var R=()=>({show:!0,showSize:!0}),W=()=>({method:"GET"}),r=class r{constructor(){this.message=l(F);this.accountService=l(a);this.total=0;this.columns=[{title:"\u7528\u6236",index:"displayName",width:200,render:"user",fixed:"left"},{title:"\u90F5\u7BB1",index:"email",width:200},{title:"\u72C0\u614B",index:"status",width:100,render:"status"},{title:"\u89D2\u8272",index:"role",width:120},{title:"\u90E8\u9580",index:"department",width:120},{title:"\u6700\u5F8C\u767B\u5165",index:"lastLogin",type:"date",width:150},{title:"\u5EFA\u7ACB\u6642\u9593",index:"createdAt",type:"date",width:150},{title:"\u64CD\u4F5C",width:200,fixed:"right",buttons:[{text:"\u7DE8\u8F2F",type:"link",click:t=>this.editAccount(t)},{text:"\u522A\u9664",type:"del",pop:!0,click:t=>this.deleteAccount(t)}]}]}ngOnInit(){this.loadAccounts()}loadAccounts(){this.accountService.getAccounts().subscribe({next:t=>{this.total=t.length},error:t=>{this.message.error("\u8F09\u5165\u5E33\u865F\u5217\u8868\u5931\u6557"),console.error("Load accounts error:",t)}})}addAccount(){this.message.info("\u65B0\u589E\u5E33\u865F\u529F\u80FD\u958B\u767C\u4E2D...")}editAccount(t){this.message.info(`\u7DE8\u8F2F\u5E33\u865F: ${t.displayName}`)}deleteAccount(t){this.accountService.deleteAccount(t.id).subscribe({next:()=>{this.message.success("\u5E33\u865F\u522A\u9664\u6210\u529F"),this.loadAccounts()},error:e=>{this.message.error("\u5E33\u865F\u522A\u9664\u5931\u6557"),console.error("Delete account error:",e)}})}stChange(t){console.log("ST change:",t)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=C({type:r,selectors:[["system-account-list"]],decls:8,vars:7,consts:[["st",""],["title","\u5E33\u865F\u7BA1\u7406","subtitle","\u7BA1\u7406\u7CFB\u7D71\u7528\u6236\u5E33\u865F"],[1,"mb-4"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"change","data","columns","total","page","req"]],template:function(e,o){if(e&1){let i=x();g(0,"page-header",1),u(1,"nz-card")(2,"div",2)(3,"button",3),f("click",function(){return d(i),m(o.addAccount())}),g(4,"span",4),w(5," \u65B0\u589E\u5E33\u865F "),p()(),u(6,"st",5,0),f("change",function(H){return d(i),m(o.stChange(H))}),p()()}e&2&&(y(6),D("data",o.accountService.getAccounts())("columns",o.columns)("total",o.total)("page",h(5,R))("req",h(6,W)))},dependencies:[N,E,k,I,_,B,$,P,M,S,z,T,U,O,V],styles:[".mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.status-active[_ngcontent-%COMP%]{color:#52c41a}.status-inactive[_ngcontent-%COMP%]{color:#ff4d4f}.status-pending[_ngcontent-%COMP%]{color:#faad14}"],changeDetection:0});var j=r;export{j as AccountListComponent};
