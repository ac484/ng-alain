import{a as Z,b as tt,c as et}from"./chunk-3C7P7P5B.js";import{a as X,b as Y}from"./chunk-5VKLNXAL.js";import{f as W,i as $,k as q,m as G,n as J,o as K,q as L}from"./chunk-NCOKEU53.js";import{e as O,f as j}from"./chunk-QSPVGXGB.js";import"./chunk-ATEC24AJ.js";import{Ja as r,Lc as B,Mb as S,Oa as f,Qa as h,Qc as I,Rb as i,Rh as P,Sb as o,Sh as k,Tb as y,Tc as _,Th as w,Uc as A,Wa as E,_h as V,ai as R,bi as H,ec as F,gd as N,jc as u,lc as p,ma as C,mb as c,mc as d,na as D,nb as e,ob as n,pb as T,td as x,tj as Q,uj as U,wb as b,xd as M,zb as v}from"./chunk-2RGJ5SZT.js";import"./chunk-57BLH6QZ.js";var nt=()=>[];function rt(z,l){if(z&1&&(e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),u(5,"currency"),n(),e(6,"td")(7,"nz-tag",10),i(8),n()(),e(9,"td"),i(10),u(11,"date"),n()()),z&2){let a=l.$implicit;r(2),o(a.round),r(2),o(d(5,5,a.amount,"TWD","symbol","1.0-0")),r(3),c("nzColor",a.status==="paid"?"success":"processing"),r(),y(" ",a.status==="paid"?"\u5DF2\u4ED8\u6B3E":"\u5F85\u4ED8\u6B3E"," "),r(2),o(p(11,10,a.date,"yyyy-MM-dd"))}}function at(z,l){if(z&1&&(e(0,"tr")(1,"td")(2,"nz-tag",10),i(3),n()(),e(4,"td"),i(5),n(),e(6,"td"),i(7),u(8,"currency"),n(),e(9,"td"),i(10),n(),e(11,"td"),i(12),u(13,"date"),n()()),z&2){let a=l.$implicit;r(2),c("nzColor",a.type==="\u8FFD\u52A0"?"success":"error"),r(),y(" ",a.type," "),r(2),o(a.description),r(2),o(d(8,6,a.amount,"TWD","symbol","1.0-0")),r(3),o(a.version),r(2),o(p(13,11,a.date,"yyyy-MM-dd"))}}var s=class s{constructor(l,a,t){this.route=l;this.router=a;this.http=t}ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l&&this.loadContractDetail(l)}loadContractDetail(l){this.http.get(`/contract/${l}`).subscribe(a=>{this.contract=a})}getStatusColor(l){switch(l){case"draft":return"default";case"pending":return"processing";case"approved":return"success";case"rejected":return"error";default:return"default"}}getStatusText(l){switch(l){case"draft":return"\u8349\u7A3F";case"pending":return"\u5F85\u5BE9\u6838";case"approved":return"\u5DF2\u6838\u51C6";case"rejected":return"\u5DF2\u62D2\u7D55";default:return"\u672A\u77E5"}}editContract(){this.contract&&this.router.navigate(["/contract/edit",this.contract.id])}goBack(){this.router.navigate(["/contract/list"])}getProgressStatus(l){return l>=100?"success":l>=80?"normal":l>=50?"active":"exception"}requestPayment(){this.router.navigate(["/contract/payment",this.contract?.id])}addChange(){this.router.navigate(["/contract/change",this.contract?.id])}};s.\u0275fac=function(a){return new(a||s)(f(x),f(M),f(N))},s.\u0275cmp=h({type:s,selectors:[["app-contract-detail"]],decls:82,vars:54,consts:[["paymentTable",""],["changeTable",""],["title","\u5408\u7D04\u8A73\u60C5"],["nzTitle","\u57FA\u672C\u8CC7\u8A0A","nzBordered","",3,"nzColumn"],["nzTitle","\u5408\u7D04\u6A19\u984C"],["nzTitle","\u5BA2\u6236\u540D\u7A31"],["nzTitle","\u539F\u59CB\u91D1\u984D"],["nzTitle","\u8B8A\u66F4\u91D1\u984D"],["nzTitle","\u73FE\u884C\u91D1\u984D"],["nzTitle","\u5408\u7D04\u72C0\u614B"],[3,"nzColor"],["nzTitle","\u958B\u59CB\u65E5\u671F"],["nzTitle","\u7D50\u675F\u65E5\u671F"],["nzTitle","\u5EFA\u7ACB\u65E5\u671F"],["nzTitle","\u66F4\u65B0\u65E5\u671F"],["nzTitle","\u5408\u7D04\u63CF\u8FF0",3,"nzSpan"],["nzTitle","\u7248\u672C\u865F"],["nzTitle","\u8B8A\u66F4\u7248\u672C\u865F"],["nzTitle","\u9032\u5EA6"],["title","\u9032\u5EA6\u6458\u8981",2,"margin-top","16px"],[3,"nzPercent","nzStatus"],["title","\u8ACB\u6B3E\u8F2A\u6B21",2,"margin-top","16px"],[3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["title","\u5408\u7D04\u8B8A\u66F4",2,"margin-top","16px"],[2,"margin-top","16px"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-button","",3,"click"]],template:function(a,t){if(a&1){let m=b();e(0,"nz-card",2)(1,"nz-descriptions",3)(2,"nz-descriptions-item",4),i(3),n(),e(4,"nz-descriptions-item",5),i(5),n(),e(6,"nz-descriptions-item",6),i(7),u(8,"currency"),n(),e(9,"nz-descriptions-item",7),i(10),u(11,"currency"),n(),e(12,"nz-descriptions-item",8),i(13),u(14,"currency"),n(),e(15,"nz-descriptions-item",9)(16,"nz-tag",10),i(17),n()(),e(18,"nz-descriptions-item",11),i(19),u(20,"date"),n(),e(21,"nz-descriptions-item",12),i(22),u(23,"date"),n(),e(24,"nz-descriptions-item",13),i(25),u(26,"date"),n(),e(27,"nz-descriptions-item",14),i(28),u(29,"date"),n(),e(30,"nz-descriptions-item",15),i(31),n(),e(32,"nz-descriptions-item",16),i(33),n(),e(34,"nz-descriptions-item",17),i(35),n(),e(36,"nz-descriptions-item",18),i(37),n()(),e(38,"nz-card",19),T(39,"nz-progress",20),n(),e(40,"nz-card",21)(41,"nz-table",22,0)(43,"thead")(44,"tr")(45,"th"),i(46,"\u8F2A\u6B21"),n(),e(47,"th"),i(48,"\u91D1\u984D"),n(),e(49,"th"),i(50,"\u72C0\u614B"),n(),e(51,"th"),i(52,"\u65E5\u671F"),n()()(),e(53,"tbody"),E(54,rt,12,13,"tr",23),n()()(),e(55,"nz-card",24)(56,"nz-table",22,1)(58,"thead")(59,"tr")(60,"th"),i(61,"\u985E\u578B"),n(),e(62,"th"),i(63,"\u63CF\u8FF0"),n(),e(64,"th"),i(65,"\u91D1\u984D"),n(),e(66,"th"),i(67,"\u7248\u672C"),n(),e(68,"th"),i(69,"\u65E5\u671F"),n()()(),e(70,"tbody"),E(71,at,14,14,"tr",23),n()()(),e(72,"div",25)(73,"nz-space")(74,"button",26),v("click",function(){return C(m),D(t.editContract())}),i(75,"\u7DE8\u8F2F\u5408\u7D04"),n(),e(76,"button",27),v("click",function(){return C(m),D(t.requestPayment())}),i(77,"\u8ACB\u6B3E"),n(),e(78,"button",27),v("click",function(){return C(m),D(t.addChange())}),i(79,"\u8FFD\u52A0\u8FFD\u6E1B"),n(),e(80,"button",28),v("click",function(){return C(m),D(t.goBack())}),i(81,"\u8FD4\u56DE\u5217\u8868"),n()()()()}if(a&2){let m=S(42),g=S(57);r(),c("nzColumn",2),r(2),o(t.contract==null?null:t.contract.title),r(2),o(t.contract==null?null:t.contract.client),r(2),o(d(8,25,t.contract==null?null:t.contract.originalAmount,"TWD","symbol","1.0-0")),r(3),o(d(11,30,t.contract==null?null:t.contract.changeAmount,"TWD","symbol","1.0-0")),r(3),o(d(14,35,t.contract==null?null:t.contract.currentAmount,"TWD","symbol","1.0-0")),r(3),c("nzColor",t.getStatusColor(t.contract==null?null:t.contract.status)),r(),y(" ",t.getStatusText(t.contract==null?null:t.contract.status)," "),r(2),o(p(20,40,t.contract==null?null:t.contract.startDate,"yyyy-MM-dd")),r(3),o(p(23,43,t.contract==null?null:t.contract.endDate,"yyyy-MM-dd")),r(3),o(p(26,46,t.contract==null?null:t.contract.createDate,"yyyy-MM-dd HH:mm")),r(3),o(p(29,49,t.contract==null?null:t.contract.updateDate,"yyyy-MM-dd HH:mm")),r(2),c("nzSpan",2),r(),o((t.contract==null?null:t.contract.description)||"\u7121\u63CF\u8FF0"),r(2),o(t.contract==null?null:t.contract.version),r(2),o(t.contract==null?null:t.contract.changeVersion),r(2),y("",t.contract==null?null:t.contract.progress,"%"),r(2),c("nzPercent",(t.contract==null?null:t.contract.progress)||0)("nzStatus",t.getProgressStatus((t.contract==null?null:t.contract.progress)||0)),r(2),c("nzData",(t.contract==null?null:t.contract.paymentRounds)||F(52,nt))("nzPageSize",5),r(13),c("ngForOf",m.data),r(2),c("nzData",(t.contract==null?null:t.contract.changes)||F(53,nt))("nzPageSize",5),r(15),c("ngForOf",g.data)}},dependencies:[A,B,U,Q,et,tt,Z,H,R,w,V,j,O,k,P,Y,X,L,G,W,$,K,q,J,_,I],encapsulation:2});var it=s;export{it as ContractDetailComponent};
