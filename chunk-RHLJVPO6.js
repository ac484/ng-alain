import{a as xt,d as Tt,e as Et,h as bt,i as vt}from"./chunk-YZRAWTOQ.js";import{a as yt,b as gt,c as _t}from"./chunk-FJGPJDJU.js";import"./chunk-CAC53LLX.js";import"./chunk-VAGS5EVQ.js";import{a as zt,b as Ct}from"./chunk-JNXOSXFH.js";import"./chunk-7HKXGGQW.js";import{d as rt}from"./chunk-FNQFXT4L.js";import{a as lt,b as pt}from"./chunk-BP5QTQZC.js";import{c as ze,e as Ce}from"./chunk-2AKQOGSQ.js";import{a as ee,f as ut,k as mt}from"./chunk-IKXE7RY5.js";import"./chunk-YLT4J452.js";import"./chunk-PUYN37MU.js";import{y as at}from"./chunk-Q4M6B46D.js";import{a as ct,b as dt}from"./chunk-LGE3RKIU.js";import{L as J}from"./chunk-67AL53VY.js";import"./chunk-CGTTSKG2.js";import"./chunk-QHSDKNHJ.js";import{a as st}from"./chunk-HG76SPUR.js";import"./chunk-VECD6G7R.js";import"./chunk-JKCE4WUB.js";import{k as Je,t as et,v as tt,w as it}from"./chunk-HFO44OZB.js";import{$b as C,$h as ft,Aa as g,Ad as Ge,Bd as He,Da as Ve,Ea as G,Fa as H,Hb as T,Hc as $e,Id as We,Jb as E,Ob as f,Oh as Q,Pa as se,Pb as d,Pc as K,Ph as $,Qb as u,Qh as fe,Rb as _,Rh as he,Sa as W,Uh as nt,Vb as le,Ve as ue,Vh as ot,Wb as pe,X as Pe,Xe as Ke,Yb as b,ai as ht,b as Me,be as N,bf as me,cb as c,cc as p,dc as Le,ec as Qe,fe as Ze,ff as Xe,ga as oe,gb as Ae,gc as S,gd as X,h as Fe,hc as I,hf as V,ic as R,id as B,jb as Ue,jd as qe,mc as Z,nc as Y,oa as Be,ob as F,oc as ce,pa as j,pb as L,pe as Ye,q as M,qb as re,r as x,rc as h,sc as de,ta as l,tc as P,ub as D,wb as w,xb as ae,za as y,zb as je}from"./chunk-C2TUN3UK.js";import{g as ne,i as ke}from"./chunk-57BLH6QZ.js";var ye=class{_document;_textarea;constructor(o,e){this._document=e;let i=this._textarea=this._document.createElement("textarea"),n=i.style;n.position="fixed",n.top=n.opacity="0",n.left="-999em",i.setAttribute("aria-hidden","true"),i.value=o,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){let o=this._textarea,e=!1;try{if(o){let i=this._document.activeElement;o.select(),o.setSelectionRange(0,o.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){let o=this._textarea;o&&(o.remove(),this._textarea=void 0)}},wt=(()=>{class t{_document=l(G);constructor(){}copy(e){let i=this.beginCopy(e),n=i.copy();return i.destroy(),n}beginCopy(e){return new ye(e,this._document)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _e=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=re({type:t,selectors:[["button","nz-trans-button",""]],hostVars:8,hostBindings:function(i,n){i&2&&Y("border","0")("background","transparent")("padding","0")("line-height","inherit")}})}return t})(),xe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=L({type:t});static \u0275inj=j({})}return t})();function Ot(t,o){if(t&1&&(le(0),_(1,"nz-icon",2),pe()),t&2){let e=o.$implicit;c(),f("nzType",e)}}var kt=["textarea"];function Mt(t,o){if(t&1){let e=b();d(0,"textarea",2,0),C("blur",function(){y(e);let n=p();return g(n.confirm())}),u(),d(2,"button",3),C("click",function(){y(e);let n=p();return g(n.confirm())}),_(3,"nz-icon",4),u()}}function Ft(t,o){if(t&1&&(le(0),_(1,"nz-icon",7),pe()),t&2){let e=o.$implicit;c(),f("nzType",e)}}function Pt(t,o){if(t&1){let e=b();d(0,"button",5),C("click",function(){y(e);let n=p();return g(n.onClick())}),D(1,Ft,2,1,"ng-container",6),u()}if(t&2){let e=p();f("nzTooltipTitle",e.tooltip===null?null:e.tooltip||(e.locale==null?null:e.locale.edit)),c(),f("nzStringTemplateOutlet",e.icon)}}var Bt=["ellipsisContainer"],Vt=["expandable"],At=["contentTemplate"],Ut=["*"],jt=t=>({content:t});function Lt(t,o){t&1&&Qe(0)}function Qt(t,o){if(t&1&&(T(0,Lt,1,0),h(1)),t&2){let e=o.content;E(e?-1:0),c(),P(" ",e," ")}}function $t(t,o){}function qt(t,o){if(t&1&&h(0),t&2){let e=p(3);P(" ",e.nzSuffix," ")}}function Gt(t,o){if(t&1&&(D(0,$t,0,0,"ng-template",5),T(1,qt,1,1)),t&2){let e=p(2),i=Z(1);f("ngTemplateOutlet",i)("ngTemplateOutletContext",$e(3,jt,e.nzContent)),c(),E(e.nzSuffix?1:-1)}}function Ht(t,o){if(t&1&&h(0),t&2){let e=p(3);P(" ",e.ellipsisStr," ")}}function Wt(t,o){if(t&1&&h(0),t&2){let e=p(3);P(" ",e.nzSuffix," ")}}function Zt(t,o){if(t&1){let e=b();d(0,"a",7,2),C("click",function(){y(e);let n=p(3);return g(n.onExpand())}),h(2),u()}if(t&2){let e=p(3);c(2),P(" ",e.locale==null?null:e.locale.expand," ")}}function Yt(t,o){if(t&1&&(_(0,"span",null,1),T(2,Ht,1,1),T(3,Wt,1,1),T(4,Zt,3,1,"a",6)),t&2){let e=p(2);c(2),E(e.isEllipsis?2:-1),c(),E(e.nzSuffix?3:-1),c(),E(e.nzExpandable&&e.isEllipsis?4:-1)}}function Kt(t,o){if(t&1&&T(0,Gt,2,5)(1,Yt,5,3),t&2){let e=p();E(e.expanded||!e.hasOperationsWithEllipsis&&e.nzEllipsisRows===1&&!e.hasEllipsisObservers||e.canCssEllipsis||e.nzSuffix&&e.expanded?0:1)}}function Xt(t,o){if(t&1){let e=b();d(0,"nz-text-edit",8),C("endEditing",function(n){y(e);let m=p();return g(m.onEndEditing(n))})("startEditing",function(){y(e);let n=p();return g(n.onStartEditing())}),u()}if(t&2){let e=p();f("text",e.nzContent)("icon",e.nzEditIcon)("tooltip",e.nzEditTooltip)}}function Jt(t,o){if(t&1){let e=b();d(0,"nz-text-copy",9),C("textCopy",function(n){y(e);let m=p();return g(m.onTextCopy(n))}),u()}if(t&2){let e=p();f("text",e.copyText)("tooltips",e.nzCopyTooltips)("icons",e.nzCopyIcons)}}var Te=(()=>{class t{cdr=l(X);clipboard=l(wt);i18n=l(J);destroyRef=l(H);copied=!1;copyId;locale;nativeElement=l(W).nativeElement;copyTooltip=null;copedTooltip=null;copyIcon="copy";copedIcon="check";text;tooltips;icons=["copy","check"];textCopy=new w;constructor(){this.destroyRef.onDestroy(()=>{clearTimeout(this.copyId)})}ngOnInit(){this.i18n.localeChange.pipe(N(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.updateTooltips(),this.cdr.markForCheck()})}ngOnChanges(e){let{tooltips:i,icons:n}=e;i&&this.updateTooltips(),n&&this.updateIcons()}onClick(){if(this.copied)return;this.copied=!0,this.cdr.detectChanges();let e=this.text;this.textCopy.emit(e),this.clipboard.copy(e),this.onCopied()}onCopied(){clearTimeout(this.copyId),this.copyId=setTimeout(()=>{this.copied=!1,this.cdr.detectChanges()},3e3)}updateTooltips(){if(this.tooltips===null)this.copedTooltip=null,this.copyTooltip=null;else if(Array.isArray(this.tooltips)){let[e,i]=this.tooltips;this.copyTooltip=e||this.locale?.copy,this.copedTooltip=i||this.locale?.copied}else this.copyTooltip=this.locale?.copy,this.copedTooltip=this.locale?.copied;this.cdr.markForCheck()}updateIcons(){let[e,i]=this.icons;this.copyIcon=e,this.copedIcon=i,this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["nz-text-copy"]],inputs:{text:"text",tooltips:"tooltips",icons:"icons"},outputs:{textCopy:"textCopy"},exportAs:["nzTextCopy"],features:[se],decls:2,vars:4,consts:[["type","button","nz-tooltip","","nz-trans-button","",1,"ant-typography-copy",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,n){i&1&&(d(0,"button",0),C("click",function(){return n.onClick()}),D(1,Ot,2,1,"ng-container",1),u()),i&2&&(ce("ant-typography-copy-success",n.copied),f("nzTooltipTitle",n.copied?n.copedTooltip:n.copyTooltip),c(),f("nzStringTemplateOutlet",n.copied?n.copedIcon:n.copyIcon))},dependencies:[Ce,ze,xe,_e,$,Q,he,fe],encapsulation:2,changeDetection:0})}return t})(),Ee=(()=>{class t{ngZone=l(ae);cdr=l(X);i18n=l(J);destroyRef=l(H);editing=!1;locale;text;icon="edit";tooltip;startEditing=new w;endEditing=new w(!0);set textarea(e){this.textarea$.next(e)}autosizeDirective;beforeText;currentText;nativeElement=l(W).nativeElement;textarea$=new Fe(null);injector=l(Ve);ngOnInit(){this.i18n.localeChange.pipe(N(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.textarea$.pipe(oe(e=>me(e?.nativeElement,"keydown")),N(this.destroyRef)).subscribe(e=>{e.keyCode!==27&&e.keyCode!==13||this.ngZone.run(()=>{e.keyCode===27?this.onCancel():this.onEnter(e),this.cdr.markForCheck()})}),this.textarea$.pipe(oe(e=>me(e?.nativeElement,"input")),N(this.destroyRef)).subscribe(e=>{this.currentText=e.target.value})}onClick(){this.beforeText=this.text,this.currentText=this.beforeText,this.editing=!0,this.startEditing.emit(),this.focusAndSetValue()}confirm(){this.editing=!1,this.endEditing.emit(this.currentText)}onEnter(e){e.stopPropagation(),e.preventDefault(),this.confirm()}onCancel(){this.currentText=this.beforeText,this.confirm()}focusAndSetValue(){let{injector:e}=this;je(()=>{this.textarea$.pipe(Pe(i=>i!=null),N(this.destroyRef)).subscribe(i=>{i.nativeElement.focus(),i.nativeElement.value=this.currentText||"",this.autosizeDirective.resizeToFitContent(),this.cdr.markForCheck()})},{injector:e})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["nz-text-edit"]],viewQuery:function(i,n){if(i&1&&(S(kt,5),S(ee,5)),i&2){let m;I(m=R())&&(n.textarea=m.first),I(m=R())&&(n.autosizeDirective=m.first)}},inputs:{text:"text",icon:"icon",tooltip:"tooltip"},outputs:{startEditing:"startEditing",endEditing:"endEditing"},exportAs:["nzTextEdit"],decls:2,vars:1,consts:[["textarea",""],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"nzTooltipTitle"],["nz-input","","nzAutosize","",3,"blur"],["nz-trans-button","",1,"ant-typography-edit-content-confirm",3,"click"],["nzType","enter"],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,n){i&1&&T(0,Mt,4,0)(1,Pt,2,2,"button",1),i&2&&E(n.editing?0:1)},dependencies:[mt,ut,ee,xe,_e,$,Q,Ce,ze,he,fe],encapsulation:2,changeDetection:0})}return t})(),ei="typography",ti="ant-typography-expand",be=(()=>{var v;let t,o=[],e=[],i,n=[],m=[],q,ve=[],we=[],Ne,De=[],Se=[],Ie,Re=[],Oe=[];return v=class{_nzModuleName=ei;nzConfigService=l(Xe);el=l(W).nativeElement;cdr=l(X);viewContainerRef=l(Ue);renderer=l(Ae);platform=l(Ze);i18n=l(J);resizeService=l(st);directionality=l(Ye);document=l(G);destroyRef=l(H);nzCopyable=!1;nzEditable=!1;nzDisabled=!1;nzExpandable=!1;nzEllipsis=!1;nzCopyTooltips=x(this,o,void 0);nzCopyIcons=(x(this,e),x(this,n,["copy","check"]));nzEditTooltip=(x(this,m),x(this,ve,void 0));nzEditIcon=(x(this,we),x(this,De,"edit"));nzContent=x(this,Se);nzEllipsisRows=x(this,Re,1);nzType=x(this,Oe);nzCopyText;nzSuffix;nzContentChange=new w;nzCopy=new w;nzExpandChange=new w;nzOnEllipsis=new w;textEditRef;textCopyRef;ellipsisContainer;expandableBtn;contentTemplate;locale;expandableBtnElementCache=null;editing=!1;ellipsisText;cssEllipsis=!1;isEllipsis=!0;expanded=!1;ellipsisStr="...";dir="ltr";get hasEllipsisObservers(){return this.nzOnEllipsis.observers.length>0}get canCssEllipsis(){return this.nzEllipsis&&this.cssEllipsis&&!this.expanded&&!this.hasEllipsisObservers}get hasOperationsWithEllipsis(){return(this.nzCopyable||this.nzEditable||this.nzExpandable)&&this.nzEllipsis}viewInit=!1;requestId=-1;windowResizeSubscription=Me.EMPTY;get copyText(){return typeof this.nzCopyText=="string"?this.nzCopyText:this.nzContent}constructor(){this.destroyRef.onDestroy(()=>{this.expandableBtnElementCache=null,this.windowResizeSubscription.unsubscribe()})}onTextCopy(a){this.nzCopy.emit(a)}onStartEditing(){this.editing=!0}onEndEditing(a){this.editing=!1,this.nzContentChange.emit(a),this.nzContent===a&&this.renderOnNextFrame(),this.cdr.markForCheck()}onExpand(){this.isEllipsis=!1,this.expanded=!0,this.nzExpandChange.emit(),this.nzOnEllipsis.emit(!1)}canUseCSSEllipsis(){return this.nzEditable||this.nzCopyable||this.nzExpandable||this.nzSuffix||this.hasEllipsisObservers?!1:this.nzEllipsisRows===1?ue("textOverflow"):ue("webkitLineClamp")}renderOnNextFrame(){ot(this.requestId),!(!this.viewInit||!this.nzEllipsis||this.nzEllipsisRows<0||this.expanded||!this.platform.isBrowser)&&(this.requestId=nt(()=>this.syncEllipsis()))}getOriginContentViewRef(){let a=this.viewContainerRef.createEmbeddedView(this.contentTemplate,{content:this.nzContent});return a.detectChanges(),{viewRef:a,removeView:()=>this.viewContainerRef.remove(this.viewContainerRef.indexOf(a))}}syncEllipsis(){if(this.cssEllipsis)return;let{viewRef:a,removeView:r}=this.getOriginContentViewRef(),s=[this.textCopyRef,this.textEditRef].filter(k=>k&&k.nativeElement).map(k=>k.nativeElement),z=this.getExpandableBtnElement();z&&s.push(z);let{contentNodes:te,text:ie,ellipsis:U}=Ke(this.el,this.nzEllipsisRows,a.rootNodes,s,this.ellipsisStr,this.nzSuffix);r(),this.ellipsisText=ie,U!==this.isEllipsis&&(this.isEllipsis=U,this.nzOnEllipsis.emit(U));let O=this.ellipsisContainer.nativeElement;for(;O.firstChild;)this.renderer.removeChild(O,O.firstChild);te.forEach(k=>{this.renderer.appendChild(O,k.cloneNode(!0))}),this.cdr.markForCheck()}getExpandableBtnElement(){if(this.nzExpandable){let a=this.locale?this.locale.expand:"",r=this.expandableBtnElementCache;if(!r||r.innerText===a){let s=this.document.createElement("a");s.className=ti,s.innerText=a,this.expandableBtnElementCache=s}return this.expandableBtnElementCache}else return this.expandableBtnElementCache=null,null}renderAndSubscribeWindowResize(){this.platform.isBrowser&&(this.windowResizeSubscription.unsubscribe(),this.cssEllipsis=this.canUseCSSEllipsis(),this.renderOnNextFrame(),this.windowResizeSubscription=this.resizeService.connect().pipe(N(this.destroyRef)).subscribe(()=>this.renderOnNextFrame()))}ngOnInit(){this.i18n.localeChange.pipe(N(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.directionality.change?.pipe(N(this.destroyRef)).subscribe(a=>{this.dir=a,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.viewInit=!0,this.renderAndSubscribeWindowResize()}ngOnChanges(a){let{nzCopyable:r,nzEditable:s,nzExpandable:z,nzEllipsis:te,nzContent:ie,nzEllipsisRows:U,nzSuffix:O}=a;(r||s||z||te||ie||U||O)&&this.nzEllipsis&&(this.expanded?this.windowResizeSubscription.unsubscribe():this.renderAndSubscribeWindowResize())}},(()=>{let a=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[V()],i=[V()],q=[V()],Ne=[V()],Ie=[V()],M(null,null,t,{kind:"field",name:"nzCopyTooltips",static:!1,private:!1,access:{has:r=>"nzCopyTooltips"in r,get:r=>r.nzCopyTooltips,set:(r,s)=>{r.nzCopyTooltips=s}},metadata:a},o,e),M(null,null,i,{kind:"field",name:"nzCopyIcons",static:!1,private:!1,access:{has:r=>"nzCopyIcons"in r,get:r=>r.nzCopyIcons,set:(r,s)=>{r.nzCopyIcons=s}},metadata:a},n,m),M(null,null,q,{kind:"field",name:"nzEditTooltip",static:!1,private:!1,access:{has:r=>"nzEditTooltip"in r,get:r=>r.nzEditTooltip,set:(r,s)=>{r.nzEditTooltip=s}},metadata:a},ve,we),M(null,null,Ne,{kind:"field",name:"nzEditIcon",static:!1,private:!1,access:{has:r=>"nzEditIcon"in r,get:r=>r.nzEditIcon,set:(r,s)=>{r.nzEditIcon=s}},metadata:a},De,Se),M(null,null,Ie,{kind:"field",name:"nzEllipsisRows",static:!1,private:!1,access:{has:r=>"nzEllipsisRows"in r,get:r=>r.nzEllipsisRows,set:(r,s)=>{r.nzEllipsisRows=s}},metadata:a},Re,Oe),a&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),ne(v,"\u0275fac",function(r){return new(r||v)}),ne(v,"\u0275cmp",F({type:v,selectors:[["nz-typography"],["","nz-typography",""],["p","nz-paragraph",""],["span","nz-text",""],["h1","nz-title",""],["h2","nz-title",""],["h3","nz-title",""],["h4","nz-title",""]],viewQuery:function(r,s){if(r&1&&(S(Ee,5),S(Te,5),S(Bt,5),S(Vt,5),S(At,5)),r&2){let z;I(z=R())&&(s.textEditRef=z.first),I(z=R())&&(s.textCopyRef=z.first),I(z=R())&&(s.ellipsisContainer=z.first),I(z=R())&&(s.expandableBtn=z.first),I(z=R())&&(s.contentTemplate=z.first)}},hostVars:26,hostBindings:function(r,s){r&2&&(Y("-webkit-line-clamp",s.canCssEllipsis&&s.nzEllipsisRows>1?s.nzEllipsisRows:null),ce("ant-typography",!s.editing)("ant-typography-rtl",s.dir==="rtl")("ant-typography-edit-content",s.editing)("ant-typography-secondary",s.nzType==="secondary")("ant-typography-warning",s.nzType==="warning")("ant-typography-danger",s.nzType==="danger")("ant-typography-success",s.nzType==="success")("ant-typography-disabled",s.nzDisabled)("ant-typography-ellipsis",s.nzEllipsis&&!s.expanded)("ant-typography-single-line",s.nzEllipsis&&s.nzEllipsisRows===1)("ant-typography-ellipsis-single-line",s.canCssEllipsis&&s.nzEllipsisRows===1)("ant-typography-ellipsis-multiple-line",s.canCssEllipsis&&s.nzEllipsisRows>1))},inputs:{nzCopyable:[2,"nzCopyable","nzCopyable",B],nzEditable:[2,"nzEditable","nzEditable",B],nzDisabled:[2,"nzDisabled","nzDisabled",B],nzExpandable:[2,"nzExpandable","nzExpandable",B],nzEllipsis:[2,"nzEllipsis","nzEllipsis",B],nzCopyTooltips:"nzCopyTooltips",nzCopyIcons:"nzCopyIcons",nzEditTooltip:"nzEditTooltip",nzEditIcon:"nzEditIcon",nzContent:"nzContent",nzEllipsisRows:[2,"nzEllipsisRows","nzEllipsisRows",qe],nzType:"nzType",nzCopyText:"nzCopyText",nzSuffix:"nzSuffix"},outputs:{nzContentChange:"nzContentChange",nzCopy:"nzCopy",nzExpandChange:"nzExpandChange",nzOnEllipsis:"nzOnEllipsis"},exportAs:["nzTypography"],features:[se],ngContentSelectors:Ut,decls:5,vars:3,consts:[["contentTemplate",""],["ellipsisContainer",""],["expandable",""],[3,"text","icon","tooltip"],[3,"text","tooltips","icons"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-typography-expand"],[1,"ant-typography-expand",3,"click"],[3,"endEditing","startEditing","text","icon","tooltip"],[3,"textCopy","text","tooltips","icons"]],template:function(r,s){r&1&&(Le(),D(0,Qt,2,2,"ng-template",null,0,K),T(2,Kt,2,1),T(3,Xt,1,3,"nz-text-edit",3),T(4,Jt,1,3,"nz-text-copy",4)),r&2&&(c(2),E(s.editing?-1:2),c(),E(s.nzEditable?3:-1),c(),E(s.nzCopyable&&!s.editing?4:-1))},dependencies:[He,Ee,Te],encapsulation:2,changeDetection:0})),v})(),Nt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=L({type:t});static \u0275inj=j({imports:[be,Te,Ee]})}return t})();function ni(t,o){if(t&1&&(d(0,"div",12)(1,"nz-card",13)(2,"div",14)(3,"nz-spin",15)(4,"div",16),_(5,"span",17),d(6,"p"),h(7,"\u6B63\u5728\u8655\u7406\u60A8\u7684 PDF \u6587\u4EF6..."),u(),d(8,"p",18),h(9),u()()()()()()),t&2){let e=p();c(3),f("nzTip",e.processingTip),c(6),de(e.processingTip)}}function oi(t,o){if(t&1){let e=b();d(0,"div",19)(1,"nz-card",20)(2,"div",21)(3,"nz-typography")(4,"pre",22),h(5),u()()(),_(6,"nz-divider"),d(7,"div",23)(8,"button",24),C("click",function(){y(e);let n=p();return g(n.downloadText())}),_(9,"span",25),h(10," \u4E0B\u8F09\u6587\u5B57 "),u(),d(11,"button",26),C("click",function(){y(e);let n=p();return g(n.reset())}),_(12,"span",27),h(13," \u91CD\u65B0\u958B\u59CB "),u()()()()}if(t&2){let e=p();c(4),f("nzContent",e.extractedText),c(),de(e.extractedText)}}function si(t,o){if(t&1){let e=b();d(0,"div",28)(1,"nz-result",29)(2,"div",30)(3,"button",24),C("click",function(){y(e);let n=p();return g(n.reset())}),h(4,"\u91CD\u8A66"),u()()()()}if(t&2){let e=p();c(),f("nzSubTitle",e.errorMessage)}}function ri(t,o){if(t&1){let e=b();d(0,"button",31),C("click",function(){y(e);let n=p();return g(n.showHelp())}),_(1,"span",32),h(2," \u8AAA\u660E "),u()}}var A=class A{constructor(){this.functions=l(xt);this.storage=l(Et);this.message=l(rt);this.fileList=[];this.isProcessing=!1;this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...";this.extractedText="";this.errorMessage="";this.currentFile=null;this.beforeUpload=o=>{if(o.type!=="application/pdf")return this.message.error("\u53EA\u80FD\u4E0A\u50B3 PDF \u6587\u4EF6\uFF01"),!1;let e=10*1024*1024;return o.size>e?(this.message.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u904E 10MB\uFF01"),!1):(this.currentFile=o,this.fileList=[o],this.processPdf(),!1)}}ngOnInit(){}handleUploadChange(o){}processPdf(){return ke(this,null,function*(){if(this.currentFile){this.isProcessing=!0,this.errorMessage="",this.extractedText="",this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6\u5230\u96F2\u7AEF\u5B58\u5132...";try{let o=`pdf-uploads/${Date.now()}_${this.currentFile.name}`,e=bt(this.storage,o);this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...",yield vt(e,this.currentFile);let i=`gs://${e.bucket}/${e.fullPath}`;this.processingTip="\u6B63\u5728\u63D0\u53D6\u6587\u5B57\u5167\u5BB9...";let m=yield Tt(this.functions,"extractPdfText")({gcsUri:i});if(m.data.status==="DONE"&&m.data.extractedText)this.extractedText=m.data.extractedText,this.message.success("PDF \u6587\u5B57\u63D0\u53D6\u5B8C\u6210\uFF01");else throw m.data.status==="ERROR"?new Error(m.data.error||"\u63D0\u53D6\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4"):new Error("\u672A\u77E5\u7684\u8655\u7406\u72C0\u614B")}catch(o){console.error("PDF processing error:",o),this.errorMessage=o.message||"\u8655\u7406 PDF \u6642\u767C\u751F\u932F\u8AA4\uFF0C\u8ACB\u91CD\u8A66\u3002",this.message.error(this.errorMessage)}finally{this.isProcessing=!1}}})}downloadText(){if(!this.extractedText)return;let o=new Blob([this.extractedText],{type:"text/plain;charset=utf-8"}),e=window.URL.createObjectURL(o),i=document.createElement("a");i.href=e,i.download=`extracted-text-${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(e),this.message.success("\u6587\u5B57\u6587\u4EF6\u5DF2\u4E0B\u8F09")}reset(){this.fileList=[],this.currentFile=null,this.isProcessing=!1,this.extractedText="",this.errorMessage="",this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6..."}showHelp(){this.message.info("\u4E0A\u50B3 PDF \u6587\u4EF6\u5F8C\uFF0C\u7CFB\u7D71\u5C07\u4F7F\u7528 Google Cloud Vision API \u81EA\u52D5\u63D0\u53D6\u5176\u4E2D\u7684\u6587\u5B57\u5167\u5BB9\u3002\u652F\u63F4\u591A\u8A9E\u8A00\u6587\u5B57\u8B58\u5225\u3002",{nzDuration:5e3})}};A.\u0275fac=function(e){return new(e||A)},A.\u0275cmp=F({type:A,selectors:[["app-pdf-scan"]],decls:15,vars:8,consts:[["extraTemplate",""],["nzTitle","PDF \u6587\u5B57\u63D0\u53D6",3,"nzExtra"],[1,"pdf-scan-container"],["nzSize","small","nzTitle","\u4E0A\u50B3 PDF \u6587\u4EF6"],["nzType","drag",3,"nzChange","nzMultiple","nzAccept","nzBeforeUpload","nzFileList"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["class","processing-section",4,"ngIf"],["class","results-section",4,"ngIf"],["class","error-section",4,"ngIf"],[1,"processing-section"],["nzSize","small"],[1,"text-center"],["nzSize","large",3,"nzTip"],[1,"processing-content"],["nz-icon","","nzType","file-text","nzTheme","outline",1,"processing-icon"],[1,"processing-detail"],[1,"results-section"],["nzSize","small","nzTitle","\u63D0\u53D6\u7D50\u679C"],[1,"extracted-text-container"],["nz-typography","","nzCopyable","",1,"extracted-text",3,"nzContent"],[1,"result-actions"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","",1,"ml-2",3,"click"],["nz-icon","","nzType","reload"],[1,"error-section"],["nzStatus","error","nzTitle","\u8655\u7406\u5931\u6557",3,"nzSubTitle"],["nz-result-extra",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","question-circle"]],template:function(e,i){if(e&1){let n=b();d(0,"nz-card",1)(1,"div",2)(2,"nz-card",3)(3,"nz-upload",4),C("nzChange",function(q){return y(n),g(i.handleUploadChange(q))}),d(4,"p",5),_(5,"span",6),u(),d(6,"p",7),h(7,"\u9EDE\u64CA\u6216\u62D6\u62FD PDF \u6587\u4EF6\u5230\u6B64\u5340\u57DF\u4E0A\u50B3"),u(),d(8,"p",8),h(9," \u652F\u63F4\u55AE\u500B PDF \u6587\u4EF6\u4E0A\u50B3\uFF0C\u6587\u4EF6\u5C07\u4F7F\u7528 Google Cloud Vision API \u9032\u884C\u6587\u5B57\u63D0\u53D6 "),u()()(),D(10,ni,10,2,"div",9)(11,oi,14,2,"div",10)(12,si,5,1,"div",11),u()(),D(13,ri,3,0,"ng-template",null,0,K)}if(e&2){let n=Z(14);f("nzExtra",n),c(3),f("nzMultiple",!1)("nzAccept",".pdf")("nzBeforeUpload",i.beforeUpload)("nzFileList",i.fileList),c(7),f("ngIf",i.isProcessing),c(),f("ngIf",i.extractedText&&!i.isProcessing),c(),f("ngIf",i.errorMessage&&!i.isProcessing)}},dependencies:[We,Ge,at,Ct,zt,it,tt,Je,et,ht,ft,dt,ct,_t,gt,yt,pt,lt,Nt,be,$,Q],styles:[".pdf-scan-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.processing-section[_ngcontent-%COMP%], .results-section[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]{margin-top:16px}.processing-content[_ngcontent-%COMP%]{padding:20px}.processing-icon[_ngcontent-%COMP%]{font-size:48px;color:#1890ff;display:block;margin-bottom:16px}.processing-detail[_ngcontent-%COMP%]{color:#666;font-size:14px}.extracted-text-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid #d9d9d9;border-radius:6px;padding:12px;background-color:#fafafa}.extracted-text[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;margin:0;font-family:Courier New,monospace;font-size:14px;line-height:1.6}.result-actions[_ngcontent-%COMP%]{text-align:center}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.text-center[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .ant-upload.ant-upload-drag{background-color:#fafafa}[_nghost-%COMP%]     .ant-upload.ant-upload-drag:hover{border-color:#40a9ff}"]});var Dt=A;export{Dt as PdfScanComponent};
