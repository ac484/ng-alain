import{a as Pr,d as Hi}from"./chunk-NT4WRECT.js";import{p as ar,v as sr}from"./chunk-KCKDIXOZ.js";import"./chunk-IZ254OCI.js";import{a as Dr,b as be,c as _e,d as ti}from"./chunk-COYHQH7I.js";import"./chunk-BYXBJQAS.js";import{c as xr}from"./chunk-ZIKE63FM.js";import"./chunk-GYW6ORB4.js";import{d as Mt}from"./chunk-4TLOXKSY.js";import{B as oe,F as ne,G as Tr,H as ae,I as Rr,J as Fr,K as se,N as le,c as V,e as pr,g as W,i as Mr,j as Nr,k as Cr,l as vr,m as yr,n as _r,o as Z,q as Y,t as X,u as br,v as Kt,w as $,y as wr}from"./chunk-VFHUVCF3.js";import{A as I,Aa as K,B as L,Ba as _t,Ca as St,Da as Q,E as k,Ea as $t,Fa as kt,Ga as Qt,Ha as ei,Ia as ee,Ka as ie,L as O,N as U,Oa as re,Qa as Ar,R as j,Ra as me,T as mr,Ua as ue,X as ur,Z as G,_ as dr,aa as cr,bb as pe,da as fr,db as de,fa as hr,fb as ce,ga as zr,ha as H,i as Nt,k as Ct,l as Bt,n as It,na as Ui,oa as ji,p as vt,pa as q,q as Lt,qa as gr,r as lr,ra as R,sa as Sr,ta as yt,va as Gi,ya as J,za as Er}from"./chunk-ELSWLGE4.js";import{$ as ht,$b as ye,$h as nr,Ac as _i,Ag as T,Ah as B,B as Do,Bb as Vo,Bd as Li,Cb as Uo,Cd as Yt,Db as jo,Dd as Xt,Dg as ir,Ea as d,F as so,Hb as bt,Hd as Jt,Hh as Oi,Ib as Go,Ic as Pt,J as lo,Jb as Ai,Jd as Qo,Kd as po,La as S,Lc as qo,Ld as co,Ma as Ni,Mb as f,N as To,Na as Ti,Nb as Ot,Nc as Zo,Ob as Ee,Ph as Vi,Qb as ze,R as Ro,Ra as qt,Rb as ge,Sb as Me,Sc as Yo,Ta as Ci,Ua as Bo,Vg as or,W as mo,Xb as vi,Zc as Pi,aa as Mi,ab as zt,ac as yi,ba as Fo,c as zi,cb as gt,d as ao,da as M,db as Tt,e as bi,ec as At,fb as Rt,fc as xt,gb as Ft,hb as h,hc as Ho,hg as ki,ia as b,ib as u,ig as D,ii as Ce,ja as w,jb as c,jd as Xo,jg as er,ji as te,kb as fe,kd as Jo,kh as rr,lb as Ri,lc as Vt,lh as P,m as bo,mb as Fi,md as Ko,na as Ao,ng as tr,oa as wi,ob as Io,pa as Ht,pb as Lo,pd as Bi,qc as uo,qd as Ii,qg as A,rb as Te,rg as x,s as gi,ta as Di,ub as v,uc as Wo,va as Wt,w as wo,xa as xo,xb as E,xd as $o,xg as Ne,yb as ko,yc as Zt,za as Po,zb as Oo,zc as xi,zg as he}from"./chunk-INLYT7NR.js";import{a as De,d as Zr,f as Eo,i as Et}from"./chunk-57BLH6QZ.js";var Mo=Zr((zo,go)=>{"use strict";(function(s,o){typeof define=="function"&&define.amd?define([],o):typeof zo<"u"?o():(o(),s.FileSaver={})})(zo,function(){"use strict";function s(z,i){return typeof i>"u"?i={autoBom:!1}:typeof i!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(z.type)?new Blob(["\uFEFF",z],{type:z.type}):z}function o(z,i,n){var a=new XMLHttpRequest;a.open("GET",z),a.responseType="blob",a.onload=function(){m(a.response,i,n)},a.onerror=function(){console.error("could not download file")},a.send()}function e(z){var i=new XMLHttpRequest;i.open("HEAD",z,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function t(z){try{z.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),z.dispatchEvent(i)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(z,i,n){var a=r.URL||r.webkitURL,p=document.createElement("a");i=i||z.name||"download",p.download=i,p.rel="noopener",typeof z=="string"?(p.href=z,p.origin===location.origin?t(p):e(p.href)?o(z,i,n):t(p,p.target="_blank")):(p.href=a.createObjectURL(z),setTimeout(function(){a.revokeObjectURL(p.href)},4e4),setTimeout(function(){t(p)},0))}:"msSaveOrOpenBlob"in navigator?function(z,i,n){if(i=i||z.name||"download",typeof z!="string")navigator.msSaveOrOpenBlob(s(z,n),i);else if(e(z))o(z,i,n);else{var a=document.createElement("a");a.href=z,a.target="_blank",setTimeout(function(){t(a)})}}:function(z,i,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof z=="string")return o(z,i,n);var p=z.type==="application/octet-stream",g=/constructor/i.test(r.HTMLElement)||r.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||p&&g||l)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var xe=N.result;xe=C?xe:xe.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=xe:location=xe,a=null},N.readAsDataURL(z)}else{var _=r.URL||r.webkitURL,y=_.createObjectURL(z);a?a.location=y:location.href=y,a=null,setTimeout(function(){_.revokeObjectURL(y)},4e4)}});r.saveAs=m.saveAs=m,typeof go<"u"&&(go.exports=m)})});var Ut=class Ut{constructor(){this.auth=M(ar);this.functions=M(Pr);this.acl=M(Jt);this._userRoles=Ht([]);this._userPermissions=Ht([]);this._isLoading=Ht(!1);this._error=Ht("");this._customClaims=Ht({});this.userRoles=this._userRoles.asReadonly();this.userPermissions=this._userPermissions.asReadonly();this.isLoading=this._isLoading.asReadonly();this.error=this._error.asReadonly();this.customClaims=this._customClaims.asReadonly();this.isAdmin=Vt(()=>this._userRoles().includes(be.ADMIN)||this._customClaims().admin===!0);this.isModerator=Vt(()=>this._userRoles().includes(be.MODERATOR)||this._userRoles().includes(be.ADMIN));this.isGuest=Vt(()=>this._userRoles().length===0||this._userRoles().includes(be.GUEST));this.hasAnyRole=Vt(()=>this._userRoles().length>0);this.auth.onAuthStateChanged(o=>{o?this.loadUserRoles(o):this.clearRoles()})}loadUserRoles(o){return Et(this,null,function*(){try{this._isLoading.set(!0),this._error.set("");let t=(yield o.getIdTokenResult()).claims;this._customClaims.set(t);let r=t.roles||[],l=t.permissions||[],m=this.calculatePermissionsFromRoles(r),z=[...new Set([...l,...m])];this._userRoles.set(r),this._userPermissions.set(z),yield this.syncWithACL()}catch(e){console.error("Error loading user roles:",e),this._error.set("\u8F09\u5165\u4F7F\u7528\u8005\u89D2\u8272\u5931\u6557")}finally{this._isLoading.set(!1)}})}clearRoles(){this._userRoles.set([]),this._userPermissions.set([]),this._customClaims.set({}),this._error.set(""),this.acl.setRole([])}calculatePermissionsFromRoles(o){let e=[];return o.forEach(t=>{let r=ti[t]||[];e.push(...r)}),[...new Set(e)]}assignRole(o){return Et(this,null,function*(){try{return this._isLoading.set(!0),this._error.set(""),(yield Hi(this.functions,"assignUserRole")(o)).data?(o.targetUid===this.auth.currentUser?.uid&&(yield this.refreshCurrentUserRoles()),!0):!1}catch(e){return console.error("Error assigning role:",e),this._error.set("\u89D2\u8272\u5206\u914D\u5931\u6557"),!1}finally{this._isLoading.set(!1)}})}removeRole(o){return Et(this,null,function*(){try{return this._isLoading.set(!0),this._error.set(""),(yield Hi(this.functions,"removeUserRole")(o)).data?(o.targetUid===this.auth.currentUser?.uid&&(yield this.refreshCurrentUserRoles()),!0):!1}catch(e){return console.error("Error removing role:",e),this._error.set("\u89D2\u8272\u79FB\u9664\u5931\u6557"),!1}finally{this._isLoading.set(!1)}})}setCustomClaims(o,e){return Et(this,null,function*(){try{return this._isLoading.set(!0),this._error.set(""),(yield Hi(this.functions,"setCustomClaims")({uid:o,claims:e})).data?(o===this.auth.currentUser?.uid&&(yield this.refreshCurrentUserRoles()),!0):!1}catch(t){return console.error("Error setting custom claims:",t),this._error.set("\u81EA\u8A02\u8072\u660E\u8A2D\u5B9A\u5931\u6557"),!1}finally{this._isLoading.set(!1)}})}hasRole(o){return this._userRoles().includes(o)}hasAnyRoles(o){return o.some(e=>this._userRoles().includes(e))}hasAllRoles(o){return o.every(e=>this._userRoles().includes(e))}hasPermission(o){return this._userPermissions().includes(o)}hasAnyPermissions(o){return o.some(e=>this._userPermissions().includes(e))}hasAllPermissions(o){return o.every(e=>this._userPermissions().includes(e))}checkRole(o){let e=this._userRoles(),t=o.filter(r=>e.includes(r));return{hasPermission:t.length>0,matchedRoles:t,matchedPermissions:[],checkedAt:new Date}}checkPermission(o){let e=this._userPermissions(),t=o.filter(r=>e.includes(r));return{hasPermission:t.length>0,matchedRoles:[],matchedPermissions:t,checkedAt:new Date}}syncWithACL(){return Et(this,null,function*(){try{let o=this._userRoles(),e=this._userPermissions();this.acl.setRole(o),e.length>0&&this.acl.setAbility(e),this.isAdmin()&&(this.acl.setRole(["admin"]),this.acl.setAbility(["*"]))}catch(o){console.error("Error syncing with ACL:",o),this._error.set("ACL \u540C\u6B65\u5931\u6557")}})}updateACLFromClaims(){let o=this._customClaims();o.roles&&this.acl.setRole(o.roles),o.permissions&&this.acl.setAbility(o.permissions),o.admin&&(this.acl.setRole(["admin"]),this.acl.setAbility(["*"]))}refreshCurrentUserRoles(){return Et(this,null,function*(){let o=this.auth.currentUser;o&&(yield o.getIdToken(!0),yield this.loadUserRoles(o))})}getAvailableRoles(){return[{id:be.ADMIN,name:"\u7BA1\u7406\u54E1",description:"\u7CFB\u7D71\u7BA1\u7406\u54E1\uFF0C\u64C1\u6709\u6240\u6709\u6B0A\u9650",permissions:ti[be.ADMIN],isSystem:!0,createdAt:new Date,updatedAt:new Date},{id:be.MODERATOR,name:"\u7248\u4E3B",description:"\u5167\u5BB9\u7BA1\u7406\u54E1\uFF0C\u53EF\u7BA1\u7406\u5167\u5BB9\u548C\u4F7F\u7528\u8005",permissions:ti[be.MODERATOR],isSystem:!0,createdAt:new Date,updatedAt:new Date},{id:be.USER,name:"\u4E00\u822C\u4F7F\u7528\u8005",description:"\u4E00\u822C\u4F7F\u7528\u8005\uFF0C\u53EF\u8B80\u53D6\u548C\u5EFA\u7ACB\u5167\u5BB9",permissions:ti[be.USER],isSystem:!0,createdAt:new Date,updatedAt:new Date},{id:be.GUEST,name:"\u8A2A\u5BA2",description:"\u8A2A\u5BA2\u4F7F\u7528\u8005\uFF0C\u50C5\u53EF\u8B80\u53D6\u5167\u5BB9",permissions:ti[be.GUEST],isSystem:!0,createdAt:new Date,updatedAt:new Date}]}getAvailablePermissions(){return[{id:_e.USER_READ,name:"\u8B80\u53D6\u4F7F\u7528\u8005",description:"\u53EF\u4EE5\u67E5\u770B\u4F7F\u7528\u8005\u8CC7\u8A0A",category:"\u4F7F\u7528\u8005\u7BA1\u7406",isSystem:!0},{id:_e.USER_WRITE,name:"\u7DE8\u8F2F\u4F7F\u7528\u8005",description:"\u53EF\u4EE5\u7DE8\u8F2F\u4F7F\u7528\u8005\u8CC7\u8A0A",category:"\u4F7F\u7528\u8005\u7BA1\u7406",isSystem:!0},{id:_e.USER_DELETE,name:"\u522A\u9664\u4F7F\u7528\u8005",description:"\u53EF\u4EE5\u522A\u9664\u4F7F\u7528\u8005",category:"\u4F7F\u7528\u8005\u7BA1\u7406",isSystem:!0},{id:_e.ROLE_READ,name:"\u8B80\u53D6\u89D2\u8272",description:"\u53EF\u4EE5\u67E5\u770B\u89D2\u8272\u8CC7\u8A0A",category:"\u89D2\u8272\u7BA1\u7406",isSystem:!0},{id:_e.ROLE_WRITE,name:"\u7DE8\u8F2F\u89D2\u8272",description:"\u53EF\u4EE5\u7DE8\u8F2F\u89D2\u8272\u8CC7\u8A0A",category:"\u89D2\u8272\u7BA1\u7406",isSystem:!0},{id:_e.ROLE_DELETE,name:"\u522A\u9664\u89D2\u8272",description:"\u53EF\u4EE5\u522A\u9664\u89D2\u8272",category:"\u89D2\u8272\u7BA1\u7406",isSystem:!0},{id:_e.ROLE_ASSIGN,name:"\u5206\u914D\u89D2\u8272",description:"\u53EF\u4EE5\u5206\u914D\u89D2\u8272\u7D66\u4F7F\u7528\u8005",category:"\u89D2\u8272\u7BA1\u7406",isSystem:!0},{id:_e.SYSTEM_READ,name:"\u8B80\u53D6\u7CFB\u7D71",description:"\u53EF\u4EE5\u67E5\u770B\u7CFB\u7D71\u8CC7\u8A0A",category:"\u7CFB\u7D71\u7BA1\u7406",isSystem:!0},{id:_e.SYSTEM_WRITE,name:"\u7DE8\u8F2F\u7CFB\u7D71",description:"\u53EF\u4EE5\u7DE8\u8F2F\u7CFB\u7D71\u8A2D\u5B9A",category:"\u7CFB\u7D71\u7BA1\u7406",isSystem:!0},{id:_e.SYSTEM_CONFIG,name:"\u7CFB\u7D71\u914D\u7F6E",description:"\u53EF\u4EE5\u914D\u7F6E\u7CFB\u7D71\u53C3\u6578",category:"\u7CFB\u7D71\u7BA1\u7406",isSystem:!0},{id:_e.CONTENT_READ,name:"\u8B80\u53D6\u5167\u5BB9",description:"\u53EF\u4EE5\u67E5\u770B\u5167\u5BB9",category:"\u5167\u5BB9\u7BA1\u7406",isSystem:!0},{id:_e.CONTENT_WRITE,name:"\u7DE8\u8F2F\u5167\u5BB9",description:"\u53EF\u4EE5\u7DE8\u8F2F\u5167\u5BB9",category:"\u5167\u5BB9\u7BA1\u7406",isSystem:!0},{id:_e.CONTENT_DELETE,name:"\u522A\u9664\u5167\u5BB9",description:"\u53EF\u4EE5\u522A\u9664\u5167\u5BB9",category:"\u5167\u5BB9\u7BA1\u7406",isSystem:!0},{id:_e.CONTENT_PUBLISH,name:"\u767C\u5E03\u5167\u5BB9",description:"\u53EF\u4EE5\u767C\u5E03\u5167\u5BB9",category:"\u5167\u5BB9\u7BA1\u7406",isSystem:!0}]}};Ut.\u0275fac=function(e){return new(e||Ut)},Ut.\u0275prov=ht({token:Ut,factory:Ut.\u0275fac,providedIn:"root"});var Wi=Ut;var ii=class ii{constructor(){this.aclSrv=M(Jt);this.menuSrv=M(Oi);this.firebaseRoleService=M(Wi);this.firebaseAuthService=M(sr);this.full=!0;this.roleA="";this.roleB="";this.firebaseUser=this.firebaseAuthService.currentUser;this.firebaseRoles=this.firebaseRoleService.userRoles;this.firebasePermissions=this.firebaseRoleService.userPermissions;this.firebaseCustomClaims=this.firebaseRoleService.customClaims;this.isFirebaseLoading=this.firebaseRoleService.isLoading;this.firebaseError=this.firebaseRoleService.error;this.hasFirebaseUser=Vt(()=>this.firebaseUser()!==null);this.isFirebaseAdmin=this.firebaseRoleService.isAdmin;this.isFirebaseGuest=this.firebaseRoleService.isGuest}get data(){return this.aclSrv.data}reMenu(){this.menuSrv.resume()}toggleFull(){this.full=!this.full,this.aclSrv.setFull(this.full),this.reMenu()}toggleRoleA(){this.full=!1,this.roleA=this.roleA==="role-a"?"":"role-a",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleA]),this.reMenu()}toggleRoleB(){this.full=!1,this.roleB=this.roleB==="role-b"?"":"role-b",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleB]),this.reMenu()}};ii.\u0275fac=function(e){return new(e||ii)},ii.\u0275cmp=S({type:ii,selectors:[["app-acl"]],decls:32,vars:14,consts:[[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u6309\u94AE\u7C92\u5EA6"],["nz-button","",3,"acl"],["nz-button","",1,"ml-sm",3,"acl"],["nzTitle","\u5168\u91CF"],["nz-button","",3,"click"],[1,"pt-md"],["nzTitle","\u89D2\u8272[role-a]"],["nzTitle","\u89D2\u8272[role-b]"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," ACL \u8BBF\u95EE\u63A7\u5236 "),u(3,"small"),f(4,"\u6CE8\u610F\u89C2\u5BDF\u5DE6\u8FB9\u7684\u83DC\u5355\uFF1BACLService\u63D0\u4F9B\u4E00\u4E2A\u5B8C\u6574\u7684\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\u7684\u670D\u52A1\uFF0C\u82E5\u9700\u8981\u652F\u6301\u8DEF\u7531\u5B88\u536B\uFF0C\u8BF7\u914D\u5408ACLService\u4E0ERoute Guard\u914D\u5408\u7B80\u4FBF\u5B9E\u73B0\u3002"),c()()(),u(5,"div",1)(6,"div",2)(7,"nz-card",3),f(8),At(9,"json"),u(10,"button",4),f(11,"role-a"),c(),u(12,"button",5),f(13,"role-b"),c()()()(),u(14,"div",1)(15,"div",2)(16,"nz-card",6)(17,"button",7),v("click",function(){return t.toggleFull()}),u(18,"span"),f(19),c()(),u(20,"p",8),f(21,"\u5168\u91CF\u7C7B\u6307\u7CFB\u7EDF\u7BA1\u7406\u5458\u89D2\u8272\uFF0C\u65E0\u4EFB\u4F55\u53D7\u9650\u3002"),c()()(),u(22,"div",2)(23,"nz-card",9)(24,"button",7),v("click",function(){return t.toggleRoleA()}),u(25,"span"),f(26),c()()()(),u(27,"div",2)(28,"nz-card",10)(29,"button",7),v("click",function(){return t.toggleRoleB()}),u(30,"span"),f(31),c()()()()()),e&2&&(d(5),h("nzGutter",8),d(),h("nzSpan",24),d(2),Ee(" ACL\u539F\u59CB\u6570\u636E\uFF1A",xt(9,12,t.data)," "),d(2),h("acl","role-a"),d(2),h("acl","role-b"),d(2),h("nzGutter",8),d(),h("nzSpan",8),d(4),Ee("",t.full?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),d(3),h("nzSpan",8),d(4),Ee("",t.roleA.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),d(),h("nzSpan",8),d(4),Ee("",t.roleB.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"))},dependencies:[I,L,oe,$,le,se,ae,Qo,T,he,x,Ne,H,Q,St,_t,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A,Pt],encapsulation:2});var qi=ii;var Yr=new Fo("DC_STORE_STORAGE_TOKEN",{providedIn:"root",factory:()=>new ho}),ho=class{platform=M(co);get(o){return this.platform.isBrowser&&JSON.parse(localStorage.getItem(o)||"null")||null}set(o,e){return this.platform.isBrowser&&localStorage.setItem(o,JSON.stringify(e)),!0}remove(o){this.platform.isBrowser&&localStorage.removeItem(o)}},Br=(()=>{class s{store=M(Yr);http=M(Pi);platform=M(co);memory=new Map;notifyBuffer=new Map;meta=new Set;freqTick=3e3;freqTime;cog=M(Yt).merge("cache",{mode:"promise",reName:"",prefix:"",meta_key:"__cache_meta"});constructor(){this.platform.isBrowser&&(this.loadMeta(),this.startExpireNotify())}pushMeta(e){this.meta.has(e)||(this.meta.add(e),this.saveMeta())}removeMeta(e){this.meta.has(e)&&(this.meta.delete(e),this.saveMeta())}loadMeta(){let e=this.store.get(this.cog.meta_key);e&&e.v&&e.v.forEach(t=>this.meta.add(t))}saveMeta(){let e=[];this.meta.forEach(t=>e.push(t)),this.store.set(this.cog.meta_key,{v:e,e:0})}getMeta(){return this.meta}set(e,t,r={}){if(!this.platform.isBrowser)return;let l=0,{type:m,expire:z}=this.cog;r=De({type:m,expire:z},r),r.expire&&(l=ir(new Date,r.expire).valueOf());let i=r.emitNotify!==!1;if(!(t instanceof zi)){this.save(r.type,e,{v:t,e:l},i);return}return t.pipe(mo(n=>{this.save(r.type,e,{v:n,e:l},i)}))}save(e,t,r,l=!0){e==="m"?this.memory.set(t,r):(this.store.set(this.cog.prefix+t,r),this.pushMeta(t)),l&&this.runNotify(t,"set")}get(e,t={}){if(!this.platform.isBrowser)return null;let r=t.mode!=="none"&&this.cog.mode==="promise",l=this.memory.has(e)?this.memory.get(e):this.store.get(this.cog.prefix+e);return!l||l.e&&l.e>0&&l.e<new Date().valueOf()?r?(this.cog.request?this.cog.request(e):this.http.get(e)).pipe(wo(m=>$o(m,this.cog.reName,m)),mo(m=>this.set(e,m,{type:t.type,expire:t.expire,emitNotify:t.emitNotify}))):null:r?gi(l.v):l.v}getNone(e){return this.get(e,{mode:"none"})}tryGet(e,t,r={}){if(!this.platform.isBrowser)return null;let l=this.getNone(e);return l===null?t instanceof zi?this.set(e,t,r):(this.set(e,t,r),t):gi(l)}has(e){return this.memory.has(e)||this.meta.has(e)}_remove(e,t){if(t&&this.runNotify(e,"remove"),this.memory.has(e)){this.memory.delete(e);return}this.store.remove(this.cog.prefix+e),this.removeMeta(e)}remove(e){this.platform.isBrowser&&this._remove(e,!0)}clear(){this.platform.isBrowser&&(this.notifyBuffer.forEach((e,t)=>this.runNotify(t,"remove")),this.memory.clear(),this.meta.forEach(e=>this.store.remove(this.cog.prefix+e)))}set freq(e){this.freqTick=Math.max(20,e),this.abortExpireNotify(),this.startExpireNotify()}startExpireNotify(){this.checkExpireNotify(),this.runExpireNotify()}runExpireNotify(){this.freqTime=setTimeout(()=>{this.checkExpireNotify(),this.runExpireNotify()},this.freqTick)}checkExpireNotify(){let e=[];this.notifyBuffer.forEach((t,r)=>{this.has(r)&&this.getNone(r)===null&&e.push(r)}),e.forEach(t=>{this.runNotify(t,"expire"),this._remove(t,!1)})}abortExpireNotify(){clearTimeout(this.freqTime)}runNotify(e,t){this.notifyBuffer.has(e)&&this.notifyBuffer.get(e).next({type:t,value:this.getNone(e)})}notify(e){if(!this.notifyBuffer.has(e)){let t=new bi(this.getNone(e));this.notifyBuffer.set(e,t)}return this.notifyBuffer.get(e).asObservable()}cancelNotify(e){this.notifyBuffer.has(e)&&(this.notifyBuffer.get(e).unsubscribe(),this.notifyBuffer.delete(e))}hasNotify(e){return this.notifyBuffer.has(e)}clearNotify(){this.notifyBuffer.forEach(e=>e.unsubscribe()),this.notifyBuffer.clear()}ngOnDestroy(){this.memory.clear(),this.abortExpireNotify(),this.clearNotify()}static \u0275fac=function(t){return new(t||s)};static \u0275prov=ht({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Na=new Yo(()=>({}));var oi=class oi{constructor(){this.cache=M(Br);this.msg=M(Mt);this.KEY="user"}set(){this.cache.set(this.KEY,+new Date)}get(){this.msg.success(this.cache.getNone(this.KEY))}};oi.\u0275fac=function(e){return new(e||oi)},oi.\u0275cmp=S({type:oi,selectors:[["app-cache"]],decls:10,vars:0,consts:[[1,"alain-default__content-title"],["href","https://ng-alain.com/components/cache","target","_blank"],["nzTitle","Service"],["nz-button","",3,"click"],["nz-button","",1,"ml-sm",3,"click"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Cache \u7F13\u5B58, "),u(3,"a",1),f(4,"Document"),c()()(),u(5,"nz-card",2)(6,"button",3),v("click",function(){return t.set()}),f(7,"\u8BBE\u7F6E"),c(),u(8,"button",4),v("click",function(){return t.get()}),f(9,"\u83B7\u53D6"),c()())},dependencies:[I,L,oe,$,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A],encapsulation:2});var Zi=oi;var Ir=Eo(Mo(),1);var Lr=(()=>{class s{el=M(Wt).nativeElement;_http=M(Vi);httpData;httpBody;httpMethod="get";httpUrl;fileName;pre;success=new Ci;error=new Ci;getDisposition(e){return(e||"").split(";").filter(r=>r.includes("=")).map(r=>{let l=r.split("="),m="UTF-8''",z=l[1];return z.startsWith(m)&&(z=z.substring(m.length)),{[l[0].trim()]:z}}).reduce((r,l)=>l,{})}isFileSaverSupported=!1;constructor(){try{this.isFileSaverSupported=!!new Blob}catch{}this.isFileSaverSupported||this.el.classList.add("down-file__not-support")}setDisabled(e){let t=this.el;t.disabled=e,t.classList[e?"add":"remove"]("down-file__disabled")}_click(e){return Et(this,null,function*(){if(!this.isFileSaverSupported||typeof this.pre=="function"&&!(yield this.pre(e))){e.stopPropagation(),e.preventDefault();return}this.setDisabled(!0),this._http.request(this.httpMethod,this.httpUrl,{params:this.httpData||{},responseType:"blob",observe:"response",body:this.httpBody}).pipe(To(()=>this.setDisabled(!1))).subscribe({next:t=>{if(t.status!==200||t.body.size<=0){this.error.emit(t);return}let r=this.getDisposition(t.headers.get("content-disposition")),l=this.fileName;typeof l=="function"&&(l=l(t)),l=l||r["filename*"]||r.filename||t.headers.get("filename")||t.headers.get("x-filename"),(0,Ir.saveAs)(t.body,decodeURI(l)),this.success.emit(t)},error:t=>this.error.emit(t)})})}static \u0275fac=function(t){return new(t||s)};static \u0275dir=Ti({type:s,selectors:[["","down-file",""]],hostBindings:function(t,r){t&1&&v("click",function(m){return r._click(m)})},inputs:{httpData:[0,"http-data","httpData"],httpBody:[0,"http-body","httpBody"],httpMethod:[0,"http-method","httpMethod"],httpUrl:[0,"http-url","httpUrl"],fileName:[0,"file-name","fileName"],pre:"pre"},outputs:{success:"success",error:"error"},exportAs:["downFile"]})}return s})();function Xr(s,o){if(s&1&&(u(0,"button",2),f(1),c()),s&2){let e=o.$implicit,t=E();h("http-url",vi("assets/tmp/demo",e))("http-data",t.data),d(),Ee(" ",e," ")}}var ri=class ri{constructor(){this.fileTypes=[".xlsx",".docx",".pptx",".pdf"];this.data={otherdata:1,time:new Date}}};ri.\u0275fac=function(e){return new(e||ri)},ri.\u0275cmp=S({type:ri,selectors:[["app-down-file"]],decls:6,vars:0,consts:[[1,"alain-default__content-title"],["nzTitle","DEMO"],["nz-button","","down-file","","file-name","demo\u4E2D\u6587",1,"mr-sm",3,"http-data","http-url"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2,"Download a file"),c()(),u(3,"nz-card",1),Rt(4,Xr,2,4,"button",2,Tt),c()),e&2&&(d(4),Ft(t.fileTypes))},dependencies:[I,L,oe,$,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A,Lr],encapsulation:2});var Yi=ri;var Jr=s=>({params:s}),ni=class ni{constructor(){this.params={};this.url="/user";this.searchSchema={properties:{no:{type:"string",title:"\u7F16\u53F7"}}};this.columns=[{title:"\u7F16\u53F7",index:"no"},{title:"\u8C03\u7528\u6B21\u6570",type:"number",index:"callNo"},{title:"\u5934\u50CF",type:"img",width:"50px",index:"avatar"},{title:"\u65F6\u95F4",type:"date",index:"updatedAt"}]}};ni.\u0275fac=function(e){return new(e||ni)},ni.\u0275cmp=S({type:ni,selectors:[["app-delon-form"]],decls:5,vars:8,consts:[["st",""],[3,"title"],["mode","search",3,"formSubmit","formReset","schema","formData"],[3,"data","columns","req"]],template:function(e,t){if(e&1){let r=Te();fe(0,"page-header",1),u(1,"nz-card")(2,"sf",2),v("formSubmit",function(m){b(r);let z=bt(4);return w(z.reset(m))})("formReset",function(){b(r);let m=bt(4);return w(m.reset(t.params))}),c(),fe(3,"st",3,0),c()}e&2&&(h("title","Page Name"),d(2),h("schema",t.searchSchema)("formData",t.params),d(),h("data",t.url)("columns",t.columns)("req",yi(6,Jr,t.params)))},dependencies:[I,L,oe,wr,$,Kt,le,se,ae,Tr,T,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A],encapsulation:2});var Xi=ni;var ai=class ai{};ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275cmp=S({type:ai,selectors:[["app-guard-admin"]],decls:2,vars:0,template:function(e,t){e&1&&(Ri(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Aadmin\u9875\u9762"),Fi())},encapsulation:2});var Ji=ai;var si=class si{};si.\u0275fac=function(e){return new(e||si)},si.\u0275cmp=S({type:si,selectors:[["app-guard-auth"]],decls:2,vars:0,template:function(e,t){e&1&&(Ri(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Auser1\u9875\u9762"),Fi())},encapsulation:2});var Ki=si;var kr=()=>{let s=M(rr);return new zi(o=>{s.confirm({nzTitle:"\u786E\u8BA4\u8981\u79BB\u5F00\u5417\uFF1F",nzContent:"\u4F60\u5DF2\u7ECF\u586B\u5199\u4E86\u90E8\u5206\u8868\u5355\u79BB\u5F00\u4F1A\u653E\u5F03\u5DF2\u7ECF\u586B\u5199\u7684\u5185\u5BB9\u3002",nzOkText:"\u79BB\u5F00",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{o.next(!0),o.complete()},nzOnCancel:()=>{o.next(!1),o.complete()}})})};var $r=()=>["/delon/guard/leave"],Qr=()=>["/delon/guard/auth"],en=()=>["/delon/guard/admin"],li=class li{constructor(){this.aclSrv=M(Jt);this.menuSrv=M(Oi);this.router=M(Bi)}get data(){return this.aclSrv.data}setRole(o){this.aclSrv.setFull(!1),typeof o=="boolean"?this.aclSrv.setFull(o):this.aclSrv.set({role:[o]}),this.menuSrv.resume(),this.router.navigate(["/delon/guard"])}};li.\u0275fac=function(e){return new(e||li)},li.\u0275cmp=S({type:li,selectors:[["app-guard"]],decls:28,vars:9,consts:[[1,"alain-default__content-title"],["nz-button","",3,"routerLink"],[1,"ml-sm"],["nz-button","",3,"click"],[1,"mb-lg"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u8DEF\u7531\u5B88\u536B "),c()(),u(3,"nz-space-compact")(4,"button",1)(5,"span"),f(6,"\u79BB\u5F00\u786E\u8BA4\u9875"),c()()(),u(7,"nz-space-compact",2)(8,"button",3),v("click",function(){return t.setRole(!0)}),u(9,"span"),f(10,"\u8BBE\u7F6E\u7BA1\u7406\u5458"),c()(),u(11,"button",3),v("click",function(){return t.setRole("user1")}),u(12,"span"),f(13,"\u8BBE\u7F6E\u5458\u5DE51"),c()(),u(14,"button",3),v("click",function(){return t.setRole("user2")}),u(15,"span"),f(16,"\u8BBE\u7F6E\u5458\u5DE52"),c()()(),u(17,"nz-space-compact",2)(18,"button",1)(19,"span"),f(20,"\u9700\u8981user1"),c()(),u(21,"button",1)(22,"span"),f(23,"\u9700\u8981\u7BA1\u7406\u5458"),c()()(),u(24,"p",4),f(25),At(26,"json"),c(),fe(27,"router-outlet")),e&2&&(d(4),h("routerLink",ye(6,$r)),d(14),h("routerLink",ye(7,Qr)),d(3),h("routerLink",ye(8,en)),d(4),Ee("\u5F53\u524DACL\u4FE1\u606F\uFF1A",xt(26,4,t.data)))},dependencies:[I,L,Ii,Ko,oe,$,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,G,ce,W,A,tr,Pt],encapsulation:2});var $i=li;var tn=()=>["/delon/guard"],mi=class mi{};mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275cmp=S({type:mi,selectors:[["app-guard-leave"]],decls:5,vars:3,consts:[["nz-button","",3,"nzType","routerLink"]],template:function(e,t){e&1&&(u(0,"p"),f(1,"\u79BB\u5F00\u65F6\u9700\u8981\u786E\u8BA4"),c(),u(2,"button",0)(3,"span"),f(4,"\u6211\u8981\u79BB\u5F00"),c()()),e&2&&(d(2),h("nzType","primary")("routerLink",ye(2,tn)))},dependencies:[I,L,Ii,oe,$,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,G,ce,W,A],encapsulation:2});var Qi=mi;var Or=(()=>{class s{scriptSrv=M(Li);cogSrv=M(Yt);defaultConfig;_cog;pending=!1;_lodop=null;_init=new ao;_events=new ao;printBuffer=[];constructor(){this.defaultConfig=this.cogSrv.merge("lodop",{url:"http://localhost:8443/CLodopfuncs.js",name:"CLODOP",companyName:"",checkMaxCount:100}),this.cog=this.defaultConfig}get cog(){return this._cog}set cog(e){this._cog=De(De({},this.defaultConfig),e)}get events(){return this._events.asObservable()}get lodop(){return this._lodop?gi({ok:!0,lodop:this._lodop}):this.pending?this._init.asObservable():(this.request(),this._init.asObservable())}get printer(){this.check();let e=[],t=this._lodop.GET_PRINTER_COUNT();for(let r=0;r<t;r++)e.push(this._lodop.GET_PRINTER_NAME(r));return e}check(){if(!this._lodop)throw new Error("\u8BF7\u52A1\u5FC5\u5148\u8C03\u7528 lodop \u83B7\u53D6\u5BF9\u8C61")}request(){this.pending=!0;let e=new URL(this.cog.url);e.searchParams.set("name",this.cog.name);let t=e.toString(),r=this.cog.checkMaxCount,l=(z,i)=>{this._init.next({ok:z==="ok",status:z,error:i,lodop:this._lodop})},m=()=>{if(--r,this._lodop.webskt&&this._lodop.webskt.readyState===1)l("ok");else{if(r<0){l("check-limit");return}setTimeout(()=>m(),100)}};this.scriptSrv.loadScript(t).then(z=>{if(z.status!=="ok"){this.pending=!1,l("script-load-error",z[0]);return}let i=window;if(Object.prototype.hasOwnProperty.call(i,this.cog.name)&&(this._lodop=i[this.cog.name]),this._lodop===null){l("load-variable-name-error",{name:this.cog.name});return}this._lodop.SET_LICENSES(this.cog.companyName,this.cog.license,this.cog.licenseA,this.cog.licenseB),m()})}reset(){this._lodop=null,this.pending=!1,this.request()}attachCode(e,t,r){this.check(),r||(r=/LODOP\.([^(]+)\(([^\n]+)?\);/i),e.split(`
`).forEach(l=>{let m=r.exec(l.trim());if(!m)return;let z=this._lodop[m[1]];if(z){let i=null;try{i=new Function(`return [${m[2]}]`)()}catch{}if(i!=null&&Array.isArray(i)&&t)for(let n=0;n<i.length;n++)typeof i[n]=="string"&&(i[n]=i[n].replace(/{{(.*?)}}/g,(a,p)=>t[p.trim()]||""));z.apply(this._lodop,i)}})}design(){this.check();let e=this._lodop.PRINT_DESIGN();return new Promise(t=>{this._lodop.On_Return=(r,l)=>{e===r&&(this._lodop.On_Return=null,t(`${l}`))}})}printDo(){let e=this.printBuffer.shift();if(!e)return;this.attachCode(e.code,e.item,e.parser);let t=this._lodop.PRINT();this._lodop.On_Return=(r,l)=>{t===r&&(this._lodop.On_Return=null,this._events.next(De({ok:l===!0,error:l===!0?null:l},e)),this.printDo())}}print(e,t,r){this.check(),t&&this.printBuffer.push(...(Array.isArray(t)?t:[t]).map(l=>({code:e,parser:r,item:l}))),this.printDo()}ngOnDestroy(){this._init.unsubscribe(),this._events.unsubscribe()}static \u0275fac=function(t){return new(t||s)};static \u0275prov=ht({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function on(s,o){s&1&&(f(0," \u8BF7\u5148\u4E0B\u8F7D "),u(1,"a",5),f(2,"Lodop\u63D2\u4EF6"),c(),f(3,"\u3002 "))}function rn(s,o){if(s&1&&(u(0,"nz-alert",3),qt(1,on,4,0,"ng-template",null,0,Ho),c()),s&2){let e=bt(2);h("nzType","warning")("nzMessage",e)}}function nn(s,o){if(s&1&&fe(0,"nz-option",12),s&2){let e=o.$implicit;h("nzLabel",e)("nzValue",e)}}function an(s,o){if(s&1&&fe(0,"nz-option",12),s&2){let e=o.$implicit;h("nzLabel",e)("nzValue",e)}}function sn(s,o){if(s&1){let e=Te();u(0,"form",4)(1,"nz-form-item",6)(2,"nz-form-label",7),f(3,"\u6253\u5370\u670D\u52A1\u5668"),c(),u(4,"nz-form-control",7)(5,"nz-input-group")(6,"div",8)(7,"input",9),Me("ngModelChange",function(r){b(e);let l=E();return ge(l.cog.url,r)||(l.cog.url=r),w(r)}),c()(),u(8,"div",8)(9,"button",10),v("click",function(){b(e);let r=E();return w(r.reload(null))}),f(10,"\u91CD\u65B0\u52A0\u8F7D\u6253\u5370\u673A"),c()()()()(),u(11,"nz-form-item",6)(12,"nz-form-label",7),f(13,"\u6253\u5370\u673A"),c(),u(14,"nz-form-control",7)(15,"nz-select",11),Me("ngModelChange",function(r){b(e);let l=E();return ge(l.cog.printer,r)||(l.cog.printer=r),w(r)}),v("ngModelChange",function(r){b(e);let l=E();return w(l.changePinter(r))}),Rt(16,nn,1,2,"nz-option",12,Tt),c()()(),u(18,"nz-form-item",6)(19,"nz-form-label",7),f(20,"\u7EB8\u5F20\u7C7B\u578B"),c(),u(21,"nz-form-control",7)(22,"nz-select",13),Me("ngModelChange",function(r){b(e);let l=E();return ge(l.cog.paper,r)||(l.cog.paper=r),w(r)}),Rt(23,an,1,2,"nz-option",12,Tt),c()()(),u(25,"nz-form-item",6)(26,"nz-form-label",7),f(27,"\u6253\u5370\u5185\u5BB9"),c(),u(28,"nz-form-control",7)(29,"textarea",14),Me("ngModelChange",function(r){b(e);let l=E();return ge(l.cog.html,r)||(l.cog.html=r),w(r)}),c(),u(30,"div",15),f(31,"\u4EC5\u9650HTML\uFF0C\u66F4\u591A\u7C7B\u578B\u652F\u6301\u8BF7\u53C2\u8003\u5B98\u7F51"),c()()(),u(32,"nz-form-item",6)(33,"nz-form-control",16)(34,"button",17),v("click",function(){b(e);let r=E();return w(r.print(!0))}),f(35,"\u6253\u5370\u9884\u89C8"),c(),u(36,"button",17),v("click",function(){b(e);let r=E();return w(r.print())}),f(37,"\u76F4\u63A5\u6253\u5370"),c()()()()}if(s&2){let e=E();d(2),h("nzSm",6),d(2),h("nzSm",18),d(2),h("nzSpan",16),d(),ze("ngModel",e.cog.url),d(),h("nzSpan",8),d(4),h("nzSm",6),d(2),h("nzSm",18),d(),ze("ngModel",e.cog.printer),d(),Ft(e.pinters),d(3),h("nzSm",6),d(2),h("nzSm",18),d(),ze("ngModel",e.cog.paper),d(),Ft(e.papers),d(3),h("nzSm",6),d(2),h("nzSm",18),d(),ze("ngModel",e.cog.html),d(4),h("nzSm",18)("nzOffset",6),d(),h("nzLoading",e.printing),d(2),h("nzLoading",e.printing)}}var ui=class ui{constructor(){this.lodopSrv=M(Or);this.msg=M(Mt);this.cog={url:"https://localhost:8443/CLodopfuncs.js",printer:"",paper:"",html:`
      <h1>Title</h1>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
    `};this.error=!1;this.lodop=null;this.pinters=[];this.papers=[];this.printing=!1;this.lodopSrv.lodop.subscribe(({lodop:o,ok:e})=>{if(!e){this.error=!0;return}this.error=!1,this.msg.success("\u6253\u5370\u673A\u52A0\u8F7D\u6210\u529F"),this.lodop=o,this.pinters=this.lodopSrv.printer})}reload(o={url:"https://localhost:8443/CLodopfuncs.js"}){this.pinters=[],this.papers=[],this.cog.printer="",this.cog.paper="",this.lodopSrv.cog=De(De({},this.cog),o),this.error=!1,o===null&&this.lodopSrv.reset()}changePinter(o){this.lodop!=null&&(this.papers=this.lodop.GET_PAGESIZES_LIST(o,`
`).split(`
`))}print(o=!1){let e=this.lodop;e.PRINT_INITA(10,20,810,610,"\u6D4B\u8BD5C-Lodop\u8FDC\u7A0B\u6253\u5370\u56DB\u6B65\u9AA4"),e.SET_PRINTER_INDEXA(this.cog.printer),e.SET_PRINT_PAGESIZE(0,0,0,this.cog.paper),e.ADD_PRINT_TEXT(1,1,300,200,"\u4E0B\u9762\u8F93\u51FA\u7684\u662F\u672C\u9875\u6E90\u4EE3\u7801\u53CA\u5176\u5C55\u73B0\u6548\u679C\uFF1A"),e.ADD_PRINT_TEXT(20,10,"90%","95%",this.cog.html),e.SET_PRINT_STYLEA(0,"ItemType",4),e.NEWPAGEA(),e.ADD_PRINT_HTM(20,10,"90%","95%",this.cog.html),o?e.PREVIEW():e.PRINT()}};ui.\u0275fac=function(e){return new(e||ui)},ui.\u0275cmp=S({type:ui,selectors:[["app-print"]],decls:10,vars:2,consts:[["message",""],[1,"alain-default__content-title"],["href","https://ng-alain.com/components/lodop","target","_blank"],[3,"nzType","nzMessage"],["nz-form",""],["href","http://c-lodop.com/download.html","target","_blank"],["nz-row",""],["nz-col","",3,"nzSm"],["nz-col","",3,"nzSpan"],["nz-input","","nzPlaceHolder","https://localhost:8443/CLodopfuncs.js","name","url",3,"ngModelChange","ngModel"],["nz-button","",3,"click"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u6253\u5370\u673A","nzShowSearch","","nzAllowClear","","name","printer",2,"width","90%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u7EB8\u5F20\u7C7B\u578B","nzShowSearch","","nzAllowClear","","name","paper",2,"width","90%",3,"ngModelChange","ngModel"],["nz-input","","name","html","nzAutosize","",3,"ngModelChange","ngModel"],["nz-form-extra",""],["nz-col","",3,"nzSm","nzOffset"],["nz-button","",3,"click","nzLoading"]],template:function(e,t){e&1&&(u(0,"div",1)(1,"h1"),f(2," Lodop\u6253\u5370 "),u(3,"small"),f(4," \u66F4\u591A\u4F53\u9A8C\u8BF7\u81F3 "),u(5,"a",2),f(6,"NG-ALAIN.com"),c()()()(),u(7,"nz-card"),zt(8,rn,3,2,"nz-alert",3),zt(9,sn,38,18,"form",4),c()),e&2&&(d(8),gt(t.error?8:-1),d(),gt(t.error?-1:9))},dependencies:[I,Lt,Nt,Ct,Bt,vt,It,L,oe,$,le,se,ae,T,he,x,Ne,H,Q,St,_t,O,j,de,q,Ui,ji,D,k,me,Ar,P,Z,B,re,J,yt,Gi,Sr,K,X,Y,U,ne,pe,ie,V,ee,kt,$t,ei,Qt,ue,R,te,Ce,G,ce,W,A],encapsulation:2});var eo=ui;var ln=["canvas"];function mn(s,o){if(s&1&&(Io(0),f(1),Lo()),s&2){let e=E(2);d(),Ot(e.nzStatusRender)}}function un(s,o){if(s&1&&(u(0,"div",1),qt(1,mn,2,1,"ng-container",2),c()),s&2){let e=E();d(),h("nzStringTemplateOutlet",e.nzStatusRender)}}function pn(s,o){s&1&&fe(0,"nz-spin")}function dn(s,o){if(s&1){let e=Te();u(0,"div")(1,"p",3),f(2),c(),u(3,"button",4),v("click",function(){b(e);let r=E(2);return w(r.reloadQRCode())}),fe(4,"nz-icon",5),u(5,"span"),f(6),c()()()}if(s&2){let e=E(2);d(2),Ot(e.locale.expired),d(4),Ot(e.locale.refresh)}}function cn(s,o){if(s&1&&(u(0,"div")(1,"p",3),f(2),c()()),s&2){let e=E(2);d(2),Ot(e.locale.scanned)}}function fn(s,o){if(s&1&&(u(0,"div",1),zt(1,pn,1,0,"nz-spin")(2,dn,7,2,"div")(3,cn,3,1,"div"),c()),s&2){let e,t=E();d(),gt((e=t.nzStatus)==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function hn(s,o){s&1&&fe(0,"canvas",null,0)}var jt;(function(s){let o=(()=>{class m{version;errorCorrectionLevel;static encodeText(i,n){let a=s.QrSegment.makeSegments(i);return m.encodeSegments(a,n)}static encodeBinary(i,n){let a=s.QrSegment.makeBytes(i);return m.encodeSegments([a],n)}static encodeSegments(i,n,a=1,p=40,g=-1,C=!0){if(!(m.MIN_VERSION<=a&&a<=p&&p<=m.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let N,_;for(N=a;;N++){let F=m.getNumDataCodewords(N,n)*8,Se=l.getTotalBits(i,N);if(Se<=F){_=Se;break}if(N>=p)throw new RangeError("Data too long")}for(let F of[m.Ecc.MEDIUM,m.Ecc.QUARTILE,m.Ecc.HIGH])C&&_<=m.getNumDataCodewords(N,F)*8&&(n=F);let y=[];for(let F of i){e(F.mode.modeBits,4,y),e(F.numChars,F.mode.numCharCountBits(N),y);for(let Se of F.getData())y.push(Se)}r(y.length==_);let xe=m.getNumDataCodewords(N,n)*8;r(y.length<=xe),e(0,Math.min(4,xe-y.length),y),e(0,(8-y.length%8)%8,y),r(y.length%8==0);for(let F=236;y.length<xe;F^=253)e(F,8,y);let Dt=[];for(;Dt.length*8<y.length;)Dt.push(0);return y.forEach((F,Se)=>Dt[Se>>>3]|=F<<7-(Se&7)),new m(N,n,Dt,g)}size;mask;modules=[];isFunction=[];constructor(i,n,a,p){if(this.version=i,this.errorCorrectionLevel=n,i<m.MIN_VERSION||i>m.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=i*4+17;let g=[];for(let N=0;N<this.size;N++)g.push(!1);for(let N=0;N<this.size;N++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();let C=this.addEccAndInterleave(a);if(this.drawCodewords(C),p==-1){let N=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);let y=this.getPenaltyScore();y<N&&(p=_,N=y),this.applyMask(_)}}r(p>=0&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}getModule(i,n){return i>=0&&i<this.size&&n>=0&&n<this.size&&this.modules[n][i]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let i=this.getAlignmentPatternPositions(),n=i.length;for(let a=0;a<n;a++)for(let p=0;p<n;p++)a==0&&p==0||a==0&&p==n-1||a==n-1&&p==0||this.drawAlignmentPattern(i[a],i[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(i){let n=this.errorCorrectionLevel.formatBits<<3|i,a=n;for(let g=0;g<10;g++)a=a<<1^(a>>>9)*1335;let p=(n<<10|a)^21522;r(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,t(p,g));this.setFunctionModule(8,7,t(p,6)),this.setFunctionModule(8,8,t(p,7)),this.setFunctionModule(7,8,t(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,t(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,t(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,t(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let i=this.version;for(let a=0;a<12;a++)i=i<<1^(i>>>11)*7973;let n=this.version<<12|i;r(n>>>18==0);for(let a=0;a<18;a++){let p=t(n,a),g=this.size-11+a%3,C=Math.floor(a/3);this.setFunctionModule(g,C,p),this.setFunctionModule(C,g,p)}}drawFinderPattern(i,n){for(let a=-4;a<=4;a++)for(let p=-4;p<=4;p++){let g=Math.max(Math.abs(p),Math.abs(a)),C=i+p,N=n+a;C>=0&&C<this.size&&N>=0&&N<this.size&&this.setFunctionModule(C,N,g!=2&&g!=4)}}drawAlignmentPattern(i,n){for(let a=-2;a<=2;a++)for(let p=-2;p<=2;p++)this.setFunctionModule(i+p,n+a,Math.max(Math.abs(p),Math.abs(a))!=1)}setFunctionModule(i,n,a){this.modules[n][i]=a,this.isFunction[n][i]=!0}addEccAndInterleave(i){let n=this.version,a=this.errorCorrectionLevel;if(i.length!=m.getNumDataCodewords(n,a))throw new RangeError("Invalid argument");let p=m.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][n],g=m.ECC_CODEWORDS_PER_BLOCK[a.ordinal][n],C=Math.floor(m.getNumRawDataModules(n)/8),N=p-C%p,_=Math.floor(C/p),y=[],xe=m.reedSolomonComputeDivisor(g);for(let F=0,Se=0;F<p;F++){let Gt=i.slice(Se,Se+_-g+(F<N?0:1));Se+=Gt.length;let qr=m.reedSolomonComputeRemainder(Gt,xe);F<N&&Gt.push(0),y.push(Gt.concat(qr))}let Dt=[];for(let F=0;F<y[0].length;F++)y.forEach((Se,Gt)=>{(F!=_-g||Gt>=N)&&Dt.push(Se[F])});return r(Dt.length==C),Dt}drawCodewords(i){if(i.length!=Math.floor(m.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){let C=a-g,_=(a+1&2)==0?this.size-1-p:p;!this.isFunction[_][C]&&n<i.length*8&&(this.modules[_][C]=t(i[n>>>3],7-(n&7)),n++)}}r(n==i.length*8)}applyMask(i){if(i<0||i>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let a=0;a<this.size;a++){let p;switch(i){case 0:p=(a+n)%2==0;break;case 1:p=n%2==0;break;case 2:p=a%3==0;break;case 3:p=(a+n)%3==0;break;case 4:p=(Math.floor(a/3)+Math.floor(n/2))%2==0;break;case 5:p=a*n%2+a*n%3==0;break;case 6:p=(a*n%2+a*n%3)%2==0;break;case 7:p=((a+n)%2+a*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][a]&&p&&(this.modules[n][a]=!this.modules[n][a])}}getPenaltyScore(){let i=0;for(let g=0;g<this.size;g++){let C=!1,N=0,_=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[g][y]==C?(N++,N==5?i+=m.PENALTY_N1:N>5&&i++):(this.finderPenaltyAddHistory(N,_),C||(i+=this.finderPenaltyCountPatterns(_)*m.PENALTY_N3),C=this.modules[g][y],N=1);i+=this.finderPenaltyTerminateAndCount(C,N,_)*m.PENALTY_N3}for(let g=0;g<this.size;g++){let C=!1,N=0,_=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][g]==C?(N++,N==5?i+=m.PENALTY_N1:N>5&&i++):(this.finderPenaltyAddHistory(N,_),C||(i+=this.finderPenaltyCountPatterns(_)*m.PENALTY_N3),C=this.modules[y][g],N=1);i+=this.finderPenaltyTerminateAndCount(C,N,_)*m.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let C=0;C<this.size-1;C++){let N=this.modules[g][C];N==this.modules[g][C+1]&&N==this.modules[g+1][C]&&N==this.modules[g+1][C+1]&&(i+=m.PENALTY_N2)}let n=0;for(let g of this.modules)n=g.reduce((C,N)=>C+(N?1:0),n);let a=this.size*this.size,p=Math.ceil(Math.abs(n*20-a*10)/a)-1;return r(p>=0&&p<=9),i+=p*m.PENALTY_N4,r(i>=0&&i<=2568888),i}getAlignmentPatternPositions(){if(this.version==1)return[];{let i=Math.floor(this.version/7)+2,n=Math.floor((this.version*8+i*3+5)/(i*4-4))*2,a=[6];for(let p=this.size-7;a.length<i;p-=n)a.splice(1,0,p);return a}}static getNumRawDataModules(i){if(i<m.MIN_VERSION||i>m.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*i+128)*i+64;if(i>=2){let a=Math.floor(i/7)+2;n-=(25*a-10)*a-55,i>=7&&(n-=36)}return r(n>=208&&n<=29648),n}static getNumDataCodewords(i,n){return Math.floor(m.getNumRawDataModules(i)/8)-m.ECC_CODEWORDS_PER_BLOCK[n.ordinal][i]*m.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][i]}static reedSolomonComputeDivisor(i){if(i<1||i>255)throw new RangeError("Degree out of range");let n=[];for(let p=0;p<i-1;p++)n.push(0);n.push(1);let a=1;for(let p=0;p<i;p++){for(let g=0;g<n.length;g++)n[g]=m.reedSolomonMultiply(n[g],a),g+1<n.length&&(n[g]^=n[g+1]);a=m.reedSolomonMultiply(a,2)}return n}static reedSolomonComputeRemainder(i,n){let a=n.map(p=>0);for(let p of i){let g=p^a.shift();a.push(0),n.forEach((C,N)=>a[N]^=m.reedSolomonMultiply(C,g))}return a}static reedSolomonMultiply(i,n){if(i>>>8||n>>>8)throw new RangeError("Byte out of range");let a=0;for(let p=7;p>=0;p--)a=a<<1^(a>>>7)*285,a^=(n>>>p&1)*i;return r(a>>>8==0),a}finderPenaltyCountPatterns(i){let n=i[1];r(n<=this.size*3);let a=n>0&&i[2]==n&&i[3]==n*3&&i[4]==n&&i[5]==n;return(a&&i[0]>=n*4&&i[6]>=n?1:0)+(a&&i[6]>=n*4&&i[0]>=n?1:0)}finderPenaltyTerminateAndCount(i,n,a){return i&&(this.finderPenaltyAddHistory(n,a),n=0),n+=this.size,this.finderPenaltyAddHistory(n,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(i,n){n[0]==0&&(i+=this.size),n.pop(),n.unshift(i)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return m})();s.QrCode=o;function e(m,z,i){if(z<0||z>31||m>>>z)throw new RangeError("Value out of range");for(let n=z-1;n>=0;n--)i.push(m>>>n&1)}function t(m,z){return(m>>>z&1)!=0}function r(m){if(!m)throw new Error("Assertion error")}let l=(()=>{class m{mode;numChars;bitData;static makeBytes(i){let n=[];for(let a of i)e(a,8,n);return new m(m.Mode.BYTE,i.length,n)}static makeNumeric(i){if(!m.isNumeric(i))throw new RangeError("String contains non-numeric characters");let n=[];for(let a=0;a<i.length;){let p=Math.min(i.length-a,3);e(parseInt(i.substring(a,a+p),10),p*3+1,n),a+=p}return new m(m.Mode.NUMERIC,i.length,n)}static makeAlphanumeric(i){if(!m.isAlphanumeric(i))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],a;for(a=0;a+2<=i.length;a+=2){let p=m.ALPHANUMERIC_CHARSET.indexOf(i.charAt(a))*45;p+=m.ALPHANUMERIC_CHARSET.indexOf(i.charAt(a+1)),e(p,11,n)}return a<i.length&&e(m.ALPHANUMERIC_CHARSET.indexOf(i.charAt(a)),6,n),new m(m.Mode.ALPHANUMERIC,i.length,n)}static makeSegments(i){return i==""?[]:m.isNumeric(i)?[m.makeNumeric(i)]:m.isAlphanumeric(i)?[m.makeAlphanumeric(i)]:[m.makeBytes(m.toUtf8ByteArray(i))]}static makeEci(i){let n=[];if(i<0)throw new RangeError("ECI assignment value out of range");if(i<128)e(i,8,n);else if(i<16384)e(2,2,n),e(i,14,n);else if(i<1e6)e(6,3,n),e(i,21,n);else throw new RangeError("ECI assignment value out of range");return new m(m.Mode.ECI,0,n)}static isNumeric(i){return m.NUMERIC_REGEX.test(i)}static isAlphanumeric(i){return m.ALPHANUMERIC_REGEX.test(i)}constructor(i,n,a){if(this.mode=i,this.numChars=n,this.bitData=a,n<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}getData(){return this.bitData.slice()}static getTotalBits(i,n){let a=0;for(let p of i){let g=p.mode.numCharCountBits(n);if(p.numChars>=1<<g)return 1/0;a+=4+g+p.bitData.length}return a}static toUtf8ByteArray(i){i=encodeURI(i);let n=[];for(let a=0;a<i.length;a++)i.charAt(a)!="%"?n.push(i.charCodeAt(a)):(n.push(parseInt(i.substring(a+1,a+3),16)),a+=2);return n}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return m})();s.QrSegment=l})(jt||(jt={}));(function(s){let o;(function(e){class t{ordinal;formatBits;static LOW=new t(0,1);static MEDIUM=new t(1,0);static QUARTILE=new t(2,3);static HIGH=new t(3,2);constructor(l,m){this.ordinal=l,this.formatBits=m}}e.Ecc=t})(o=s.QrCode||(s.QrCode={}))})(jt||(jt={}));(function(s){let o;(function(e){class t{modeBits;numBitsCharCount;static NUMERIC=new t(1,[10,12,14]);static ALPHANUMERIC=new t(2,[9,11,13]);static BYTE=new t(4,[8,16,16]);static KANJI=new t(8,[8,10,12]);static ECI=new t(7,[0,0,0]);constructor(l,m){this.modeBits=l,this.numBitsCharCount=m}numCharCountBits(l){return this.numBitsCharCount[Math.floor((l+7)/17)]}}e.Mode=t})(o=s.QrSegment||(s.QrSegment={}))})(jt||(jt={}));var Si=jt,zn={L:Si.QrCode.Ecc.LOW,M:Si.QrCode.Ecc.MEDIUM,Q:Si.QrCode.Ecc.QUARTILE,H:Si.QrCode.Ecc.HIGH},gn=160,Mn=10,Nn=10,Cn="#000000",vn="#FFFFFF",yn=40,_n="M",Sn=(s,o=_n)=>s?Si.QrCode.encodeText(s,zn[o]):null;function En(s,o,e=gn,t=Mn,r=Nn,l=Cn,m=vn,z=yn,i){let n=s.getContext("2d"),a=bn(r);if(s.style.width=`${e}px`,s.style.height=`${e}px`,!o){n.fillStyle="rgba(0, 0, 0, 0)",n.fillRect(0,0,s.width,s.height);return}if(s.width=o.size*t+a[1]+a[3],s.height=o.size*t+a[0]+a[2],!i)Co(n,s.width,s.height,t,m),No(n,o,t,a,m,l);else{let p=new Image;p.src=i,p.crossOrigin="anonymous",p.width=z*(s.width/e),p.height=z*(s.width/e);let g=()=>{N(),Co(n,s.width,s.height,t,m),No(n,o,t,a,m,l);let _=s.width/2-z*(s.width/e)/2;n.fillRect(_,_,z*(s.width/e),z*(s.width/e)),n.drawImage(p,_,_,z*(s.width/e),z*(s.width/e))},C=()=>{N(),Co(n,s.width,s.height,t,m),No(n,o,t,a,m,l)},N=()=>{p.removeEventListener("load",g),p.removeEventListener("error",C)};p.addEventListener("load",g),p.addEventListener("error",C)}}function No(s,o,e,t,r,l){for(let m=0;m<o.size;m++)for(let z=0;z<o.size;z++)s.fillStyle=o.getModule(z,m)?l:r,s.fillRect(t[3]+z*e,t[0]+m*e,e,e)}function Co(s,o,e,t,r){s.fillStyle=r,s.fillRect(0,0,o*t,e*t)}function bn(s){return Array.isArray(s)?Array(4).fill(0).map((o,e)=>s[e%s.length]):[s,s,s,s]}var Vr=(()=>{class s{i18n=M(or);el=M(Wt);cdr=M(Zt);destroyRef=M(wi);isBrowser=Zo(M(xo));canvas;nzValue="";nzPadding=0;nzColor="#000000";nzBgColor="#FFFFFF";nzSize=160;nzIcon="";nzIconSize=40;nzBordered=!0;nzStatus="active";nzLevel="M";nzStatusRender=null;nzRefresh=new Ci;locale;ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(Xt(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(e){let{nzValue:t,nzIcon:r,nzLevel:l,nzSize:m,nzIconSize:z,nzColor:i,nzPadding:n,nzBgColor:a}=e;(t||r||l||m||z||i||n||a)&&this.canvas&&this.drawCanvasQRCode(),a&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&En(this.canvas.nativeElement,Sn(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=S({type:s,selectors:[["nz-qrcode"]],viewQuery:function(t,r){if(t&1&&Vo(ln,5),t&2){let l;Uo(l=jo())&&(r.canvas=l.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(t,r){t&2&&Ai("ant-qrcode-border",r.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",_i],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",_i],nzBordered:[2,"nzBordered","nzBordered",xi],nzStatus:"nzStatus",nzLevel:"nzLevel",nzStatusRender:"nzStatusRender"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[Di],decls:3,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"]],template:function(t,r){t&1&&(zt(0,un,2,1,"div",1)(1,fn,4,1,"div",1),zt(2,hn,2,0,"canvas")),t&2&&(gt(r.nzStatusRender?0:r.nzStatus!=="active"?1:-1),d(2),gt(r.isBrowser?2:-1))},dependencies:[R,gr,T,he,x,D,ki,er],encapsulation:2,changeDetection:0})}return s})();var Ei=()=>({standalone:!0}),pi=class pi{constructor(){this.value="https://ng-alain.com/";this.background="#ffffff";this.foreground="#000000";this.level="L";this.mime="image/png";this.padding=10;this.size=220}};pi.\u0275fac=function(e){return new(e||pi)},pi.\u0275cmp=S({type:pi,selectors:[["app-qr"]],decls:44,vars:39,consts:[[1,"alain-default__content-title"],["href","https://ng.ant.design/components/qr-code","target","_blank"],[3,"nzGutter"],[1,"text-center",3,"nzSpan"],[3,"nzValue","nzBgColor","nzColor","nzLevel","nzSize","nzPadding"],[3,"nzSpan"],["nz-form",""],["nz-input","","type","color",2,"width","100px",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzValue","L","nzLabel","L"],["nzValue","M","nzLabel","M"],["nzValue","Q","nzLabel","Q"],["nzValue","H","nzLabel","H"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u4E8C\u7EF4\u7801 "),u(3,"a",1),f(4,"Document"),c()()(),u(5,"nz-card")(6,"nz-row",2)(7,"nz-col",3),fe(8,"nz-qrcode",4),c(),u(9,"nz-col",5)(10,"form",6)(11,"nz-form-item")(12,"nz-form-label",5),f(13,"\u80CC\u666F"),c(),u(14,"nz-form-control",5)(15,"nz-input-group")(16,"input",7),Me("ngModelChange",function(l){return ge(t.background,l)||(t.background=l),l}),c()()()(),u(17,"nz-form-item")(18,"nz-form-label",5),f(19,"\u524D\u666F"),c(),u(20,"nz-form-control",5)(21,"nz-input-group")(22,"input",7),Me("ngModelChange",function(l){return ge(t.foreground,l)||(t.foreground=l),l}),c()()()(),u(23,"nz-form-item")(24,"nz-form-label",5),f(25,"\u8BEF\u5DEE"),c(),u(26,"nz-form-control",5)(27,"nz-select",8),Me("ngModelChange",function(l){return ge(t.level,l)||(t.level=l),l}),fe(28,"nz-option",9)(29,"nz-option",10)(30,"nz-option",11)(31,"nz-option",12),c()()(),u(32,"nz-form-item")(33,"nz-form-label",5),f(34,"\u5185\u8FB9\u8DDD"),c(),u(35,"nz-form-control",5)(36,"nz-input-number",13),Me("ngModelChange",function(l){return ge(t.padding,l)||(t.padding=l),l}),c(),f(37,"px "),c()(),u(38,"nz-form-item")(39,"nz-form-label",5),f(40,"\u5927\u5C0F"),c(),u(41,"nz-form-control",5)(42,"nz-input-number",14),Me("ngModelChange",function(l){return ge(t.size,l)||(t.size=l),l}),c(),f(43,"px "),c()()()()()()),e&2&&(d(6),h("nzGutter",24),d(),h("nzSpan",8),d(),h("nzValue",t.value)("nzBgColor",t.background)("nzColor",t.foreground)("nzLevel",t.level)("nzSize",t.size)("nzPadding",t.padding),d(),h("nzSpan",16),d(3),h("nzSpan",8),d(2),h("nzSpan",16),d(2),ze("ngModel",t.background),h("ngModelOptions",ye(34,Ei)),d(2),h("nzSpan",8),d(2),h("nzSpan",16),d(2),ze("ngModel",t.foreground),h("ngModelOptions",ye(35,Ei)),d(2),h("nzSpan",8),d(2),h("nzSpan",16),d(),ze("ngModel",t.level),h("ngModelOptions",ye(36,Ei)),d(6),h("nzSpan",8),d(2),h("nzSpan",16),d(),ze("ngModel",t.padding),h("ngModelOptions",ye(37,Ei))("nzMin",0)("nzMax",100),d(3),h("nzSpan",8),d(2),h("nzSpan",16),d(),ze("ngModel",t.size),h("ngModelOptions",ye(38,Ei))("nzMin",100)("nzMax",1e3)("nzStep",t.padding))},dependencies:[I,Lt,Nt,Ct,Bt,vt,It,L,oe,$,le,se,ae,T,x,H,Q,St,_t,O,j,de,q,Ui,ji,D,k,me,P,Z,B,re,J,yt,Gi,K,Er,X,Y,U,ne,pe,ie,V,ee,kt,$t,ei,Qt,ue,R,te,Ce,G,ce,W,A,Vr],encapsulation:2});var to=pi;var wn=["*"],Dn=(()=>{class s{_change=new bi(null);toggle(){this._change.next(!0)}get change(){return this._change.pipe(Ro())}static \u0275fac=function(t){return new(t||s)};static \u0275prov=ht({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),vo="full-content__body",yo="full-content__opened",_o="full-content__hidden-title",So=(()=>{class s{destroy$=M(wi);el=M(Wt).nativeElement;cdr=M(Zt);srv=M(Dn);router=M(Bi);doc=M(Ao);bodyEl=this.doc.querySelector("body");inited=!1;id=`_full-content-${Math.random().toString(36).substring(2)}`;_height=0;hideTitle=uo(!0,{transform:xi});padding=uo(24,{transform:_i});fullscreen=Wo();updateCls(){let e=this.bodyEl.classList;this.fullscreen()?(e.add(yo),this.hideTitle()&&e.add(_o)):(e.remove(yo),this.hideTitle()&&e.remove(_o))}update(){this.updateCls(),this.updateHeight(),this.fullscreen.set(this.fullscreen())}updateHeight(){this._height=this.bodyEl.getBoundingClientRect().height-this.el.getBoundingClientRect().top-this.padding(),this.cdr.detectChanges()}removeInBody(){this.bodyEl.classList.remove(vo,yo,_o)}ngOnInit(){this.inited=!0,this.bodyEl.classList.add(vo),this.el.id=this.id,this.updateCls(),Do(window,"resize").pipe(Xt(this.destroy$),lo(200)).subscribe(()=>this.updateHeight()),this.srv.change.pipe(Xt(this.destroy$),so(e=>e!==null)).subscribe(()=>this.toggle()),this.router.events.pipe(Xt(this.destroy$),so(e=>e instanceof Xo||e instanceof Jo),lo(200)).subscribe(()=>{this.doc.querySelector(`#${this.id}`)?(this.bodyEl.classList.add(vo),this.updateCls()):this.removeInBody()})}toggle(){this.fullscreen.set(!this.fullscreen()),this.update(),this.updateHeight()}ngAfterViewInit(){setTimeout(()=>this.updateHeight())}ngOnChanges(){this.inited&&this.update()}ngOnDestroy(){this.removeInBody()}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=S({type:s,selectors:[["full-content"]],hostVars:4,hostBindings:function(t,r){t&2&&(Go("height",r._height,"px"),Ai("full-content",!0))},inputs:{hideTitle:[1,"hideTitle"],padding:[1,"padding"],fullscreen:[1,"fullscreen"]},outputs:{fullscreen:"fullscreenChange"},exportAs:["fullContent"],features:[Di],ngContentSelectors:wn,decls:1,vars:0,template:function(t,r){t&1&&(ko(),Oo(0))},encapsulation:2,changeDetection:0})}return s})(),Ur=(()=>{class s{parent=M(So);_click(){this.parent.toggle()}static \u0275fac=function(t){return new(t||s)};static \u0275dir=Ti({type:s,selectors:[["","full-toggle",""]],hostBindings:function(t,r){t&1&&v("click",function(){return r._click()})},exportAs:["fullToggle"]})}return s})();var jr=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275mod=Ni({type:s});static \u0275inj=Mi({imports:[qo]})}return s})();var Rn=s=>({params:s}),Fn=()=>({list:"results"}),An=s=>({reName:s}),xn=()=>[0,0,0,0];function Pn(s,o){if(s&1&&fe(0,"g2-mini-bar",21),s&2){let e=E();h("padding",ye(2,xn))("data",e.events)}}var di=class di{constructor(){this.http=M(Vi);this.message=M(Mt);this.ps=20;this.total=200;this.args={_allow_anonymous:!0,userid:null};this.url="https://api.randomuser.me/?results=20";this.events=[];this.scroll={y:"230px"};this.columns=[{title:"id",index:"id.value",type:"checkbox"},{title:"Avatar",index:"picture.thumbnail",type:"img",width:80},{title:"Name",index:"name.first",width:150,format:o=>`${o.name.first} ${o.name.last}`,type:"link",click:o=>this.message.info(`${o.name.first}`)},{title:"Email",index:"email"},{title:"Gender",index:"gender",type:"yn",yn:{truth:"female",yes:"\u7537",no:"\u5973",mode:"text"},width:120},{title:"Events",render:"events",width:90},{title:"Registered",index:"registered.date",type:"date",width:170},{title:"Actions",width:120,buttons:[{text:"Edit",click:o=>this.message.info(`edit [${o.id.value}]`),iif:o=>o.gender==="female"},{text:"Delete",type:"del",click:o=>this.message.info(`deleted [${o.id.value}]`)}]}]}ngOnInit(){this.http.get("/chart/visit").subscribe(o=>this.events=o.slice(0,8))}fullChange(o){this.scroll=o?{y:"350px"}:{y:"230px"}}};di.\u0275fac=function(e){return new(e||di)},di.\u0275cmp=S({type:di,selectors:[["app-st"]],decls:43,vars:18,consts:[["exportMenu","nzDropdownMenu"],["st",""],[1,"alain-default__content-title"],["href","//ng-alain.com/components/table","target","_blank"],["href","//ng-alain.com/components/full-content","target","_blank"],[3,"fullscreenChange"],["nz-row","",1,"mb-md"],["nz-col","","nzSpan","12"],["nz-form","","nzLayout","inline","se-container",""],["label","User ID","labelWidth","0"],["nz-input","","name","userid","id","userid",3,"ngModelChange","ngModel"],["nz-button","",3,"click","nzType","nzLoading"],["nz-button","",3,"click","disabled"],[1,"text-right"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item",""],["nz-button","","full-toggle","",1,"ml-sm",3,"nzType"],[3,"data","req","res","total","ps","columns","scroll"],["st-row","events"],["height","15","theme","mini","color","#999","borderWidth","3","tooltipType","mini",3,"padding","data"]],template:function(e,t){if(e&1){let r=Te();u(0,"div",2)(1,"h1"),f(2," Fullscreen & ST "),u(3,"small"),f(4,"\u4F7F\u7528 "),u(5,"a",3),f(6,"st"),c(),f(7,"\u3001 "),u(8,"a",4),f(9,"full-content"),c(),f(10," \u7EC4\u5408\uFF0C\u7531\u4E8E nz-table \u56FA\u5B9A\u8868\u5934\u6682\u4E0D\u652F\u6301\u81EA\u9002\u5E94\uFF0C\u56E0\u6B64\u8868\u683C\u7684\u5C55\u793A\u7684\u6548\u679C\u5728\u54CD\u5E94\u5F0F\u91CC\u9762\u6548\u679C\u5E76\u4E0D\u662F\u7279\u522B\u597D\u3002"),c()()(),u(11,"full-content",5),v("fullscreenChange",function(m){return b(r),w(t.fullChange(m))}),u(12,"nz-card")(13,"div",6)(14,"div",7)(15,"form",8)(16,"se",9)(17,"input",10),Me("ngModelChange",function(m){return b(r),ge(t.args.userid,m)||(t.args.userid=m),w(m)}),c()(),u(18,"se")(19,"button",11),v("click",function(){b(r);let m=bt(41);return w(m.load())}),f(20,"Search"),c(),u(21,"button",12),v("click",function(){b(r);let m=bt(41);return w(m.load(1,{_allow_anonymous:!0}))}),f(22,"Clear"),c()()()(),u(23,"div",7)(24,"div",13)(25,"button",14)(26,"span"),f(27,"Export"),c(),fe(28,"i",15),c(),u(29,"nz-dropdown-menu",null,0)(31,"ul",16)(32,"li",17),f(33,"Excel"),c(),u(34,"li",17),f(35,"JSON"),c(),u(36,"li",17),f(37,"PNG"),c()()(),u(38,"button",18),f(39,"Full"),c()()()(),u(40,"st",19,1),qt(42,Pn,1,3,"ng-template",20),c()()()}if(e&2){let r=bt(30);d(17),ze("ngModel",t.args.userid),d(2),h("nzType","primary")("nzLoading",t.http.loading),d(2),h("disabled",t.http.loading),d(4),h("nzDropdownMenu",r),d(13),h("nzType","default"),d(2),h("data",t.url)("req",yi(13,Rn,t.args))("res",yi(16,An,ye(15,Fn)))("total",t.total)("ps",t.ps)("columns",t.columns)("scroll",t.scroll)}},dependencies:[I,Lt,Nt,Ct,Bt,vt,It,L,oe,$,Kt,br,le,se,Rr,Fr,ae,T,he,x,Ne,H,cr,dr,fr,zr,hr,Q,St,_t,O,j,de,q,D,ki,k,me,P,Z,B,re,J,yt,K,X,Y,U,ne,pe,ie,V,ee,kt,ue,R,te,Ce,G,ce,W,A,jr,So,Ur,xr],encapsulation:2});var io=di;var Gr=()=>({standalone:!0}),ci=class ci{constructor(){this.messageSrv=M(Mt);this.format_str="this is ${name}";this.format_res="";this.format_obj=JSON.stringify({name:"asdf"});this.content=`time ${+new Date}

    \u4E2D\u6587\uFF01@#\uFFE5%\u2026\u2026&*`}onFormat(){let o=null;try{o=JSON.parse(this.format_obj)}catch{this.messageSrv.error("\u65E0\u6CD5\u4F7F\u7528 JSON.parse \u8F6C\u6362");return}this.format_res=mr(this.format_str,o,!0)}onYuan(o){this.yuan_res=Dr(o)}onCopy(){nr(`time ${+new Date}`).then(()=>this.messageSrv.success("success"))}};ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275cmp=S({type:ci,selectors:[["app-util"]],decls:39,vars:23,consts:[[1,"alain-default__content-title"],[3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u5B57\u7B26\u4E32\u7C7B"],["nzType","inner","nzTitle","format"],["nz-form",""],[3,"nzSm"],["nz-input","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzSpan","nzOffset"],["nz-button","",3,"click"],["nzType","inner","nzTitle","yuan"],["type","number","nz-input","",3,"ngModelChange","ngModel"],[3,"innerHTML"],["nzTitle","\u5176\u5B83\u7C7B"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u5DE5\u5177\u96C6 "),u(3,"small"),f(4,"@delon/util \u65E5\u5E38\u7528\u6CD5\u3002"),c()()(),u(5,"nz-row",1)(6,"nz-col",2)(7,"nz-card",3)(8,"nz-card",4)(9,"form",5)(10,"nz-form-item")(11,"nz-form-label",6),f(12,"String"),c(),u(13,"nz-form-control",6)(14,"input",7),Me("ngModelChange",function(l){return ge(t.format_str,l)||(t.format_str=l),l}),c()()(),u(15,"nz-form-item")(16,"nz-form-label",6),f(17,"Object"),c(),u(18,"nz-form-control",6)(19,"input",7),Me("ngModelChange",function(l){return ge(t.format_obj,l)||(t.format_obj=l),l}),c()()(),u(20,"nz-form-item")(21,"nz-form-control",8)(22,"button",9),v("click",function(){return t.onFormat()}),f(23,"Run"),c()()(),u(24,"nz-form-item")(25,"nz-form-label",6),f(26,"Result"),c(),u(27,"nz-form-control",6),f(28),c()()()(),u(29,"nz-card",10)(30,"nz-row",1)(31,"nz-col",2)(32,"input",11),Me("ngModelChange",function(l){return ge(t.yuan_str,l)||(t.yuan_str=l),l}),v("ngModelChange",function(l){return t.onYuan(l)}),c()(),u(33,"nz-col",2),fe(34,"div",12),c()()()()(),u(35,"nz-col",2)(36,"nz-card",13)(37,"button",9),v("click",function(){return t.onCopy()}),f(38,"Copy"),c()()()()),e&2&&(d(5),h("nzGutter",16),d(),h("nzSpan",12),d(5),h("nzSm",8),d(2),h("nzSm",16),d(),ze("ngModel",t.format_str),h("ngModelOptions",ye(21,Gr)),d(2),h("nzSm",8),d(2),h("nzSm",16),d(),ze("ngModel",t.format_obj),h("ngModelOptions",ye(22,Gr)),d(2),h("nzSpan",16)("nzOffset",8),d(4),h("nzSm",8),d(2),h("nzSm",16),d(),Ee(" ",t.format_res," "),d(2),h("nzGutter",16),d(),h("nzSpan",12),d(),ze("ngModel",t.yuan_str),d(),h("nzSpan",12),d(),h("innerHTML",t.yuan_res,Po),d(),h("nzSpan",12))},dependencies:[I,Lt,Nt,lr,Ct,Bt,vt,It,L,oe,$,le,se,ae,T,he,x,Ne,H,Q,St,_t,O,j,de,q,D,k,me,P,Z,B,re,J,yt,K,X,Y,U,ne,pe,ie,V,ee,kt,$t,ei,Qt,ue,R,te,Ce,G,ce,W,A],encapsulation:2});var oo=ci;var fi=class fi{constructor(){this.xlsx=M(pr);this.users=Array(100).fill(0).map((o,e)=>({id:e+1,name:`name ${e+1}`,age:Math.ceil(Math.random()*10)+20}));this.columns=[{title:"\u7F16\u53F7",index:"id",type:"checkbox"},{title:"\u59D3\u540D",index:"name"},{title:"\u5E74\u9F84",index:"age"}]}url(){this.xlsx.import("./assets/tmp/demo.xlsx").then(o=>this.data=o)}change(o){let e=o.target.files[0];this.xlsx.import(e).then(t=>this.data=t)}download(){let o=[this.columns.map(e=>e.title)];this.users.forEach(e=>o.push(this.columns.map(t=>e[t.index]))),this.xlsx.export({sheets:[{data:o,name:"sheet name"}]})}};fi.\u0275fac=function(e){return new(e||fi)},fi.\u0275cmp=S({type:fi,selectors:[["app-xlsx"]],decls:16,vars:6,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/xlsx","target","_blank"],["nzTitle","Import"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],[1,"mt-sm"],["nzTitle","Export"],[1,"mt-sm",3,"data","ps","columns"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Import & Export excel file, "),u(3,"a",1),f(4,"Document"),c()()(),u(5,"nz-card",2)(6,"button",3),v("click",function(){return t.url()}),f(7,"Via Url"),c(),u(8,"input",4),v("change",function(l){return t.change(l)}),c(),u(9,"p",5),f(10),At(11,"json"),c()(),u(12,"nz-card",6)(13,"button",3),v("click",function(){return t.download()}),f(14,"Export"),c(),fe(15,"st",7),c()),e&2&&(d(10),Ee("result: ",xt(11,4,t.data)),d(5),h("data",t.users)("ps",3)("columns",t.columns))},dependencies:[I,L,oe,$,Kt,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,B,re,J,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A,Pt],encapsulation:2});var ro=fi;var Hr=Eo(Mo(),1);var Wr=(()=>{class s{http=M(Pi);lazy=M(Li);ngZone=M(Bo);cogSrv=M(Yt);cog;constructor(){this.cog=this.cogSrv.merge("zip",{url:"https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js",utils:[]})}init(){return this.lazy.load([this.cog.url].concat(this.cog.utils))}check(e){if(!e)throw new Error("get instance via `ZipService.create()`")}read(e,t){return new Promise((r,l)=>{let m=z=>{this.ngZone.run(()=>r(z))};this.init().then(()=>{if(typeof e=="string"){this.http.request("GET",e,{responseType:"arraybuffer"}).subscribe({next:i=>{JSZip.loadAsync(i,t).then(n=>m(n))},error:i=>{l(i)}});return}let z=new FileReader;z.onload=i=>{JSZip.loadAsync(i.target.result,t).then(n=>m(n))},z.readAsBinaryString(e)})})}create(){return new Promise(e=>{this.init().then(()=>{let t=new JSZip;e(t)}).catch(()=>e(null))})}pushUrl(e,t,r){return this.check(e),new Promise((l,m)=>{this.http.request("GET",r,{responseType:"arraybuffer"}).subscribe({next:z=>{e.file(t,z),l()},error:z=>{m({url:r,error:z})}})})}save(e,t){this.check(e);let r=De({filename:"download.zip"},t);return new Promise((l,m)=>{e.generateAsync(De({type:"blob"},r.options),r.update).then(z=>{r.callback&&r.callback(z),(0,Hr.saveAs)(z,r.filename),l()},z=>{m(z)})})}static \u0275fac=function(t){return new(t||s)};static \u0275prov=ht({token:s,factory:s.\u0275fac,providedIn:"root"})}return bo([ur()],s.prototype,"read",null),s})();function Bn(s,o){if(s&1&&(u(0,"li"),f(1),At(2,"json"),c()),s&2){let e=o.$implicit;d(),Ot(xt(2,1,e))}}function In(s,o){if(s&1){let e=Te();u(0,"nz-card",2)(1,"button",4),v("click",function(){b(e);let r=E();return w(r.url())}),f(2,"Via Url"),c(),u(3,"input",5),v("change",function(r){b(e);let l=E();return w(l.change(r))}),c(),u(4,"ol"),Rt(5,Bn,3,3,"li",null,Tt),c()()}if(s&2){let e=E();d(5),Ft(e.list)}}function Ln(s,o){if(s&1){let e=Te();u(0,"tr")(1,"td")(2,"input",9),Me("ngModelChange",function(r){let l=b(e).$implicit;return ge(l.path,r)||(l.path=r),w(r)}),c()(),u(3,"td")(4,"input",9),Me("ngModelChange",function(r){let l=b(e).$implicit;return ge(l.url,r)||(l.url=r),w(r)}),c()()()}if(s&2){let e=o.$implicit,t=o.$index;d(2),h("name",vi("path",t)),ze("ngModel",e.path),d(2),h("name",vi("url",t)),ze("ngModel",e.url)}}function kn(s,o){if(s&1){let e=Te();u(0,"nz-card",3)(1,"button",6),v("click",function(){b(e);let r=E();return w(r.data.push({}))}),f(2,"new"),c(),u(3,"button",7),v("click",function(){b(e);let r=E();return w(r.download())}),f(4,"download"),c(),u(5,"nz-table",8)(6,"thead")(7,"tr")(8,"th")(9,"span"),f(10,"path"),c()(),u(11,"th")(12,"span"),f(13,"url"),c()()()(),u(14,"tbody"),Rt(15,Ln,5,6,"tr",null,Tt),c()()()}if(s&2){let e=E();d(),h("nzType","primary"),d(4),h("nzData",e.data)("nzFrontPagination",!1)("nzShowPagination",!1),d(10),Ft(e.data)}}var hi=class hi{constructor(){this.zip=M(Wr);this.msg=M(Mt);this.cdr=M(Zt);this.instance=null;this.data=[{path:"demo.docx",url:"https://ng-alain.com/assets/demo.docx"},{path:"\u5C0F\u7A0B\u5E8F\u6807\u5FD7.zip",url:"https://wximg.gtimg.com/shake_tv/mina/standard_logo.zip"}]}ngOnInit(){this.zip.create().then(o=>{this.instance=o,this.cdr.detectChanges()})}format(o){let e=o.files;this.list=Object.keys(e).map(t=>({name:t,dir:e[t].dir,date:e[t].date})),this.cdr.detectChanges()}url(){this.zip.read("./assets/tmp/demo.zip").then(o=>this.format(o))}change(o){let e=o.target.files[0];this.zip.read(e).then(t=>this.format(t))}download(){let o=[];this.data.forEach(e=>{o.push(this.zip.pushUrl(this.instance,e.path,e.url))}),Promise.all(o).then(()=>{this.zip.save(this.instance).then(()=>{this.msg.success("download success"),this.data=[]})},e=>{console.warn(e),this.msg.error(JSON.stringify(e))})}};hi.\u0275fac=function(e){return new(e||hi)},hi.\u0275cmp=S({type:hi,selectors:[["app-zip"]],decls:7,vars:2,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/zip","target","_blank"],["nzTitle","\u89E3\u538B"],["nzTitle","\u538B\u7F29"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],["nz-button","",3,"click","nzType"],["nz-button","",1,"ml-sm",3,"click"],[1,"mt-sm",3,"nzData","nzFrontPagination","nzShowPagination"],["nz-input","",3,"ngModelChange","ngModel","name"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Read & Write zip file, "),u(3,"a",1),f(4,"Document"),c()()(),zt(5,In,7,0,"nz-card",2),zt(6,kn,17,4,"nz-card",3)),e&2&&(d(5),gt(t.instance?5:-1),d(),gt(t.instance?6:-1))},dependencies:[I,Nt,Ct,vt,L,oe,$,le,se,ae,T,he,x,Ne,H,Q,O,j,de,q,D,k,me,P,Z,vr,Mr,Nr,_r,Cr,yr,B,re,J,yt,K,X,Y,U,ne,pe,ie,V,ee,ue,R,te,Ce,G,ce,W,A,Pt],encapsulation:2,changeDetection:0});var no=hi;var jl=[{path:"st",component:io},{path:"util",component:oo},{path:"print",component:eo},{path:"acl",component:qi},{path:"guard",component:$i,children:[{path:"leave",component:Qi,canDeactivate:[kr]},{path:"auth",component:Ki,canActivate:[po],data:{guard:"user1"}},{path:"admin",component:Ji,canActivate:[po],data:{guard:"admin"}}]},{path:"cache",component:Zi},{path:"qr",component:to},{path:"downfile",component:Yi},{path:"xlsx",component:ro},{path:"zip",component:no},{path:"form",component:Xi}];export{jl as routes};
