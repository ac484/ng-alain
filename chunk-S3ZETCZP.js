import{a as tt,b as et,c as nt}from"./chunk-2UODY2UN.js";import{a as Y,b as Z}from"./chunk-2UEWE7GN.js";import{f as $,i as q,k as G,m as J,n as K,o as L,q as Q}from"./chunk-STXC4IC3.js";import{e as j,f as W}from"./chunk-FJV5Z3DB.js";import"./chunk-5I543ICI.js";import"./chunk-VWIBMDY5.js";import"./chunk-V4HBUVBE.js";import{i as N,m as M}from"./chunk-S7MMUYHM.js";import"./chunk-DFLLWXUY.js";import"./chunk-HVUD7D25.js";import"./chunk-BHPR6DCP.js";import"./chunk-Y7VXO6OR.js";import{$h as k,Ac as F,Fc as c,Hc as p,Ib as l,Ic as y,Ii as U,Jb as e,Ji as X,Kb as n,Lb as E,Od as P,Sb as h,Vb as C,Yb as b,Za as r,_h as w,ai as V,cb as D,gc as T,hi as R,ib as B,ji as H,ki as O,lc as i,mc as u,nc as d,ob as S,qd as x,vd as _,xa as z,ya as g,yd as I,zd as A}from"./chunk-2NZ4ANV2.js";import"./chunk-57BLH6QZ.js";var it=()=>[];function at(f,o){if(f&1){let a=h();e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),c(5,"currency"),n(),e(6,"td"),E(7,"nz-progress",29),e(8,"span",30),i(9),n()(),e(10,"td")(11,"nz-tag",10),i(12),n()(),e(13,"td")(14,"nz-tag",10),i(15),n()(),e(16,"td"),i(17),c(18,"date"),n(),e(19,"td")(20,"button",31),C("click",function(){let m=z(a).$implicit,s=b();return g(s.managePayment(m))}),i(21," \u8ACB\u6B3E\u7BA1\u7406 "),n()()()}if(f&2){let a=o.$implicit,t=b();r(2),u(a.round),r(2),u(y(5,12,a.amount,"TWD","symbol","1.0-0")),r(3),l("nzPercent",a.progress)("nzSize","small")("nzShowInfo",!1),r(2),d("",a.progress,"%"),r(2),l("nzColor",t.getPaymentStatusColor(a.paymentStatus)),r(),d(" ",t.getPaymentStatusText(a.paymentStatus)," "),r(2),l("nzColor",a.status==="paid"?"success":"processing"),r(),d(" ",a.status==="paid"?"\u5DF2\u4ED8\u6B3E":"\u5F85\u4ED8\u6B3E"," "),r(2),u(p(18,17,a.date,"yyyy-MM-dd")),r(3),l("disabled",a.paymentStatus==="completed")}}function ot(f,o){if(f&1&&(e(0,"tr")(1,"td")(2,"nz-tag",10),i(3),n()(),e(4,"td"),i(5),n(),e(6,"td"),i(7),c(8,"currency"),n(),e(9,"td"),i(10),n(),e(11,"td"),i(12),c(13,"date"),n()()),f&2){let a=o.$implicit;r(2),l("nzColor",a.type==="\u8FFD\u52A0"?"success":"error"),r(),d(" ",a.type," "),r(2),u(a.description),r(2),u(y(8,6,a.amount,"TWD","symbol","1.0-0")),r(3),u(a.version),r(2),u(p(13,11,a.date,"yyyy-MM-dd"))}}var v=class v{constructor(o,a,t){this.route=o;this.router=a;this.http=t}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&this.loadContractDetail(o)}loadContractDetail(o){this.http.get(`/contract/${o}`).subscribe(a=>{this.contract=a})}getStatusColor(o){switch(o){case"draft":return"default";case"pending":return"processing";case"approved":return"success";case"rejected":return"error";default:return"default"}}getStatusText(o){switch(o){case"draft":return"\u8349\u7A3F";case"pending":return"\u5F85\u5BE9\u6838";case"approved":return"\u5DF2\u6838\u51C6";case"rejected":return"\u5DF2\u62D2\u7D55";default:return"\u672A\u77E5"}}editContract(){this.contract&&this.router.navigate(["/contract/edit",this.contract.id])}goBack(){this.router.navigate(["/contract/list"])}getProgressStatus(o){return o>=100?"success":o>=80?"normal":o>=50?"active":"exception"}requestPayment(){this.router.navigate(["/contract/payment",this.contract?.id])}addChange(){this.router.navigate(["/contract/change",this.contract?.id])}getPaymentStatusColor(o){switch(o){case"draft":return"default";case"submitted":return"processing";case"reviewing":return"warning";case"invoiced":return"blue";case"completed":return"success";default:return"default"}}getPaymentStatusText(o){switch(o){case"draft":return"\u8349\u7A3F";case"submitted":return"\u9001\u51FA";case"reviewing":return"\u5BE9\u67E5";case"invoiced":return"\u958B\u7968";case"completed":return"\u5B8C\u6210";default:return"\u672A\u77E5"}}managePayment(o){this.router.navigate(["/contract/payment",this.contract?.id],{queryParams:{round:o.round}})}};v.\u0275fac=function(a){return new(a||v)(D(N),D(M),D(P))},v.\u0275cmp=B({type:v,selectors:[["app-contract-detail"]],decls:88,vars:54,consts:[["paymentTable",""],["changeTable",""],["title","\u5408\u7D04\u8A73\u60C5"],["nzTitle","\u57FA\u672C\u8CC7\u8A0A","nzBordered","",3,"nzColumn"],["nzTitle","\u5408\u7D04\u6A19\u984C"],["nzTitle","\u5BA2\u6236\u540D\u7A31"],["nzTitle","\u539F\u59CB\u91D1\u984D"],["nzTitle","\u8B8A\u66F4\u91D1\u984D"],["nzTitle","\u73FE\u884C\u91D1\u984D"],["nzTitle","\u5408\u7D04\u72C0\u614B"],[3,"nzColor"],["nzTitle","\u958B\u59CB\u65E5\u671F"],["nzTitle","\u7D50\u675F\u65E5\u671F"],["nzTitle","\u5EFA\u7ACB\u65E5\u671F"],["nzTitle","\u66F4\u65B0\u65E5\u671F"],["nzTitle","\u5408\u7D04\u63CF\u8FF0",3,"nzSpan"],["nzTitle","\u7248\u672C\u865F"],["nzTitle","\u8B8A\u66F4\u7248\u672C\u865F"],["nzTitle","\u9032\u5EA6"],["title","\u9032\u5EA6\u6458\u8981",2,"margin-top","16px"],[3,"nzPercent","nzStatus"],["title","\u8ACB\u6B3E\u8F2A\u6B21",2,"margin-top","16px"],[3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["title","\u5408\u7D04\u8B8A\u66F4",2,"margin-top","16px"],[2,"margin-top","16px"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-button","",3,"click"],[3,"nzPercent","nzSize","nzShowInfo"],[2,"font-size","12px","color","#666"],["nz-button","","nzType","primary","nzSize","small",3,"click","disabled"]],template:function(a,t){if(a&1){let m=h();e(0,"nz-card",2)(1,"nz-descriptions",3)(2,"nz-descriptions-item",4),i(3),n(),e(4,"nz-descriptions-item",5),i(5),n(),e(6,"nz-descriptions-item",6),i(7),c(8,"currency"),n(),e(9,"nz-descriptions-item",7),i(10),c(11,"currency"),n(),e(12,"nz-descriptions-item",8),i(13),c(14,"currency"),n(),e(15,"nz-descriptions-item",9)(16,"nz-tag",10),i(17),n()(),e(18,"nz-descriptions-item",11),i(19),c(20,"date"),n(),e(21,"nz-descriptions-item",12),i(22),c(23,"date"),n(),e(24,"nz-descriptions-item",13),i(25),c(26,"date"),n(),e(27,"nz-descriptions-item",14),i(28),c(29,"date"),n(),e(30,"nz-descriptions-item",15),i(31),n(),e(32,"nz-descriptions-item",16),i(33),n(),e(34,"nz-descriptions-item",17),i(35),n(),e(36,"nz-descriptions-item",18),i(37),n()(),e(38,"nz-card",19),E(39,"nz-progress",20),n(),e(40,"nz-card",21)(41,"nz-table",22,0)(43,"thead")(44,"tr")(45,"th"),i(46,"\u8F2A\u6B21"),n(),e(47,"th"),i(48,"\u91D1\u984D"),n(),e(49,"th"),i(50,"\u9032\u5EA6"),n(),e(51,"th"),i(52,"\u8ACB\u6B3E\u72C0\u614B"),n(),e(53,"th"),i(54,"\u4ED8\u6B3E\u72C0\u614B"),n(),e(55,"th"),i(56,"\u65E5\u671F"),n(),e(57,"th"),i(58,"\u64CD\u4F5C"),n()()(),e(59,"tbody"),S(60,at,22,20,"tr",23),n()()(),e(61,"nz-card",24)(62,"nz-table",22,1)(64,"thead")(65,"tr")(66,"th"),i(67,"\u985E\u578B"),n(),e(68,"th"),i(69,"\u63CF\u8FF0"),n(),e(70,"th"),i(71,"\u91D1\u984D"),n(),e(72,"th"),i(73,"\u7248\u672C"),n(),e(74,"th"),i(75,"\u65E5\u671F"),n()()(),e(76,"tbody"),S(77,ot,14,14,"tr",23),n()()(),e(78,"div",25)(79,"nz-space")(80,"button",26),C("click",function(){return z(m),g(t.editContract())}),i(81,"\u7DE8\u8F2F\u5408\u7D04"),n(),e(82,"button",27),C("click",function(){return z(m),g(t.requestPayment())}),i(83,"\u8ACB\u6B3E"),n(),e(84,"button",27),C("click",function(){return z(m),g(t.addChange())}),i(85,"\u8FFD\u52A0\u8FFD\u6E1B"),n(),e(86,"button",28),C("click",function(){return z(m),g(t.goBack())}),i(87,"\u8FD4\u56DE\u5217\u8868"),n()()()()}if(a&2){let m=T(42),s=T(63);r(),l("nzColumn",2),r(2),u(t.contract==null?null:t.contract.title),r(2),u(t.contract==null?null:t.contract.client),r(2),u(y(8,25,t.contract==null?null:t.contract.originalAmount,"TWD","symbol","1.0-0")),r(3),u(y(11,30,t.contract==null?null:t.contract.changeAmount,"TWD","symbol","1.0-0")),r(3),u(y(14,35,t.contract==null?null:t.contract.currentAmount,"TWD","symbol","1.0-0")),r(3),l("nzColor",t.getStatusColor(t.contract==null?null:t.contract.status)),r(),d(" ",t.getStatusText(t.contract==null?null:t.contract.status)," "),r(2),u(p(20,40,t.contract==null?null:t.contract.startDate,"yyyy-MM-dd")),r(3),u(p(23,43,t.contract==null?null:t.contract.endDate,"yyyy-MM-dd")),r(3),u(p(26,46,t.contract==null?null:t.contract.createDate,"yyyy-MM-dd HH:mm")),r(3),u(p(29,49,t.contract==null?null:t.contract.updateDate,"yyyy-MM-dd HH:mm")),r(2),l("nzSpan",2),r(),u((t.contract==null?null:t.contract.description)||"\u7121\u63CF\u8FF0"),r(2),u(t.contract==null?null:t.contract.version),r(2),u(t.contract==null?null:t.contract.changeVersion),r(2),d("",t.contract==null?null:t.contract.progress,"%"),r(2),l("nzPercent",(t.contract==null?null:t.contract.progress)||0)("nzStatus",t.getProgressStatus((t.contract==null?null:t.contract.progress)||0)),r(2),l("nzData",(t.contract==null?null:t.contract.paymentRounds)||F(52,it))("nzPageSize",5),r(19),l("ngForOf",m.data),r(2),l("nzData",(t.contract==null?null:t.contract.changes)||F(53,it))("nzPageSize",5),r(15),l("ngForOf",s.data)}},dependencies:[A,x,X,U,nt,et,tt,O,H,V,R,W,j,k,w,Z,Y,Q,J,$,q,L,G,K,I,_],encapsulation:2});var rt=v;export{rt as ContractDetailComponent};
