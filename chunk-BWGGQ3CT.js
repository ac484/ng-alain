import{a as Te,d as gt,e as Ee,h as ve,i as be}from"./chunk-YZRAWTOQ.js";import{a as ge,b as xe,c as _e}from"./chunk-FJGPJDJU.js";import"./chunk-CAC53LLX.js";import"./chunk-VAGS5EVQ.js";import{a as ye,b as Ce}from"./chunk-JNXOSXFH.js";import"./chunk-7HKXGGQW.js";import{d as ae}from"./chunk-FNQFXT4L.js";import{a as pe,b as ce}from"./chunk-BP5QTQZC.js";import{c as yt,e as Ct}from"./chunk-2AKQOGSQ.js";import{a as et,f as me,k as fe}from"./chunk-IKXE7RY5.js";import"./chunk-YLT4J452.js";import"./chunk-PUYN37MU.js";import{y as le}from"./chunk-Q4M6B46D.js";import{a as de,b as ue}from"./chunk-LGE3RKIU.js";import{L as tt}from"./chunk-67AL53VY.js";import"./chunk-CGTTSKG2.js";import"./chunk-QHSDKNHJ.js";import{a as re}from"./chunk-HG76SPUR.js";import"./chunk-VECD6G7R.js";import"./chunk-JKCE4WUB.js";import{k as te,t as ee,v as ie,w as ne}from"./chunk-HFO44OZB.js";import{$b as y,$h as he,Aa as g,Ad as Ht,Bd as Wt,Da as At,Ea as H,Fa as W,Hb as E,Hc as qt,Id as Zt,Jb as v,Ob as f,Oh as $,Pa as rt,Pb as u,Pc as X,Ph as q,Qb as m,Qh as ht,Rb as _,Rh as zt,Sa as Z,Uh as oe,Vb as pt,Ve as mt,Vh as se,Wb as ct,X as Bt,Xe as Xt,Yb as b,ai as ze,b as Pt,be as D,bf as ft,cb as c,cc as p,dc as Qt,ec as $t,fe as Yt,ff as Jt,ga as st,gb as Ut,gc as R,gd as J,h as Ft,hc as I,hf as A,ic as O,id as V,jb as jt,jd as Gt,mc as Y,nc as K,oa as Vt,ob as F,oc as dt,pa as L,pb as Q,pe as Kt,q as P,qb as at,r as T,rc as h,sc as ut,ta as l,tc as B,ub as S,wb as N,xb as lt,za as C,zb as Lt}from"./chunk-C2TUN3UK.js";import{g as ot,i as G}from"./chunk-57BLH6QZ.js";var xt=class{_document;_textarea;constructor(o,t){this._document=t;let i=this._textarea=this._document.createElement("textarea"),n=i.style;n.position="fixed",n.top=n.opacity="0",n.left="-999em",i.setAttribute("aria-hidden","true"),i.value=o,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){let o=this._textarea,t=!1;try{if(o){let i=this._document.activeElement;o.select(),o.setSelectionRange(0,o.value.length),t=this._document.execCommand("copy"),i&&i.focus()}}catch{}return t}destroy(){let o=this._textarea;o&&(o.remove(),this._textarea=void 0)}},we=(()=>{class e{_document=l(H);constructor(){}copy(t){let i=this.beginCopy(t),n=i.copy();return i.destroy(),n}beginCopy(t){return new xt(t,this._document)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Vt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Tt=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=at({type:e,selectors:[["button","nz-trans-button",""]],hostVars:8,hostBindings:function(i,n){i&2&&K("border","0")("background","transparent")("padding","0")("line-height","inherit")}})}return e})(),Et=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Q({type:e});static \u0275inj=L({})}return e})();function Oe(e,o){if(e&1&&(pt(0),_(1,"nz-icon",2),ct()),e&2){let t=o.$implicit;c(),f("nzType",t)}}var ke=["textarea"];function Me(e,o){if(e&1){let t=b();u(0,"textarea",2,0),y("blur",function(){C(t);let n=p();return g(n.confirm())}),m(),u(2,"button",3),y("click",function(){C(t);let n=p();return g(n.confirm())}),_(3,"nz-icon",4),m()}}function Pe(e,o){if(e&1&&(pt(0),_(1,"nz-icon",7),ct()),e&2){let t=o.$implicit;c(),f("nzType",t)}}function Fe(e,o){if(e&1){let t=b();u(0,"button",5),y("click",function(){C(t);let n=p();return g(n.onClick())}),S(1,Pe,2,1,"ng-container",6),m()}if(e&2){let t=p();f("nzTooltipTitle",t.tooltip===null?null:t.tooltip||(t.locale==null?null:t.locale.edit)),c(),f("nzStringTemplateOutlet",t.icon)}}var Be=["ellipsisContainer"],Ve=["expandable"],Ae=["contentTemplate"],Ue=["*"],je=e=>({content:e});function Le(e,o){e&1&&$t(0)}function Qe(e,o){if(e&1&&(E(0,Le,1,0),h(1)),e&2){let t=o.content;v(t?-1:0),c(),B(" ",t," ")}}function $e(e,o){}function qe(e,o){if(e&1&&h(0),e&2){let t=p(3);B(" ",t.nzSuffix," ")}}function Ge(e,o){if(e&1&&(S(0,$e,0,0,"ng-template",5),E(1,qe,1,1)),e&2){let t=p(2),i=Y(1);f("ngTemplateOutlet",i)("ngTemplateOutletContext",qt(3,je,t.nzContent)),c(),v(t.nzSuffix?1:-1)}}function He(e,o){if(e&1&&h(0),e&2){let t=p(3);B(" ",t.ellipsisStr," ")}}function We(e,o){if(e&1&&h(0),e&2){let t=p(3);B(" ",t.nzSuffix," ")}}function Ze(e,o){if(e&1){let t=b();u(0,"a",7,2),y("click",function(){C(t);let n=p(3);return g(n.onExpand())}),h(2),m()}if(e&2){let t=p(3);c(2),B(" ",t.locale==null?null:t.locale.expand," ")}}function Ye(e,o){if(e&1&&(_(0,"span",null,1),E(2,He,1,1),E(3,We,1,1),E(4,Ze,3,1,"a",6)),e&2){let t=p(2);c(2),v(t.isEllipsis?2:-1),c(),v(t.nzSuffix?3:-1),c(),v(t.nzExpandable&&t.isEllipsis?4:-1)}}function Ke(e,o){if(e&1&&E(0,Ge,2,5)(1,Ye,5,3),e&2){let t=p();v(t.expanded||!t.hasOperationsWithEllipsis&&t.nzEllipsisRows===1&&!t.hasEllipsisObservers||t.canCssEllipsis||t.nzSuffix&&t.expanded?0:1)}}function Xe(e,o){if(e&1){let t=b();u(0,"nz-text-edit",8),y("endEditing",function(n){C(t);let d=p();return g(d.onEndEditing(n))})("startEditing",function(){C(t);let n=p();return g(n.onStartEditing())}),m()}if(e&2){let t=p();f("text",t.nzContent)("icon",t.nzEditIcon)("tooltip",t.nzEditTooltip)}}function Je(e,o){if(e&1){let t=b();u(0,"nz-text-copy",9),y("textCopy",function(n){C(t);let d=p();return g(d.onTextCopy(n))}),m()}if(e&2){let t=p();f("text",t.copyText)("tooltips",t.nzCopyTooltips)("icons",t.nzCopyIcons)}}var vt=(()=>{class e{cdr=l(J);clipboard=l(we);i18n=l(tt);destroyRef=l(W);copied=!1;copyId;locale;nativeElement=l(Z).nativeElement;copyTooltip=null;copedTooltip=null;copyIcon="copy";copedIcon="check";text;tooltips;icons=["copy","check"];textCopy=new N;constructor(){this.destroyRef.onDestroy(()=>{clearTimeout(this.copyId)})}ngOnInit(){this.i18n.localeChange.pipe(D(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.updateTooltips(),this.cdr.markForCheck()})}ngOnChanges(t){let{tooltips:i,icons:n}=t;i&&this.updateTooltips(),n&&this.updateIcons()}onClick(){if(this.copied)return;this.copied=!0,this.cdr.detectChanges();let t=this.text;this.textCopy.emit(t),this.clipboard.copy(t),this.onCopied()}onCopied(){clearTimeout(this.copyId),this.copyId=setTimeout(()=>{this.copied=!1,this.cdr.detectChanges()},3e3)}updateTooltips(){if(this.tooltips===null)this.copedTooltip=null,this.copyTooltip=null;else if(Array.isArray(this.tooltips)){let[t,i]=this.tooltips;this.copyTooltip=t||this.locale?.copy,this.copedTooltip=i||this.locale?.copied}else this.copyTooltip=this.locale?.copy,this.copedTooltip=this.locale?.copied;this.cdr.markForCheck()}updateIcons(){let[t,i]=this.icons;this.copyIcon=t,this.copedIcon=i,this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=F({type:e,selectors:[["nz-text-copy"]],inputs:{text:"text",tooltips:"tooltips",icons:"icons"},outputs:{textCopy:"textCopy"},exportAs:["nzTextCopy"],features:[rt],decls:2,vars:4,consts:[["type","button","nz-tooltip","","nz-trans-button","",1,"ant-typography-copy",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,n){i&1&&(u(0,"button",0),y("click",function(){return n.onClick()}),S(1,Oe,2,1,"ng-container",1),m()),i&2&&(dt("ant-typography-copy-success",n.copied),f("nzTooltipTitle",n.copied?n.copedTooltip:n.copyTooltip),c(),f("nzStringTemplateOutlet",n.copied?n.copedIcon:n.copyIcon))},dependencies:[Ct,yt,Et,Tt,q,$,zt,ht],encapsulation:2,changeDetection:0})}return e})(),bt=(()=>{class e{ngZone=l(lt);cdr=l(J);i18n=l(tt);destroyRef=l(W);editing=!1;locale;text;icon="edit";tooltip;startEditing=new N;endEditing=new N(!0);set textarea(t){this.textarea$.next(t)}autosizeDirective;beforeText;currentText;nativeElement=l(Z).nativeElement;textarea$=new Ft(null);injector=l(At);ngOnInit(){this.i18n.localeChange.pipe(D(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.textarea$.pipe(st(t=>ft(t?.nativeElement,"keydown")),D(this.destroyRef)).subscribe(t=>{t.keyCode!==27&&t.keyCode!==13||this.ngZone.run(()=>{t.keyCode===27?this.onCancel():this.onEnter(t),this.cdr.markForCheck()})}),this.textarea$.pipe(st(t=>ft(t?.nativeElement,"input")),D(this.destroyRef)).subscribe(t=>{this.currentText=t.target.value})}onClick(){this.beforeText=this.text,this.currentText=this.beforeText,this.editing=!0,this.startEditing.emit(),this.focusAndSetValue()}confirm(){this.editing=!1,this.endEditing.emit(this.currentText)}onEnter(t){t.stopPropagation(),t.preventDefault(),this.confirm()}onCancel(){this.currentText=this.beforeText,this.confirm()}focusAndSetValue(){let{injector:t}=this;Lt(()=>{this.textarea$.pipe(Bt(i=>i!=null),D(this.destroyRef)).subscribe(i=>{i.nativeElement.focus(),i.nativeElement.value=this.currentText||"",this.autosizeDirective.resizeToFitContent(),this.cdr.markForCheck()})},{injector:t})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=F({type:e,selectors:[["nz-text-edit"]],viewQuery:function(i,n){if(i&1&&(R(ke,5),R(et,5)),i&2){let d;I(d=O())&&(n.textarea=d.first),I(d=O())&&(n.autosizeDirective=d.first)}},inputs:{text:"text",icon:"icon",tooltip:"tooltip"},outputs:{startEditing:"startEditing",endEditing:"endEditing"},exportAs:["nzTextEdit"],decls:2,vars:1,consts:[["textarea",""],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"nzTooltipTitle"],["nz-input","","nzAutosize","",3,"blur"],["nz-trans-button","",1,"ant-typography-edit-content-confirm",3,"click"],["nzType","enter"],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,n){i&1&&E(0,Me,4,0)(1,Fe,2,2,"button",1),i&2&&v(n.editing?0:1)},dependencies:[fe,me,et,Et,Tt,q,$,Ct,yt,zt,ht],encapsulation:2,changeDetection:0})}return e})(),ti="typography",ei="ant-typography-expand",wt=(()=>{var w;let e,o=[],t=[],i,n=[],d=[],x,Nt=[],Dt=[],St,Rt=[],It=[],Ot,kt=[],Mt=[];return w=class{_nzModuleName=ti;nzConfigService=l(Jt);el=l(Z).nativeElement;cdr=l(J);viewContainerRef=l(jt);renderer=l(Ut);platform=l(Yt);i18n=l(tt);resizeService=l(re);directionality=l(Kt);document=l(H);destroyRef=l(W);nzCopyable=!1;nzEditable=!1;nzDisabled=!1;nzExpandable=!1;nzEllipsis=!1;nzCopyTooltips=T(this,o,void 0);nzCopyIcons=(T(this,t),T(this,n,["copy","check"]));nzEditTooltip=(T(this,d),T(this,Nt,void 0));nzEditIcon=(T(this,Dt),T(this,Rt,"edit"));nzContent=T(this,It);nzEllipsisRows=T(this,kt,1);nzType=T(this,Mt);nzCopyText;nzSuffix;nzContentChange=new N;nzCopy=new N;nzExpandChange=new N;nzOnEllipsis=new N;textEditRef;textCopyRef;ellipsisContainer;expandableBtn;contentTemplate;locale;expandableBtnElementCache=null;editing=!1;ellipsisText;cssEllipsis=!1;isEllipsis=!0;expanded=!1;ellipsisStr="...";dir="ltr";get hasEllipsisObservers(){return this.nzOnEllipsis.observers.length>0}get canCssEllipsis(){return this.nzEllipsis&&this.cssEllipsis&&!this.expanded&&!this.hasEllipsisObservers}get hasOperationsWithEllipsis(){return(this.nzCopyable||this.nzEditable||this.nzExpandable)&&this.nzEllipsis}viewInit=!1;requestId=-1;windowResizeSubscription=Pt.EMPTY;get copyText(){return typeof this.nzCopyText=="string"?this.nzCopyText:this.nzContent}constructor(){this.destroyRef.onDestroy(()=>{this.expandableBtnElementCache=null,this.windowResizeSubscription.unsubscribe()})}onTextCopy(a){this.nzCopy.emit(a)}onStartEditing(){this.editing=!0}onEndEditing(a){this.editing=!1,this.nzContentChange.emit(a),this.nzContent===a&&this.renderOnNextFrame(),this.cdr.markForCheck()}onExpand(){this.isEllipsis=!1,this.expanded=!0,this.nzExpandChange.emit(),this.nzOnEllipsis.emit(!1)}canUseCSSEllipsis(){return this.nzEditable||this.nzCopyable||this.nzExpandable||this.nzSuffix||this.hasEllipsisObservers?!1:this.nzEllipsisRows===1?mt("textOverflow"):mt("webkitLineClamp")}renderOnNextFrame(){se(this.requestId),!(!this.viewInit||!this.nzEllipsis||this.nzEllipsisRows<0||this.expanded||!this.platform.isBrowser)&&(this.requestId=oe(()=>this.syncEllipsis()))}getOriginContentViewRef(){let a=this.viewContainerRef.createEmbeddedView(this.contentTemplate,{content:this.nzContent});return a.detectChanges(),{viewRef:a,removeView:()=>this.viewContainerRef.remove(this.viewContainerRef.indexOf(a))}}syncEllipsis(){if(this.cssEllipsis)return;let{viewRef:a,removeView:r}=this.getOriginContentViewRef(),s=[this.textCopyRef,this.textEditRef].filter(M=>M&&M.nativeElement).map(M=>M.nativeElement),z=this.getExpandableBtnElement();z&&s.push(z);let{contentNodes:it,text:nt,ellipsis:j}=Xt(this.el,this.nzEllipsisRows,a.rootNodes,s,this.ellipsisStr,this.nzSuffix);r(),this.ellipsisText=nt,j!==this.isEllipsis&&(this.isEllipsis=j,this.nzOnEllipsis.emit(j));let k=this.ellipsisContainer.nativeElement;for(;k.firstChild;)this.renderer.removeChild(k,k.firstChild);it.forEach(M=>{this.renderer.appendChild(k,M.cloneNode(!0))}),this.cdr.markForCheck()}getExpandableBtnElement(){if(this.nzExpandable){let a=this.locale?this.locale.expand:"",r=this.expandableBtnElementCache;if(!r||r.innerText===a){let s=this.document.createElement("a");s.className=ei,s.innerText=a,this.expandableBtnElementCache=s}return this.expandableBtnElementCache}else return this.expandableBtnElementCache=null,null}renderAndSubscribeWindowResize(){this.platform.isBrowser&&(this.windowResizeSubscription.unsubscribe(),this.cssEllipsis=this.canUseCSSEllipsis(),this.renderOnNextFrame(),this.windowResizeSubscription=this.resizeService.connect().pipe(D(this.destroyRef)).subscribe(()=>this.renderOnNextFrame()))}ngOnInit(){this.i18n.localeChange.pipe(D(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.directionality.change?.pipe(D(this.destroyRef)).subscribe(a=>{this.dir=a,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.viewInit=!0,this.renderAndSubscribeWindowResize()}ngOnChanges(a){let{nzCopyable:r,nzEditable:s,nzExpandable:z,nzEllipsis:it,nzContent:nt,nzEllipsisRows:j,nzSuffix:k}=a;(r||s||z||it||nt||j||k)&&this.nzEllipsis&&(this.expanded?this.windowResizeSubscription.unsubscribe():this.renderAndSubscribeWindowResize())}},(()=>{let a=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;e=[A()],i=[A()],x=[A()],St=[A()],Ot=[A()],P(null,null,e,{kind:"field",name:"nzCopyTooltips",static:!1,private:!1,access:{has:r=>"nzCopyTooltips"in r,get:r=>r.nzCopyTooltips,set:(r,s)=>{r.nzCopyTooltips=s}},metadata:a},o,t),P(null,null,i,{kind:"field",name:"nzCopyIcons",static:!1,private:!1,access:{has:r=>"nzCopyIcons"in r,get:r=>r.nzCopyIcons,set:(r,s)=>{r.nzCopyIcons=s}},metadata:a},n,d),P(null,null,x,{kind:"field",name:"nzEditTooltip",static:!1,private:!1,access:{has:r=>"nzEditTooltip"in r,get:r=>r.nzEditTooltip,set:(r,s)=>{r.nzEditTooltip=s}},metadata:a},Nt,Dt),P(null,null,St,{kind:"field",name:"nzEditIcon",static:!1,private:!1,access:{has:r=>"nzEditIcon"in r,get:r=>r.nzEditIcon,set:(r,s)=>{r.nzEditIcon=s}},metadata:a},Rt,It),P(null,null,Ot,{kind:"field",name:"nzEllipsisRows",static:!1,private:!1,access:{has:r=>"nzEllipsisRows"in r,get:r=>r.nzEllipsisRows,set:(r,s)=>{r.nzEllipsisRows=s}},metadata:a},kt,Mt),a&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),ot(w,"\u0275fac",function(r){return new(r||w)}),ot(w,"\u0275cmp",F({type:w,selectors:[["nz-typography"],["","nz-typography",""],["p","nz-paragraph",""],["span","nz-text",""],["h1","nz-title",""],["h2","nz-title",""],["h3","nz-title",""],["h4","nz-title",""]],viewQuery:function(r,s){if(r&1&&(R(bt,5),R(vt,5),R(Be,5),R(Ve,5),R(Ae,5)),r&2){let z;I(z=O())&&(s.textEditRef=z.first),I(z=O())&&(s.textCopyRef=z.first),I(z=O())&&(s.ellipsisContainer=z.first),I(z=O())&&(s.expandableBtn=z.first),I(z=O())&&(s.contentTemplate=z.first)}},hostVars:26,hostBindings:function(r,s){r&2&&(K("-webkit-line-clamp",s.canCssEllipsis&&s.nzEllipsisRows>1?s.nzEllipsisRows:null),dt("ant-typography",!s.editing)("ant-typography-rtl",s.dir==="rtl")("ant-typography-edit-content",s.editing)("ant-typography-secondary",s.nzType==="secondary")("ant-typography-warning",s.nzType==="warning")("ant-typography-danger",s.nzType==="danger")("ant-typography-success",s.nzType==="success")("ant-typography-disabled",s.nzDisabled)("ant-typography-ellipsis",s.nzEllipsis&&!s.expanded)("ant-typography-single-line",s.nzEllipsis&&s.nzEllipsisRows===1)("ant-typography-ellipsis-single-line",s.canCssEllipsis&&s.nzEllipsisRows===1)("ant-typography-ellipsis-multiple-line",s.canCssEllipsis&&s.nzEllipsisRows>1))},inputs:{nzCopyable:[2,"nzCopyable","nzCopyable",V],nzEditable:[2,"nzEditable","nzEditable",V],nzDisabled:[2,"nzDisabled","nzDisabled",V],nzExpandable:[2,"nzExpandable","nzExpandable",V],nzEllipsis:[2,"nzEllipsis","nzEllipsis",V],nzCopyTooltips:"nzCopyTooltips",nzCopyIcons:"nzCopyIcons",nzEditTooltip:"nzEditTooltip",nzEditIcon:"nzEditIcon",nzContent:"nzContent",nzEllipsisRows:[2,"nzEllipsisRows","nzEllipsisRows",Gt],nzType:"nzType",nzCopyText:"nzCopyText",nzSuffix:"nzSuffix"},outputs:{nzContentChange:"nzContentChange",nzCopy:"nzCopy",nzExpandChange:"nzExpandChange",nzOnEllipsis:"nzOnEllipsis"},exportAs:["nzTypography"],features:[rt],ngContentSelectors:Ue,decls:5,vars:3,consts:[["contentTemplate",""],["ellipsisContainer",""],["expandable",""],[3,"text","icon","tooltip"],[3,"text","tooltips","icons"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-typography-expand"],[1,"ant-typography-expand",3,"click"],[3,"endEditing","startEditing","text","icon","tooltip"],[3,"textCopy","text","tooltips","icons"]],template:function(r,s){r&1&&(Qt(),S(0,Qe,2,2,"ng-template",null,0,X),E(2,Ke,2,1),E(3,Xe,1,3,"nz-text-edit",3),E(4,Je,1,3,"nz-text-copy",4)),r&2&&(c(2),v(s.editing?-1:2),c(),v(s.nzEditable?3:-1),c(),v(s.nzCopyable&&!s.editing?4:-1))},dependencies:[Wt,bt,vt],encapsulation:2,changeDetection:0})),w})(),Ne=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Q({type:e});static \u0275inj=L({imports:[wt,vt,bt]})}return e})();function ni(e,o){if(e&1&&(u(0,"div",12)(1,"nz-card",13)(2,"div",14)(3,"nz-spin",15)(4,"div",16),_(5,"span",17),u(6,"p"),h(7,"\u6B63\u5728\u8655\u7406\u60A8\u7684 PDF \u6587\u4EF6..."),m(),u(8,"p",18),h(9),m()()()()()()),e&2){let t=p();c(3),f("nzTip",t.processingTip),c(6),ut(t.processingTip)}}function oi(e,o){if(e&1){let t=b();u(0,"div",19)(1,"nz-card",20)(2,"div",21)(3,"nz-typography")(4,"pre",22),h(5),m()()(),_(6,"nz-divider"),u(7,"div",23)(8,"button",24),y("click",function(){C(t);let n=p();return g(n.downloadText())}),_(9,"span",25),h(10," \u4E0B\u8F09\u6587\u5B57 "),m(),u(11,"button",26),y("click",function(){C(t);let n=p();return g(n.reset())}),_(12,"span",27),h(13," \u91CD\u65B0\u958B\u59CB "),m()()()()}if(e&2){let t=p();c(4),f("nzContent",t.extractedText),c(),ut(t.extractedText)}}function si(e,o){if(e&1){let t=b();u(0,"div",28)(1,"nz-result",29)(2,"div",30)(3,"button",24),y("click",function(){C(t);let n=p();return g(n.reset())}),h(4,"\u91CD\u8A66"),m()()()()}if(e&2){let t=p();c(),f("nzSubTitle",t.errorMessage)}}function ri(e,o){if(e&1){let t=b();u(0,"button",31),y("click",function(){C(t);let n=p();return g(n.showHelp())}),_(1,"span",32),h(2," \u8AAA\u660E "),m()}}var U=class U{constructor(){this.functions=l(Te);this.storage=l(Ee);this.message=l(ae);this.fileList=[];this.isProcessing=!1;this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...";this.extractedText="";this.errorMessage="";this.currentFile=null;this.beforeUpload=o=>{if(o.type!=="application/pdf")return this.message.error("\u53EA\u80FD\u4E0A\u50B3 PDF \u6587\u4EF6\uFF01"),!1;let t=10*1024*1024;return o.size>t?(this.message.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u904E 10MB\uFF01"),!1):(this.currentFile=o,this.fileList=[o],this.processPdf(),!1)}}ngOnInit(){}handleUploadChange(o){}processPdf(){return G(this,null,function*(){if(this.currentFile){this.isProcessing=!0,this.errorMessage="",this.extractedText="",this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6\u5230\u96F2\u7AEF\u5B58\u5132...";try{let o=`pdf-uploads/${Date.now()}_${this.currentFile.name}`,t=ve(this.storage,o);this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...",yield be(t,this.currentFile);let i=`gs://${t.bucket}/${t.fullPath}`;this.processingTip="\u6B63\u5728\u63D0\u53D6\u6587\u5B57\u5167\u5BB9...";let d=yield gt(this.functions,"extractPdfText")({gcsUri:i});if(d.data.status==="DONE"&&d.data.extractedText)this.extractedText=d.data.extractedText,this.message.success("PDF \u6587\u5B57\u63D0\u53D6\u5B8C\u6210\uFF01");else{if(d.data.status==="ERROR")throw new Error(d.data.error||"\u63D0\u53D6\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4");yield this.pollOperationStatus(d.data.operationName)}}catch(o){console.error("PDF processing error:",o),this.errorMessage=o.message||"\u8655\u7406 PDF \u6642\u767C\u751F\u932F\u8AA4\uFF0C\u8ACB\u91CD\u8A66\u3002",this.message.error(this.errorMessage)}finally{this.isProcessing=!1}}})}pollOperationStatus(o){return G(this,null,function*(){let t=gt(this.functions,"checkPdfExtractionStatus"),i=30,n=0,d=()=>G(this,null,function*(){if(n>=i)throw new Error("\u64CD\u4F5C\u8D85\u6642\uFF0C\u8ACB\u91CD\u8A66");n++,this.processingTip=`\u6B63\u5728\u8655\u7406\u4E2D... (${n}/${i})`;try{let x=yield t({operationName:o});if(x.data.status==="DONE")if(x.data.extractedText)this.extractedText=x.data.extractedText,this.message.success("PDF \u6587\u5B57\u63D0\u53D6\u5B8C\u6210\uFF01");else throw new Error("\u672A\u80FD\u63D0\u53D6\u5230\u6587\u5B57\u5167\u5BB9");else{if(x.data.status==="ERROR")throw new Error(x.data.error||"\u63D0\u53D6\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4");setTimeout(d,1e4)}}catch(x){throw x}});yield d()})}downloadText(){if(!this.extractedText)return;let o=new Blob([this.extractedText],{type:"text/plain;charset=utf-8"}),t=window.URL.createObjectURL(o),i=document.createElement("a");i.href=t,i.download=`extracted-text-${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t),this.message.success("\u6587\u5B57\u6587\u4EF6\u5DF2\u4E0B\u8F09")}reset(){this.fileList=[],this.currentFile=null,this.isProcessing=!1,this.extractedText="",this.errorMessage="",this.processingTip="\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6..."}showHelp(){this.message.info("\u4E0A\u50B3 PDF \u6587\u4EF6\u5F8C\uFF0C\u7CFB\u7D71\u5C07\u4F7F\u7528 Google Cloud Vision API \u81EA\u52D5\u63D0\u53D6\u5176\u4E2D\u7684\u6587\u5B57\u5167\u5BB9\u3002\u652F\u63F4\u591A\u8A9E\u8A00\u6587\u5B57\u8B58\u5225\u3002",{nzDuration:5e3})}};U.\u0275fac=function(t){return new(t||U)},U.\u0275cmp=F({type:U,selectors:[["app-pdf-scan"]],decls:15,vars:8,consts:[["extraTemplate",""],["nzTitle","PDF \u6587\u5B57\u63D0\u53D6",3,"nzExtra"],[1,"pdf-scan-container"],["nzSize","small","nzTitle","\u4E0A\u50B3 PDF \u6587\u4EF6"],["nzType","drag",3,"nzChange","nzMultiple","nzAccept","nzBeforeUpload","nzFileList"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["class","processing-section",4,"ngIf"],["class","results-section",4,"ngIf"],["class","error-section",4,"ngIf"],[1,"processing-section"],["nzSize","small"],[1,"text-center"],["nzSize","large",3,"nzTip"],[1,"processing-content"],["nz-icon","","nzType","file-text","nzTheme","outline",1,"processing-icon"],[1,"processing-detail"],[1,"results-section"],["nzSize","small","nzTitle","\u63D0\u53D6\u7D50\u679C"],[1,"extracted-text-container"],["nz-typography","","nzCopyable","",1,"extracted-text",3,"nzContent"],[1,"result-actions"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","",1,"ml-2",3,"click"],["nz-icon","","nzType","reload"],[1,"error-section"],["nzStatus","error","nzTitle","\u8655\u7406\u5931\u6557",3,"nzSubTitle"],["nz-result-extra",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","question-circle"]],template:function(t,i){if(t&1){let n=b();u(0,"nz-card",1)(1,"div",2)(2,"nz-card",3)(3,"nz-upload",4),y("nzChange",function(x){return C(n),g(i.handleUploadChange(x))}),u(4,"p",5),_(5,"span",6),m(),u(6,"p",7),h(7,"\u9EDE\u64CA\u6216\u62D6\u62FD PDF \u6587\u4EF6\u5230\u6B64\u5340\u57DF\u4E0A\u50B3"),m(),u(8,"p",8),h(9," \u652F\u63F4\u55AE\u500B PDF \u6587\u4EF6\u4E0A\u50B3\uFF0C\u6587\u4EF6\u5C07\u4F7F\u7528 Google Cloud Vision API \u9032\u884C\u6587\u5B57\u63D0\u53D6 "),m()()(),S(10,ni,10,2,"div",9)(11,oi,14,2,"div",10)(12,si,5,1,"div",11),m()(),S(13,ri,3,0,"ng-template",null,0,X)}if(t&2){let n=Y(14);f("nzExtra",n),c(3),f("nzMultiple",!1)("nzAccept",".pdf")("nzBeforeUpload",i.beforeUpload)("nzFileList",i.fileList),c(7),f("ngIf",i.isProcessing),c(),f("ngIf",i.extractedText&&!i.isProcessing),c(),f("ngIf",i.errorMessage&&!i.isProcessing)}},dependencies:[Zt,Ht,le,Ce,ye,ne,ie,te,ee,ze,he,ue,de,_e,xe,ge,ce,pe,Ne,wt,q,$],styles:[".pdf-scan-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.processing-section[_ngcontent-%COMP%], .results-section[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]{margin-top:16px}.processing-content[_ngcontent-%COMP%]{padding:20px}.processing-icon[_ngcontent-%COMP%]{font-size:48px;color:#1890ff;display:block;margin-bottom:16px}.processing-detail[_ngcontent-%COMP%]{color:#666;font-size:14px}.extracted-text-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid #d9d9d9;border-radius:6px;padding:12px;background-color:#fafafa}.extracted-text[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;margin:0;font-family:Courier New,monospace;font-size:14px;line-height:1.6}.result-actions[_ngcontent-%COMP%]{text-align:center}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.text-center[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .ant-upload.ant-upload-drag{background-color:#fafafa}[_nghost-%COMP%]     .ant-upload.ant-upload-drag:hover{border-color:#40a9ff}"]});var De=U;export{De as PdfScanComponent};
