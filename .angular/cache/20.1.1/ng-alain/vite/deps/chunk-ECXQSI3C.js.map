{
  "version": 3,
  "sources": ["../../../../../../node_modules/@delon/chart/fesm2022/core.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { inject, Injectable, ElementRef, NgZone, ChangeDetectorRef, EventEmitter, numberAttribute, booleanAttribute, Output, Input, ViewChild, Directive } from '@angular/core';\nimport { Subject, takeUntil, filter } from 'rxjs';\nimport { AlainConfigService } from '@delon/util/config';\nimport { LazyService } from '@delon/util/other';\nimport { __decorate } from 'tslib';\nimport { Platform } from '@angular/cdk/platform';\nimport { ZoneOutside } from '@delon/util/decorator';\nconst _c0 = [\"container\"];\nclass G2Service {\n  cogSrv = inject(AlainConfigService);\n  lazySrv = inject(LazyService);\n  _cog;\n  loading = false;\n  loaded = false;\n  notify$ = new Subject();\n  get cog() {\n    return this._cog;\n  }\n  set cog(val) {\n    this._cog = this.cogSrv.merge('chart', {\n      theme: '',\n      libs: ['https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js', 'https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js']\n    }, val);\n  }\n  constructor() {\n    this.cog = {\n      theme: ''\n    };\n  }\n  libLoad() {\n    if (this.loading) {\n      if (this.loaded) {\n        this.notify$.next();\n      }\n      return this;\n    }\n    this.loading = true;\n    this.lazySrv.load(this.cog.libs).then(() => {\n      this.loaded = true;\n      this.notify$.next();\n    });\n    return this;\n  }\n  get notify() {\n    return this.notify$.asObservable();\n  }\n  ngOnDestroy() {\n    this.notify$.unsubscribe();\n  }\n  static ɵfac = function G2Service_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || G2Service)();\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: G2Service,\n    factory: G2Service.ɵfac,\n    providedIn: 'root'\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(G2Service, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [], null);\n})();\nclass G2BaseComponent {\n  srv = inject(G2Service);\n  el = inject(ElementRef);\n  ngZone = inject(NgZone);\n  platform = inject(Platform);\n  cdr = inject(ChangeDetectorRef);\n  get chart() {\n    return this._chart;\n  }\n  get winG2() {\n    return window.G2;\n  }\n  constructor() {\n    this.theme = this.srv.cog.theme;\n    this.srv.notify.pipe(takeUntil(this.destroy$), filter(() => !this.loaded)).subscribe(() => this.load());\n  }\n  repaint = true;\n  node;\n  resize$;\n  destroy$ = new Subject();\n  _chart;\n  loaded = false;\n  delay = 0;\n  theme;\n  ready = new EventEmitter();\n  /** 检查是否只变更数据 */\n  onlyChangeData;\n  /** G2数据变更 */\n  changeData() {}\n  /** 等同 `ngOnInit` */\n  onInit() {}\n  /** 等同 `ngOnChanges` */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  onChanges(_) {}\n  load() {\n    this.ngZone.run(() => {\n      this.loaded = true;\n      this.cdr.detectChanges();\n    });\n    setTimeout(() => this.install(), this.delay);\n  }\n  ngOnInit() {\n    if (!this.platform.isBrowser) {\n      return;\n    }\n    this.onInit();\n    if (this.winG2) {\n      this.load();\n    } else {\n      this.srv.libLoad();\n    }\n  }\n  ngOnChanges(changes) {\n    this.onChanges(changes);\n    const isOnlyChangeData = this.onlyChangeData ? this.onlyChangeData(changes) : Object.keys(changes).length === 1 && !!changes.data;\n    if (isOnlyChangeData) {\n      this.changeData();\n      return;\n    }\n    if (!this.chart || !this.repaint) return;\n    this.ngZone.runOutsideAngular(() => {\n      this.destroyChart().install();\n    });\n  }\n  destroyChart() {\n    if (this._chart) {\n      this._chart.destroy();\n    }\n    return this;\n  }\n  ngOnDestroy() {\n    if (this.resize$) {\n      this.resize$.unsubscribe();\n    }\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.destroyChart();\n  }\n  static ɵfac = function G2BaseComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || G2BaseComponent)();\n  };\n  static ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: G2BaseComponent,\n    viewQuery: function G2BaseComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.node = _t.first);\n      }\n    },\n    inputs: {\n      repaint: [2, \"repaint\", \"repaint\", booleanAttribute],\n      delay: [2, \"delay\", \"delay\", numberAttribute],\n      theme: \"theme\"\n    },\n    outputs: {\n      ready: \"ready\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n}\n__decorate([ZoneOutside()], G2BaseComponent.prototype, \"load\", null);\n__decorate([ZoneOutside()], G2BaseComponent.prototype, \"destroyChart\", null);\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(G2BaseComponent, [{\n    type: Directive\n  }], () => [], {\n    repaint: [{\n      type: Input,\n      args: [{\n        transform: booleanAttribute\n      }]\n    }],\n    node: [{\n      type: ViewChild,\n      args: ['container', {\n        static: true\n      }]\n    }],\n    delay: [{\n      type: Input,\n      args: [{\n        transform: numberAttribute\n      }]\n    }],\n    theme: [{\n      type: Input\n    }],\n    ready: [{\n      type: Output\n    }],\n    load: [],\n    destroyChart: []\n  });\n})();\nfunction genMiniTooltipOptions(type, options) {\n  const res = {\n    showTitle: false,\n    showMarkers: true,\n    enterable: true,\n    domStyles: {\n      'g2-tooltip': {\n        padding: '0px'\n      },\n      'g2-tooltip-title': {\n        display: 'none'\n      },\n      'g2-tooltip-list-item': {\n        margin: '4px'\n      }\n    },\n    ...options\n  };\n  if (type === 'mini') {\n    res.position = 'top';\n    res.domStyles['g2-tooltip'] = {\n      padding: '0px',\n      backgroundColor: 'transparent',\n      boxShadow: 'none'\n    };\n    res.itemTpl = `<li>{value}</li>`;\n    res.offset = 8;\n  }\n  return res;\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { G2BaseComponent, G2Service, genMiniTooltipOptions };\n"],
  "mappings": "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",
  "names": []
}
