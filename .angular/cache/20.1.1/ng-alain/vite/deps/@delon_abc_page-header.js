import {
  NzBreadCrumbComponent,
  NzBreadCrumbItemComponent,
  NzBreadCrumbModule
} from "./chunk-BA4UH24Q.js";
import {
  NzSkeletonComponent,
  NzSkeletonModule
} from "./chunk-NUIZUDC6.js";
import {
  ReuseTabService
} from "./chunk-YX4CPUI3.js";
import "./chunk-B2ST2VOR.js";
import "./chunk-6Y4KUKOA.js";
import "./chunk-IIASACYA.js";
import {
  NzResizeObserver
} from "./chunk-OIOY4I4G.js";
import {
  NzScrollService
} from "./chunk-XPEPFKNH.js";
import {
  isEmpty
} from "./chunk-KZXCIQZH.js";
import {
  ALAIN_I18N_TOKEN,
  MenuService,
  SettingsService,
  TitleService
} from "./chunk-WLPEXMS5.js";
import "./chunk-V4XBV55A.js";
import "./chunk-ZTNECFVY.js";
import "./chunk-VCVGLQF3.js";
import "./chunk-HGGVII4K.js";
import "./chunk-C2DAT26Y.js";
import "./chunk-MKB5HFAJ.js";
import "./chunk-KEGEU5UL.js";
import "./chunk-FBEQODFK.js";
import "./chunk-HXEEJHXJ.js";
import "./chunk-QYDDKLT3.js";
import "./chunk-LE4RSIF3.js";
import "./chunk-SQJ77OAJ.js";
import "./chunk-QZQ7SHKY.js";
import "./chunk-BHH4M3PU.js";
import {
  CdkObserveContent,
  ObserversModule
} from "./chunk-2BDLX2FQ.js";
import "./chunk-C6MTXAAB.js";
import "./chunk-U5VATZ4Q.js";
import "./chunk-EGGX2FJX.js";
import "./chunk-76DJI4FU.js";
import "./chunk-MIQKVNBS.js";
import "./chunk-RH5RXJTD.js";
import "./chunk-Y5G3O3B7.js";
import {
  AlainConfigService
} from "./chunk-ES4WNO3Q.js";
import "./chunk-XMKNXNVX.js";
import "./chunk-GP3H6RZA.js";
import "./chunk-OAOHUKFD.js";
import "./chunk-BQ76GOFF.js";
import {
  NzConfigService,
  WithConfig
} from "./chunk-LSG4V6ID.js";
import {
  NzOutletModule,
  NzStringTemplateOutletDirective
} from "./chunk-KG76OIXO.js";
import {
  fromEventOutsideAngular,
  getStyleAsText,
  numberAttributeWithZeroFallback,
  shallowEqual
} from "./chunk-J25EALHE.js";
import "./chunk-FZ3LGF3I.js";
import "./chunk-LTANXE67.js";
import {
  NavigationEnd,
  Router,
  RouterLink,
  RouterModule
} from "./chunk-36PX2JTV.js";
import "./chunk-BVIJPY5U.js";
import "./chunk-ZO4CS3CJ.js";
import {
  takeUntilDestroyed
} from "./chunk-I75K2H66.js";
import {
  PlatformModule
} from "./chunk-CQHDL44S.js";
import "./chunk-NDRILP3E.js";
import "./chunk-2WJ2IEY4.js";
import "./chunk-4NJAG2UW.js";
import "./chunk-IH6YTMYU.js";
import "./chunk-D4QSWQD6.js";
import "./chunk-NFHVISCS.js";
import {
  BidiModule,
  Directionality
} from "./chunk-TBGMZLZ3.js";
import {
  Platform
} from "./chunk-GIT7CFOZ.js";
import {
  CommonModule,
  NgTemplateOutlet
} from "./chunk-GUTSRBNM.js";
import "./chunk-FTJJFYDV.js";
import {
  ChangeDetectionStrategy,
  ChangeDetectorRef,
  Component,
  ElementRef,
  EventEmitter,
  Input,
  NgModule,
  Output,
  Renderer2,
  TemplateRef,
  ViewChild,
  ViewEncapsulation,
  booleanAttribute,
  numberAttribute,
  setClassMetadata,
  ɵɵNgOnChangesFeature,
  ɵɵadvance,
  ɵɵclassProp,
  ɵɵconditional,
  ɵɵconditionalCreate,
  ɵɵdefineComponent,
  ɵɵdefineNgModule,
  ɵɵelementContainerEnd,
  ɵɵelementContainerStart,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnextContext,
  ɵɵprojection,
  ɵɵprojectionDef,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵrepeater,
  ɵɵrepeaterCreate,
  ɵɵrepeaterTrackByIndex,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵviewQuery
} from "./chunk-NQBXVTYU.js";
import {
  DOCUMENT,
  DestroyRef,
  inject,
  ɵɵdefineInjector,
  ɵɵresetView,
  ɵɵrestoreView
} from "./chunk-QZDSTGXI.js";
import {
  merge
} from "./chunk-KMLKBNXJ.js";
import "./chunk-Q4VD2BBX.js";
import {
  ReplaySubject,
  Subscription,
  __esDecorate,
  __runInitializers,
  filter,
  map,
  throttleTime
} from "./chunk-EBAU53KC.js";
import {
  __publicField,
  __spreadProps,
  __spreadValues
} from "./chunk-7CE4I3X6.js";

// node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-affix.mjs
var _c0 = ["fixedEl"];
var _c1 = ["*"];
var AffixRespondEvents;
(function(AffixRespondEvents2) {
  AffixRespondEvents2["resize"] = "resize";
  AffixRespondEvents2["scroll"] = "scroll";
  AffixRespondEvents2["touchstart"] = "touchstart";
  AffixRespondEvents2["touchmove"] = "touchmove";
  AffixRespondEvents2["touchend"] = "touchend";
  AffixRespondEvents2["pageshow"] = "pageshow";
  AffixRespondEvents2["load"] = "LOAD";
})(AffixRespondEvents || (AffixRespondEvents = {}));
function isTargetWindow(target) {
  return typeof window !== "undefined" && target === window;
}
function getTargetRect(target) {
  return !isTargetWindow(target) ? target.getBoundingClientRect() : {
    top: 0,
    left: 0,
    bottom: 0
  };
}
var NZ_CONFIG_MODULE_NAME = "affix";
var NZ_AFFIX_CLS_PREFIX = "ant-affix";
var NZ_AFFIX_DEFAULT_SCROLL_TIME = 20;
var NzAffixComponent = (() => {
  var _a;
  let _nzOffsetTop_decorators;
  let _nzOffsetTop_initializers = [];
  let _nzOffsetTop_extraInitializers = [];
  let _nzOffsetBottom_decorators;
  let _nzOffsetBottom_initializers = [];
  let _nzOffsetBottom_extraInitializers = [];
  return _a = class {
    nzConfigService = inject(NzConfigService);
    scrollSrv = inject(NzScrollService);
    platform = inject(Platform);
    renderer = inject(Renderer2);
    nzResizeObserver = inject(NzResizeObserver);
    cdr = inject(ChangeDetectorRef);
    directionality = inject(Directionality);
    destroyRef = inject(DestroyRef);
    _nzModuleName = NZ_CONFIG_MODULE_NAME;
    fixedEl;
    nzTarget;
    nzOffsetTop = __runInitializers(this, _nzOffsetTop_initializers, void 0);
    nzOffsetBottom = (__runInitializers(this, _nzOffsetTop_extraInitializers), __runInitializers(this, _nzOffsetBottom_initializers, void 0));
    nzChange = (__runInitializers(this, _nzOffsetBottom_extraInitializers), new EventEmitter());
    dir = "ltr";
    placeholderNode = inject(ElementRef).nativeElement;
    affixStyle;
    placeholderStyle;
    positionChangeSubscription = Subscription.EMPTY;
    offsetChanged$ = new ReplaySubject(1);
    timeout;
    document = inject(DOCUMENT);
    get target() {
      const el = this.nzTarget;
      return (typeof el === "string" ? this.document.querySelector(el) : el) || window;
    }
    constructor() {
      this.destroyRef.onDestroy(() => {
        this.removeListeners();
      });
    }
    ngOnInit() {
      this.directionality.change?.pipe(takeUntilDestroyed(this.destroyRef)).subscribe((direction) => {
        this.dir = direction;
        this.registerListeners();
        this.updatePosition({});
        this.cdr.detectChanges();
      });
      this.dir = this.directionality.value;
    }
    ngOnChanges(changes) {
      const {
        nzOffsetBottom,
        nzOffsetTop,
        nzTarget
      } = changes;
      if (nzOffsetBottom || nzOffsetTop) {
        this.offsetChanged$.next();
      }
      if (nzTarget) {
        this.registerListeners();
      }
    }
    ngAfterViewInit() {
      this.registerListeners();
    }
    registerListeners() {
      if (!this.platform.isBrowser) {
        return;
      }
      this.removeListeners();
      const el = this.target === window ? this.document.body : this.target;
      this.positionChangeSubscription = merge(...Object.keys(AffixRespondEvents).map((evName) => fromEventOutsideAngular(this.target, evName)), this.offsetChanged$.pipe(map(() => ({}))), this.nzResizeObserver.observe(el)).pipe(throttleTime(NZ_AFFIX_DEFAULT_SCROLL_TIME, void 0, {
        trailing: true
      }), takeUntilDestroyed(this.destroyRef)).subscribe((e) => this.updatePosition(e));
      this.timeout = setTimeout(() => this.updatePosition({}));
    }
    removeListeners() {
      clearTimeout(this.timeout);
      this.positionChangeSubscription.unsubscribe();
    }
    getOffset(element, target) {
      const elemRect = element.getBoundingClientRect();
      const targetRect = getTargetRect(target);
      const scrollTop = this.scrollSrv.getScroll(target, true);
      const scrollLeft = this.scrollSrv.getScroll(target, false);
      const docElem = this.document.body;
      const clientTop = docElem.clientTop || 0;
      const clientLeft = docElem.clientLeft || 0;
      return {
        top: elemRect.top - targetRect.top + scrollTop - clientTop,
        left: elemRect.left - targetRect.left + scrollLeft - clientLeft,
        width: elemRect.width,
        height: elemRect.height
      };
    }
    setAffixStyle(e, affixStyle) {
      const originalAffixStyle = this.affixStyle;
      const isWindow = this.target === window;
      if (e.type === "scroll" && originalAffixStyle && affixStyle && isWindow) {
        return;
      }
      if (shallowEqual(originalAffixStyle, affixStyle)) {
        return;
      }
      const fixed = !!affixStyle;
      const wrapEl = this.fixedEl.nativeElement;
      this.renderer.setStyle(wrapEl, "cssText", getStyleAsText(affixStyle));
      this.affixStyle = affixStyle;
      if (fixed) {
        wrapEl.classList.add(NZ_AFFIX_CLS_PREFIX);
      } else {
        wrapEl.classList.remove(NZ_AFFIX_CLS_PREFIX);
      }
      this.updateRtlClass();
      if (affixStyle && !originalAffixStyle || !affixStyle && originalAffixStyle) {
        this.nzChange.emit(fixed);
      }
    }
    setPlaceholderStyle(placeholderStyle) {
      const originalPlaceholderStyle = this.placeholderStyle;
      if (shallowEqual(placeholderStyle, originalPlaceholderStyle)) {
        return;
      }
      this.renderer.setStyle(this.placeholderNode, "cssText", getStyleAsText(placeholderStyle));
      this.placeholderStyle = placeholderStyle;
    }
    syncPlaceholderStyle(e) {
      if (!this.affixStyle) {
        return;
      }
      this.renderer.setStyle(this.placeholderNode, "cssText", "");
      this.placeholderStyle = void 0;
      const styleObj = {
        width: this.placeholderNode.offsetWidth,
        height: this.fixedEl.nativeElement.offsetHeight
      };
      this.setAffixStyle(e, __spreadValues(__spreadValues({}, this.affixStyle), styleObj));
      this.setPlaceholderStyle(styleObj);
    }
    updatePosition(e) {
      if (!this.platform.isBrowser) {
        return;
      }
      const targetNode = this.target;
      let offsetTop = this.nzOffsetTop;
      const scrollTop = this.scrollSrv.getScroll(targetNode, true);
      const elemOffset = this.getOffset(this.placeholderNode, targetNode);
      const fixedNode = this.fixedEl.nativeElement;
      const elemSize = {
        width: fixedNode.offsetWidth,
        height: fixedNode.offsetHeight
      };
      const offsetMode = {
        top: false,
        bottom: false
      };
      if (typeof offsetTop !== "number" && typeof this.nzOffsetBottom !== "number") {
        offsetMode.top = true;
        offsetTop = 0;
      } else {
        offsetMode.top = typeof offsetTop === "number";
        offsetMode.bottom = typeof this.nzOffsetBottom === "number";
      }
      const targetRect = getTargetRect(targetNode);
      const targetInnerHeight = targetNode.innerHeight || targetNode.clientHeight;
      if (scrollTop >= elemOffset.top - offsetTop && offsetMode.top) {
        const width = elemOffset.width;
        const top = targetRect.top + offsetTop;
        this.setAffixStyle(e, {
          position: "fixed",
          top,
          left: targetRect.left + elemOffset.left,
          width
        });
        this.setPlaceholderStyle({
          width,
          height: elemSize.height
        });
      } else if (scrollTop <= elemOffset.top + elemSize.height + this.nzOffsetBottom - targetInnerHeight && offsetMode.bottom) {
        const targetBottomOffset = targetNode === window ? 0 : window.innerHeight - targetRect.bottom;
        const width = elemOffset.width;
        this.setAffixStyle(e, {
          position: "fixed",
          bottom: targetBottomOffset + this.nzOffsetBottom,
          left: targetRect.left + elemOffset.left,
          width
        });
        this.setPlaceholderStyle({
          width,
          height: elemOffset.height
        });
      } else {
        if (e.type === AffixRespondEvents.resize && this.affixStyle && this.affixStyle.position === "fixed" && this.placeholderNode.offsetWidth) {
          this.setAffixStyle(e, __spreadProps(__spreadValues({}, this.affixStyle), {
            width: this.placeholderNode.offsetWidth
          }));
        } else {
          this.setAffixStyle(e);
        }
        this.setPlaceholderStyle();
      }
      if (e.type === "resize") {
        this.syncPlaceholderStyle(e);
      }
    }
    updateRtlClass() {
      const wrapEl = this.fixedEl.nativeElement;
      if (this.dir === "rtl") {
        if (wrapEl.classList.contains(NZ_AFFIX_CLS_PREFIX)) {
          wrapEl.classList.add(`${NZ_AFFIX_CLS_PREFIX}-rtl`);
        } else {
          wrapEl.classList.remove(`${NZ_AFFIX_CLS_PREFIX}-rtl`);
        }
      } else {
        wrapEl.classList.remove(`${NZ_AFFIX_CLS_PREFIX}-rtl`);
      }
    }
  }, (() => {
    const _metadata = typeof Symbol === "function" && Symbol.metadata ? /* @__PURE__ */ Object.create(null) : void 0;
    _nzOffsetTop_decorators = [WithConfig()];
    _nzOffsetBottom_decorators = [WithConfig()];
    __esDecorate(null, null, _nzOffsetTop_decorators, {
      kind: "field",
      name: "nzOffsetTop",
      static: false,
      private: false,
      access: {
        has: (obj) => "nzOffsetTop" in obj,
        get: (obj) => obj.nzOffsetTop,
        set: (obj, value) => {
          obj.nzOffsetTop = value;
        }
      },
      metadata: _metadata
    }, _nzOffsetTop_initializers, _nzOffsetTop_extraInitializers);
    __esDecorate(null, null, _nzOffsetBottom_decorators, {
      kind: "field",
      name: "nzOffsetBottom",
      static: false,
      private: false,
      access: {
        has: (obj) => "nzOffsetBottom" in obj,
        get: (obj) => obj.nzOffsetBottom,
        set: (obj, value) => {
          obj.nzOffsetBottom = value;
        }
      },
      metadata: _metadata
    }, _nzOffsetBottom_initializers, _nzOffsetBottom_extraInitializers);
    if (_metadata) Object.defineProperty(_a, Symbol.metadata, {
      enumerable: true,
      configurable: true,
      writable: true,
      value: _metadata
    });
  })(), __publicField(_a, "ɵfac", function NzAffixComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _a)();
  }), __publicField(_a, "ɵcmp", ɵɵdefineComponent({
    type: _a,
    selectors: [["nz-affix"]],
    viewQuery: function NzAffixComponent_Query(rf, ctx) {
      if (rf & 1) {
        ɵɵviewQuery(_c0, 7);
      }
      if (rf & 2) {
        let _t;
        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.fixedEl = _t.first);
      }
    },
    inputs: {
      nzTarget: "nzTarget",
      nzOffsetTop: [2, "nzOffsetTop", "nzOffsetTop", numberAttributeWithZeroFallback],
      nzOffsetBottom: [2, "nzOffsetBottom", "nzOffsetBottom", numberAttributeWithZeroFallback]
    },
    outputs: {
      nzChange: "nzChange"
    },
    exportAs: ["nzAffix"],
    features: [ɵɵNgOnChangesFeature],
    ngContentSelectors: _c1,
    decls: 3,
    vars: 0,
    consts: [["fixedEl", ""]],
    template: function NzAffixComponent_Template(rf, ctx) {
      if (rf & 1) {
        ɵɵprojectionDef();
        ɵɵelementStart(0, "div", null, 0);
        ɵɵprojection(2);
        ɵɵelementEnd();
      }
    },
    dependencies: [BidiModule, PlatformModule],
    encapsulation: 2,
    changeDetection: 0
  })), _a;
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzAffixComponent, [{
    type: Component,
    args: [{
      selector: "nz-affix",
      exportAs: "nzAffix",
      imports: [BidiModule, PlatformModule],
      template: `
    <div #fixedEl>
      <ng-content></ng-content>
    </div>
  `,
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation.None
    }]
  }], () => [], {
    fixedEl: [{
      type: ViewChild,
      args: ["fixedEl", {
        static: true
      }]
    }],
    nzTarget: [{
      type: Input
    }],
    nzOffsetTop: [{
      type: Input,
      args: [{
        transform: numberAttributeWithZeroFallback
      }]
    }],
    nzOffsetBottom: [{
      type: Input,
      args: [{
        transform: numberAttributeWithZeroFallback
      }]
    }],
    nzChange: [{
      type: Output
    }]
  });
})();
var NzAffixModule = class _NzAffixModule {
  static ɵfac = function NzAffixModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NzAffixModule)();
  };
  static ɵmod = ɵɵdefineNgModule({
    type: _NzAffixModule,
    imports: [NzAffixComponent],
    exports: [NzAffixComponent]
  });
  static ɵinj = ɵɵdefineInjector({
    imports: [NzAffixComponent]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzAffixModule, [{
    type: NgModule,
    args: [{
      exports: [NzAffixComponent],
      imports: [NzAffixComponent]
    }]
  }], null, null);
})();

// node_modules/@delon/abc/fesm2022/page-header.mjs
var _c02 = ["conTpl"];
var _c12 = ["affix"];
var _c2 = ["*"];
var _c3 = () => ({
  rows: 3
});
var _c4 = () => ({
  size: "large",
  shape: "circle"
});
function PageHeaderComponent_Conditional_0_ng_template_2_Template(rf, ctx) {
}
function PageHeaderComponent_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-affix", 3, 1);
    ɵɵtemplate(2, PageHeaderComponent_Conditional_0_ng_template_2_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext();
    const phTpl_r2 = ɵɵreference(3);
    ɵɵproperty("nzOffsetTop", ctx_r0.fixedOffsetTop);
    ɵɵadvance(2);
    ɵɵproperty("ngTemplateOutlet", phTpl_r2);
  }
}
function PageHeaderComponent_Conditional_1_ng_template_0_Template(rf, ctx) {
}
function PageHeaderComponent_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, PageHeaderComponent_Conditional_1_ng_template_0_Template, 0, 0, "ng-template", 4);
  }
  if (rf & 2) {
    ɵɵnextContext();
    const phTpl_r2 = ɵɵreference(3);
    ɵɵproperty("ngTemplateOutlet", phTpl_r2);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_3_ng_template_0_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, PageHeaderComponent_ng_template_2_Conditional_3_ng_template_0_Template, 0, 0, "ng-template", 4);
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵproperty("ngTemplateOutlet", ctx_r0.breadcrumb);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "a", 15);
    ɵɵtext(1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r4 = ɵɵnextContext().$implicit;
    ɵɵproperty("routerLink", i_r4.link);
    ɵɵadvance();
    ɵɵtextInterpolate(i_r4.title);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtext(0);
  }
  if (rf & 2) {
    const i_r4 = ɵɵnextContext().$implicit;
    ɵɵtextInterpolate1(" ", i_r4.title, " ");
  }
}
function PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-breadcrumb-item");
    ɵɵconditionalCreate(1, PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Conditional_1_Template, 2, 2, "a", 15)(2, PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Conditional_2_Template, 1, 1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r4 = ctx.$implicit;
    ɵɵadvance();
    ɵɵconditional(i_r4.link ? 1 : 2);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-breadcrumb");
    ɵɵrepeaterCreate(1, PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_For_2_Template, 3, 1, "nz-breadcrumb-item", null, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(3);
    ɵɵadvance();
    ɵɵrepeater(ctx_r0.paths);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, PageHeaderComponent_ng_template_2_Conditional_4_Conditional_0_Template, 3, 0, "nz-breadcrumb");
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵconditional(ctx_r0.paths && ctx_r0.paths.length > 0 ? 0 : -1);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_6_ng_template_1_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 8);
    ɵɵtemplate(1, PageHeaderComponent_ng_template_2_Conditional_6_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r0.logo);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_9_Conditional_1_ng_template_0_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_9_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, PageHeaderComponent_ng_template_2_Conditional_9_Conditional_1_ng_template_0_Template, 0, 0, "ng-template", 4);
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(3);
    ɵɵproperty("ngTemplateOutlet", ctx_r0._titleTpl);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Conditional_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementContainerStart(0);
    ɵɵtext(1);
    ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(5);
    ɵɵadvance();
    ɵɵtextInterpolate(ctx_r0.titleSub);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "small");
    ɵɵtemplate(1, PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Conditional_1_ng_container_1_Template, 2, 1, "ng-container", 16);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(4);
    ɵɵadvance();
    ɵɵproperty("nzStringTemplateOutlet", ctx_r0.titleSub);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtext(0);
    ɵɵconditionalCreate(1, PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Conditional_1_Template, 2, 1, "small");
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(3);
    ɵɵtextInterpolate1(" ", ctx_r0._titleVal, " ");
    ɵɵadvance();
    ɵɵconditional(ctx_r0.titleSub ? 1 : -1);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_9_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "h1", 11);
    ɵɵconditionalCreate(1, PageHeaderComponent_ng_template_2_Conditional_9_Conditional_1_Template, 1, 1, null, 4)(2, PageHeaderComponent_ng_template_2_Conditional_9_Conditional_2_Template, 2, 2);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵconditional(ctx_r0._titleTpl ? 1 : 2);
  }
}
function PageHeaderComponent_ng_template_2_Conditional_10_ng_template_1_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 12);
    ɵɵtemplate(1, PageHeaderComponent_ng_template_2_Conditional_10_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r0.action);
  }
}
function PageHeaderComponent_ng_template_2_ng_template_15_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_16_ng_template_1_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Conditional_16_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 14);
    ɵɵtemplate(1, PageHeaderComponent_ng_template_2_Conditional_16_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r0.extra);
  }
}
function PageHeaderComponent_ng_template_2_ng_template_17_Template(rf, ctx) {
}
function PageHeaderComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 5)(1, "div")(2, "nz-skeleton", 6);
    ɵɵconditionalCreate(3, PageHeaderComponent_ng_template_2_Conditional_3_Template, 1, 1, null, 4)(4, PageHeaderComponent_ng_template_2_Conditional_4_Template, 1, 1);
    ɵɵelementStart(5, "div", 7);
    ɵɵconditionalCreate(6, PageHeaderComponent_ng_template_2_Conditional_6_Template, 2, 1, "div", 8);
    ɵɵelementStart(7, "div", 9)(8, "div", 10);
    ɵɵconditionalCreate(9, PageHeaderComponent_ng_template_2_Conditional_9_Template, 3, 1, "h1", 11);
    ɵɵconditionalCreate(10, PageHeaderComponent_ng_template_2_Conditional_10_Template, 2, 1, "div", 12);
    ɵɵelementEnd();
    ɵɵelementStart(11, "div", 10)(12, "div", 13, 2);
    ɵɵlistener("cdkObserveContent", function PageHeaderComponent_ng_template_2_Template_div_cdkObserveContent_12_listener() {
      ɵɵrestoreView(_r3);
      const ctx_r0 = ɵɵnextContext();
      return ɵɵresetView(ctx_r0.checkContent());
    });
    ɵɵprojection(14);
    ɵɵtemplate(15, PageHeaderComponent_ng_template_2_ng_template_15_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
    ɵɵconditionalCreate(16, PageHeaderComponent_ng_template_2_Conditional_16_Template, 2, 1, "div", 14);
    ɵɵelementEnd()()();
    ɵɵtemplate(17, PageHeaderComponent_ng_template_2_ng_template_17_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext();
    ɵɵclassProp("page-header-rtl", ctx_r0.dir() === "rtl");
    ɵɵadvance();
    ɵɵclassProp("page-header__wide", ctx_r0.wide);
    ɵɵadvance();
    ɵɵproperty("nzLoading", ctx_r0.loading)("nzTitle", false)("nzActive", true)("nzParagraph", ɵɵpureFunction0(16, _c3))("nzAvatar", ɵɵpureFunction0(17, _c4));
    ɵɵadvance();
    ɵɵconditional(ctx_r0.breadcrumb ? 3 : 4);
    ɵɵadvance(3);
    ɵɵconditional(ctx_r0.logo ? 6 : -1);
    ɵɵadvance(3);
    ɵɵconditional(ctx_r0._titleVal || ctx_r0._titleTpl ? 9 : -1);
    ɵɵadvance();
    ɵɵconditional(ctx_r0.action ? 10 : -1);
    ɵɵadvance(5);
    ɵɵproperty("ngTemplateOutlet", ctx_r0.content);
    ɵɵadvance();
    ɵɵconditional(ctx_r0.extra ? 16 : -1);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r0.tab);
  }
}
var PageHeaderComponent = class _PageHeaderComponent {
  renderer = inject(Renderer2);
  router = inject(Router);
  cdr = inject(ChangeDetectorRef);
  menuSrv = inject(MenuService);
  i18nSrv = inject(ALAIN_I18N_TOKEN);
  titleSrv = inject(TitleService);
  reuseSrv = inject(ReuseTabService, {
    optional: true
  });
  settings = inject(SettingsService);
  platform = inject(Platform);
  cogSrv = inject(AlainConfigService);
  conTpl;
  affix;
  inited = false;
  isBrowser = true;
  dir = inject(Directionality).valueSignal;
  get menus() {
    return this.menuSrv.getPathByUrl(this.router.url, this.recursiveBreadcrumb);
  }
  _titleVal = "";
  paths = [];
  // #region fields
  _title = null;
  _titleTpl = null;
  set title(value) {
    if (value instanceof TemplateRef) {
      this._title = null;
      this._titleTpl = value;
      this._titleVal = "";
    } else {
      this._title = value;
      this._titleVal = this._title;
    }
  }
  titleSub;
  loading = false;
  wide = false;
  home;
  homeLink;
  homeI18n;
  autoBreadcrumb;
  autoTitle;
  syncTitle;
  fixed;
  fixedOffsetTop;
  breadcrumb = null;
  recursiveBreadcrumb;
  logo = null;
  action = null;
  content = null;
  extra = null;
  tab = null;
  // #endregion
  constructor() {
    this.isBrowser = this.platform.isBrowser;
    this.cogSrv.attach(this, "pageHeader", {
      home: "首页",
      homeLink: "/",
      autoBreadcrumb: true,
      recursiveBreadcrumb: false,
      autoTitle: true,
      syncTitle: true,
      fixed: false,
      fixedOffsetTop: 64
    });
    this.settings.notify.pipe(takeUntilDestroyed(), filter((w) => this.affix && w.type === "layout" && w.name === "collapsed")).subscribe(() => this.affix.updatePosition({}));
    const obsList = [this.router.events.pipe(filter((ev) => ev instanceof NavigationEnd))];
    if (this.menuSrv != null) obsList.push(this.menuSrv.change);
    obsList.push(this.i18nSrv.change);
    merge(...obsList).pipe(takeUntilDestroyed(), filter(() => this.inited)).subscribe(() => this.refresh());
  }
  refresh() {
    this.setTitle().genBreadcrumb();
    this.cdr.detectChanges();
  }
  genBreadcrumb() {
    if (this.breadcrumb || !this.autoBreadcrumb || this.menus.length <= 0) {
      this.paths = [];
      return;
    }
    const paths = [];
    this.menus.forEach((item) => {
      if (typeof item.hideInBreadcrumb !== "undefined" && item.hideInBreadcrumb) return;
      let title = item.text;
      if (item.i18n) title = this.i18nSrv.fanyi(item.i18n);
      paths.push({
        title,
        link: item.link && [item.link]
      });
    });
    if (this.home) {
      paths.splice(0, 0, {
        title: this.homeI18n && this.i18nSrv.fanyi(this.homeI18n) || this.home,
        link: [this.homeLink]
      });
    }
    this.paths = paths;
  }
  setTitle() {
    if (this._title == null && this._titleTpl == null && this.autoTitle && this.menus.length > 0) {
      const item = this.menus[this.menus.length - 1];
      let title = item.text;
      if (item.i18n) {
        title = this.i18nSrv.fanyi(item.i18n);
      }
      this._titleVal = title;
    }
    if (this._titleVal && this.syncTitle) {
      this.titleSrv.setTitle(this._titleVal);
      if (!this.inited && this.reuseSrv) {
        this.reuseSrv.title = this._titleVal;
      }
    }
    return this;
  }
  checkContent() {
    if (isEmpty(this.conTpl.nativeElement)) {
      this.renderer.setAttribute(this.conTpl.nativeElement, "hidden", "");
    } else {
      this.renderer.removeAttribute(this.conTpl.nativeElement, "hidden");
    }
  }
  ngOnInit() {
    this.refresh();
    this.inited = true;
  }
  ngAfterViewInit() {
    this.checkContent();
  }
  ngOnChanges() {
    if (this.inited) {
      this.refresh();
    }
  }
  static ɵfac = function PageHeaderComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PageHeaderComponent)();
  };
  static ɵcmp = ɵɵdefineComponent({
    type: _PageHeaderComponent,
    selectors: [["page-header"]],
    viewQuery: function PageHeaderComponent_Query(rf, ctx) {
      if (rf & 1) {
        ɵɵviewQuery(_c02, 5);
        ɵɵviewQuery(_c12, 5);
      }
      if (rf & 2) {
        let _t;
        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.conTpl = _t.first);
        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.affix = _t.first);
      }
    },
    inputs: {
      title: "title",
      titleSub: "titleSub",
      loading: [2, "loading", "loading", booleanAttribute],
      wide: [2, "wide", "wide", booleanAttribute],
      home: "home",
      homeLink: "homeLink",
      homeI18n: "homeI18n",
      autoBreadcrumb: [2, "autoBreadcrumb", "autoBreadcrumb", booleanAttribute],
      autoTitle: [2, "autoTitle", "autoTitle", booleanAttribute],
      syncTitle: [2, "syncTitle", "syncTitle", booleanAttribute],
      fixed: [2, "fixed", "fixed", booleanAttribute],
      fixedOffsetTop: [2, "fixedOffsetTop", "fixedOffsetTop", numberAttribute],
      breadcrumb: "breadcrumb",
      recursiveBreadcrumb: [2, "recursiveBreadcrumb", "recursiveBreadcrumb", booleanAttribute],
      logo: "logo",
      action: "action",
      content: "content",
      extra: "extra",
      tab: "tab"
    },
    exportAs: ["pageHeader"],
    features: [ɵɵNgOnChangesFeature],
    ngContentSelectors: _c2,
    decls: 4,
    vars: 1,
    consts: [["phTpl", ""], ["affix", ""], ["conTpl", ""], [3, "nzOffsetTop"], [3, "ngTemplateOutlet"], [1, "page-header"], [1, "d-block", 3, "nzLoading", "nzTitle", "nzActive", "nzParagraph", "nzAvatar"], [1, "page-header__detail"], [1, "page-header__logo"], [1, "page-header__main"], [1, "page-header__row"], [1, "page-header__title"], [1, "page-header__action"], [1, "page-header__desc", 3, "cdkObserveContent"], [1, "page-header__extra"], [3, "routerLink"], [4, "nzStringTemplateOutlet"]],
    template: function PageHeaderComponent_Template(rf, ctx) {
      if (rf & 1) {
        ɵɵprojectionDef();
        ɵɵconditionalCreate(0, PageHeaderComponent_Conditional_0_Template, 3, 2, "nz-affix", 3)(1, PageHeaderComponent_Conditional_1_Template, 1, 1, null, 4);
        ɵɵtemplate(2, PageHeaderComponent_ng_template_2_Template, 18, 18, "ng-template", null, 0, ɵɵtemplateRefExtractor);
      }
      if (rf & 2) {
        ɵɵconditional(ctx.isBrowser && ctx.fixed ? 0 : 1);
      }
    },
    dependencies: [NzAffixComponent, NgTemplateOutlet, NzSkeletonComponent, NzBreadCrumbComponent, NzBreadCrumbItemComponent, RouterLink, NzStringTemplateOutletDirective, CdkObserveContent],
    encapsulation: 2,
    changeDetection: 0
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PageHeaderComponent, [{
    type: Component,
    args: [{
      selector: "page-header",
      exportAs: "pageHeader",
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation.None,
      imports: [NzAffixComponent, NgTemplateOutlet, NzSkeletonComponent, NzBreadCrumbComponent, NzBreadCrumbItemComponent, RouterLink, NzStringTemplateOutletDirective, CdkObserveContent],
      template: `@if (isBrowser && fixed) {
  <nz-affix #affix [nzOffsetTop]="fixedOffsetTop">
    <ng-template [ngTemplateOutlet]="phTpl" />
  </nz-affix>
} @else {
  <ng-template [ngTemplateOutlet]="phTpl" />
}
<ng-template #phTpl>
  <div class="page-header" [class.page-header-rtl]="dir() === 'rtl'">
    <div [class.page-header__wide]="wide">
      <nz-skeleton
        [nzLoading]="loading"
        [nzTitle]="false"
        [nzActive]="true"
        [nzParagraph]="{ rows: 3 }"
        [nzAvatar]="{ size: 'large', shape: 'circle' }"
        class="d-block"
      >
        @if (breadcrumb) {
          <ng-template [ngTemplateOutlet]="breadcrumb" />
        } @else {
          @if (paths && paths.length > 0) {
            <nz-breadcrumb>
              @for (i of paths; track $index) {
                <nz-breadcrumb-item>
                  @if (i.link) {
                    <a [routerLink]="i.link">{{ i.title }}</a>
                  } @else {
                    {{ i.title }}
                  }
                </nz-breadcrumb-item>
              }
            </nz-breadcrumb>
          }
        }
        <div class="page-header__detail">
          @if (logo) {
            <div class="page-header__logo">
              <ng-template [ngTemplateOutlet]="logo" />
            </div>
          }
          <div class="page-header__main">
            <div class="page-header__row">
              @if (_titleVal || _titleTpl) {
                <h1 class="page-header__title">
                  @if (_titleTpl) {
                    <ng-template [ngTemplateOutlet]="_titleTpl" />
                  } @else {
                    {{ _titleVal }}
                    @if (titleSub) {
                      <small>
                        <ng-container *nzStringTemplateOutlet="titleSub">{{ titleSub }}</ng-container>
                      </small>
                    }
                  }
                </h1>
              }
              @if (action) {
                <div class="page-header__action">
                  <ng-template [ngTemplateOutlet]="action" />
                </div>
              }
            </div>
            <div class="page-header__row">
              <div class="page-header__desc" (cdkObserveContent)="checkContent()" #conTpl>
                <ng-content />
                <ng-template [ngTemplateOutlet]="content!" />
              </div>
              @if (extra) {
                <div class="page-header__extra">
                  <ng-template [ngTemplateOutlet]="extra" />
                </div>
              }
            </div>
          </div>
        </div>
        <ng-template [ngTemplateOutlet]="tab!" />
      </nz-skeleton>
    </div>
  </div>
</ng-template>
`
    }]
  }], () => [], {
    conTpl: [{
      type: ViewChild,
      args: ["conTpl", {
        static: false
      }]
    }],
    affix: [{
      type: ViewChild,
      args: ["affix", {
        static: false
      }]
    }],
    title: [{
      type: Input
    }],
    titleSub: [{
      type: Input
    }],
    loading: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    wide: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    home: [{
      type: Input
    }],
    homeLink: [{
      type: Input
    }],
    homeI18n: [{
      type: Input
    }],
    autoBreadcrumb: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    autoTitle: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    syncTitle: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    fixed: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    fixedOffsetTop: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    breadcrumb: [{
      type: Input
    }],
    recursiveBreadcrumb: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    logo: [{
      type: Input
    }],
    action: [{
      type: Input
    }],
    content: [{
      type: Input
    }],
    extra: [{
      type: Input
    }],
    tab: [{
      type: Input
    }]
  });
})();
var COMPONENTS = [PageHeaderComponent];
var PageHeaderModule = class _PageHeaderModule {
  static ɵfac = function PageHeaderModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PageHeaderModule)();
  };
  static ɵmod = ɵɵdefineNgModule({
    type: _PageHeaderModule,
    imports: [CommonModule, RouterModule, ObserversModule, NzAffixModule, NzSkeletonModule, NzBreadCrumbModule, NzOutletModule, PageHeaderComponent],
    exports: [PageHeaderComponent]
  });
  static ɵinj = ɵɵdefineInjector({
    imports: [CommonModule, RouterModule, ObserversModule, NzAffixModule, NzSkeletonModule, NzBreadCrumbModule, NzOutletModule, COMPONENTS]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PageHeaderModule, [{
    type: NgModule,
    args: [{
      imports: [CommonModule, RouterModule, ObserversModule, NzAffixModule, NzSkeletonModule, NzBreadCrumbModule, NzOutletModule, ...COMPONENTS],
      exports: COMPONENTS
    }]
  }], null, null);
})();
export {
  PageHeaderComponent,
  PageHeaderModule
};
//# sourceMappingURL=@delon_abc_page-header.js.map
