import {
  NzCellFixedDirective,
  NzTableCellDirective,
  NzTableComponent,
  NzTableFixedRowComponent,
  NzTableModule,
  NzTableVirtualScrollDirective,
  NzTbodyComponent,
  NzTdAddOnComponent,
  NzThAddOnComponent,
  NzThMeasureDirective,
  NzTheadComponent,
  NzTrDirective,
  NzTrExpandDirective
} from "./chunk-AWLDUNVU.js";
import {
  NzResizableDirective,
  NzResizableModule,
  NzResizeHandleComponent
} from "./chunk-7ITXCWRV.js";
import {
  NzPopconfirmDirective
} from "./chunk-IBQHLOVD.js";
import "./chunk-UOF6OP3D.js";
import "./chunk-BO3C2WOT.js";
import {
  NzDatePickerComponent,
  NzRangePickerComponent
} from "./chunk-5HPTFQGF.js";
import "./chunk-D4TKIAL4.js";
import {
  NzInputNumberComponent
} from "./chunk-7W2NXYCL.js";
import {
  NzInputDirective
} from "./chunk-3Q5ZW3A4.js";
import {
  NzDividerComponent
} from "./chunk-A6D3NUXQ.js";
import {
  XlsxService
} from "./chunk-EMJ3WTDH.js";
import "./chunk-RPM77CK6.js";
import "./chunk-F2DXCIWC.js";
import "./chunk-2VFBAWEG.js";
import {
  NzContextMenuService,
  NzDropDownADirective,
  NzDropDownDirective,
  NzDropDownModule,
  NzDropdownMenuComponent
} from "./chunk-6Y4KUKOA.js";
import {
  NzMenuDirective,
  NzMenuDividerDirective,
  NzMenuItemComponent,
  NzMenuModule,
  NzSubMenuComponent
} from "./chunk-IIASACYA.js";
import "./chunk-OIOY4I4G.js";
import {
  CellComponent
} from "./chunk-4YTCLN44.js";
import {
  NzRadioComponent
} from "./chunk-DLHTX2ZQ.js";
import {
  NzCheckboxComponent
} from "./chunk-5CKH7BXE.js";
import {
  CurrencyService
} from "./chunk-BSLJP3PC.js";
import "./chunk-B3BRWWTU.js";
import {
  NzTagComponent
} from "./chunk-IZAPUEE4.js";
import {
  NzBadgeComponent
} from "./chunk-D4M6RSJC.js";
import "./chunk-XPEPFKNH.js";
import "./chunk-JCLL7S6Q.js";
import {
  NzTooltipDirective
} from "./chunk-4P4HHPBT.js";
import "./chunk-KZXCIQZH.js";
import {
  ALAIN_I18N_TOKEN,
  DatePipe,
  DelonLocaleService,
  DrawerHelper,
  ModalHelper,
  YNPipe,
  _HttpClient
} from "./chunk-WLPEXMS5.js";
import "./chunk-V4XBV55A.js";
import "./chunk-ZTNECFVY.js";
import "./chunk-VCVGLQF3.js";
import "./chunk-HGGVII4K.js";
import "./chunk-C2DAT26Y.js";
import "./chunk-MKB5HFAJ.js";
import "./chunk-KEGEU5UL.js";
import "./chunk-FBEQODFK.js";
import "./chunk-HXEEJHXJ.js";
import "./chunk-QYDDKLT3.js";
import "./chunk-LE4RSIF3.js";
import "./chunk-SQJ77OAJ.js";
import {
  ACLService
} from "./chunk-QZQ7SHKY.js";
import "./chunk-BHH4M3PU.js";
import "./chunk-2BDLX2FQ.js";
import "./chunk-C6MTXAAB.js";
import "./chunk-U5VATZ4Q.js";
import "./chunk-EGGX2FJX.js";
import "./chunk-76DJI4FU.js";
import "./chunk-MIQKVNBS.js";
import "./chunk-RH5RXJTD.js";
import "./chunk-Y5G3O3B7.js";
import {
  AlainConfigService
} from "./chunk-ES4WNO3Q.js";
import {
  deepCopy,
  deepGet,
  deepMergeKey,
  warn
} from "./chunk-XMKNXNVX.js";
import {
  NzIconDirective
} from "./chunk-GP3H6RZA.js";
import "./chunk-OAOHUKFD.js";
import "./chunk-BQ76GOFF.js";
import "./chunk-LSG4V6ID.js";
import "./chunk-KG76OIXO.js";
import "./chunk-J25EALHE.js";
import "./chunk-FZ3LGF3I.js";
import "./chunk-LTANXE67.js";
import {
  DefaultValueAccessor,
  FormsModule,
  NgControlStatus,
  NgModel
} from "./chunk-ZWI5T7AR.js";
import {
  Router
} from "./chunk-36PX2JTV.js";
import {
  DomSanitizer
} from "./chunk-BVIJPY5U.js";
import "./chunk-ZO4CS3CJ.js";
import {
  takeUntilDestroyed
} from "./chunk-I75K2H66.js";
import "./chunk-CQHDL44S.js";
import {
  HttpParams
} from "./chunk-NDRILP3E.js";
import {
  CdkDrag,
  CdkDropList,
  DragDropModule,
  moveItemInArray
} from "./chunk-2WJ2IEY4.js";
import "./chunk-4NJAG2UW.js";
import "./chunk-IH6YTMYU.js";
import "./chunk-D4QSWQD6.js";
import "./chunk-NFHVISCS.js";
import "./chunk-TBGMZLZ3.js";
import "./chunk-GIT7CFOZ.js";
import {
  DecimalPipe,
  NgTemplateOutlet
} from "./chunk-GUTSRBNM.js";
import "./chunk-FTJJFYDV.js";
import {
  ChangeDetectionStrategy,
  ChangeDetectorRef,
  Component,
  Directive,
  ElementRef,
  EventEmitter,
  Host,
  Injectable,
  Input,
  NgModule,
  Output,
  TemplateRef,
  ViewChild,
  ViewContainerRef,
  ViewEncapsulation,
  booleanAttribute,
  input,
  numberAttribute,
  setClassMetadata,
  ɵɵNgOnChangesFeature,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵattribute,
  ɵɵclassMap,
  ɵɵclassProp,
  ɵɵcomponentInstance,
  ɵɵconditional,
  ɵɵconditionalCreate,
  ɵɵdeclareLet,
  ɵɵdefineComponent,
  ɵɵdefineDirective,
  ɵɵdefineNgModule,
  ɵɵelement,
  ɵɵelementContainer,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnextContext,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction1,
  ɵɵpureFunction2,
  ɵɵpureFunction3,
  ɵɵqueryRefresh,
  ɵɵreadContextLet,
  ɵɵreference,
  ɵɵrepeater,
  ɵɵrepeaterCreate,
  ɵɵrepeaterTrackByIdentity,
  ɵɵrepeaterTrackByIndex,
  ɵɵsanitizeHtml,
  ɵɵstoreLet,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty,
  ɵɵviewQuery
} from "./chunk-NQBXVTYU.js";
import {
  DOCUMENT,
  DestroyRef,
  effect,
  inject,
  makeEnvironmentProviders,
  provideEnvironmentInitializer,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵinject,
  ɵɵresetView,
  ɵɵrestoreView
} from "./chunk-QZDSTGXI.js";
import {
  isObservable,
  lastValueFrom
} from "./chunk-KMLKBNXJ.js";
import "./chunk-Q4VD2BBX.js";
import {
  catchError,
  filter,
  finalize,
  map,
  of,
  throwError
} from "./chunk-EBAU53KC.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-7CE4I3X6.js";

// node_modules/@delon/abc/fesm2022/st.mjs
var _c0 = (a0, a1, a2) => ({
  $implicit: a0,
  col: a1,
  handle: a2
});
function STFilterComponent_Case_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 4)(1, "input", 10);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_5_Template_input_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r2);
      const ctx_r2 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r2.f.menus[0].value, $event) || (ctx_r2.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_5_Template_input_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r2);
      const ctx_r2 = ɵɵnextContext();
      return ɵɵresetView(ctx_r2.n.emit($event));
    })("keyup.enter", function STFilterComponent_Case_5_Template_input_keyup_enter_1_listener() {
      ɵɵrestoreView(_r2);
      const ctx_r2 = ɵɵnextContext();
      return ɵɵresetView(ctx_r2.confirm());
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵtwoWayProperty("ngModel", ctx_r2.f.menus[0].value);
    ɵɵattribute("placeholder", ctx_r2.f.placeholder);
  }
}
function STFilterComponent_Case_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 5)(1, "nz-input-number", 11);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_6_Template_nz_input_number_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r4);
      const ctx_r2 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r2.f.menus[0].value, $event) || (ctx_r2.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_6_Template_nz_input_number_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r4);
      const ctx_r2 = ɵɵnextContext();
      return ɵɵresetView(ctx_r2.n.emit($event));
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵtwoWayProperty("ngModel", ctx_r2.f.menus[0].value);
    ɵɵproperty("nzMin", ctx_r2.f.number.min)("nzMax", ctx_r2.f.number.max)("nzStep", ctx_r2.f.number.step)("nzPrecision", ctx_r2.f.number.precision || null)("nzPlaceHolder", ctx_r2.f.placeholder);
  }
}
function STFilterComponent_Case_7_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "nz-range-picker", 13);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_7_Conditional_1_Template_nz_range_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r5);
      const ctx_r2 = ɵɵnextContext(2);
      ɵɵtwoWayBindingSet(ctx_r2.f.menus[0].value, $event) || (ctx_r2.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_7_Conditional_1_Template_nz_range_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r5);
      const ctx_r2 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r2.n.emit($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext(2);
    ɵɵproperty("nzMode", ctx_r2.f.date.mode);
    ɵɵtwoWayProperty("ngModel", ctx_r2.f.menus[0].value);
    ɵɵproperty("nzShowNow", ctx_r2.f.date.showNow)("nzShowToday", ctx_r2.f.date.showToday)("nzDisabledDate", ctx_r2.f.date.disabledDate)("nzDisabledTime", ctx_r2.f.date.disabledTime);
  }
}
function STFilterComponent_Case_7_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "nz-date-picker", 13);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_7_Conditional_2_Template_nz_date_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r6);
      const ctx_r2 = ɵɵnextContext(2);
      ɵɵtwoWayBindingSet(ctx_r2.f.menus[0].value, $event) || (ctx_r2.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_7_Conditional_2_Template_nz_date_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r6);
      const ctx_r2 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r2.n.emit($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext(2);
    ɵɵproperty("nzMode", ctx_r2.f.date.mode);
    ɵɵtwoWayProperty("ngModel", ctx_r2.f.menus[0].value);
    ɵɵproperty("nzShowNow", ctx_r2.f.date.showNow)("nzShowToday", ctx_r2.f.date.showToday)("nzDisabledDate", ctx_r2.f.date.disabledDate)("nzDisabledTime", ctx_r2.f.date.disabledTime);
  }
}
function STFilterComponent_Case_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 6);
    ɵɵconditionalCreate(1, STFilterComponent_Case_7_Conditional_1_Template, 1, 6, "nz-range-picker", 12)(2, STFilterComponent_Case_7_Conditional_2_Template, 1, 6, "nz-date-picker", 12);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵconditional(ctx_r2.f.date.range ? 1 : 2);
  }
}
function STFilterComponent_Case_8_ng_template_1_Template(rf, ctx) {
}
function STFilterComponent_Case_8_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 7);
    ɵɵtemplate(1, STFilterComponent_Case_8_ng_template_1_Template, 0, 0, "ng-template", 14);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r2.f.custom)("ngTemplateOutletContext", ɵɵpureFunction3(2, _c0, ctx_r2.f, ctx_r2.col, ctx_r2));
  }
}
function STFilterComponent_Case_9_For_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 18);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_1_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r7);
      const filter_r8 = ɵɵnextContext().$implicit;
      ɵɵtwoWayBindingSet(filter_r8.checked, $event) || (filter_r8.checked = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_1_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r7);
      const ctx_r2 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r2.checkboxChange());
    });
    ɵɵtext(1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const filter_r8 = ɵɵnextContext().$implicit;
    ɵɵtwoWayProperty("ngModel", filter_r8.checked);
    ɵɵadvance();
    ɵɵtextInterpolate1(" ", filter_r8.text, " ");
  }
}
function STFilterComponent_Case_9_For_2_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 19);
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_2_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r9);
      const filter_r8 = ɵɵnextContext().$implicit;
      const ctx_r2 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r2.radioChange(filter_r8));
    });
    ɵɵtext(1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const filter_r8 = ɵɵnextContext().$implicit;
    ɵɵproperty("ngModel", filter_r8.checked);
    ɵɵadvance();
    ɵɵtextInterpolate1(" ", filter_r8.text, " ");
  }
}
function STFilterComponent_Case_9_For_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 15);
    ɵɵconditionalCreate(1, STFilterComponent_Case_9_For_2_Conditional_1_Template, 2, 2, "label", 16)(2, STFilterComponent_Case_9_For_2_Conditional_2_Template, 2, 2, "label", 17);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵconditional(ctx_r2.f.multiple ? 1 : 2);
  }
}
function STFilterComponent_Case_9_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "ul", 8);
    ɵɵrepeaterCreate(1, STFilterComponent_Case_9_For_2_Template, 3, 1, "li", 15, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵrepeater(ctx_r2.f.menus);
  }
}
function STFilterComponent_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 9)(1, "a", 20);
    ɵɵlistener("click", function STFilterComponent_Conditional_10_Template_a_click_1_listener() {
      ɵɵrestoreView(_r10);
      const ctx_r2 = ɵɵnextContext();
      return ɵɵresetView(ctx_r2.confirm());
    });
    ɵɵelementStart(2, "span");
    ɵɵtext(3);
    ɵɵelementEnd()();
    ɵɵelementStart(4, "a", 21);
    ɵɵlistener("click", function STFilterComponent_Conditional_10_Template_a_click_4_listener() {
      ɵɵrestoreView(_r10);
      const ctx_r2 = ɵɵnextContext();
      return ɵɵresetView(ctx_r2.reset());
    });
    ɵɵelementStart(5, "span");
    ɵɵtext(6);
    ɵɵelementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance(3);
    ɵɵtextInterpolate(ctx_r2.f.confirmText || ctx_r2.locale.filterConfirm);
    ɵɵadvance(3);
    ɵɵtextInterpolate(ctx_r2.f.clearText || ctx_r2.locale.filterReset);
  }
}
var _c1 = (a0) => ({
  $implicit: a0
});
var _c2 = (a0, a1, a2) => ({
  $implicit: a0,
  index: a1,
  column: a2
});
var _c3 = (a0) => ({
  $implicit: a0,
  child: true
});
var _c4 = (a0) => ({
  $implicit: a0,
  child: false
});
function STTdComponent_ng_template_0_Conditional_0_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_0_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span", 6);
    ɵɵtemplate(1, STTdComponent_ng_template_0_Conditional_0_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = ɵɵnextContext();
    const i_r2 = ctx_r0.$implicit;
    const child_r3 = ctx_r0.child;
    ɵɵnextContext();
    const btnItemTpl_r4 = ɵɵreference(3);
    ɵɵclassProp("d-block", child_r3)("width-100", child_r3);
    ɵɵproperty("nzTooltipTitle", i_r2.tooltip);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", btnItemTpl_r4)("ngTemplateOutletContext", ɵɵpureFunction1(7, _c1, i_r2));
  }
}
function STTdComponent_ng_template_0_Conditional_1_ng_template_0_Template(rf, ctx) {
}
function STTdComponent_ng_template_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_0_Conditional_1_ng_template_0_Template, 0, 0, "ng-template", 4);
  }
  if (rf & 2) {
    const i_r2 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const btnItemTpl_r4 = ɵɵreference(3);
    ɵɵproperty("ngTemplateOutlet", btnItemTpl_r4)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c1, i_r2));
  }
}
function STTdComponent_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_ng_template_0_Conditional_0_Template, 2, 9, "span", 5)(1, STTdComponent_ng_template_0_Conditional_1_Template, 1, 4, null, 4);
  }
  if (rf & 2) {
    const i_r2 = ctx.$implicit;
    ɵɵconditional(i_r2.tooltip ? 0 : 1);
  }
}
function STTdComponent_ng_template_2_Conditional_0_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_2_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 9);
    ɵɵlistener("nzOnConfirm", function STTdComponent_ng_template_2_Conditional_0_Template_a_nzOnConfirm_0_listener() {
      ɵɵrestoreView(_r5);
      const i_r6 = ɵɵnextContext().$implicit;
      const ctx_r6 = ɵɵnextContext();
      return ɵɵresetView(ctx_r6._btn(i_r6));
    })("click", function STTdComponent_ng_template_2_Conditional_0_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r5);
      const ctx_r6 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r6._stopPropagation($event));
    });
    ɵɵtemplate(1, STTdComponent_ng_template_2_Conditional_0_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r6 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const btnTextTpl_r8 = ɵɵreference(5);
    const pop_r9 = i_r6.pop;
    ɵɵclassMap(i_r6._className);
    ɵɵproperty("nzPopconfirmTitle", pop_r9.title)("nzIcon", pop_r9.icon)("nzCondition", pop_r9.condition(i_r6))("nzCancelText", pop_r9.cancelText)("nzOkText", pop_r9.okText)("nzOkType", pop_r9.okType);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", btnTextTpl_r8)("ngTemplateOutletContext", ɵɵpureFunction1(10, _c1, i_r6));
  }
}
function STTdComponent_ng_template_2_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 10);
    ɵɵlistener("click", function STTdComponent_ng_template_2_Conditional_1_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r10);
      const i_r6 = ɵɵnextContext().$implicit;
      const ctx_r6 = ɵɵnextContext();
      return ɵɵresetView(ctx_r6._btn(i_r6, $event));
    });
    ɵɵtemplate(1, STTdComponent_ng_template_2_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r6 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const btnTextTpl_r8 = ɵɵreference(5);
    ɵɵclassMap(i_r6._className);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", btnTextTpl_r8)("ngTemplateOutletContext", ɵɵpureFunction1(4, _c1, i_r6));
  }
}
function STTdComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_ng_template_2_Conditional_0_Template, 2, 12, "a", 7)(1, STTdComponent_ng_template_2_Conditional_1_Template, 2, 6, "a", 8);
  }
  if (rf & 2) {
    const i_r6 = ctx.$implicit;
    ɵɵconditional(i_r6.pop ? 0 : 1);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-icon", 12);
  }
  if (rf & 2) {
    ɵɵnextContext();
    const icon_r11 = ɵɵreadContextLet(0);
    ɵɵproperty("nzIconfont", icon_r11.iconfont);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-icon", 13);
  }
  if (rf & 2) {
    ɵɵnextContext();
    const icon_r11 = ɵɵreadContextLet(0);
    ɵɵproperty("nzType", icon_r11.type)("nzTheme", icon_r11.theme)("nzSpin", icon_r11.spin)("nzTwotoneColor", icon_r11.twoToneColor);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵdeclareLet(0);
    ɵɵconditionalCreate(1, STTdComponent_ng_template_4_Conditional_0_Conditional_1_Template, 1, 1, "nz-icon", 12)(2, STTdComponent_ng_template_4_Conditional_0_Conditional_2_Template, 1, 4, "nz-icon", 13);
  }
  if (rf & 2) {
    const i_r12 = ɵɵnextContext().$implicit;
    const icon_r13 = ɵɵstoreLet(i_r12._icon);
    ɵɵadvance();
    ɵɵconditional(icon_r13.iconfont ? 1 : 2);
  }
}
function STTdComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_ng_template_4_Conditional_0_Template, 3, 2);
    ɵɵelement(1, "span", 11);
  }
  if (rf & 2) {
    const i_r12 = ctx.$implicit;
    ɵɵconditional(i_r12._icon ? 0 : -1);
    ɵɵadvance();
    ɵɵclassProp("pl-xs", i_r12._icon);
    ɵɵproperty("innerHTML", i_r12._text, ɵɵsanitizeHtml);
  }
}
function STTdComponent_Conditional_6_ng_template_0_Template(rf, ctx) {
}
function STTdComponent_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_6_ng_template_0_Template, 0, 0, "ng-template", 4);
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r6.c.__render)("ngTemplateOutletContext", ɵɵpureFunction3(2, _c2, ctx_r6.i, ctx_r6.index, ctx_r6.c));
  }
}
function STTdComponent_Conditional_7_Case_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 20);
    ɵɵlistener("ngModelChange", function STTdComponent_Conditional_7_Case_1_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r14);
      const ctx_r6 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r6._checkbox($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext(2);
    ɵɵproperty("nzDisabled", ctx_r6.i.disabled)("ngModel", ctx_r6.i.checked);
  }
}
function STTdComponent_Conditional_7_Case_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 21);
    ɵɵlistener("ngModelChange", function STTdComponent_Conditional_7_Case_2_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r15);
      const ctx_r6 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r6._radio());
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext(2);
    ɵɵproperty("nzDisabled", ctx_r6.i.disabled)("ngModel", ctx_r6.i.checked);
  }
}
function STTdComponent_Conditional_7_Case_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r16 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 22);
    ɵɵlistener("click", function STTdComponent_Conditional_7_Case_3_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r16);
      const ctx_r6 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r6._link($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    ɵɵnextContext();
    const col_r17 = ɵɵreadContextLet(0);
    ɵɵproperty("innerHTML", col_r17._text, ɵɵsanitizeHtml);
    ɵɵattribute("title", col_r17.text);
  }
}
function STTdComponent_Conditional_7_Case_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-tag", 16);
    ɵɵelement(1, "span", 11);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    ɵɵnextContext();
    const col_r17 = ɵɵreadContextLet(0);
    ɵɵproperty("nzColor", col_r17.color)("nz-tooltip", col_r17.tooltip);
    ɵɵadvance();
    ɵɵproperty("innerHTML", col_r17._text, ɵɵsanitizeHtml);
  }
}
function STTdComponent_Conditional_7_Case_5_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-badge", 17);
  }
  if (rf & 2) {
    ɵɵnextContext();
    const col_r17 = ɵɵreadContextLet(0);
    ɵɵproperty("nzStatus", col_r17.color)("nzText", col_r17.text)("nz-tooltip", col_r17.tooltip);
  }
}
function STTdComponent_Conditional_7_Case_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r18 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "cell", 23);
    ɵɵlistener("click", function STTdComponent_Conditional_7_Case_6_Template_cell_click_0_listener() {
      ɵɵrestoreView(_r18);
      const ctx_r6 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r6._client());
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    ɵɵnextContext();
    const col_r17 = ɵɵreadContextLet(0);
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("value", col_r17.text)("options", col_r17.cell ?? ctx_r6.c.cell);
  }
}
function STTdComponent_Conditional_7_Case_7_ng_template_0_Template(rf, ctx) {
}
function STTdComponent_Conditional_7_Case_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_Case_7_ng_template_0_Template, 0, 0, "ng-template", 19);
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext(2);
    ɵɵproperty("record", ctx_r6.i)("column", ctx_r6.c);
  }
}
function STTdComponent_Conditional_7_Case_8_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 24);
  }
  if (rf & 2) {
    ɵɵnextContext(2);
    const col_r17 = ɵɵreadContextLet(0);
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("innerText", col_r17._text);
    ɵɵattribute("title", ctx_r6.c._isTruncate ? col_r17.text : null);
  }
}
function STTdComponent_Conditional_7_Case_8_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 11);
  }
  if (rf & 2) {
    ɵɵnextContext(2);
    const col_r17 = ɵɵreadContextLet(0);
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("innerHTML", col_r17._text, ɵɵsanitizeHtml);
    ɵɵattribute("title", ctx_r6.c._isTruncate ? col_r17.text : null);
  }
}
function STTdComponent_Conditional_7_Case_8_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_Conditional_7_Case_8_Conditional_0_Template, 1, 2, "span", 24)(1, STTdComponent_Conditional_7_Case_8_Conditional_1_Template, 1, 2, "span", 11);
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext(2);
    ɵɵconditional(ctx_r6.c.safeType === "text" ? 0 : 1);
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "li", 30);
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 32);
    ɵɵtemplate(1, STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const subBtn_r19 = ɵɵnextContext().$implicit;
    ɵɵnextContext(4);
    const btnTpl_r20 = ɵɵreference(1);
    ɵɵclassProp("st__btn-disabled", subBtn_r19._disabled);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", btnTpl_r20)("ngTemplateOutletContext", ɵɵpureFunction1(4, _c3, subBtn_r19));
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_0_Template, 1, 0, "li", 30)(1, STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Conditional_1_Template, 2, 6, "li", 31);
  }
  if (rf & 2) {
    const subBtn_r19 = ctx.$implicit;
    ɵɵconditional(subBtn_r19.type === "divider" ? 0 : 1);
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "a", 27);
    ɵɵelement(1, "span", 11)(2, "nz-icon", 28);
    ɵɵelementEnd();
    ɵɵelementStart(3, "nz-dropdown-menu", null, 3)(5, "ul", 29);
    ɵɵrepeaterCreate(6, STTdComponent_Conditional_7_For_10_Conditional_0_For_7_Template, 2, 1, null, null, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const btnMenu_r21 = ɵɵreference(4);
    const btn_r22 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzDropdownMenu", btnMenu_r21);
    ɵɵadvance();
    ɵɵproperty("innerHTML", btn_r22._text, ɵɵsanitizeHtml);
    ɵɵadvance(5);
    ɵɵrepeater(btn_r22.children);
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_Conditional_7_For_10_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span");
    ɵɵtemplate(1, STTdComponent_Conditional_7_For_10_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 4);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const btn_r22 = ɵɵnextContext().$implicit;
    ɵɵnextContext(2);
    const btnTpl_r20 = ɵɵreference(1);
    ɵɵclassProp("st__btn-disabled", btn_r22._disabled);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", btnTpl_r20)("ngTemplateOutletContext", ɵɵpureFunction1(4, _c4, btn_r22));
  }
}
function STTdComponent_Conditional_7_For_10_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-divider", 26);
  }
}
function STTdComponent_Conditional_7_For_10_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STTdComponent_Conditional_7_For_10_Conditional_0_Template, 8, 2)(1, STTdComponent_Conditional_7_For_10_Conditional_1_Template, 2, 6, "span", 25);
    ɵɵconditionalCreate(2, STTdComponent_Conditional_7_For_10_Conditional_2_Template, 1, 0, "nz-divider", 26);
  }
  if (rf & 2) {
    const btn_r22 = ctx.$implicit;
    const ɵ$index_71_r23 = ctx.$index;
    const ɵ$count_71_r24 = ctx.$count;
    ɵɵconditional(btn_r22.children.length > 0 ? 0 : 1);
    ɵɵadvance(2);
    ɵɵconditional(!(ɵ$index_71_r23 === ɵ$count_71_r24 - 1) ? 2 : -1);
  }
}
function STTdComponent_Conditional_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵdeclareLet(0);
    ɵɵconditionalCreate(1, STTdComponent_Conditional_7_Case_1_Template, 1, 2, "label", 14)(2, STTdComponent_Conditional_7_Case_2_Template, 1, 2, "label", 15)(3, STTdComponent_Conditional_7_Case_3_Template, 1, 2, "a", 11)(4, STTdComponent_Conditional_7_Case_4_Template, 2, 3, "nz-tag", 16)(5, STTdComponent_Conditional_7_Case_5_Template, 1, 3, "nz-badge", 17)(6, STTdComponent_Conditional_7_Case_6_Template, 1, 2, "cell", 18)(7, STTdComponent_Conditional_7_Case_7_Template, 1, 2, null, 19)(8, STTdComponent_Conditional_7_Case_8_Template, 2, 1);
    ɵɵrepeaterCreate(9, STTdComponent_Conditional_7_For_10_Template, 3, 2, null, null, ɵɵrepeaterTrackByIndex);
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r6 = ɵɵnextContext();
    const col_r25 = ɵɵstoreLet(ctx_r6.i._values[ctx_r6.cIdx]);
    ɵɵadvance();
    ɵɵconditional((tmp_5_0 = ctx_r6.c.type) === "checkbox" ? 1 : tmp_5_0 === "radio" ? 2 : tmp_5_0 === "link" ? 3 : tmp_5_0 === "tag" ? 4 : tmp_5_0 === "badge" ? 5 : tmp_5_0 === "cell" ? 6 : tmp_5_0 === "widget" ? 7 : 8);
    ɵɵadvance(8);
    ɵɵrepeater(col_r25.buttons);
  }
}
var _c5 = ["table"];
var _c6 = ["contextmenuTpl"];
var _c7 = (a0, a1) => ({
  $implicit: a0,
  index: a1
});
var _c8 = () => ({
  $implicit: false
});
var _c9 = () => ({
  $implicit: true
});
function STComponent_ng_template_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "small", 15);
  }
  if (rf & 2) {
    const i_r2 = ɵɵnextContext().$implicit;
    ɵɵproperty("innerHTML", i_r2.optional, ɵɵsanitizeHtml);
  }
}
function STComponent_ng_template_0_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-icon", 16);
  }
  if (rf & 2) {
    const i_r2 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzTooltipTitle", i_r2.optionalHelp);
  }
}
function STComponent_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 14);
    ɵɵconditionalCreate(1, STComponent_ng_template_0_Conditional_1_Template, 1, 1, "small", 15);
    ɵɵconditionalCreate(2, STComponent_ng_template_0_Conditional_2_Template, 1, 1, "nz-icon", 16);
  }
  if (rf & 2) {
    const i_r2 = ctx.$implicit;
    ɵɵproperty("innerHTML", i_r2._text, ɵɵsanitizeHtml);
    ɵɵadvance();
    ɵɵconditional(i_r2.optional ? 1 : -1);
    ɵɵadvance();
    ɵɵconditional(i_r2.optionalHelp ? 2 : -1);
  }
}
function STComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 17);
    ɵɵtwoWayListener("ngModelChange", function STComponent_ng_template_2_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r3);
      const ctx_r3 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r3._allChecked, $event) || (ctx_r3._allChecked = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STComponent_ng_template_2_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r3);
      const ctx_r3 = ɵɵnextContext();
      return ɵɵresetView(ctx_r3.checkAll());
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const custom_r5 = ctx.$implicit;
    const ctx_r3 = ɵɵnextContext();
    ɵɵclassProp("ant-table-selection-select-all-custom", custom_r5);
    ɵɵproperty("nzDisabled", ctx_r3._allCheckedDisabled);
    ɵɵtwoWayProperty("ngModel", ctx_r3._allChecked);
    ɵɵproperty("nzIndeterminate", ctx_r3._indeterminate);
  }
}
function STComponent_Conditional_6_For_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "th", 18);
  }
  if (rf & 2) {
    const row_r6 = ɵɵnextContext().$implicit;
    const ctx_r3 = ɵɵnextContext(2);
    ɵɵproperty("rowSpan", ctx_r3._headers.length)("nzLeft", row_r6[0].column._left ? true : false);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "nz-resize-handle", 22);
    ɵɵlistener("click", function STComponent_Conditional_6_For_2_For_3_Conditional_2_Template_nz_resize_handle_click_0_listener($event) {
      ɵɵrestoreView(_r9);
      const ctx_r3 = ɵɵnextContext(4);
      return ɵɵresetView(ctx_r3._stopPropagation($event));
    });
    ɵɵelement(1, "i");
    ɵɵelementEnd();
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_3_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_6_For_2_For_3_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_Conditional_3_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    const ctx_r9 = ɵɵnextContext();
    const h_r11 = ctx_r9.$implicit;
    const ɵ$index_26_r12 = ctx_r9.$index;
    const _c_r8 = ɵɵreadContextLet(0);
    ɵɵproperty("ngTemplateOutlet", _c_r8.__renderTitle)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c7, h_r11.column, ɵ$index_26_r12));
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_0_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_0_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    ɵɵnextContext(6);
    const chkAllTpl_r13 = ɵɵreference(3);
    ɵɵproperty("ngTemplateOutlet", chkAllTpl_r13)("ngTemplateOutletContext", ɵɵpureFunction0(2, _c8));
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 24)(1, "div", 27);
    ɵɵelement(2, "nz-icon", 28);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    ɵɵnextContext();
    const selectionMenu_r14 = ɵɵreference(4);
    ɵɵadvance();
    ɵɵproperty("nzDropdownMenu", selectionMenu_r14);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_For_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_For_7_Template_li_click_0_listener() {
      const rw_r16 = ɵɵrestoreView(_r15).$implicit;
      const ctx_r3 = ɵɵnextContext(7);
      return ɵɵresetView(ctx_r3._rowSelection(rw_r16));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const rw_r16 = ctx.$implicit;
    ɵɵproperty("innerHTML", rw_r16.text, ɵɵsanitizeHtml);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 23);
    ɵɵtemplate(1, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵɵconditionalCreate(2, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_Conditional_2_Template, 3, 1, "div", 24);
    ɵɵelementStart(3, "nz-dropdown-menu", null, 7)(5, "ul", 25);
    ɵɵrepeaterCreate(6, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_For_7_Template, 1, 1, "li", 26, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()()();
  }
  if (rf & 2) {
    ɵɵnextContext(3);
    const _c_r8 = ɵɵreadContextLet(0);
    ɵɵnextContext(3);
    const chkAllTpl_r13 = ɵɵreference(3);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", chkAllTpl_r13)("ngTemplateOutletContext", ɵɵpureFunction0(3, _c9));
    ɵɵadvance();
    ɵɵconditional(_c_r8.selections.length ? 2 : -1);
    ɵɵadvance(4);
    ɵɵrepeater(_c_r8.selections);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_0_Template, 1, 3, null, 11)(1, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Conditional_1_Template, 8, 4, "div", 23);
  }
  if (rf & 2) {
    ɵɵnextContext(2);
    const _c_r8 = ɵɵreadContextLet(0);
    ɵɵconditional(_c_r8.selections.length === 0 ? 0 : 1);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_1_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_1_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    ɵɵnextContext(2);
    const _c_r8 = ɵɵreadContextLet(0);
    ɵɵnextContext(3);
    const titleTpl_r17 = ɵɵreference(1);
    ɵɵproperty("ngTemplateOutlet", titleTpl_r17)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c1, _c_r8.title));
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_0_Template, 2, 1)(1, STComponent_Conditional_6_For_2_For_3_Conditional_4_Case_1_Template, 1, 4, null, 11);
  }
  if (rf & 2) {
    let tmp_32_0;
    ɵɵnextContext();
    const _c_r8 = ɵɵreadContextLet(0);
    ɵɵconditional((tmp_32_0 = _c_r8.type) === "checkbox" ? 0 : 1);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_5_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementContainer(0);
  }
}
function STComponent_Conditional_6_For_2_For_3_Conditional_5_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_Conditional_5_ng_container_0_Template, 1, 0, "ng-container", 30);
  }
  if (rf & 2) {
    ɵɵnextContext();
    const filterTpl_r18 = ɵɵreference(7);
    ɵɵproperty("ngTemplateOutlet", filterTpl_r18);
  }
}
function STComponent_Conditional_6_For_2_For_3_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r19 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "st-filter", 31);
    ɵɵlistener("n", function STComponent_Conditional_6_For_2_For_3_ng_template_6_Template_st_filter_n_0_listener($event) {
      ɵɵrestoreView(_r19);
      const ctx_r3 = ɵɵnextContext(4);
      return ɵɵresetView(ctx_r3.handleFilterNotify($event));
    })("handle", function STComponent_Conditional_6_For_2_For_3_ng_template_6_Template_st_filter_handle_0_listener($event) {
      ɵɵrestoreView(_r19);
      ɵɵnextContext();
      const _c_r8 = ɵɵreadContextLet(0);
      const ctx_r3 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r3._handleFilter(_c_r8, $event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const h_r11 = ɵɵnextContext().$implicit;
    const _c_r8 = ɵɵreadContextLet(0);
    const ctx_r3 = ɵɵnextContext(3);
    ɵɵproperty("col", h_r11.column)("f", _c_r8.filter)("locale", ctx_r3.locale());
  }
}
function STComponent_Conditional_6_For_2_For_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = ɵɵgetCurrentView();
    ɵɵdeclareLet(0);
    ɵɵelementStart(1, "th", 20);
    ɵɵlistener("nzSortOrderChange", function STComponent_Conditional_6_For_2_For_3_Template_th_nzSortOrderChange_1_listener($event) {
      ɵɵrestoreView(_r7);
      const _c_r8 = ɵɵreadContextLet(0);
      const ctx_r3 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r3.sort(_c_r8, $event));
    })("nzResizeEnd", function STComponent_Conditional_6_For_2_For_3_Template_th_nzResizeEnd_1_listener($event) {
      ɵɵrestoreView(_r7);
      const _c_r8 = ɵɵreadContextLet(0);
      const ctx_r3 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r3.colResize($event, _c_r8));
    });
    ɵɵconditionalCreate(2, STComponent_Conditional_6_For_2_For_3_Conditional_2_Template, 2, 0, "nz-resize-handle", 21);
    ɵɵconditionalCreate(3, STComponent_Conditional_6_For_2_For_3_Conditional_3_Template, 1, 5, null, 11)(4, STComponent_Conditional_6_For_2_For_3_Conditional_4_Template, 2, 1);
    ɵɵconditionalCreate(5, STComponent_Conditional_6_For_2_For_3_Conditional_5_Template, 1, 1, "ng-container");
    ɵɵtemplate(6, STComponent_Conditional_6_For_2_For_3_ng_template_6_Template, 1, 3, "ng-template", null, 6, ɵɵtemplateRefExtractor);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const h_r11 = ctx.$implicit;
    const ɵ$index_26_r12 = ctx.$index;
    const ɵ$count_26_r20 = ctx.$count;
    const _c_r21 = ɵɵstoreLet(h_r11.column);
    ɵɵadvance();
    ɵɵclassMap(_c_r21._className);
    ɵɵclassProp("st__has-filter", _c_r21.filter);
    ɵɵproperty("colSpan", h_r11.colSpan)("rowSpan", h_r11.rowSpan)("nzWidth", _c_r21.width)("nzLeft", _c_r21._left)("nzRight", _c_r21._right)("nzShowSort", _c_r21._sort.enabled)("nzSortDirections", _c_r21._sort.directions)("nzSortOrder", _c_r21._sort.default)("nzCustomFilter", !!_c_r21.filter)("nzDisabled", ɵ$index_26_r12 === ɵ$count_26_r20 - 1 || _c_r21.resizable.disabled)("nzMaxWidth", _c_r21.resizable.maxWidth)("nzMinWidth", _c_r21.resizable.minWidth)("nzBounds", _c_r21.resizable.bounds)("nzPreview", _c_r21.resizable.preview);
    ɵɵattribute("data-col", _c_r21.indexKey)("data-col-index", ɵ$index_26_r12);
    ɵɵadvance();
    ɵɵconditional(!(ɵ$index_26_r12 === ɵ$count_26_r20 - 1) && !_c_r21.resizable.disabled ? 2 : -1);
    ɵɵadvance();
    ɵɵconditional(_c_r21.__renderTitle ? 3 : 4);
    ɵɵadvance(2);
    ɵɵconditional(_c_r21.filter ? 5 : -1);
  }
}
function STComponent_Conditional_6_For_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "tr");
    ɵɵconditionalCreate(1, STComponent_Conditional_6_For_2_Conditional_1_Template, 1, 2, "th", 18);
    ɵɵrepeaterCreate(2, STComponent_Conditional_6_For_2_For_3_Template, 8, 24, "th", 19, ɵɵrepeaterTrackByIdentity);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const row_r6 = ctx.$implicit;
    const ɵ$index_20_r22 = ctx.$index;
    const ctx_r3 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵconditional(ɵ$index_20_r22 === 0 && ctx_r3.expand ? 1 : -1);
    ɵɵadvance();
    ɵɵrepeater(row_r6);
  }
}
function STComponent_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "thead");
    ɵɵrepeaterCreate(1, STComponent_Conditional_6_For_2_Template, 4, 1, "tr", null, ɵɵrepeaterTrackByIdentity);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵrepeater(ctx_r3._headers);
  }
}
function STComponent_Conditional_8_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_8_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_8_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    const ctx_r3 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r3.bodyHeader)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c1, ctx_r3._statistical));
  }
}
function STComponent_ng_template_9_Conditional_1_ng_template_1_ng_template_1_Template(rf, ctx) {
}
function STComponent_ng_template_9_Conditional_1_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r29 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "span", 35);
    ɵɵlistener("click", function STComponent_ng_template_9_Conditional_1_ng_template_1_Template_span_click_0_listener() {
      ɵɵrestoreView(_r29);
      const i_r25 = ɵɵnextContext(2).$implicit;
      const ctx_r3 = ɵɵnextContext();
      return ɵɵresetView(ctx_r3._expandChange(i_r25, !i_r25.expand));
    });
    ɵɵtemplate(1, STComponent_ng_template_9_Conditional_1_ng_template_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r29 = ɵɵnextContext(2);
    const i_r25 = ctx_r29.$implicit;
    const index_r26 = ctx_r29.index;
    const ctx_r3 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r3.expandIcon)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c7, i_r25, index_r26));
  }
}
function STComponent_ng_template_9_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r28 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "td", 34);
    ɵɵlistener("nzExpandChange", function STComponent_ng_template_9_Conditional_1_Template_td_nzExpandChange_0_listener($event) {
      ɵɵrestoreView(_r28);
      const i_r25 = ɵɵnextContext().$implicit;
      const ctx_r3 = ɵɵnextContext();
      return ɵɵresetView(ctx_r3._expandChange(i_r25, $event));
    })("click", function STComponent_ng_template_9_Conditional_1_Template_td_click_0_listener($event) {
      ɵɵrestoreView(_r28);
      const ctx_r3 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r3._stopPropagation($event));
    });
    ɵɵelementEnd();
    ɵɵtemplate(1, STComponent_ng_template_9_Conditional_1_ng_template_1_Template, 2, 5, "ng-template", null, 8, ɵɵtemplateRefExtractor);
  }
  if (rf & 2) {
    const wrapExpandIcon_r31 = ɵɵreference(2);
    const i_r25 = ɵɵnextContext().$implicit;
    const ctx_r3 = ɵɵnextContext();
    ɵɵproperty("nzShowExpand", ctx_r3.expand && i_r25.showExpand !== false)("nzExpand", i_r25.expand)("nzExpandIcon", ctx_r3.expandIcon ? wrapExpandIcon_r31 : null)("nzLeft", ctx_r3._columns[0]._left ? true : false);
  }
}
function STComponent_ng_template_9_For_3_Conditional_1_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STComponent_ng_template_9_For_3_Conditional_1_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span", 38);
    ɵɵtemplate(1, STComponent_ng_template_9_For_3_Conditional_1_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const c_r33 = ɵɵnextContext(2).$implicit;
    ɵɵnextContext(2);
    const titleTpl_r17 = ɵɵreference(1);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", titleTpl_r17)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c1, c_r33.title));
  }
}
function STComponent_ng_template_9_For_3_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r32 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "td", 37);
    ɵɵconditionalCreate(1, STComponent_ng_template_9_For_3_Conditional_1_Conditional_1_Template, 2, 4, "span", 38);
    ɵɵelementStart(2, "st-td", 39);
    ɵɵlistener("n", function STComponent_ng_template_9_For_3_Conditional_1_Template_st_td_n_2_listener($event) {
      ɵɵrestoreView(_r32);
      const ctx_r3 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r3._handleTd($event));
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r33 = ɵɵnextContext();
    const c_r33 = ctx_r33.$implicit;
    const ɵ$index_92_r35 = ctx_r33.$index;
    const props_r36 = ɵɵreadContextLet(0);
    const ctx_r29 = ɵɵnextContext();
    const i_r25 = ctx_r29.$implicit;
    const index_r26 = ctx_r29.index;
    const ctx_r3 = ɵɵnextContext();
    ɵɵclassMap(c_r33._className);
    ɵɵproperty("nzLeft", c_r33._left)("nzRight", c_r33._right);
    ɵɵattribute("data-col-index", ɵ$index_92_r35)("colspan", (props_r36 == null ? null : props_r36.colSpan) === 1 ? null : props_r36 == null ? null : props_r36.colSpan)("rowspan", (props_r36 == null ? null : props_r36.rowSpan) === 1 ? null : props_r36 == null ? null : props_r36.rowSpan);
    ɵɵadvance();
    ɵɵconditional(ctx_r3.responsive ? 1 : -1);
    ɵɵadvance();
    ɵɵproperty("data", ctx_r3._data)("i", i_r25)("index", index_r26)("c", c_r33)("cIdx", ɵ$index_92_r35);
  }
}
function STComponent_ng_template_9_For_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵdeclareLet(0);
    ɵɵconditionalCreate(1, STComponent_ng_template_9_For_3_Conditional_1_Template, 3, 13, "td", 36);
  }
  if (rf & 2) {
    const ɵ$index_92_r35 = ctx.$index;
    const i_r25 = ɵɵnextContext().$implicit;
    const props_r37 = ɵɵstoreLet(i_r25._values[ɵ$index_92_r35].props);
    ɵɵadvance();
    ɵɵconditional((props_r37 == null ? null : props_r37.colSpan) > 0 && (props_r37 == null ? null : props_r37.rowSpan) > 0 ? 1 : -1);
  }
}
function STComponent_ng_template_9_ng_template_5_Template(rf, ctx) {
}
function STComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r23 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "tr", 32);
    ɵɵlistener("click", function STComponent_ng_template_9_Template_tr_click_0_listener($event) {
      const ctx_r23 = ɵɵrestoreView(_r23);
      const i_r25 = ctx_r23.$implicit;
      const index_r26 = ctx_r23.index;
      const ctx_r3 = ɵɵnextContext();
      return ɵɵresetView(ctx_r3._rowClick($event, i_r25, index_r26, false));
    })("dblclick", function STComponent_ng_template_9_Template_tr_dblclick_0_listener($event) {
      const ctx_r26 = ɵɵrestoreView(_r23);
      const i_r25 = ctx_r26.$implicit;
      const index_r26 = ctx_r26.index;
      const ctx_r3 = ɵɵnextContext();
      return ɵɵresetView(ctx_r3._rowClick($event, i_r25, index_r26, true));
    });
    ɵɵconditionalCreate(1, STComponent_ng_template_9_Conditional_1_Template, 3, 4);
    ɵɵrepeaterCreate(2, STComponent_ng_template_9_For_3_Template, 2, 2, null, null, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
    ɵɵelementStart(4, "tr", 33);
    ɵɵtemplate(5, STComponent_ng_template_9_ng_template_5_Template, 0, 0, "ng-template", 11);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r25 = ctx.$implicit;
    const index_r26 = ctx.index;
    const ctx_r3 = ɵɵnextContext();
    ɵɵclassMap(i_r25._rowClassName);
    ɵɵattribute("data-index", index_r26);
    ɵɵadvance();
    ɵɵconditional(ctx_r3.expand ? 1 : -1);
    ɵɵadvance();
    ɵɵrepeater(ctx_r3._columns);
    ɵɵadvance(2);
    ɵɵproperty("nzExpand", i_r25.expand);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r3.expand)("ngTemplateOutletContext", ɵɵpureFunction2(7, _c7, i_r25, index_r26));
  }
}
function STComponent_Conditional_11_ng_template_0_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_11_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_11_ng_template_0_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    const i_r38 = ctx.$implicit;
    const index_r39 = ctx.index;
    ɵɵnextContext(2);
    const bodyTpl_r40 = ɵɵreference(10);
    ɵɵproperty("ngTemplateOutlet", bodyTpl_r40)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c7, i_r38, index_r39));
  }
}
function STComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_11_ng_template_0_Template, 1, 5, "ng-template", 12);
  }
}
function STComponent_Conditional_12_For_1_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_12_For_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_12_For_1_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    const i_r41 = ctx.$implicit;
    const $index_r42 = ctx.$index;
    ɵɵnextContext(2);
    const bodyTpl_r40 = ɵɵreference(10);
    ɵɵproperty("ngTemplateOutlet", bodyTpl_r40)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c7, i_r41, $index_r42));
  }
}
function STComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵrepeaterCreate(0, STComponent_Conditional_12_For_1_Template, 1, 5, null, 11, ɵɵcomponentInstance().trackBy, true);
  }
  if (rf & 2) {
    const ctx_r3 = ɵɵnextContext();
    ɵɵrepeater(ctx_r3._data);
  }
}
function STComponent_Conditional_13_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_13_ng_template_0_Template, 0, 0, "ng-template", 11);
  }
  if (rf & 2) {
    const ctx_r3 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r3.body)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c1, ctx_r3._statistical));
  }
}
function STComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtext(0);
  }
  if (rf & 2) {
    const range_r43 = ctx.range;
    const total_r44 = ctx.$implicit;
    const ctx_r3 = ɵɵnextContext();
    ɵɵtextInterpolate(ctx_r3.renderTotal(total_r44, range_r43));
  }
}
function STComponent_For_20_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r45 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_For_20_Conditional_0_Template_li_click_0_listener() {
      ɵɵrestoreView(_r45);
      const i_r46 = ɵɵnextContext().$implicit;
      return ɵɵresetView(i_r46.fn(i_r46));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r46 = ɵɵnextContext().$implicit;
    ɵɵproperty("innerHTML", i_r46.text, ɵɵsanitizeHtml);
  }
}
function STComponent_For_20_Conditional_1_For_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r47 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_For_20_Conditional_1_For_3_Template_li_click_0_listener() {
      const ci_r48 = ɵɵrestoreView(_r47).$implicit;
      return ɵɵresetView(ci_r48.fn(ci_r48));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ci_r48 = ctx.$implicit;
    ɵɵproperty("innerHTML", ci_r48.text, ɵɵsanitizeHtml);
  }
}
function STComponent_For_20_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 40)(1, "ul");
    ɵɵrepeaterCreate(2, STComponent_For_20_Conditional_1_For_3_Template, 1, 1, "li", 26, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const i_r46 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzTitle", i_r46.text);
    ɵɵadvance(2);
    ɵɵrepeater(i_r46.children);
  }
}
function STComponent_For_20_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵconditionalCreate(0, STComponent_For_20_Conditional_0_Template, 1, 1, "li", 26)(1, STComponent_For_20_Conditional_1_Template, 4, 1, "li", 40);
  }
  if (rf & 2) {
    const i_r46 = ctx.$implicit;
    ɵɵconditional(i_r46.children.length === 0 ? 0 : 1);
  }
}
var STRowSource = class _STRowSource {
  titles = {};
  rows = {};
  add(type, path, ref) {
    this[type === "title" ? "titles" : "rows"][path] = ref;
  }
  getTitle(path) {
    return this.titles[path];
  }
  getRow(path) {
    return this.rows[path];
  }
  static ɵfac = function STRowSource_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STRowSource)();
  };
  static ɵprov = ɵɵdefineInjectable({
    token: _STRowSource,
    factory: _STRowSource.ɵfac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STRowSource, [{
    type: Injectable
  }], null, null);
})();
var STRowDirective = class _STRowDirective {
  source = inject(STRowSource, {
    host: true
  });
  ref = inject(TemplateRef);
  id;
  type;
  ngOnInit() {
    this.source.add(this.type, this.id, this.ref);
  }
  static ɵfac = function STRowDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STRowDirective)();
  };
  static ɵdir = ɵɵdefineDirective({
    type: _STRowDirective,
    selectors: [["", "st-row", ""]],
    inputs: {
      id: [0, "st-row", "id"],
      type: "type"
    }
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STRowDirective, [{
    type: Directive,
    args: [{
      selector: "[st-row]"
    }]
  }], null, {
    id: [{
      type: Input,
      args: ["st-row"]
    }],
    type: [{
      type: Input
    }]
  });
})();
var STWidgetRegistry = class _STWidgetRegistry {
  _widgets = {};
  get widgets() {
    return this._widgets;
  }
  register(type, widget) {
    this._widgets[type] = widget;
  }
  has(type) {
    return Object.prototype.hasOwnProperty.call(this._widgets, type);
  }
  get(type) {
    return this._widgets[type];
  }
  static ɵfac = function STWidgetRegistry_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STWidgetRegistry)();
  };
  static ɵprov = ɵɵdefineInjectable({
    token: _STWidgetRegistry,
    factory: _STWidgetRegistry.ɵfac,
    providedIn: "root"
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STWidgetRegistry, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();
var STColumnSource = class _STColumnSource {
  dom = inject(DomSanitizer);
  rowSource = inject(STRowSource, {
    host: true
  });
  acl = inject(ACLService, {
    optional: true
  });
  i18nSrv = inject(ALAIN_I18N_TOKEN, {
    optional: true
  });
  stWidgetRegistry = inject(STWidgetRegistry);
  cog;
  setCog(val) {
    this.cog = val;
  }
  fixPop(i, def) {
    if (i.pop == null || i.pop === false) {
      i.pop = false;
      return;
    }
    let pop = __spreadValues({
      okType: "primary"
    }, def);
    if (typeof i.pop === "string") {
      pop.title = i.pop;
    } else if (typeof i.pop === "object") {
      pop = __spreadValues(__spreadValues({}, pop), i.pop);
    }
    if (typeof pop.condition !== "function") {
      pop.condition = () => false;
    }
    if (this.i18nSrv) {
      if (pop.titleI18n) pop.title = this.i18nSrv.fanyi(pop.titleI18n);
      if (pop.okTextI18n) pop.okText = this.i18nSrv.fanyi(pop.okTextI18n);
      if (pop.cancelTextI18n) pop.cancelText = this.i18nSrv.fanyi(pop.cancelTextI18n);
    }
    i.pop = pop;
  }
  btnCoerce(list) {
    if (!list) return [];
    const ret = [];
    const {
      modal,
      drawer,
      pop,
      btnIcon
    } = this.cog;
    for (const item of list) {
      if (this.acl && item.acl && !this.acl.can(item.acl)) {
        continue;
      }
      if (item.type === "modal" || item.type === "static") {
        if (item.modal == null || item.modal.component == null) {
          if (typeof ngDevMode === "undefined" || ngDevMode) {
            console.warn(`[st] Should specify modal parameter when type is modal or static`);
          }
          item.type = "none";
        } else {
          item.modal = __spreadValues(__spreadValues({
            paramsName: "record",
            size: "lg"
          }, modal), item.modal);
        }
      }
      if (item.type === "drawer") {
        if (item.drawer == null || item.drawer.component == null) {
          if (typeof ngDevMode === "undefined" || ngDevMode) {
            console.warn(`[st] Should specify drawer parameter when type is drawer`);
          }
          item.type = "none";
        } else {
          item.drawer = __spreadValues(__spreadValues({
            paramsName: "record",
            size: "lg"
          }, drawer), item.drawer);
        }
      }
      if (item.type === "del" && typeof item.pop === "undefined") {
        item.pop = true;
      }
      this.fixPop(item, pop);
      if (typeof item.icon !== "function") {
        item.icon = __spreadValues(__spreadValues({}, btnIcon), typeof item.icon === "string" ? {
          type: item.icon
        } : item.icon);
      }
      item.children = item.children && item.children.length > 0 ? this.btnCoerce(item.children) : [];
      if (item.i18n && this.i18nSrv) {
        item.text = this.i18nSrv.fanyi(item.i18n);
      }
      ret.push(item);
    }
    this.btnCoerceIf(ret);
    return ret;
  }
  btnCoerceIf(list) {
    for (const item of list) {
      item.iifBehavior = item.iifBehavior || this.cog.iifBehavior;
      if (item.children && item.children.length > 0) {
        this.btnCoerceIf(item.children);
      } else {
        item.children = [];
      }
    }
  }
  fixedCoerce(list, expand) {
    const countReduce = (a, b) => a + +b.width.toString().replace("px", "");
    const expandWidth = expand ? 50 : 0;
    list.filter((w) => w.fixed && w.fixed === "left" && w.width).forEach((item, idx) => item._left = `${list.slice(0, idx).reduce(countReduce, 0) + expandWidth}px`);
    list.filter((w) => w.fixed && w.fixed === "right" && w.width).reverse().forEach((item, idx) => item._right = `${idx > 0 ? list.slice(-idx).reduce(countReduce, 0) : 0}px`);
  }
  sortCoerce(item) {
    const res = this.fixSortCoerce(item);
    res.reName = __spreadValues(__spreadValues({}, this.cog.sortReName), res.reName);
    return res;
  }
  fixSortCoerce(item) {
    if (typeof item.sort === "undefined") {
      return {
        enabled: false
      };
    }
    let res = {};
    if (typeof item.sort === "string") {
      if (item.sort === "ascend" || item.sort === "descend") {
        res.directions = [item.sort, null];
      } else {
        res.key = item.sort;
      }
    } else if (typeof item.sort !== "boolean") {
      res = item.sort;
    } else if (typeof item.sort === "boolean") {
      res.compare = (a, b) => a[item.indexKey] - b[item.indexKey];
    }
    if (!res.key) {
      res.key = item.indexKey;
    }
    if (!Array.isArray(res.directions)) {
      res.directions = this.cog.sortDirections ?? ["ascend", "descend", null];
    }
    res.enabled = true;
    return res;
  }
  filterCoerce(item) {
    if (item.filter == null) {
      return null;
    }
    let res = item.filter;
    res.type = res.type || "default";
    res.showOPArea = res.showOPArea !== false;
    let icon = "filter";
    let iconTheme = "fill";
    let fixMenus = true;
    let value = void 0;
    switch (res.type) {
      case "keyword":
        icon = "search";
        iconTheme = "outline";
        break;
      case "number":
        icon = "search";
        iconTheme = "outline";
        res.number = __spreadValues({
          step: 1,
          min: -Infinity,
          max: Infinity
        }, res.number);
        break;
      case "date":
        icon = "calendar";
        iconTheme = "outline";
        res.date = __spreadValues({
          range: false,
          mode: "date",
          showToday: true,
          showNow: false
        }, res.date);
        break;
      case "custom":
        break;
      default:
        fixMenus = false;
        break;
    }
    if (fixMenus && (res.menus == null || res.menus.length === 0)) {
      res.menus = [{
        value
      }];
    }
    if (res.menus?.length === 0) {
      return null;
    }
    if (typeof res.multiple === "undefined") {
      res.multiple = true;
    }
    res.confirmText = res.confirmText || this.cog.filterConfirmText;
    res.clearText = res.clearText || this.cog.filterClearText;
    res.key = res.key || item.indexKey;
    res.icon = res.icon || icon;
    const baseIcon = {
      type: icon,
      theme: iconTheme
    };
    if (typeof res.icon === "string") {
      res.icon = __spreadProps(__spreadValues({}, baseIcon), {
        type: res.icon
      });
    } else {
      res.icon = __spreadValues(__spreadValues({}, baseIcon), res.icon);
    }
    this.updateDefault(res);
    if (this.acl) {
      res.menus = res.menus?.filter((w) => this.acl.can(w.acl));
    }
    return res.menus?.length === 0 ? null : res;
  }
  restoreRender(item) {
    if (item.renderTitle) {
      item.__renderTitle = typeof item.renderTitle === "string" ? this.rowSource.getTitle(item.renderTitle) : item.renderTitle;
    }
    if (item.render) {
      item.__render = typeof item.render === "string" ? this.rowSource.getRow(item.render) : item.render;
    }
  }
  widgetCoerce(item) {
    if (item.type !== "widget") return;
    if (item.widget == null || !this.stWidgetRegistry.has(item.widget.type)) {
      delete item.type;
      if (typeof ngDevMode === "undefined" || ngDevMode) {
        warn(`st: No widget for type "${item.widget?.type}"`);
      }
    }
  }
  genHeaders(rootColumns) {
    const rows = [];
    const widths = [];
    const fillRowCells = (columns, colIndex, rowIndex = 0) => {
      rows[rowIndex] = rows[rowIndex] || [];
      let currentColIndex = colIndex;
      const colSpans = columns.map((column) => {
        const cell = {
          column,
          colStart: currentColIndex,
          hasSubColumns: false
        };
        let colSpan = 1;
        const subColumns = column.children;
        if (Array.isArray(subColumns) && subColumns.length > 0) {
          colSpan = fillRowCells(subColumns, currentColIndex, rowIndex + 1).reduce((total, count) => total + count, 0);
          cell.hasSubColumns = true;
        } else {
          widths.push(cell.column.width || "");
        }
        if ("colSpan" in column) {
          colSpan = column.colSpan;
        }
        if ("rowSpan" in column) {
          cell.rowSpan = column.rowSpan;
        }
        cell.colSpan = colSpan;
        cell.colEnd = cell.colStart + colSpan - 1;
        rows[rowIndex].push(cell);
        currentColIndex += colSpan;
        return colSpan;
      });
      return colSpans;
    };
    fillRowCells(rootColumns, 0);
    const rowCount = rows.length;
    for (let rowIndex = 0; rowIndex < rowCount; rowIndex += 1) {
      rows[rowIndex].forEach((cell) => {
        if (!("rowSpan" in cell) && !cell.hasSubColumns) {
          cell.rowSpan = rowCount - rowIndex;
        }
      });
    }
    return {
      headers: rows,
      headerWidths: rowCount > 1 ? widths : null
    };
  }
  cleanCond(list) {
    const res = [];
    const copyList = deepCopy(list);
    for (const item of copyList) {
      if (typeof item.iif === "function" && !item.iif(item)) {
        continue;
      }
      if (this.acl && item.acl && !this.acl.can(item.acl)) {
        continue;
      }
      if (Array.isArray(item.children) && item.children.length > 0) {
        item.children = this.cleanCond(item.children);
      }
      res.push(item);
    }
    return res;
  }
  mergeClass(item) {
    const builtInClassNames = [];
    if (item._isTruncate) {
      builtInClassNames.push("text-truncate");
    }
    const rawClassName = item.className;
    if (!rawClassName) {
      const typeClass = {
        number: "text-right",
        currency: "text-right",
        date: "text-center"
      }[item.type];
      if (typeClass) {
        builtInClassNames.push(typeClass);
      }
      item._className = builtInClassNames;
      return;
    }
    const rawClassNameIsArray = Array.isArray(rawClassName);
    if (!rawClassNameIsArray && typeof rawClassName === "object") {
      const objClassNames = rawClassName;
      builtInClassNames.forEach((key) => objClassNames[key] = true);
      item._className = objClassNames;
      return;
    }
    const arrayClassNames = rawClassNameIsArray ? Array.from(rawClassName) : [rawClassName];
    arrayClassNames.splice(0, 0, ...builtInClassNames);
    item._className = [...new Set(arrayClassNames)].filter((w) => !!w);
  }
  process(list, options) {
    if (!list || list.length === 0) {
      return {
        columns: [],
        headers: [],
        headerWidths: null
      };
    }
    const {
      noIndex
    } = this.cog;
    let checkboxCount = 0;
    let radioCount = 0;
    const columns = [];
    const processItem = (item) => {
      if (item.index) {
        if (!Array.isArray(item.index)) {
          item.index = item.index.toString().split(".");
        }
        item.indexKey = item.index.join(".");
      }
      const tit = (typeof item.title === "string" ? {
        text: item.title
      } : item.title) || {};
      if (tit.i18n && this.i18nSrv) {
        tit.text = this.i18nSrv.fanyi(tit.i18n);
      }
      if (tit.text) {
        tit._text = this.dom.bypassSecurityTrustHtml(tit.text);
      }
      item.title = tit;
      if (item.type === "no") {
        item.noIndex = item.noIndex == null ? noIndex : item.noIndex;
      }
      if (item.selections == null) {
        item.selections = [];
      }
      if (item.type === "checkbox") {
        ++checkboxCount;
        if (!item.width) {
          item.width = `${item.selections.length > 0 ? 62 : 50}px`;
        }
      }
      if (this.acl) {
        item.selections = item.selections.filter((w) => this.acl.can(w.acl));
      }
      if (item.type === "radio") {
        ++radioCount;
        item.selections = [];
        if (!item.width) {
          item.width = "50px";
        }
      }
      if (item.cell != null) {
        item.type = "cell";
      }
      if (item.type === "yn") {
        item.yn = __spreadValues(__spreadValues({
          truth: true
        }, this.cog.yn), item.yn);
      }
      if (item.type === "date") {
        item.dateFormat = item.dateFormat || this.cog.date?.format;
      }
      if (item.type === "link" && typeof item.click !== "function" || item.type === "badge" && item.badge == null || item.type === "tag" && item.tag == null || item.type === "enum" && item.enum == null) {
        item.type = "";
      }
      item._isTruncate = !!item.width && options.widthMode.strictBehavior === "truncate" && item.type !== "img";
      this.mergeClass(item);
      if (typeof item.width === "number") {
        item._width = item.width;
        item.width = `${item.width}px`;
      }
      item._left = false;
      item._right = false;
      item.safeType = item.safeType ?? options.safeType;
      item._sort = this.sortCoerce(item);
      item.filter = this.filterCoerce(item);
      item.buttons = this.btnCoerce(item.buttons);
      this.widgetCoerce(item);
      this.restoreRender(item);
      item.resizable = __spreadValues(__spreadValues({
        disabled: true,
        bounds: "window",
        minWidth: 60,
        maxWidth: 360,
        preview: true
      }, options.resizable), typeof item.resizable === "boolean" ? {
        disabled: !item.resizable
      } : item.resizable);
      return item;
    };
    const processList = (data) => {
      for (const item of data) {
        columns.push(processItem(item));
        if (Array.isArray(item.children)) {
          processList(item.children);
        }
      }
    };
    const copyList = this.cleanCond(list);
    processList(copyList);
    if (checkboxCount > 1) {
      throw new Error(`[st]: just only one column checkbox`);
    }
    if (radioCount > 1) {
      throw new Error(`[st]: just only one column radio`);
    }
    this.fixedCoerce(columns, options.expand);
    return __spreadValues({
      columns: columns.filter((w) => !Array.isArray(w.children) || w.children.length === 0)
    }, this.genHeaders(copyList));
  }
  restoreAllRender(columns) {
    columns.forEach((i) => this.restoreRender(i));
  }
  updateDefault(filter2) {
    if (filter2.menus == null) return this;
    if (filter2.type === "default") {
      filter2.default = filter2.menus.findIndex((w) => w.checked) !== -1;
    } else {
      filter2.default = !!filter2.menus[0].value;
    }
    return this;
  }
  cleanFilter(col) {
    const f = col.filter;
    f.default = false;
    if (f.type === "default") {
      f.menus.forEach((i) => i.checked = false);
    } else {
      f.menus[0].value = void 0;
    }
    return this;
  }
  static ɵfac = function STColumnSource_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STColumnSource)();
  };
  static ɵprov = ɵɵdefineInjectable({
    token: _STColumnSource,
    factory: _STColumnSource.ɵfac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STColumnSource, [{
    type: Injectable
  }], null, null);
})();
var STDataSource = class _STDataSource {
  http;
  datePipe;
  ynPipe;
  numberPipe;
  currencySrv;
  dom;
  cog;
  sortTick = 0;
  constructor(http, datePipe, ynPipe, numberPipe, currencySrv, dom) {
    this.http = http;
    this.datePipe = datePipe;
    this.ynPipe = ynPipe;
    this.numberPipe = numberPipe;
    this.currencySrv = currencySrv;
    this.dom = dom;
  }
  setCog(val) {
    this.cog = val;
  }
  process(options) {
    let data$;
    let isRemote = false;
    const {
      data,
      res,
      total,
      page,
      pi,
      ps,
      paginator,
      columns,
      headers
    } = options;
    let retTotal;
    let retPs;
    let retList;
    let retPi;
    let rawData;
    let showPage = page.show;
    if (typeof data === "string") {
      isRemote = true;
      data$ = this.getByRemote(data, options).pipe(map((result) => {
        rawData = result;
        let ret;
        if (Array.isArray(result)) {
          ret = result;
          retTotal = ret.length;
          retPs = retTotal;
          showPage = false;
        } else {
          const reName = res.reName;
          if (typeof reName === "function") {
            const fnRes = reName(result, {
              pi,
              ps,
              total
            });
            ret = fnRes.list;
            retTotal = fnRes.total;
          } else {
            ret = deepGet(result, reName.list, []);
            if (ret == null || !Array.isArray(ret)) {
              ret = [];
            }
            const resultTotal = reName.total && deepGet(result, reName.total, null);
            retTotal = resultTotal == null ? total || 0 : +resultTotal;
          }
        }
        return deepCopy(ret);
      }));
    } else if (data == null || Array.isArray(data)) {
      data$ = of(data ?? []);
    } else {
      data$ = data;
    }
    if (!isRemote) {
      data$ = data$.pipe(
        // sort
        map((result) => {
          rawData = result;
          let copyResult = deepCopy(result);
          const sorterFn = this.getSorterFn(headers);
          if (sorterFn) {
            copyResult = copyResult.sort(sorterFn);
          }
          return copyResult;
        }),
        // filter
        map((result) => {
          columns.filter((w) => w.filter).forEach((c) => {
            const filter2 = c.filter;
            const values = this.getFilteredData(filter2);
            if (values.length === 0) return;
            const onFilter = filter2.fn;
            if (typeof onFilter !== "function") {
              if (typeof ngDevMode === "undefined" || ngDevMode) {
                console.warn(`[st] Muse provide the fn function in filter`);
              }
              return;
            }
            result = result.filter((record) => values.some((v) => onFilter(v, record)));
          });
          return result;
        }),
        // paging
        map((result) => {
          if (paginator && page.front) {
            const maxPageIndex = Math.ceil(result.length / ps);
            retPi = Math.max(1, pi > maxPageIndex ? maxPageIndex : pi);
            retTotal = result.length;
            if (page.show === true) {
              return result.slice((retPi - 1) * ps, retPi * ps);
            }
          }
          return result;
        })
      );
    }
    if (typeof res.process === "function") {
      data$ = data$.pipe(map((result) => res.process(result, rawData)));
    }
    data$ = data$.pipe(map((result) => this.optimizeData({
      result,
      columns,
      rowClassName: options.rowClassName
    })));
    return data$.pipe(map((result) => {
      retList = result;
      const realTotal = retTotal || total;
      const realPs = retPs || ps;
      return {
        pi: retPi,
        ps: retPs,
        total: retTotal,
        list: retList,
        statistical: this.genStatistical(columns, retList, rawData),
        pageShow: typeof showPage === "undefined" ? realTotal > realPs : showPage
      };
    }));
  }
  get(item, col, idx) {
    try {
      const safeHtml = col.safeType === "safeHtml";
      if (col.format) {
        const formatRes = col.format(item, col, idx) || "";
        return {
          text: formatRes,
          _text: safeHtml ? this.dom.bypassSecurityTrustHtml(formatRes) : formatRes,
          org: formatRes,
          safeType: col.safeType
        };
      }
      const value = deepGet(item, col.index, col.default);
      let text = value;
      let color;
      let tooltip;
      switch (col.type) {
        case "no":
          text = this.getNoIndex(item, col, idx);
          break;
        case "img":
          text = value ? `<img src="${value}" class="img">` : "";
          break;
        case "number":
          text = this.numberPipe.transform(value, col.numberDigits);
          break;
        case "currency":
          text = this.currencySrv.format(value, col.currency?.format);
          break;
        case "date":
          text = value == null || value === col.default || typeof value === "number" && value <= 0 ? col.default : this.datePipe.transform(value, col.dateFormat);
          break;
        case "yn":
          text = this.ynPipe.transform(value === col.yn.truth, col.yn.yes, col.yn.no, col.yn.mode, false);
          break;
        case "enum":
          text = col.enum[value];
          break;
        case "tag":
        case "badge": {
          const data = col.type === "tag" ? col.tag : col.badge;
          if (data && data[text]) {
            const dataItem = data[text];
            text = dataItem.text;
            color = dataItem.color;
            tooltip = dataItem.tooltip;
          } else {
            text = "";
          }
          break;
        }
      }
      if (text == null) text = "";
      return {
        text,
        _text: safeHtml ? this.dom.bypassSecurityTrustHtml(text) : text,
        org: value,
        color,
        tooltip,
        safeType: col.safeType,
        buttons: []
      };
    } catch (ex) {
      const text = `INVALID DATA`;
      console.error(`Failed to get data`, item, col, ex);
      return {
        text,
        _text: text,
        org: text,
        buttons: [],
        safeType: "text"
      };
    }
  }
  getByRemote(url, options) {
    const {
      req,
      page,
      paginator,
      pi,
      ps,
      singleSort,
      multiSort,
      columns,
      headers
    } = options;
    const method = (req.method || "GET").toUpperCase();
    let params = {};
    const reName = req.reName;
    if (paginator) {
      if (req.type === "page") {
        params = {
          [reName.pi]: page.zeroIndexed ? pi - 1 : pi,
          [reName.ps]: ps
        };
      } else {
        params = {
          [reName.skip]: (pi - 1) * ps,
          [reName.limit]: ps
        };
      }
    }
    params = __spreadValues(__spreadValues(__spreadValues(__spreadValues({}, params), req.params), this.getReqSortMap(singleSort, multiSort, headers)), this.getReqFilterMap(columns));
    if (options.req.ignoreParamNull == true) {
      Object.keys(params).forEach((key) => {
        if (params[key] == null) delete params[key];
      });
    }
    let reqOptions = {
      params,
      body: req.body,
      headers: req.headers
    };
    if (method === "POST" && req.allInBody === true) {
      reqOptions = {
        body: __spreadValues(__spreadValues({}, req.body), params),
        headers: req.headers
      };
    }
    if (typeof req.process === "function") {
      reqOptions = req.process(reqOptions);
    }
    if (!(reqOptions.params instanceof HttpParams)) {
      reqOptions.params = new HttpParams({
        fromObject: reqOptions.params
      });
    }
    if (typeof options.customRequest === "function") {
      return options.customRequest({
        method,
        url,
        options: reqOptions
      });
    }
    return this.http.request(method, url, reqOptions);
  }
  getCell(c, item, idx) {
    const onCellResult = typeof c.onCell === "function" ? c.onCell(item, idx) : null;
    const mergedColSpan = onCellResult?.colSpan ?? 1;
    const mergedRowSpan = onCellResult?.rowSpan ?? 1;
    return {
      colSpan: mergedColSpan <= 0 ? null : mergedColSpan,
      rowSpan: mergedRowSpan <= 0 ? null : mergedRowSpan
    };
  }
  optimizeData(options) {
    const {
      result,
      columns,
      rowClassName
    } = options;
    for (let i = 0, len = result.length; i < len; i++) {
      result[i]._values = columns.map((c) => {
        const props = this.getCell(c, result[i], i);
        if (Array.isArray(c.buttons) && c.buttons.length > 0) {
          return {
            buttons: this.genButtons(c.buttons, result[i], c),
            _text: "",
            props
          };
        }
        let cell;
        if (typeof c.cell === "function") {
          cell = c.cell(result[i], c);
        }
        return __spreadProps(__spreadValues({}, this.get(result[i], c, i)), {
          props,
          cell
        });
      });
      result[i]._rowClassName = [rowClassName ? rowClassName(result[i], i) : null, result[i].className].filter((w) => !!w).join(" ");
    }
    return result;
  }
  getNoIndex(item, col, idx) {
    return typeof col.noIndex === "function" ? col.noIndex(item, col, idx) : col.noIndex + idx;
  }
  genButtons(_btns, item, col) {
    const fn = (btns) => {
      return deepCopy(btns).filter((btn) => {
        const result = typeof btn.iif === "function" ? btn.iif(item, btn, col) : true;
        const isRenderDisabled = btn.iifBehavior === "disabled";
        btn._result = result;
        btn._disabled = !result && isRenderDisabled;
        if (btn.children?.length) {
          btn.children = fn(btn.children);
        }
        return result || isRenderDisabled;
      });
    };
    const res = fn(_btns);
    const fnText = (btns) => {
      for (const btn of btns) {
        btn._text = typeof btn.text === "function" ? btn.text(item, btn) : btn.text || "";
        btn._className = typeof btn.className === "function" ? btn.className(item, btn) : btn.className;
        btn._icon = typeof btn.icon === "function" ? btn.icon(item, btn) : btn.icon;
        if (btn.children?.length) {
          btn.children = fnText(btn.children);
        }
      }
      return btns;
    };
    return this.fixMaxMultiple(fnText(res), col);
  }
  fixMaxMultiple(btns, col) {
    const curCog = col.maxMultipleButton;
    const btnSize = btns.length;
    if (curCog == null || btnSize <= 0) return btns;
    const cog = __spreadValues(__spreadValues({}, this.cog.maxMultipleButton), typeof curCog === "number" ? {
      count: curCog
    } : curCog);
    if (cog.count >= btnSize) return btns;
    const newBtns = btns.slice(0, cog.count);
    newBtns.push({
      _text: cog.text,
      children: btns.slice(cog.count)
    });
    return newBtns;
  }
  // #region sort
  getValidSort(headers) {
    return headers.reduce((a, header) => {
      const ls = header.map((i) => i.column).filter((item) => item._sort && item._sort.enabled && item._sort.default).map((item) => item._sort);
      return a.concat(...ls);
    }, []);
  }
  getSorterFn(headers) {
    const sortList = this.getValidSort(headers);
    if (sortList.length === 0) {
      return;
    }
    const sortItem = sortList[0];
    if (sortItem.compare === null) {
      return;
    }
    if (typeof sortItem.compare !== "function") {
      if (typeof ngDevMode === "undefined" || ngDevMode) {
        console.warn(`[st] Muse provide the compare function in sort`);
      }
      return;
    }
    return (a, b) => {
      const result = sortItem.compare(a, b);
      if (result !== 0) {
        return sortItem.default === "descend" ? -result : result;
      }
      return 0;
    };
  }
  get nextSortTick() {
    return ++this.sortTick;
  }
  getReqSortMap(singleSort, multiSort, headers) {
    let ret = {};
    const sortList = this.getValidSort(headers);
    if (multiSort) {
      const ms = __spreadValues({
        key: "sort",
        separator: "-",
        nameSeparator: ".",
        keepEmptyKey: true,
        arrayParam: false
      }, multiSort);
      const sortMap = sortList.sort((a, b) => a.tick - b.tick).map((item) => item.key + ms.nameSeparator + ((item.reName || {})[item.default] || item.default));
      ret = {
        [ms.key]: ms.arrayParam ? sortMap : sortMap.join(ms.separator)
      };
      return sortMap.length === 0 && ms.keepEmptyKey === false ? {} : ret;
    }
    if (sortList.length === 0) return ret;
    const mapData = sortList[0];
    let sortFiled = mapData.key;
    let sortValue = (sortList[0].reName || {})[mapData.default] || mapData.default;
    if (singleSort) {
      sortValue = sortFiled + (singleSort.nameSeparator || ".") + sortValue;
      sortFiled = singleSort.key || "sort";
    }
    ret[sortFiled] = sortValue;
    return ret;
  }
  // #endregion
  // #region filter
  getFilteredData(filter2) {
    return filter2.type === "default" ? filter2.menus.filter((f) => f.checked === true) : filter2.menus.slice(0, 1);
  }
  getReqFilterMap(columns) {
    let ret = {};
    columns.filter((w) => w.filter && w.filter.default === true).forEach((col) => {
      const filter2 = col.filter;
      const values = this.getFilteredData(filter2);
      let obj = {};
      if (filter2.reName) {
        obj = filter2.reName(filter2.menus, col);
      } else {
        obj[filter2.key] = values.map((i) => i.value).join(",");
      }
      ret = __spreadValues(__spreadValues({}, ret), obj);
    });
    return ret;
  }
  // #endregion
  // #region statistical
  genStatistical(columns, list, rawData) {
    const res = {};
    columns.forEach((col, index) => {
      res[col.key || col.indexKey || index] = col.statistical == null ? {} : this.getStatistical(col, index, list, rawData);
    });
    return res;
  }
  getStatistical(col, index, list, rawData) {
    const val = col.statistical;
    const item = __spreadValues({
      digits: 2,
      currency: void 0
    }, typeof val === "string" ? {
      type: val
    } : val);
    let res = {
      value: 0
    };
    let currency = false;
    if (typeof item.type === "function") {
      res = item.type(this.getValues(index, list), col, list, rawData);
      currency = true;
    } else {
      switch (item.type) {
        case "count":
          res.value = list.length;
          break;
        case "distinctCount":
          res.value = this.getValues(index, list).filter((value, idx, self) => self.indexOf(value) === idx).length;
          break;
        case "sum":
          res.value = this.toFixed(this.getSum(index, list), item.digits);
          currency = true;
          break;
        case "average":
          res.value = this.toFixed(this.getSum(index, list) / list.length, item.digits);
          currency = true;
          break;
        case "max":
          res.value = Math.max(...this.getValues(index, list));
          currency = true;
          break;
        case "min":
          res.value = Math.min(...this.getValues(index, list));
          currency = true;
          break;
      }
    }
    if (item.currency === true || item.currency == null && currency === true) {
      res.text = this.currencySrv.format(res.value, col.currency?.format);
    } else {
      res.text = String(res.value);
    }
    return res;
  }
  toFixed(val, digits) {
    if (isNaN(val) || !isFinite(val)) {
      return 0;
    }
    return parseFloat(val.toFixed(digits));
  }
  getValues(index, list) {
    return list.map((i) => i._values[index].org).map((i) => i === "" || i == null ? 0 : i);
  }
  getSum(index, list) {
    return this.getValues(index, list).reduce((p, i) => p += parseFloat(String(i)), 0);
  }
  static ɵfac = function STDataSource_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STDataSource)(ɵɵinject(_HttpClient), ɵɵinject(DatePipe, 1), ɵɵinject(YNPipe, 1), ɵɵinject(DecimalPipe, 1), ɵɵinject(CurrencyService), ɵɵinject(DomSanitizer));
  };
  static ɵprov = ɵɵdefineInjectable({
    token: _STDataSource,
    factory: _STDataSource.ɵfac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STDataSource, [{
    type: Injectable
  }], () => [{
    type: _HttpClient
  }, {
    type: DatePipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: YNPipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: DecimalPipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: CurrencyService
  }, {
    type: DomSanitizer
  }], null);
})();
var STExport = class _STExport {
  xlsxSrv = inject(XlsxService);
  _stGet(item, col, index, colIndex) {
    const ret = {
      t: "s",
      v: ""
    };
    if (col.format) {
      ret.v = col.format(item, col, index);
    } else {
      const val = item._values ? item._values[colIndex].text : deepGet(item, col.index, "");
      ret.v = val;
      if (val != null) {
        switch (col.type) {
          case "currency":
            ret.t = "n";
            break;
          case "date":
            if (`${val}`.length > 0) {
              ret.t = "d";
              ret.z = col.dateFormat;
            }
            break;
          case "yn": {
            const yn = col.yn;
            ret.v = val === yn.truth ? yn.yes : yn.no;
            break;
          }
        }
      }
    }
    ret.v = ret.v ?? "";
    return ret;
  }
  genSheet(opt) {
    const sheets = {};
    const sheet = sheets[opt.sheetname || "Sheet1"] = {};
    const dataLen = opt.data.length;
    const columns = opt.columens;
    let validColCount = 0;
    let wpx = false;
    const invalidFn = (col) => col.exported === false || !col.index || !(!col.buttons || col.buttons.length === 0);
    for (const [idx, col] of columns.entries()) {
      if (invalidFn(col)) continue;
      if (!wpx && col._width != null) wpx = true;
      ++validColCount;
      const columnName = this.xlsxSrv.numberToSchema(validColCount);
      sheet[`${columnName}1`] = {
        t: "s",
        v: typeof col.title === "object" ? col.title.text : col.title
      };
      for (let dataIdx = 0; dataIdx < dataLen; dataIdx++) {
        sheet[`${columnName}${dataIdx + 2}`] = this._stGet(opt.data[dataIdx], col, dataIdx, idx);
      }
    }
    if (wpx) {
      sheet["!cols"] = columns.filter((col) => !invalidFn(col)).map((col) => ({
        wpx: col._width
      }));
    }
    if (validColCount > 0 && dataLen > 0) {
      sheet["!ref"] = `A1:${this.xlsxSrv.numberToSchema(validColCount)}${dataLen + 1}`;
    }
    return sheets;
  }
  export(opt) {
    return __async(this, null, function* () {
      const sheets = this.genSheet(opt);
      return this.xlsxSrv.export({
        sheets,
        filename: opt.filename,
        callback: opt.callback
      });
    });
  }
  static ɵfac = function STExport_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STExport)();
  };
  static ɵprov = ɵɵdefineInjectable({
    token: _STExport,
    factory: _STExport.ɵfac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STExport, [{
    type: Injectable
  }], null, null);
})();
var STWidgetHostDirective = class _STWidgetHostDirective {
  stWidgetRegistry = inject(STWidgetRegistry);
  viewContainerRef = inject(ViewContainerRef);
  record;
  column;
  ngOnInit() {
    const widget = this.column.widget;
    const componentType = this.stWidgetRegistry.get(widget.type);
    this.viewContainerRef.clear();
    const componentRef = this.viewContainerRef.createComponent(componentType);
    const {
      record,
      column
    } = this;
    const data = widget.params ? widget.params({
      record,
      column
    }) : {
      record
    };
    Object.keys(data).forEach((key) => {
      componentRef.instance[key] = data[key];
    });
  }
  static ɵfac = function STWidgetHostDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STWidgetHostDirective)();
  };
  static ɵdir = ɵɵdefineDirective({
    type: _STWidgetHostDirective,
    selectors: [["", "st-widget-host", ""]],
    inputs: {
      record: "record",
      column: "column"
    }
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STWidgetHostDirective, [{
    type: Directive,
    args: [{
      selector: "[st-widget-host]"
    }]
  }], null, {
    record: [{
      type: Input
    }],
    column: [{
      type: Input
    }]
  });
})();
var STFilterComponent = class _STFilterComponent {
  cdr = inject(ChangeDetectorRef);
  visible = false;
  col;
  locale = {};
  f;
  n = new EventEmitter();
  handle = new EventEmitter();
  get icon() {
    return this.f.icon;
  }
  stopPropagation($event) {
    $event.stopPropagation();
  }
  checkboxChange() {
    this.n.emit(this.f.menus?.filter((w) => w.checked));
  }
  radioChange(item) {
    this.f.menus.forEach((i) => i.checked = false);
    item.checked = !item.checked;
    this.n.emit(item);
  }
  close(result) {
    if (result != null) this.handle.emit(result);
    this.visible = false;
    this.cdr.detectChanges();
  }
  confirm() {
    this.handle.emit(true);
    return this;
  }
  reset() {
    this.handle.emit(false);
    return this;
  }
  static ɵfac = function STFilterComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STFilterComponent)();
  };
  static ɵcmp = ɵɵdefineComponent({
    type: _STFilterComponent,
    selectors: [["st-filter"]],
    hostVars: 6,
    hostBindings: function STFilterComponent_HostBindings(rf, ctx) {
      if (rf & 2) {
        ɵɵclassProp("ant-table-filter-trigger-container", true)("st__filter", true)("ant-table-filter-trigger-container-open", ctx.visible);
      }
    },
    inputs: {
      col: "col",
      locale: "locale",
      f: "f"
    },
    outputs: {
      n: "n",
      handle: "handle"
    },
    decls: 11,
    vars: 9,
    consts: [["filterMenu", "nzDropdownMenu"], ["nz-dropdown", "", "nzTrigger", "click", "nzOverlayClassName", "st__filter-wrap", 1, "ant-table-filter-trigger", 3, "nzVisibleChange", "click", "nzDropdownMenu", "nzClickHide", "nzVisible"], [3, "nzType", "nzTheme"], [1, "ant-table-filter-dropdown"], [1, "st__filter-keyword"], [1, "p-sm", "st__filter-number"], [1, "p-sm", "st__filter-date"], [1, "st__filter-custom"], ["nz-menu", ""], [1, "ant-table-filter-dropdown-btns"], ["type", "text", "nz-input", "", 3, "ngModelChange", "keyup.enter", "ngModel"], [1, "width-100", 3, "ngModelChange", "ngModel", "nzMin", "nzMax", "nzStep", "nzPrecision", "nzPlaceHolder"], ["nzInline", "", 3, "nzMode", "ngModel", "nzShowNow", "nzShowToday", "nzDisabledDate", "nzDisabledTime"], ["nzInline", "", 3, "ngModelChange", "nzMode", "ngModel", "nzShowNow", "nzShowToday", "nzDisabledDate", "nzDisabledTime"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["nz-menu-item", ""], ["nz-checkbox", "", 3, "ngModel"], ["nz-radio", "", 3, "ngModel"], ["nz-checkbox", "", 3, "ngModelChange", "ngModel"], ["nz-radio", "", 3, "ngModelChange", "ngModel"], [1, "ant-table-filter-dropdown-link", "confirm", 3, "click"], [1, "ant-table-filter-dropdown-link", "clear", 3, "click"]],
    template: function STFilterComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = ɵɵgetCurrentView();
        ɵɵelementStart(0, "span", 1);
        ɵɵtwoWayListener("nzVisibleChange", function STFilterComponent_Template_span_nzVisibleChange_0_listener($event) {
          ɵɵrestoreView(_r1);
          ɵɵtwoWayBindingSet(ctx.visible, $event) || (ctx.visible = $event);
          return ɵɵresetView($event);
        });
        ɵɵlistener("click", function STFilterComponent_Template_span_click_0_listener($event) {
          ɵɵrestoreView(_r1);
          return ɵɵresetView(ctx.stopPropagation($event));
        });
        ɵɵelement(1, "nz-icon", 2);
        ɵɵelementEnd();
        ɵɵelementStart(2, "nz-dropdown-menu", null, 0)(4, "div", 3);
        ɵɵconditionalCreate(5, STFilterComponent_Case_5_Template, 2, 2, "div", 4)(6, STFilterComponent_Case_6_Template, 2, 6, "div", 5)(7, STFilterComponent_Case_7_Template, 3, 1, "div", 6)(8, STFilterComponent_Case_8_Template, 2, 6, "div", 7)(9, STFilterComponent_Case_9_Template, 3, 0, "ul", 8);
        ɵɵconditionalCreate(10, STFilterComponent_Conditional_10_Template, 7, 2, "div", 9);
        ɵɵelementEnd()();
      }
      if (rf & 2) {
        let tmp_7_0;
        const filterMenu_r11 = ɵɵreference(3);
        ɵɵclassProp("active", ctx.visible || ctx.f.default);
        ɵɵproperty("nzDropdownMenu", filterMenu_r11)("nzClickHide", false);
        ɵɵtwoWayProperty("nzVisible", ctx.visible);
        ɵɵadvance();
        ɵɵproperty("nzType", ctx.icon.type)("nzTheme", ctx.icon.theme);
        ɵɵadvance(4);
        ɵɵconditional((tmp_7_0 = ctx.f.type) === "keyword" ? 5 : tmp_7_0 === "number" ? 6 : tmp_7_0 === "date" ? 7 : tmp_7_0 === "custom" ? 8 : 9);
        ɵɵadvance(5);
        ɵɵconditional(ctx.f.showOPArea ? 10 : -1);
      }
    },
    dependencies: [FormsModule, DefaultValueAccessor, NgControlStatus, NgModel, NzDropDownModule, NzMenuDirective, NzMenuItemComponent, NzDropDownDirective, NzDropdownMenuComponent, NzIconDirective, NzInputDirective, NzInputNumberComponent, NzRangePickerComponent, NzDatePickerComponent, NgTemplateOutlet, NzMenuModule, NzCheckboxComponent, NzRadioComponent],
    encapsulation: 2,
    changeDetection: 0
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STFilterComponent, [{
    type: Component,
    args: [{
      selector: "st-filter",
      template: `
    <span
      class="ant-table-filter-trigger"
      [class.active]="visible || f.default"
      nz-dropdown
      [nzDropdownMenu]="filterMenu"
      nzTrigger="click"
      [nzClickHide]="false"
      [(nzVisible)]="visible"
      nzOverlayClassName="st__filter-wrap"
      (click)="stopPropagation($event)"
    >
      <nz-icon [nzType]="icon.type" [nzTheme]="icon.theme!" />
    </span>
    <nz-dropdown-menu #filterMenu="nzDropdownMenu">
      <div class="ant-table-filter-dropdown">
        @switch (f.type) {
          @case ('keyword') {
            <div class="st__filter-keyword">
              <input
                type="text"
                nz-input
                [attr.placeholder]="f.placeholder"
                [(ngModel)]="f.menus![0]!.value"
                (ngModelChange)="n.emit($event)"
                (keyup.enter)="confirm()"
              />
            </div>
          }
          @case ('number') {
            <div class="p-sm st__filter-number">
              <nz-input-number
                [(ngModel)]="f.menus![0]!.value"
                (ngModelChange)="n.emit($event)"
                [nzMin]="f.number!.min!"
                [nzMax]="f.number!.max!"
                [nzStep]="f.number!.step!"
                [nzPrecision]="f.number!.precision || null"
                [nzPlaceHolder]="f.placeholder!"
                class="width-100"
              />
            </div>
          }
          @case ('date') {
            <div class="p-sm st__filter-date">
              @if (f.date!.range) {
                <nz-range-picker
                  nzInline
                  [nzMode]="$any(f.date!.mode)"
                  [(ngModel)]="f.menus![0]!.value"
                  (ngModelChange)="n.emit($event)"
                  [nzShowNow]="f.date!.showNow"
                  [nzShowToday]="f.date!.showToday"
                  [nzDisabledDate]="f.date!.disabledDate"
                  [nzDisabledTime]="f.date!.disabledTime"
                />
              } @else {
                <nz-date-picker
                  nzInline
                  [nzMode]="$any(f.date!.mode)"
                  [(ngModel)]="f.menus![0]!.value"
                  (ngModelChange)="n.emit($event)"
                  [nzShowNow]="f.date!.showNow"
                  [nzShowToday]="f.date!.showToday"
                  [nzDisabledDate]="f.date!.disabledDate"
                  [nzDisabledTime]="f.date!.disabledTime"
                />
              }
            </div>
          }
          @case ('custom') {
            <div class="st__filter-custom">
              <ng-template
                [ngTemplateOutlet]="f.custom!"
                [ngTemplateOutletContext]="{ $implicit: f, col: col, handle: this }"
              />
            </div>
          }
          @default {
            <ul nz-menu>
              @for (filter of f.menus; track $index) {
                <li nz-menu-item>
                  @if (f.multiple) {
                    <label nz-checkbox [(ngModel)]="filter.checked" (ngModelChange)="checkboxChange()">
                      {{ filter.text }}
                    </label>
                  } @else {
                    <label nz-radio [ngModel]="filter.checked" (ngModelChange)="radioChange(filter)">
                      {{ filter.text }}
                    </label>
                  }
                </li>
              }
            </ul>
          }
        }
        @if (f.showOPArea) {
          <div class="ant-table-filter-dropdown-btns">
            <a class="ant-table-filter-dropdown-link confirm" (click)="confirm()">
              <span>{{ f.confirmText || locale.filterConfirm }}</span>
            </a>
            <a class="ant-table-filter-dropdown-link clear" (click)="reset()">
              <span>{{ f.clearText || locale.filterReset }}</span>
            </a>
          </div>
        }
      </div>
    </nz-dropdown-menu>
  `,
      host: {
        "[class.ant-table-filter-trigger-container]": `true`,
        "[class.st__filter]": `true`,
        "[class.ant-table-filter-trigger-container-open]": `visible`
      },
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation.None,
      imports: [FormsModule, NzDropDownModule, NzIconDirective, NzInputDirective, NzInputNumberComponent, NzRangePickerComponent, NzDatePickerComponent, NgTemplateOutlet, NzMenuModule, NzCheckboxComponent, NzRadioComponent]
    }]
  }], null, {
    col: [{
      type: Input
    }],
    locale: [{
      type: Input
    }],
    f: [{
      type: Input
    }],
    n: [{
      type: Output
    }],
    handle: [{
      type: Output
    }]
  });
})();
var ST_DEFAULT_CONFIG = {
  pi: 1,
  ps: 10,
  size: "default",
  responsive: true,
  responsiveHideHeaderFooter: false,
  req: {
    type: "page",
    method: "GET",
    allInBody: false,
    lazyLoad: false,
    ignoreParamNull: false,
    reName: {
      pi: "pi",
      ps: "ps",
      skip: "skip",
      limit: "limit"
    }
  },
  res: {
    reName: {
      list: ["list"],
      total: ["total"]
    }
  },
  page: {
    front: true,
    zeroIndexed: false,
    position: "bottom",
    placement: "right",
    show: true,
    showSize: false,
    pageSizes: [10, 20, 30, 40, 50],
    showQuickJumper: false,
    total: true,
    toTop: true,
    toTopOffset: 100,
    itemRender: null,
    simple: false
  },
  modal: {
    paramsName: "record",
    size: "lg",
    exact: true
  },
  drawer: {
    paramsName: "record",
    size: "md",
    footer: true,
    footerHeight: 55
  },
  pop: {
    title: "确认删除吗？",
    trigger: "click",
    placement: "top"
  },
  btnIcon: {
    theme: "outline",
    spin: false
  },
  noIndex: 1,
  expandRowByClick: false,
  expandAccordion: false,
  widthMode: {
    type: "default",
    strictBehavior: "truncate"
  },
  virtualItemSize: 54,
  virtualMaxBufferPx: 200,
  virtualMinBufferPx: 100,
  iifBehavior: "hide",
  loadingDelay: 0,
  safeType: "safeHtml",
  date: {
    format: `yyyy-MM-dd HH:mm`
  },
  yn: {
    truth: true,
    yes: "是",
    mode: "icon"
  },
  maxMultipleButton: {
    text: "更多",
    count: 2
  }
};
var STTdComponent = class _STTdComponent {
  stComp = inject(STComponent, {
    host: true
  });
  router = inject(Router);
  modalHelper = inject(ModalHelper);
  drawerHelper = inject(DrawerHelper);
  c;
  cIdx;
  data;
  i;
  index;
  n = new EventEmitter();
  get routerState() {
    const {
      pi,
      ps,
      total
    } = this.stComp;
    return {
      pi,
      ps,
      total
    };
  }
  report(type) {
    this.n.emit({
      type,
      item: this.i,
      col: this.c
    });
  }
  _checkbox(value) {
    this.i.checked = value;
    this.report("checkbox");
  }
  _radio() {
    this.data.filter((w) => !w.disabled).forEach((i) => i.checked = false);
    this.i.checked = true;
    this.report("radio");
  }
  _link(e) {
    this._stopPropagation(e);
    const res = this.c.click(this.i, this.stComp);
    if (typeof res === "string") {
      this.router.navigateByUrl(res, {
        state: this.routerState
      });
    }
    return false;
  }
  _client() {
    this.c.click?.(this.i, this.stComp);
  }
  _stopPropagation(ev) {
    ev.preventDefault();
    ev.stopPropagation();
  }
  _btn(btn, ev) {
    ev?.stopPropagation();
    const cog = this.stComp.cog;
    let record = this.i;
    if (btn.type === "modal" || btn.type === "static") {
      if (cog.modal.pureRecoard === true) {
        record = this.stComp.pureItem(record);
      }
      const modal = btn.modal;
      const obj = {
        [modal.paramsName]: record
      };
      this.modalHelper[btn.type === "modal" ? "create" : "createStatic"](modal.component, __spreadValues(__spreadValues({}, obj), modal.params && modal.params(record)), deepMergeKey({}, true, cog.modal, modal)).pipe(filter((w) => typeof w !== "undefined")).subscribe((res) => this.btnCallback(record, btn, res));
      return;
    } else if (btn.type === "drawer") {
      if (cog.drawer.pureRecoard === true) {
        record = this.stComp.pureItem(record);
      }
      const drawer = btn.drawer;
      const obj = {
        [drawer.paramsName]: record
      };
      this.drawerHelper.create(drawer.title, drawer.component, __spreadValues(__spreadValues({}, obj), drawer.params && drawer.params(record)), deepMergeKey({}, true, cog.drawer, drawer)).pipe(filter((w) => typeof w !== "undefined")).subscribe((res) => this.btnCallback(record, btn, res));
      return;
    } else if (btn.type === "link") {
      const clickRes = this.btnCallback(record, btn);
      if (typeof clickRes === "string") {
        this.router.navigateByUrl(clickRes, {
          state: this.routerState
        });
      }
      return;
    }
    this.btnCallback(record, btn);
  }
  btnCallback(record, btn, modal) {
    if (!btn.click) return;
    if (typeof btn.click === "string") {
      switch (btn.click) {
        case "load":
          this.stComp.load();
          break;
        case "reload":
          this.stComp.reload();
          break;
      }
    } else {
      return btn.click(record, modal, this.stComp);
    }
  }
  static ɵfac = function STTdComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STTdComponent)();
  };
  static ɵcmp = ɵɵdefineComponent({
    type: _STTdComponent,
    selectors: [["st-td"]],
    inputs: {
      c: "c",
      cIdx: "cIdx",
      data: "data",
      i: "i",
      index: "index"
    },
    outputs: {
      n: "n"
    },
    decls: 8,
    vars: 1,
    consts: [["btnTpl", ""], ["btnItemTpl", ""], ["btnTextTpl", ""], ["btnMenu", "nzDropdownMenu"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["nz-tooltip", "", 3, "nzTooltipTitle", "d-block", "width-100"], ["nz-tooltip", "", 3, "nzTooltipTitle"], ["nz-popconfirm", "", 1, "st__btn-text", 3, "nzPopconfirmTitle", "nzIcon", "nzCondition", "nzCancelText", "nzOkText", "nzOkType", "class"], [1, "st__btn-text", 3, "class"], ["nz-popconfirm", "", 1, "st__btn-text", 3, "nzOnConfirm", "click", "nzPopconfirmTitle", "nzIcon", "nzCondition", "nzCancelText", "nzOkText", "nzOkType"], [1, "st__btn-text", 3, "click"], [3, "innerHTML"], [3, "nzIconfont"], [3, "nzType", "nzTheme", "nzSpin", "nzTwotoneColor"], ["nz-checkbox", "", 3, "nzDisabled", "ngModel"], ["nz-radio", "", 3, "nzDisabled", "ngModel"], [3, "nzColor", "nz-tooltip"], [3, "nzStatus", "nzText", "nz-tooltip"], [3, "value", "options"], ["st-widget-host", "", 3, "record", "column"], ["nz-checkbox", "", 3, "ngModelChange", "nzDisabled", "ngModel"], ["nz-radio", "", 3, "ngModelChange", "nzDisabled", "ngModel"], [3, "click", "innerHTML"], [3, "click", "value", "options"], [3, "innerText"], [3, "st__btn-disabled"], ["nzType", "vertical"], ["nz-dropdown", "", "nzOverlayClassName", "st__btn-sub", 3, "nzDropdownMenu"], ["nzType", "down"], ["nz-menu", ""], ["nz-menu-divider", ""], ["nz-menu-item", "", 3, "st__btn-disabled"], ["nz-menu-item", ""]],
    template: function STTdComponent_Template(rf, ctx) {
      if (rf & 1) {
        ɵɵtemplate(0, STTdComponent_ng_template_0_Template, 2, 1, "ng-template", null, 0, ɵɵtemplateRefExtractor)(2, STTdComponent_ng_template_2_Template, 2, 1, "ng-template", null, 1, ɵɵtemplateRefExtractor)(4, STTdComponent_ng_template_4_Template, 2, 4, "ng-template", null, 2, ɵɵtemplateRefExtractor);
        ɵɵconditionalCreate(6, STTdComponent_Conditional_6_Template, 1, 6, null, 4)(7, STTdComponent_Conditional_7_Template, 11, 2);
      }
      if (rf & 2) {
        ɵɵadvance(6);
        ɵɵconditional(ctx.c.__render ? 6 : 7);
      }
    },
    dependencies: [FormsModule, NgControlStatus, NgModel, NzTooltipDirective, NgTemplateOutlet, NzPopconfirmDirective, NzIconDirective, NzCheckboxComponent, NzRadioComponent, NzTagComponent, NzBadgeComponent, CellComponent, STWidgetHostDirective, NzDropDownModule, NzMenuDirective, NzMenuItemComponent, NzMenuDividerDirective, NzDropDownDirective, NzDropDownADirective, NzDropdownMenuComponent, NzMenuModule, NzDividerComponent],
    encapsulation: 2,
    changeDetection: 0
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STTdComponent, [{
    type: Component,
    args: [{
      selector: "st-td",
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation.None,
      imports: [FormsModule, NzTooltipDirective, NgTemplateOutlet, NzPopconfirmDirective, NzIconDirective, NzCheckboxComponent, NzRadioComponent, NzTagComponent, NzBadgeComponent, CellComponent, STWidgetHostDirective, NzDropDownModule, NzMenuModule, NzDividerComponent],
      template: `<ng-template #btnTpl let-i let-child="child">
  @if (i.tooltip) {
    <span nz-tooltip [nzTooltipTitle]="i.tooltip" [class.d-block]="child" [class.width-100]="child">
      <ng-template [ngTemplateOutlet]="btnItemTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </span>
  } @else {
    <ng-template [ngTemplateOutlet]="btnItemTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
  }
</ng-template>
<ng-template #btnItemTpl let-i>
  @if (i.pop) {
    @let pop = i.pop;
    <a
      nz-popconfirm
      [nzPopconfirmTitle]="pop.title"
      [nzIcon]="pop.icon"
      [nzCondition]="pop.condition(i)"
      [nzCancelText]="pop.cancelText"
      [nzOkText]="pop.okText"
      [nzOkType]="pop.okType"
      (nzOnConfirm)="_btn(i)"
      class="st__btn-text"
      [class]="i._className"
      (click)="_stopPropagation($event)"
    >
      <ng-template [ngTemplateOutlet]="btnTextTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </a>
  } @else {
    <a (click)="_btn(i, $event)" class="st__btn-text" [class]="i._className">
      <ng-template [ngTemplateOutlet]="btnTextTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </a>
  }
</ng-template>
<ng-template #btnTextTpl let-i>
  @if (i._icon) {
    @let icon = i._icon;
    @if (icon.iconfont) {
      <nz-icon [nzIconfont]="icon.iconfont" />
    } @else {
      <nz-icon [nzType]="icon.type" [nzTheme]="icon.theme" [nzSpin]="icon.spin" [nzTwotoneColor]="icon.twoToneColor" />
    }
  }
  <span [innerHTML]="i._text" [class.pl-xs]="i._icon"></span>
</ng-template>
@if (c.__render) {
  <ng-template [ngTemplateOutlet]="c.__render!" [ngTemplateOutletContext]="{ $implicit: i, index: index, column: c }" />
} @else {
  @let col = i._values[cIdx];
  @switch (c.type) {
    @case ('checkbox') {
      <label nz-checkbox [nzDisabled]="i.disabled" [ngModel]="i.checked" (ngModelChange)="_checkbox($event)"></label>
    }
    @case ('radio') {
      <label nz-radio [nzDisabled]="i.disabled" [ngModel]="i.checked" (ngModelChange)="_radio()"></label>
    }
    @case ('link') {
      <a (click)="_link($event)" [innerHTML]="col._text" [attr.title]="col.text"></a>
    }
    @case ('tag') {
      <nz-tag [nzColor]="col.color" [nz-tooltip]="col.tooltip">
        <span [innerHTML]="col._text"></span>
      </nz-tag>
    }
    @case ('badge') {
      <nz-badge [nzStatus]="col.color" [nzText]="col.text" [nz-tooltip]="col.tooltip" />
    }
    @case ('cell') {
      <cell [value]="col.text" [options]="col.cell ?? c.cell" (click)="_client()" />
    }
    @case ('widget') {
      <ng-template st-widget-host [record]="i" [column]="c" />
    }
    @default {
      @if (c.safeType === 'text') {
        <span [innerText]="col._text" [attr.title]="c._isTruncate ? col.text : null"></span>
      } @else {
        <span [innerHTML]="col._text" [attr.title]="c._isTruncate ? col.text : null"></span>
      }
    }
  }
  @for (btn of col.buttons; track $index) {
    @if (btn.children!.length > 0) {
      <a nz-dropdown [nzDropdownMenu]="btnMenu" nzOverlayClassName="st__btn-sub">
        <span [innerHTML]="btn._text"></span>
        <nz-icon nzType="down" />
      </a>
      <nz-dropdown-menu #btnMenu="nzDropdownMenu">
        <ul nz-menu>
          @for (subBtn of btn.children; track $index) {
            @if (subBtn.type === 'divider') {
              <li nz-menu-divider></li>
            } @else {
              <li nz-menu-item [class.st__btn-disabled]="subBtn._disabled">
                <ng-template
                  [ngTemplateOutlet]="btnTpl"
                  [ngTemplateOutletContext]="{ $implicit: subBtn, child: true }"
                />
              </li>
            }
          }
        </ul>
      </nz-dropdown-menu>
    } @else {
      <span [class.st__btn-disabled]="btn._disabled">
        <ng-template [ngTemplateOutlet]="btnTpl" [ngTemplateOutletContext]="{ $implicit: btn, child: false }" />
      </span>
    }
    @if (!$last) {
      <nz-divider nzType="vertical" />
    }
  }
}
`
    }]
  }], null, {
    c: [{
      type: Input
    }],
    cIdx: [{
      type: Input
    }],
    data: [{
      type: Input
    }],
    i: [{
      type: Input
    }],
    index: [{
      type: Input
    }],
    n: [{
      type: Output
    }]
  });
})();
var STComponent = class _STComponent {
  i18nSrv = inject(ALAIN_I18N_TOKEN);
  el = inject(ElementRef).nativeElement;
  cdr = inject(ChangeDetectorRef);
  doc = inject(DOCUMENT);
  exportSrv = inject(STExport);
  columnSource = inject(STColumnSource);
  dataSource = inject(STDataSource);
  cms = inject(NzContextMenuService, {
    optional: true
  });
  destroy$ = inject(DestroyRef);
  cogSrv = inject(AlainConfigService);
  totalTpl = ``;
  inied = false;
  cog;
  _req;
  _res;
  _page;
  _widthMode;
  customWidthConfig = false;
  _widthConfig = [];
  locale = inject(DelonLocaleService).valueSignal("st");
  _loading = false;
  _data = [];
  _statistical = {};
  _isPagination = true;
  _allChecked = false;
  _allCheckedDisabled = false;
  _indeterminate = false;
  _headers = [];
  _columns = [];
  contextmenuList = [];
  orgTable;
  contextmenuTpl;
  get req() {
    return this._req;
  }
  set req(value) {
    this._req = deepMergeKey({}, true, this.cog.req, value);
  }
  /** 返回体配置 */
  get res() {
    return this._res;
  }
  set res(value) {
    const item = this._res = deepMergeKey({}, true, this.cog.res, value);
    const reName = item.reName;
    if (typeof reName !== "function") {
      if (!Array.isArray(reName.list)) reName.list = reName.list.split(".");
      if (!Array.isArray(reName.total)) reName.total = reName.total.split(".");
    }
    this._res = item;
  }
  get page() {
    return this._page;
  }
  set page(value) {
    this._page = __spreadValues(__spreadValues({}, this.cog.page), value);
    this.updateTotalTpl();
  }
  data;
  delay = false;
  columns;
  contextmenu;
  ps = 10;
  pi = 1;
  total = 0;
  loading = null;
  loadingDelay = 0;
  loadingIndicator = null;
  bordered = false;
  size;
  scroll = {
    x: null,
    y: null
  };
  drag = input(null, ...ngDevMode ? [{
    debugName: "drag",
    transform: (v) => {
      const obj = typeof v === "object" ? v : booleanAttribute(v) ? {} : null;
      if (obj == null) return null;
      if (typeof obj.dropped !== "function") {
        obj.dropped = (e) => {
          moveItemInArray(this._data, e.previousIndex, e.currentIndex);
          this.cd();
        };
      }
      return obj;
    }
  }] : [{
    transform: (v) => {
      const obj = typeof v === "object" ? v : booleanAttribute(v) ? {} : null;
      if (obj == null) return null;
      if (typeof obj.dropped !== "function") {
        obj.dropped = (e) => {
          moveItemInArray(this._data, e.previousIndex, e.currentIndex);
          this.cd();
        };
      }
      return obj;
    }
  }]);
  singleSort;
  _multiSort;
  get multiSort() {
    return this._multiSort;
  }
  set multiSort(value) {
    if (typeof value === "boolean" && !booleanAttribute(value) || typeof value === "object" && Object.keys(value).length === 0) {
      this._multiSort = void 0;
      return;
    }
    this._multiSort = __spreadValues({}, typeof value === "object" ? value : {});
  }
  rowClassName;
  clickRowClassName;
  set widthMode(value) {
    this._widthMode = __spreadValues(__spreadValues({}, this.cog.widthMode), value);
  }
  get widthMode() {
    return this._widthMode;
  }
  set widthConfig(val) {
    this._widthConfig = val;
    this.customWidthConfig = val && val.length > 0;
  }
  _resizable;
  set resizable(val) {
    this._resizable = typeof val === "object" ? val : {
      disabled: !booleanAttribute(val)
    };
  }
  header;
  showHeader = true;
  footer;
  bodyHeader;
  body;
  expandRowByClick = false;
  expandAccordion = false;
  expand = null;
  expandIcon = null;
  noResult;
  responsive = true;
  responsiveHideHeaderFooter;
  error = new EventEmitter();
  change = new EventEmitter();
  virtualScroll = false;
  virtualItemSize = 54;
  virtualMaxBufferPx = 200;
  virtualMinBufferPx = 100;
  customRequest;
  virtualForTrackBy = (index) => index;
  trackBy = (_, item) => item;
  /**
   * Get the number of the current page
   */
  get count() {
    return this._data.length;
  }
  /**
   * Get the data of the current page
   */
  get list() {
    return this._data;
  }
  get noColumns() {
    return this.columns == null;
  }
  constructor() {
    effect(() => {
      this.locale();
      if (this._columns.length > 0) {
        this.updateTotalTpl();
        this.cd();
      }
    });
    this.i18nSrv.change.pipe(takeUntilDestroyed(), filter(() => this._columns.length > 0)).subscribe(() => this.refreshColumns());
    this.setCog(this.cogSrv.merge("st", ST_DEFAULT_CONFIG));
  }
  setCog(cog) {
    const copyMultiSort = __spreadValues({}, cog.multiSort);
    delete cog.multiSort;
    this.cog = cog;
    Object.assign(this, cog);
    if (copyMultiSort.global !== false) {
      this.multiSort = copyMultiSort;
    }
    this.columnSource.setCog(cog);
    this.dataSource.setCog(cog);
  }
  cd() {
    this.cdr.detectChanges();
    return this;
  }
  refreshData() {
    this._data = [...this._data];
    return this.cd();
  }
  renderTotal(total, range) {
    return this.totalTpl ? this.totalTpl.replace("{{total}}", total).replace("{{range[0]}}", range[0]).replace("{{range[1]}}", range[1]) : "";
  }
  changeEmit(type, data) {
    const res = {
      type,
      pi: this.pi,
      ps: this.ps,
      total: this.total
    };
    if (data != null) {
      res[type] = data;
    }
    this.change.emit(res);
  }
  // #region data
  /**
   * 获取过滤后所有数据
   * - 本地数据：包含排序、过滤后不分页数据
   * - 远程数据：不传递 `pi`、`ps` 两个参数
   */
  get filteredData() {
    return this.loadData({
      paginator: false
    }).pipe(map((res) => res.list));
  }
  updateTotalTpl() {
    const {
      total
    } = this.page;
    if (typeof total === "string" && total.length) {
      this.totalTpl = total;
    } else if (booleanAttribute(total)) {
      this.totalTpl = this.locale().total;
    } else {
      this.totalTpl = "";
    }
  }
  setLoading(val) {
    if (this.loading == null) {
      this._loading = val;
      this.cdr.detectChanges();
    }
  }
  loadData(options) {
    const {
      pi,
      ps,
      data,
      req,
      res,
      page,
      total,
      singleSort,
      multiSort,
      rowClassName,
      _columns,
      _headers
    } = this;
    return this.dataSource.process(__spreadValues({
      pi,
      ps,
      total,
      data,
      req,
      res,
      page,
      columns: _columns,
      headers: _headers,
      singleSort,
      multiSort,
      rowClassName,
      paginator: true,
      customRequest: this.customRequest || this.cog.customRequest
    }, options)).pipe(takeUntilDestroyed(this.destroy$));
  }
  loadPageData() {
    this.setLoading(true);
    return this.loadData().pipe(finalize(() => this.setLoading(false)), catchError((error) => {
      this.error.emit({
        type: "req",
        error
      });
      return throwError(() => error);
    }), map((result) => {
      const undefinedString = "undefined";
      if (typeof result.pi !== undefinedString) {
        this.pi = result.pi;
      }
      if (typeof result.ps !== undefinedString) {
        this.ps = result.ps;
      }
      if (typeof result.total !== undefinedString) {
        this.total = result.total;
      }
      if (typeof result.pageShow !== undefinedString) {
        this._isPagination = result.pageShow;
      }
      this._data = result.list ?? [];
      this._statistical = result.statistical;
      if (this.cdkVirtualScrollViewport != null) {
        Promise.resolve().then(() => this.cdkVirtualScrollViewport?.checkViewportSize());
      }
      this._refCheck();
      this.changeEmit("loaded", result.list);
      return this;
    }));
  }
  /** 清空所有数据 */
  clear(cleanStatus = true) {
    if (cleanStatus) {
      this.clearStatus();
    }
    this._data = [];
    return this.cd();
  }
  /** 清空所有状态 */
  clearStatus() {
    return this.clearCheck().clearRadio().clearFilter().clearSort();
  }
  /**
   * 根据页码重新加载数据
   *
   * @param pi 指定当前页码，默认：`1`
   * @param extraParams 重新指定 `extraParams` 值
   * @param options 选项
   */
  load(pi = 1, extraParams, options) {
    if (pi !== -1) this.pi = pi;
    if (typeof extraParams !== "undefined") {
      this.req.params = options && options.merge ? __spreadValues(__spreadValues({}, this.req.params), extraParams) : extraParams;
    }
    this._change("pi", options);
    return this;
  }
  /**
   * 重新刷新当前页
   *
   * @param extraParams 重新指定 `extraParams` 值
   */
  reload(extraParams, options) {
    return this.load(-1, extraParams, options);
  }
  /**
   * 重置且重新设置 `pi` 为 `1`，包含以下值：
   * - `check` 数据
   * - `radio` 数据
   * - `sort` 数据
   * - `fileter` 数据
   *
   * @param extraParams 重新指定 `extraParams` 值
   */
  reset(extraParams, options) {
    this.clearStatus().load(1, extraParams, options);
    return this;
  }
  _toTop(enforce) {
    if (!(enforce == null ? this.page.toTop : enforce)) return;
    const el = this.el;
    el.scrollIntoView();
    this.doc.documentElement.scrollTop -= this.page.toTopOffset;
    if (this.scroll) {
      if (this.cdkVirtualScrollViewport) {
        this.cdkVirtualScrollViewport.scrollTo({
          top: 0,
          left: 0
        });
      } else {
        el.querySelector(".ant-table-body, .ant-table-content")?.scrollTo(0, 0);
      }
    }
  }
  _change(type, options) {
    if (type === "pi" || type === "ps" && this.pi <= Math.ceil(this.total / this.ps)) {
      this.loadPageData().subscribe(() => this._toTop(options?.toTop));
    }
    this.changeEmit(type);
  }
  closeOtherExpand(item) {
    if (this.expandAccordion === false) return;
    this._data.filter((i) => i !== item).forEach((i) => i.expand = false);
  }
  _rowClick(e, item, index, dbl) {
    const el = e.target;
    if (el.nodeName === "INPUT") return;
    const {
      expand,
      expandRowByClick
    } = this;
    if (!!expand && item.showExpand !== false && expandRowByClick) {
      item.expand = !item.expand;
      this.closeOtherExpand(item);
      this.changeEmit("expand", item);
      return;
    }
    const data = {
      e,
      item,
      index
    };
    if (dbl) {
      this.changeEmit("dblClick", data);
    } else {
      this._clickRowClassName(el, item, index);
      this.changeEmit("click", data);
    }
  }
  _clickRowClassName(el, item, index) {
    const cr = this.clickRowClassName;
    if (cr == null) return;
    const config = __spreadValues({
      exclusive: false
    }, typeof cr === "string" ? {
      fn: () => cr
    } : cr);
    const className = config.fn(item, index);
    const trEl = el.closest("tr");
    if (config.exclusive) {
      trEl.parentElement.querySelectorAll("tr").forEach((a) => a.classList.remove(className));
    }
    if (trEl.classList.contains(className)) {
      trEl.classList.remove(className);
    } else {
      trEl.classList.add(className);
    }
  }
  _expandChange(item, expand) {
    item.expand = expand;
    this.closeOtherExpand(item);
    this.changeEmit("expand", item);
  }
  _stopPropagation(ev) {
    ev.stopPropagation();
  }
  _refColAndData() {
    this._columns.forEach((c, cIdx) => {
      this._data.forEach((i, idx) => {
        const values = i._values;
        if (c.type === "no") {
          const text = `${this.dataSource.getNoIndex(i, c, idx)}`;
          values[cIdx] = {
            text,
            _text: text,
            org: idx,
            safeType: "text"
          };
        }
        values[cIdx].props = this.dataSource.getCell(c, i, idx);
      });
    });
    return this.refreshData();
  }
  /**
   * Add a rows in the table, like this:
   *
   * ```
   * this.st.addRow(stDataItem)
   * ```
   *
   * **TIPS:** Don't change the `total` value, it is recommended to use the `reload` method if needed
   */
  addRow(data, options) {
    if (!Array.isArray(data)) data = [data];
    this._data.splice(options?.index ?? 0, 0, ...data);
    return this.optimizeData()._refColAndData();
  }
  /**
   * Remove a row in the table, like this:
   *
   * ```
   * this.st.removeRow(0)
   * this.st.removeRow(stDataItem)
   * ```
   *
   * **TIPS:** Don't change the `total` value, it is recommended to use the `reload` method if needed
   */
  removeRow(data) {
    if (typeof data === "number") {
      this._data.splice(data, 1);
    } else {
      if (!Array.isArray(data)) {
        data = [data];
      }
      const curData = this._data;
      for (let i = curData.length; i >= 0; i--) {
        if (data.indexOf(curData[i]) !== -1) {
          curData.splice(i, 1);
        }
      }
    }
    return this._refCheck()._refColAndData();
  }
  /**
   * Sets the row value for the `index` in the table, like this:
   *
   * - `optinos.refreshSchema` Whether to refresh of st schemas
   * - `optinos.emitReload` Whether to trigger a reload http request when data is url
   *
   * ```
   * this.st.setRow(0, { price: 100 })
   * this.st.setRow(0, { price: 100, name: 'asdf' })
   * this.st.setRow(item, { price: 100 })
   * ```
   */
  setRow(index, item, options) {
    options = __spreadValues({
      refreshSchema: false,
      emitReload: false
    }, options);
    if (typeof index !== "number") {
      index = this._data.indexOf(index);
    }
    this._data[index] = deepMergeKey(this._data[index], options?.arrayProcessMethod ?? false, item);
    this.optimizeData();
    if (options.refreshSchema) {
      this.resetColumns({
        emitReload: options.emitReload
      });
      return this;
    }
    return this.refreshData();
  }
  // #endregion
  // #region sort
  sort(col, value) {
    if (this.multiSort) {
      col._sort.default = value;
      col._sort.tick = this.dataSource.nextSortTick;
    } else {
      this._headers.forEach((row) => {
        row.forEach((item) => item.column._sort.default = item.column === col ? value : null);
      });
    }
    this.cdr.detectChanges();
    this.loadPageData().subscribe(() => {
      const res = {
        value,
        map: this.dataSource.getReqSortMap(this.singleSort, this.multiSort, this._headers),
        column: col
      };
      this.changeEmit("sort", res);
    });
  }
  clearSort() {
    this._headers.forEach((row) => {
      row.forEach((item) => item.column._sort.default = null);
    });
    return this;
  }
  // #endregion
  // #region filter
  _handleFilter(col, confirm) {
    if (!confirm) {
      this.columnSource.cleanFilter(col);
    }
    this.pi = 1;
    this.columnSource.updateDefault(col.filter);
    this.loadPageData().subscribe(() => this.changeEmit("filter", col));
  }
  handleFilterNotify(value) {
    this.changeEmit("filterChange", value);
  }
  clearFilter() {
    this._columns.filter((w) => w.filter && w.filter.default === true).forEach((col) => this.columnSource.cleanFilter(col));
    return this;
  }
  // #endregion
  // #region checkbox
  /** 清除所有 `checkbox` */
  clearCheck() {
    return this.checkAll(false);
  }
  _refCheck() {
    const validData = this._data.filter((w) => !w.disabled);
    const checkedList = validData.filter((w) => w.checked === true);
    this._allChecked = checkedList.length > 0 && checkedList.length === validData.length;
    const allUnChecked = validData.every((value) => !value.checked);
    this._indeterminate = !this._allChecked && !allUnChecked;
    this._allCheckedDisabled = this._data.length === this._data.filter((w) => w.disabled).length;
    return this.cd();
  }
  checkAll(checked) {
    checked = typeof checked === "undefined" ? this._allChecked : checked;
    this._data.filter((w) => !w.disabled).forEach((i) => i.checked = checked);
    return this._refCheck()._checkNotify().refreshData();
  }
  _rowSelection(row) {
    row.select(this._data);
    return this._refCheck()._checkNotify();
  }
  _checkNotify() {
    const res = this._data.filter((w) => !w.disabled && w.checked === true);
    this.changeEmit("checkbox", res);
    return this;
  }
  // #endregion
  // #region radio
  /** 清除所有 `radio` */
  clearRadio() {
    this._data.filter((w) => w.checked).forEach((item) => item.checked = false);
    this.changeEmit("radio", null);
    return this.refreshData();
  }
  // #endregion
  _handleTd(ev) {
    switch (ev.type) {
      case "checkbox":
        this._refCheck()._checkNotify();
        break;
      case "radio":
        this.changeEmit("radio", ev.item);
        this.refreshData();
        break;
    }
  }
  // #region export
  /**
   * 导出当前页，确保已经注册 `XlsxModule`
   *
   * @param newData 重新指定数据；若为 `true` 表示使用 `filteredData` 数据
   * @param opt 额外参数
   */
  export(newData, opt) {
    const data = Array.isArray(newData) ? this.dataSource.optimizeData({
      columns: this._columns,
      result: newData
    }) : this._data;
    (newData === true ? this.filteredData : of(data)).subscribe((res) => this.exportSrv.export(__spreadProps(__spreadValues({
      columens: this._columns
    }, opt), {
      data: res
    })));
  }
  // #endregion
  // #region resizable
  colResize({
    width
  }, column) {
    column.width = `${width}px`;
    this.changeEmit("resize", column);
  }
  // #endregion
  // #region contextmenu
  onContextmenu(event) {
    if (!this.contextmenu) {
      return;
    }
    event.preventDefault();
    event.stopPropagation();
    const colEl = event.target.closest("[data-col-index]");
    if (!colEl) {
      return;
    }
    const colIndex = Number(colEl.dataset.colIndex);
    const rowIndex = Number(colEl.closest("tr").dataset.index);
    const isTitle = isNaN(rowIndex);
    const obs$ = this.contextmenu({
      event,
      type: isTitle ? "head" : "body",
      rowIndex: isTitle ? null : rowIndex,
      colIndex,
      data: isTitle ? null : this.list[rowIndex],
      column: this._columns[colIndex]
    });
    (isObservable(obs$) ? obs$ : of(obs$)).pipe(takeUntilDestroyed(this.destroy$), filter((res) => res.length > 0)).subscribe((res) => {
      this.contextmenuList = res.map((i) => {
        if (!Array.isArray(i.children)) {
          i.children = [];
        }
        return i;
      });
      this.cdr.detectChanges();
      this.cms?.create(event, this.contextmenuTpl);
    });
  }
  // #endregion
  get cdkVirtualScrollViewport() {
    return this.orgTable?.cdkVirtualScrollViewport;
  }
  _resetColumns(options) {
    options = __spreadValues({
      emitReload: true,
      preClearData: false
    }, options);
    if (typeof options.columns !== "undefined") {
      this.columns = options.columns;
    }
    if (typeof options.pi !== "undefined") {
      this.pi = options.pi;
    }
    if (typeof options.ps !== "undefined") {
      this.ps = options.ps;
    }
    if (options.emitReload) {
      options.preClearData = true;
    }
    if (options.preClearData) {
      this._data = [];
    }
    this.refreshColumns();
    if (options.emitReload) {
      return this.loadPageData();
    } else {
      this.cd();
      return of(this);
    }
  }
  resetColumns(options) {
    return lastValueFrom(this._resetColumns(options));
  }
  refreshColumns() {
    const res = this.columnSource.process(this.columns, {
      widthMode: this.widthMode,
      resizable: this._resizable,
      safeType: this.cog.safeType,
      expand: this.expand != null
    });
    this._columns = res.columns;
    this._headers = res.headers;
    if (this.customWidthConfig === false && res.headerWidths != null) {
      this._widthConfig = res.headerWidths;
    }
    return this;
  }
  optimizeData() {
    this._data = this.dataSource.optimizeData({
      columns: this._columns,
      result: this._data,
      rowClassName: this.rowClassName
    });
    return this;
  }
  /**
   * Return pure data, `st` internally maintains a set of data for caching, this part of data may affect the backend
   *
   * 返回纯净数据，`st` 内部会维护一组用于缓存的数据，这部分数据可能会影响后端
   */
  pureItem(itemOrIndex) {
    if (typeof itemOrIndex === "number") {
      itemOrIndex = this._data[itemOrIndex];
    }
    if (!itemOrIndex) {
      return null;
    }
    const copyItem = deepCopy(itemOrIndex);
    ["_values", "_rowClassName"].forEach((key) => delete copyItem[key]);
    return copyItem;
  }
  ngAfterViewInit() {
    if (!this.delay) this.refreshColumns();
    if (!this.req.lazyLoad) this.loadPageData().subscribe();
    this.inied = true;
  }
  ngOnChanges(changes) {
    if (changes.loading) {
      this._loading = changes.loading.currentValue;
    }
    if (!this.inied) return;
    if (changes.columns) {
      this.refreshColumns().optimizeData();
    }
    if (changes.data) {
      this.loadPageData().subscribe();
    }
  }
  static ɵfac = function STComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STComponent)();
  };
  static ɵcmp = ɵɵdefineComponent({
    type: _STComponent,
    selectors: [["st"]],
    viewQuery: function STComponent_Query(rf, ctx) {
      if (rf & 1) {
        ɵɵviewQuery(_c5, 5);
        ɵɵviewQuery(_c6, 5);
      }
      if (rf & 2) {
        let _t;
        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.orgTable = _t.first);
        ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.contextmenuTpl = _t.first);
      }
    },
    hostVars: 14,
    hostBindings: function STComponent_HostBindings(rf, ctx) {
      if (rf & 2) {
        ɵɵclassProp("st", true)("st__p-left", ctx.page.placement === "left")("st__p-center", ctx.page.placement === "center")("st__width-strict", ctx.widthMode.type === "strict")("st__row-class", ctx.rowClassName)("ant-table-rep", ctx.responsive)("ant-table-rep__hide-header-footer", ctx.responsiveHideHeaderFooter);
      }
    },
    inputs: {
      req: "req",
      res: "res",
      page: "page",
      data: "data",
      delay: "delay",
      columns: "columns",
      contextmenu: "contextmenu",
      ps: [2, "ps", "ps", (v) => numberAttribute(v, 10)],
      pi: [2, "pi", "pi", (v) => numberAttribute(v, 1)],
      total: [2, "total", "total", (v) => numberAttribute(v, 0)],
      loading: "loading",
      loadingDelay: [2, "loadingDelay", "loadingDelay", numberAttribute],
      loadingIndicator: "loadingIndicator",
      bordered: [2, "bordered", "bordered", booleanAttribute],
      size: "size",
      scroll: "scroll",
      drag: [1, "drag"],
      singleSort: "singleSort",
      multiSort: "multiSort",
      rowClassName: "rowClassName",
      clickRowClassName: "clickRowClassName",
      widthMode: "widthMode",
      widthConfig: "widthConfig",
      resizable: "resizable",
      header: "header",
      showHeader: [2, "showHeader", "showHeader", booleanAttribute],
      footer: "footer",
      bodyHeader: "bodyHeader",
      body: "body",
      expandRowByClick: [2, "expandRowByClick", "expandRowByClick", booleanAttribute],
      expandAccordion: [2, "expandAccordion", "expandAccordion", booleanAttribute],
      expand: "expand",
      expandIcon: "expandIcon",
      noResult: "noResult",
      responsive: [2, "responsive", "responsive", booleanAttribute],
      responsiveHideHeaderFooter: [2, "responsiveHideHeaderFooter", "responsiveHideHeaderFooter", booleanAttribute],
      virtualScroll: [2, "virtualScroll", "virtualScroll", booleanAttribute],
      virtualItemSize: [2, "virtualItemSize", "virtualItemSize", numberAttribute],
      virtualMaxBufferPx: [2, "virtualMaxBufferPx", "virtualMaxBufferPx", numberAttribute],
      virtualMinBufferPx: [2, "virtualMinBufferPx", "virtualMinBufferPx", numberAttribute],
      customRequest: "customRequest",
      virtualForTrackBy: "virtualForTrackBy",
      trackBy: "trackBy"
    },
    outputs: {
      error: "error",
      change: "change"
    },
    exportAs: ["st"],
    features: [ɵɵProvidersFeature([STDataSource, STRowSource, STColumnSource, STExport, DatePipe, YNPipe, DecimalPipe]), ɵɵNgOnChangesFeature],
    decls: 21,
    vars: 35,
    consts: [["titleTpl", ""], ["chkAllTpl", ""], ["table", ""], ["bodyTpl", ""], ["totalTpl", ""], ["contextmenuTpl", "nzDropdownMenu"], ["filterTpl", ""], ["selectionMenu", "nzDropdownMenu"], ["wrapExpandIcon", ""], [3, "nzPageIndexChange", "nzPageSizeChange", "contextmenu", "nzData", "nzPageIndex", "nzPageSize", "nzTotal", "nzShowPagination", "nzFrontPagination", "nzBordered", "nzSize", "nzLoading", "nzLoadingDelay", "nzLoadingIndicator", "nzTitle", "nzFooter", "nzScroll", "nzVirtualItemSize", "nzVirtualMaxBufferPx", "nzVirtualMinBufferPx", "nzVirtualForTrackBy", "nzNoResult", "nzPageSizeOptions", "nzShowQuickJumper", "nzShowSizeChanger", "nzPaginationPosition", "nzPaginationType", "nzItemRender", "nzSimple", "nzShowTotal", "nzWidthConfig"], ["cdkDropList", "", 1, "st__body", 3, "cdkDropListDropped", "cdkDropListEntered", "cdkDropListExited", "cdkDropListSorted", "cdkDropListDisabled"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["nz-virtual-scroll", ""], ["nz-menu", "", 1, "st__contextmenu"], [3, "innerHTML"], [1, "st__head-optional", 3, "innerHTML"], ["nz-tooltip", "", "nzType", "question-circle", 1, "st__head-tip", 3, "nzTooltipTitle"], ["nz-checkbox", "", 1, "st__checkall", 3, "ngModelChange", "nzDisabled", "ngModel", "nzIndeterminate"], ["nzWidth", "50px", 3, "rowSpan", "nzLeft"], ["nz-resizable", "", 3, "colSpan", "rowSpan", "nzWidth", "nzLeft", "nzRight", "class", "nzShowSort", "nzSortDirections", "nzSortOrder", "nzCustomFilter", "st__has-filter", "nzDisabled", "nzMaxWidth", "nzMinWidth", "nzBounds", "nzPreview"], ["nz-resizable", "", 3, "nzSortOrderChange", "nzResizeEnd", "colSpan", "rowSpan", "nzWidth", "nzLeft", "nzRight", "nzShowSort", "nzSortDirections", "nzSortOrder", "nzCustomFilter", "nzDisabled", "nzMaxWidth", "nzMinWidth", "nzBounds", "nzPreview"], ["nzDirection", "right"], ["nzDirection", "right", 3, "click"], [1, "ant-table-selection"], [1, "ant-table-selection-extra"], ["nz-menu", "", 1, "ant-table-selection-menu"], ["nz-menu-item", "", 3, "innerHTML"], ["nz-dropdown", "", "nzPlacement", "bottomLeft", 1, "ant-table-selection-down", "st__checkall-selection", 3, "nzDropdownMenu"], ["nzType", "down"], ["nz-menu-item", "", 3, "click", "innerHTML"], [4, "ngTemplateOutlet"], ["nz-th-extra", "", 3, "n", "handle", "col", "f", "locale"], ["cdkDrag", "", 3, "click", "dblclick"], [3, "nzExpand"], ["nzWidth", "50px", 3, "nzExpandChange", "click", "nzShowExpand", "nzExpand", "nzExpandIcon", "nzLeft"], [3, "click"], [3, "nzLeft", "nzRight", "class"], [3, "nzLeft", "nzRight"], [1, "ant-table-rep__title"], [3, "n", "data", "i", "index", "c", "cIdx"], ["nz-submenu", "", 3, "nzTitle"]],
    template: function STComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = ɵɵgetCurrentView();
        ɵɵtemplate(0, STComponent_ng_template_0_Template, 3, 3, "ng-template", null, 0, ɵɵtemplateRefExtractor)(2, STComponent_ng_template_2_Template, 1, 5, "ng-template", null, 1, ɵɵtemplateRefExtractor);
        ɵɵelementStart(4, "nz-table", 9, 2);
        ɵɵtwoWayListener("nzPageIndexChange", function STComponent_Template_nz_table_nzPageIndexChange_4_listener($event) {
          ɵɵrestoreView(_r1);
          ɵɵtwoWayBindingSet(ctx.pi, $event) || (ctx.pi = $event);
          return ɵɵresetView($event);
        });
        ɵɵlistener("nzPageIndexChange", function STComponent_Template_nz_table_nzPageIndexChange_4_listener() {
          ɵɵrestoreView(_r1);
          return ɵɵresetView(ctx._change("pi"));
        });
        ɵɵtwoWayListener("nzPageSizeChange", function STComponent_Template_nz_table_nzPageSizeChange_4_listener($event) {
          ɵɵrestoreView(_r1);
          ɵɵtwoWayBindingSet(ctx.ps, $event) || (ctx.ps = $event);
          return ɵɵresetView($event);
        });
        ɵɵlistener("nzPageSizeChange", function STComponent_Template_nz_table_nzPageSizeChange_4_listener() {
          ɵɵrestoreView(_r1);
          return ɵɵresetView(ctx._change("ps"));
        })("contextmenu", function STComponent_Template_nz_table_contextmenu_4_listener($event) {
          ɵɵrestoreView(_r1);
          return ɵɵresetView(ctx.onContextmenu($event));
        });
        ɵɵconditionalCreate(6, STComponent_Conditional_6_Template, 3, 0, "thead");
        ɵɵelementStart(7, "tbody", 10);
        ɵɵlistener("cdkDropListDropped", function STComponent_Template_tbody_cdkDropListDropped_7_listener($event) {
          let tmp_7_0;
          ɵɵrestoreView(_r1);
          return ɵɵresetView((tmp_7_0 = ctx.drag()) == null ? null : tmp_7_0.dropped == null ? null : tmp_7_0.dropped($event));
        })("cdkDropListEntered", function STComponent_Template_tbody_cdkDropListEntered_7_listener($event) {
          let tmp_7_0;
          ɵɵrestoreView(_r1);
          return ɵɵresetView((tmp_7_0 = ctx.drag()) == null ? null : tmp_7_0.entered == null ? null : tmp_7_0.entered($event));
        })("cdkDropListExited", function STComponent_Template_tbody_cdkDropListExited_7_listener($event) {
          let tmp_7_0;
          ɵɵrestoreView(_r1);
          return ɵɵresetView((tmp_7_0 = ctx.drag()) == null ? null : tmp_7_0.exited == null ? null : tmp_7_0.exited($event));
        })("cdkDropListSorted", function STComponent_Template_tbody_cdkDropListSorted_7_listener($event) {
          let tmp_7_0;
          ɵɵrestoreView(_r1);
          return ɵɵresetView((tmp_7_0 = ctx.drag()) == null ? null : tmp_7_0.sorted == null ? null : tmp_7_0.sorted($event));
        });
        ɵɵconditionalCreate(8, STComponent_Conditional_8_Template, 1, 4, null, 11);
        ɵɵtemplate(9, STComponent_ng_template_9_Template, 6, 10, "ng-template", null, 3, ɵɵtemplateRefExtractor);
        ɵɵconditionalCreate(11, STComponent_Conditional_11_Template, 1, 0, null, 12)(12, STComponent_Conditional_12_Template, 2, 0);
        ɵɵconditionalCreate(13, STComponent_Conditional_13_Template, 1, 4, null, 11);
        ɵɵelementEnd();
        ɵɵtemplate(14, STComponent_ng_template_14_Template, 1, 1, "ng-template", null, 4, ɵɵtemplateRefExtractor);
        ɵɵelementEnd();
        ɵɵelementStart(16, "nz-dropdown-menu", null, 5)(18, "ul", 13);
        ɵɵrepeaterCreate(19, STComponent_For_20_Template, 2, 1, null, null, ɵɵrepeaterTrackByIndex);
        ɵɵelementEnd()();
      }
      if (rf & 2) {
        const totalTpl_r49 = ɵɵreference(15);
        ɵɵadvance(4);
        ɵɵclassProp("st__no-column", ctx.noColumns);
        ɵɵproperty("nzData", ctx._data);
        ɵɵtwoWayProperty("nzPageIndex", ctx.pi)("nzPageSize", ctx.ps);
        ɵɵproperty("nzTotal", ctx.total)("nzShowPagination", ctx._isPagination)("nzFrontPagination", false)("nzBordered", ctx.bordered)("nzSize", ctx.size)("nzLoading", ctx.noColumns || ctx._loading)("nzLoadingDelay", ctx.loadingDelay)("nzLoadingIndicator", ctx.loadingIndicator)("nzTitle", ctx.header)("nzFooter", ctx.footer)("nzScroll", ctx.scroll)("nzVirtualItemSize", ctx.virtualItemSize)("nzVirtualMaxBufferPx", ctx.virtualMaxBufferPx)("nzVirtualMinBufferPx", ctx.virtualMinBufferPx)("nzVirtualForTrackBy", ctx.virtualForTrackBy)("nzNoResult", ctx.noResult)("nzPageSizeOptions", ctx.page.pageSizes)("nzShowQuickJumper", ctx.page.showQuickJumper)("nzShowSizeChanger", ctx.page.showSize)("nzPaginationPosition", ctx.page.position)("nzPaginationType", ctx.page.type)("nzItemRender", ctx.page.itemRender)("nzSimple", ctx.page.simple)("nzShowTotal", totalTpl_r49)("nzWidthConfig", ctx._widthConfig);
        ɵɵadvance(2);
        ɵɵconditional(ctx.showHeader ? 6 : -1);
        ɵɵadvance();
        ɵɵproperty("cdkDropListDisabled", ctx.drag() === null);
        ɵɵadvance();
        ɵɵconditional(!ctx._loading ? 8 : -1);
        ɵɵadvance(3);
        ɵɵconditional(ctx.virtualScroll ? 11 : 12);
        ɵɵadvance(2);
        ɵɵconditional(!ctx._loading ? 13 : -1);
        ɵɵadvance(6);
        ɵɵrepeater(ctx.contextmenuList);
      }
    },
    dependencies: [FormsModule, NgControlStatus, NgModel, NzTableModule, NzTableComponent, NzThAddOnComponent, NzTableCellDirective, NzThMeasureDirective, NzTdAddOnComponent, NzTheadComponent, NzTbodyComponent, NzTrDirective, NzTableVirtualScrollDirective, NzCellFixedDirective, NzTrExpandDirective, NzTableFixedRowComponent, NzTooltipDirective, NzCheckboxComponent, NzResizableModule, NzResizableDirective, NzResizeHandleComponent, NgTemplateOutlet, NzDropDownModule, NzMenuDirective, NzMenuItemComponent, NzSubMenuComponent, NzDropDownDirective, NzDropdownMenuComponent, NzIconDirective, NzMenuModule, STFilterComponent, STTdComponent, DragDropModule, CdkDropList, CdkDrag],
    encapsulation: 2,
    changeDetection: 0
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STComponent, [{
    type: Component,
    args: [{
      selector: "st",
      exportAs: "st",
      providers: [STDataSource, STRowSource, STColumnSource, STExport, DatePipe, YNPipe, DecimalPipe],
      host: {
        "[class.st]": `true`,
        "[class.st__p-left]": `page.placement === 'left'`,
        "[class.st__p-center]": `page.placement === 'center'`,
        "[class.st__width-strict]": `widthMode.type === 'strict'`,
        "[class.st__row-class]": `rowClassName`,
        "[class.ant-table-rep]": `responsive`,
        "[class.ant-table-rep__hide-header-footer]": `responsiveHideHeaderFooter`
      },
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation.None,
      imports: [FormsModule, NzTableModule, NzTooltipDirective, NzCheckboxComponent, NzResizableModule, NgTemplateOutlet, NzDropDownModule, NzIconDirective, NzMenuModule, STFilterComponent, STTdComponent, DragDropModule],
      template: `<ng-template #titleTpl let-i>
  <span [innerHTML]="i._text"></span>
  @if (i.optional) {
    <small class="st__head-optional" [innerHTML]="i.optional"></small>
  }
  @if (i.optionalHelp) {
    <nz-icon class="st__head-tip" nz-tooltip [nzTooltipTitle]="i.optionalHelp" nzType="question-circle" />
  }
</ng-template>
<ng-template #chkAllTpl let-custom>
  <label
    nz-checkbox
    class="st__checkall"
    [nzDisabled]="_allCheckedDisabled"
    [(ngModel)]="_allChecked"
    [nzIndeterminate]="_indeterminate"
    (ngModelChange)="checkAll()"
    [class.ant-table-selection-select-all-custom]="custom"
  ></label>
</ng-template>
<nz-table
  #table
  [nzData]="_data"
  [(nzPageIndex)]="pi"
  (nzPageIndexChange)="_change('pi')"
  [(nzPageSize)]="ps"
  (nzPageSizeChange)="_change('ps')"
  [nzTotal]="total"
  [nzShowPagination]="_isPagination"
  [nzFrontPagination]="false"
  [nzBordered]="bordered"
  [nzSize]="size"
  [nzLoading]="noColumns || _loading"
  [nzLoadingDelay]="loadingDelay"
  [nzLoadingIndicator]="loadingIndicator"
  [nzTitle]="header!"
  [nzFooter]="footer!"
  [nzScroll]="scroll"
  [nzVirtualItemSize]="virtualItemSize"
  [nzVirtualMaxBufferPx]="virtualMaxBufferPx"
  [nzVirtualMinBufferPx]="virtualMinBufferPx"
  [nzVirtualForTrackBy]="virtualForTrackBy"
  [nzNoResult]="noResult!"
  [nzPageSizeOptions]="page.pageSizes!"
  [nzShowQuickJumper]="page.showQuickJumper"
  [nzShowSizeChanger]="page.showSize"
  [nzPaginationPosition]="page.position!"
  [nzPaginationType]="page.type!"
  [nzItemRender]="page.itemRender!"
  [nzSimple]="page.simple"
  [nzShowTotal]="totalTpl"
  [nzWidthConfig]="_widthConfig"
  (contextmenu)="onContextmenu($event)"
  [class.st__no-column]="noColumns"
>
  @if (showHeader) {
    <thead>
      @for (row of _headers; track row) {
        <tr>
          @if ($first && expand) {
            <th nzWidth="50px" [rowSpan]="_headers.length" [nzLeft]="row[0].column._left ? true : false"></th>
          }
          @for (h of row; track h; let index = $index; let last = $last) {
            @let _c = h.column;
            <th
              [colSpan]="h.colSpan"
              [rowSpan]="h.rowSpan"
              [nzWidth]="$any(_c).width"
              [nzLeft]="_c._left"
              [nzRight]="_c._right"
              [class]="_c._className"
              [attr.data-col]="_c.indexKey"
              [attr.data-col-index]="index"
              [nzShowSort]="_c._sort.enabled"
              [nzSortDirections]="_c._sort.directions!"
              [nzSortOrder]="$any(_c)._sort.default"
              (nzSortOrderChange)="sort(_c, $event)"
              [nzCustomFilter]="!!_c.filter"
              [class.st__has-filter]="_c.filter"
              nz-resizable
              [nzDisabled]="last || $any(_c).resizable.disabled"
              [nzMaxWidth]="$any(_c).resizable.maxWidth"
              [nzMinWidth]="$any(_c).resizable.minWidth"
              [nzBounds]="$any(_c).resizable.bounds"
              [nzPreview]="$any(_c).resizable.preview"
              (nzResizeEnd)="colResize($event, _c)"
            >
              @if ($any(!last && !$any(_c).resizable.disabled)) {
                <nz-resize-handle nzDirection="right" (click)="_stopPropagation($event)">
                  <i></i>
                </nz-resize-handle>
              }
              @if (_c.__renderTitle) {
                <ng-template
                  [ngTemplateOutlet]="_c.__renderTitle!"
                  [ngTemplateOutletContext]="{ $implicit: h.column, index: index }"
                />
              } @else {
                @switch (_c.type) {
                  @case ('checkbox') {
                    @if (_c.selections!.length === 0) {
                      <ng-template [ngTemplateOutlet]="chkAllTpl" [ngTemplateOutletContext]="{ $implicit: false }" />
                    } @else {
                      <div class="ant-table-selection">
                        <ng-template [ngTemplateOutlet]="chkAllTpl" [ngTemplateOutletContext]="{ $implicit: true }" />
                        @if (_c.selections!.length) {
                          <div class="ant-table-selection-extra">
                            <div
                              nz-dropdown
                              nzPlacement="bottomLeft"
                              [nzDropdownMenu]="selectionMenu"
                              class="ant-table-selection-down st__checkall-selection"
                            >
                              <nz-icon nzType="down" />
                            </div>
                          </div>
                        }
                        <nz-dropdown-menu #selectionMenu="nzDropdownMenu">
                          <ul nz-menu class="ant-table-selection-menu">
                            @for (rw of _c.selections; track $index) {
                              <li nz-menu-item (click)="_rowSelection(rw)" [innerHTML]="rw.text"></li>
                            }
                          </ul>
                        </nz-dropdown-menu>
                      </div>
                    }
                  }
                  @default {
                    <ng-template [ngTemplateOutlet]="titleTpl" [ngTemplateOutletContext]="{ $implicit: _c.title }" />
                  }
                }
              }
              @if (_c.filter) {
                <ng-container *ngTemplateOutlet="filterTpl"></ng-container>
              }
              <ng-template #filterTpl>
                <st-filter
                  nz-th-extra
                  [col]="h.column"
                  [f]="_c.filter!"
                  [locale]="locale()"
                  (n)="handleFilterNotify($event)"
                  (handle)="_handleFilter(_c, $event)"
                />
              </ng-template>
            </th>
          }
        </tr>
      }
    </thead>
  }
  <tbody
    class="st__body"
    cdkDropList
    [cdkDropListDisabled]="drag() === null"
    (cdkDropListDropped)="drag()?.dropped?.($event)"
    (cdkDropListEntered)="drag()?.entered?.($event)"
    (cdkDropListExited)="drag()?.exited?.($event)"
    (cdkDropListSorted)="drag()?.sorted?.($event)"
  >
    @if (!_loading) {
      <ng-template [ngTemplateOutlet]="bodyHeader!" [ngTemplateOutletContext]="{ $implicit: _statistical }" />
    }
    <ng-template #bodyTpl let-i let-index="index">
      <tr
        [attr.data-index]="index"
        (click)="_rowClick($event, i, index, false)"
        (dblclick)="_rowClick($event, i, index, true)"
        [class]="i._rowClassName"
        cdkDrag
      >
        @if (expand) {
          <td
            [nzShowExpand]="expand && i.showExpand !== false"
            [nzExpand]="i.expand"
            [nzExpandIcon]="expandIcon ? wrapExpandIcon : null"
            (nzExpandChange)="_expandChange(i, $event)"
            (click)="_stopPropagation($event)"
            nzWidth="50px"
            [nzLeft]="_columns[0]._left ? true : false"
          ></td>
          <ng-template #wrapExpandIcon>
            <span (click)="_expandChange(i, !i.expand)">
              <ng-template [ngTemplateOutlet]="expandIcon" [ngTemplateOutletContext]="{ $implicit: i, index: index }" />
            </span>
          </ng-template>
        }
        @for (c of _columns; track cIdx; let cIdx = $index) {
          @let props = i._values[cIdx].props;
          @if (props?.colSpan > 0 && props?.rowSpan > 0) {
            <td
              [nzLeft]="c._left"
              [nzRight]="c._right"
              [attr.data-col-index]="cIdx"
              [class]="c._className"
              [attr.colspan]="props?.colSpan === 1 ? null : props?.colSpan"
              [attr.rowspan]="props?.rowSpan === 1 ? null : props?.rowSpan"
            >
              @if (responsive) {
                <span class="ant-table-rep__title">
                  <ng-template [ngTemplateOutlet]="titleTpl" [ngTemplateOutletContext]="{ $implicit: c.title }" />
                </span>
              }
              <st-td [data]="_data" [i]="i" [index]="index" [c]="c" [cIdx]="cIdx" (n)="_handleTd($event)" />
            </td>
          }
        }
      </tr>
      <tr [nzExpand]="i.expand">
        <ng-template [ngTemplateOutlet]="expand" [ngTemplateOutletContext]="{ $implicit: i, index: index }" />
      </tr>
    </ng-template>
    @if (virtualScroll) {
      <ng-template nz-virtual-scroll let-i let-index="index">
        <ng-template [ngTemplateOutlet]="bodyTpl" [ngTemplateOutletContext]="{ $implicit: i, index: index }" />
      </ng-template>
    } @else {
      @for (i of _data; track trackBy($index, i)) {
        <ng-template [ngTemplateOutlet]="bodyTpl" [ngTemplateOutletContext]="{ $implicit: i, index: $index }" />
      }
    }
    @if (!_loading) {
      <ng-template [ngTemplateOutlet]="body!" [ngTemplateOutletContext]="{ $implicit: _statistical }" />
    }
  </tbody>
  <ng-template #totalTpl let-range="range" let-total>{{ renderTotal(total, range) }}</ng-template>
</nz-table>
<nz-dropdown-menu #contextmenuTpl="nzDropdownMenu">
  <ul nz-menu class="st__contextmenu">
    @for (i of contextmenuList; track $index) {
      @if (i.children!.length === 0) {
        <li nz-menu-item (click)="i.fn!(i)" [innerHTML]="i.text"></li>
      } @else {
        <li nz-submenu [nzTitle]="i.text">
          <ul>
            @for (ci of i.children; track $index) {
              <li nz-menu-item (click)="ci.fn!(ci)" [innerHTML]="ci.text"></li>
            }
          </ul>
        </li>
      }
    }
  </ul>
</nz-dropdown-menu>
`
    }]
  }], () => [], {
    orgTable: [{
      type: ViewChild,
      args: ["table"]
    }],
    contextmenuTpl: [{
      type: ViewChild,
      args: ["contextmenuTpl"]
    }],
    req: [{
      type: Input
    }],
    res: [{
      type: Input
    }],
    page: [{
      type: Input
    }],
    data: [{
      type: Input
    }],
    delay: [{
      type: Input
    }],
    columns: [{
      type: Input
    }],
    contextmenu: [{
      type: Input
    }],
    ps: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 10)
      }]
    }],
    pi: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 1)
      }]
    }],
    total: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 0)
      }]
    }],
    loading: [{
      type: Input
    }],
    loadingDelay: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    loadingIndicator: [{
      type: Input
    }],
    bordered: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    size: [{
      type: Input
    }],
    scroll: [{
      type: Input
    }],
    singleSort: [{
      type: Input
    }],
    multiSort: [{
      type: Input
    }],
    rowClassName: [{
      type: Input
    }],
    clickRowClassName: [{
      type: Input
    }],
    widthMode: [{
      type: Input
    }],
    widthConfig: [{
      type: Input
    }],
    resizable: [{
      type: Input
    }],
    header: [{
      type: Input
    }],
    showHeader: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    footer: [{
      type: Input
    }],
    bodyHeader: [{
      type: Input
    }],
    body: [{
      type: Input
    }],
    expandRowByClick: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    expandAccordion: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    expand: [{
      type: Input
    }],
    expandIcon: [{
      type: Input
    }],
    noResult: [{
      type: Input
    }],
    responsive: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    responsiveHideHeaderFooter: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    error: [{
      type: Output
    }],
    change: [{
      type: Output
    }],
    virtualScroll: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    virtualItemSize: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    virtualMaxBufferPx: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    virtualMinBufferPx: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    customRequest: [{
      type: Input
    }],
    virtualForTrackBy: [{
      type: Input
    }],
    trackBy: [{
      type: Input
    }]
  });
})();
var COMPONENTS = [STComponent, STRowDirective, STWidgetHostDirective];
var STModule = class _STModule {
  static ɵfac = function STModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _STModule)();
  };
  static ɵmod = ɵɵdefineNgModule({
    type: _STModule,
    imports: [STComponent, STRowDirective, STWidgetHostDirective],
    exports: [STComponent, STRowDirective, STWidgetHostDirective]
  });
  static ɵinj = ɵɵdefineInjector({
    imports: [STComponent]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STModule, [{
    type: NgModule,
    args: [{
      imports: COMPONENTS,
      exports: COMPONENTS
    }]
  }], null, null);
})();
function provideSTWidgets(...widgets) {
  return makeEnvironmentProviders([provideEnvironmentInitializer(() => {
    const srv = inject(STWidgetRegistry);
    widgets.forEach((widget) => srv.register(widget.KEY, widget.type));
  })]);
}
export {
  STColumnSource,
  STComponent,
  STDataSource,
  STExport,
  STModule,
  STRowDirective,
  STWidgetHostDirective,
  STWidgetRegistry,
  ST_DEFAULT_CONFIG,
  provideSTWidgets
};
//# sourceMappingURL=@delon_abc_st.js.map
