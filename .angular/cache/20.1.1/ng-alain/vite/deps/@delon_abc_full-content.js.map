{
  "version": 3,
  "sources": ["../../../../../../node_modules/@delon/abc/fesm2022/full-content.mjs"],
  "sourcesContent": ["import { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, inject, DestroyRef, ElementRef, ChangeDetectorRef, input, booleanAttribute, numberAttribute, model, ViewEncapsulation, ChangeDetectionStrategy, Component, Directive, NgModule } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { Router, ActivationStart, ActivationEnd } from '@angular/router';\nimport { BehaviorSubject, share, fromEvent, debounceTime, filter } from 'rxjs';\nconst _c0 = [\"*\"];\nclass FullContentService {\n  _change = new BehaviorSubject(null);\n  /** 切换全屏工作区状态 */\n  toggle() {\n    this._change.next(true);\n  }\n  get change() {\n    return this._change.pipe(share());\n  }\n  static ɵfac = function FullContentService_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || FullContentService)();\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: FullContentService,\n    factory: FullContentService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FullContentService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nconst wrapCls = `full-content__body`;\nconst openedCls = `full-content__opened`;\nconst hideTitleCls = `full-content__hidden-title`;\nclass FullContentComponent {\n  destroy$ = inject(DestroyRef);\n  el = inject(ElementRef).nativeElement;\n  cdr = inject(ChangeDetectorRef);\n  srv = inject(FullContentService);\n  router = inject(Router);\n  doc = inject(DOCUMENT);\n  bodyEl = this.doc.querySelector('body');\n  inited = false;\n  id = `_full-content-${Math.random().toString(36).substring(2)}`;\n  _height = 0;\n  hideTitle = input(true, ...(ngDevMode ? [{\n    debugName: \"hideTitle\",\n    transform: booleanAttribute\n  }] : [{\n    transform: booleanAttribute\n  }]));\n  padding = input(24, ...(ngDevMode ? [{\n    debugName: \"padding\",\n    transform: numberAttribute\n  }] : [{\n    transform: numberAttribute\n  }]));\n  fullscreen = model(...(ngDevMode ? [undefined, {\n    debugName: \"fullscreen\"\n  }] : []));\n  updateCls() {\n    const clss = this.bodyEl.classList;\n    if (this.fullscreen()) {\n      clss.add(openedCls);\n      if (this.hideTitle()) {\n        clss.add(hideTitleCls);\n      }\n    } else {\n      clss.remove(openedCls);\n      if (this.hideTitle()) {\n        clss.remove(hideTitleCls);\n      }\n    }\n  }\n  update() {\n    this.updateCls();\n    this.updateHeight();\n    this.fullscreen.set(this.fullscreen());\n  }\n  updateHeight() {\n    this._height = this.bodyEl.getBoundingClientRect().height - this.el.getBoundingClientRect().top - this.padding();\n    this.cdr.detectChanges();\n  }\n  removeInBody() {\n    this.bodyEl.classList.remove(wrapCls, openedCls, hideTitleCls);\n  }\n  ngOnInit() {\n    this.inited = true;\n    this.bodyEl.classList.add(wrapCls);\n    this.el.id = this.id;\n    this.updateCls();\n    // when window resize\n    fromEvent(window, 'resize').pipe(takeUntilDestroyed(this.destroy$), debounceTime(200)).subscribe(() => this.updateHeight());\n    // when servier changed\n    this.srv.change.pipe(takeUntilDestroyed(this.destroy$), filter(res => res !== null)).subscribe(() => this.toggle());\n    // when router changed\n    this.router.events.pipe(takeUntilDestroyed(this.destroy$), filter(e => e instanceof ActivationStart || e instanceof ActivationEnd), debounceTime(200)).subscribe(() => {\n      if (this.doc.querySelector(`#${this.id}`)) {\n        this.bodyEl.classList.add(wrapCls);\n        this.updateCls();\n      } else {\n        this.removeInBody();\n      }\n    });\n  }\n  toggle() {\n    this.fullscreen.set(!this.fullscreen());\n    this.update();\n    this.updateHeight();\n  }\n  ngAfterViewInit() {\n    setTimeout(() => this.updateHeight());\n  }\n  ngOnChanges() {\n    if (this.inited) this.update();\n  }\n  ngOnDestroy() {\n    this.removeInBody();\n  }\n  static ɵfac = function FullContentComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || FullContentComponent)();\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: FullContentComponent,\n    selectors: [[\"full-content\"]],\n    hostVars: 4,\n    hostBindings: function FullContentComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"height\", ctx._height, \"px\");\n        i0.ɵɵclassProp(\"full-content\", true);\n      }\n    },\n    inputs: {\n      hideTitle: [1, \"hideTitle\"],\n      padding: [1, \"padding\"],\n      fullscreen: [1, \"fullscreen\"]\n    },\n    outputs: {\n      fullscreen: \"fullscreenChange\"\n    },\n    exportAs: [\"fullContent\"],\n    features: [i0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function FullContentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FullContentComponent, [{\n    type: Component,\n    args: [{\n      selector: 'full-content',\n      exportAs: 'fullContent',\n      template: `<ng-content />`,\n      host: {\n        '[class.full-content]': 'true',\n        '[style.height.px]': '_height'\n      },\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None\n    }]\n  }], null, null);\n})();\nclass FullContentToggleDirective {\n  parent = inject(FullContentComponent);\n  _click() {\n    this.parent.toggle();\n  }\n  static ɵfac = function FullContentToggleDirective_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || FullContentToggleDirective)();\n  };\n  static ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: FullContentToggleDirective,\n    selectors: [[\"\", \"full-toggle\", \"\"]],\n    hostBindings: function FullContentToggleDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function FullContentToggleDirective_click_HostBindingHandler() {\n          return ctx._click();\n        });\n      }\n    },\n    exportAs: [\"fullToggle\"]\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FullContentToggleDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[full-toggle]',\n      exportAs: 'fullToggle',\n      host: {\n        '(click)': '_click()'\n      }\n    }]\n  }], null, null);\n})();\nconst COMPONENTS = [FullContentComponent, FullContentToggleDirective];\nclass FullContentModule {\n  static ɵfac = function FullContentModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || FullContentModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: FullContentModule,\n    imports: [CommonModule, FullContentComponent, FullContentToggleDirective],\n    exports: [FullContentComponent, FullContentToggleDirective]\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [CommonModule]\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FullContentModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, ...COMPONENTS],\n      exports: COMPONENTS\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FullContentComponent, FullContentModule, FullContentService, FullContentToggleDirective };\n"],
  "mappings": "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",
  "names": []
}
