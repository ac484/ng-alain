import{B as Zi,D as qt,E as $i,H as Yi,o as qi}from"./chunk-N3DTICCK.js";import"./chunk-VAGS5EVQ.js";import{a as An}from"./chunk-RXKBJT6U.js";import{c as Pn}from"./chunk-NFJDU5IN.js";import"./chunk-DPVQZYPC.js";import{d as Nt}from"./chunk-HGFRKFU7.js";import{B as te,F as oe,G as Qi,H as ne,K as re,N as ae,c as L,e as Nn,g as H,i as yn,j as Sn,k as En,l as bn,m as Dn,n as Tn,o as W,q,t as Z,u as Fn,v as Xt,w as X,y as Bn}from"./chunk-W66HFKH2.js";import{A as R,Aa as It,B as P,Ba as kt,Ca as J,Da as Jt,E as I,Ea as Kt,Fa as Qt,Ga as ei,Ha as K,Ja as ee,L as k,M as Cn,N as O,Na as ie,Pa as Rn,Qa as se,R as V,S as _n,Ta as le,W as Mn,Y as j,ab as me,cb as pe,e as fn,eb as ue,f as hn,g as zn,ga as U,i as Bt,k as At,l as Zt,ma as Xi,n as $t,na as Ji,oa as G,p as Rt,pa as vn,q as Yt,qa as w,r as gn,ra as wn,sa as Pt,ua as Ki,xa as $,ya as xn,za as Y}from"./chunk-RIIMSFG6.js";import{$ as Lt,$b as be,Ab as $o,Ac as bi,Ad as Vi,Bb as Ii,Bd as Wt,Bh as mn,Cb as Ni,Cd as Di,Db as vi,Dh as x,E as _o,Ea as m,Eh as F,Fa as Wo,Fc as Xo,Gd as ji,H as Lo,Hb as yi,Ic as Ft,Id as nn,Jb as jt,Jd as yo,Kd as So,Kh as ze,La as E,Lc as Jo,Ma as Vt,Mb as f,Mh as he,N as Oo,Na as Mo,Nb as Mt,Nc as Ko,Nh as T,Ni as A,Ob as _e,Od as rn,Qb as ye,Qh as pn,Ra as Me,Rb as Se,Sa as qo,Sb as Ee,Sc as Qo,T as Vo,Ta as Mi,U as jo,Ua as Zo,Ui as Gi,W as _i,Wd as an,Xb as Si,Zc as Li,aa as Ot,ab as Ne,ac as Yo,aj as Wi,ba as Uo,c as hi,cb as ve,d as zi,da as N,db as Tt,e as Po,eb as yt,ec as wt,fb as De,fc as xt,gb as Te,gi as un,hb as h,hc as ki,ia as de,ib as l,ja as ce,jb as u,kb as fe,lb as Ri,ld as en,m as Io,mb as Pi,mj as cn,n as gi,o as vt,oa as Bi,ob as St,od as tn,pb as Et,pd as Oi,rb as Re,s as Ci,se as sn,ta as Ht,ub as S,ue as Ti,va as Ai,vh as Ui,vj as ge,w as ko,wd as on,wh as D,wj as Q,xa as Ho,xb as v,xh as Hi,xi as dn,yb as No,yc as Gt,yh as ln,yi as B,za as Go,zb as vo,zc as Ei}from"./chunk-GSKYGLQZ.js";import{a as Ae,d as Zn,f as Ro,g as Co,i as Dt}from"./chunk-57BLH6QZ.js";var wo=Zn((Do,To)=>{"use strict";(function(i,n){typeof define=="function"&&define.amd?define([],n):typeof Do<"u"?n():(n(),i.FileSaver={})})(Do,function(){"use strict";function i(g,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function n(g,o,a){var s=new XMLHttpRequest;s.open("GET",g),s.responseType="blob",s.onload=function(){d(s.response,o,a)},s.onerror=function(){console.error("could not download file")},s.send()}function e(g){var o=new XMLHttpRequest;o.open("HEAD",g,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function t(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(o)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,p=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(g,o,a){var s=r.URL||r.webkitURL,c=document.createElement("a");o=o||g.name||"download",c.download=o,c.rel="noopener",typeof g=="string"?(c.href=g,c.origin===location.origin?t(c):e(c.href)?n(g,o,a):t(c,c.target="_blank")):(c.href=s.createObjectURL(g),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){t(c)},0))}:"msSaveOrOpenBlob"in navigator?function(g,o,a){if(o=o||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(i(g,a),o);else if(e(g))n(g,o,a);else{var s=document.createElement("a");s.href=g,s.target="_blank",setTimeout(function(){t(s)})}}:function(g,o,a,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof g=="string")return n(g,o,a);var c=g.type==="application/octet-stream",z=/constructor/i.test(r.HTMLElement)||r.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||c&&z||p)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var we=C.result;we=y?we:we.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=we:location=we,s=null},C.readAsDataURL(g)}else{var _=r.URL||r.webkitURL,M=_.createObjectURL(g);s?s.location=M:location.href=M,s=null,setTimeout(function(){_.revokeObjectURL(M)},4e4)}});r.saveAs=d.saveAs=d,typeof To<"u"&&(To.exports=d)})});var ti=class ti{constructor(){this.aclSrv=N(ji);this.menuSrv=N(Gi);this.auth=N(qi);this.firestore=N(Zi);this.full=!0;this.roleA="";this.roleB="";this.firebaseRole=""}get data(){return this.aclSrv.data}reMenu(){this.menuSrv.resume()}toggleFull(){this.full=!this.full,this.aclSrv.setFull(this.full),this.reMenu()}toggleRoleA(){this.full=!1,this.roleA=this.roleA==="role-a"?"":"role-a",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleA]),this.reMenu()}toggleRoleB(){this.full=!1,this.roleB=this.roleB==="role-b"?"":"role-b",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleB]),this.reMenu()}loadFirebaseUserRole(){return Dt(this,null,function*(){let n=this.auth.currentUser;if(!n){console.log("\u6C92\u6709 Firebase \u7528\u6236");return}try{let e=yield $i(qt(this.firestore,"users",n.uid));if(e.exists()){let t=e.data(),r=t.role||"user",p=t.permissions||["read"];this.firebaseRole=r,this.full=!1,this.aclSrv.set({role:[r],ability:p}),this.reMenu(),console.log("\u8F09\u5165 Firebase \u7528\u6236\u6B0A\u9650:",{role:r,permissions:p})}}catch(e){console.error("\u8F09\u5165 Firebase \u7528\u6236\u6B0A\u9650\u5931\u6557:",e)}})}updateFirebaseUserRole(n){return Dt(this,null,function*(){let e=this.auth.currentUser;if(!e){console.log("\u6C92\u6709 Firebase \u7528\u6236");return}try{let t=qt(this.firestore,"users",e.uid),r=n==="admin"?["read","write","delete","admin"]:["read","write"];yield Yi(t,{role:n,permissions:r,updatedAt:new Date}),this.firebaseRole=n,this.full=!1,this.aclSrv.set({role:[n],ability:r}),this.reMenu(),console.log("\u66F4\u65B0 Firebase \u7528\u6236\u6B0A\u9650:",{role:n,permissions:r})}catch(t){console.error("\u66F4\u65B0 Firebase \u7528\u6236\u6B0A\u9650\u5931\u6557:",t)}})}};ti.\u0275fac=function(e){return new(e||ti)},ti.\u0275cmp=E({type:ti,selectors:[["app-acl"]],decls:49,vars:18,consts:[[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u6309\u94AE\u7C92\u5EA6"],["nz-button","",3,"acl"],["nz-button","",1,"ml-sm",3,"acl"],["nzTitle","\u5168\u91CF"],["nz-button","",3,"click"],[1,"pt-md"],["nzTitle","\u89D2\u8272[role-a]"],["nzTitle","\u89D2\u8272[role-b]"],["nzTitle","Firebase \u7528\u6236\u6B0A\u9650"],["nz-button","",1,"mr-sm",3,"click"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," ACL \u8BBF\u95EE\u63A7\u5236 (\u6574\u5408 Firebase) "),l(3,"small"),f(4,"\u6CE8\u610F\u89C2\u5BDF\u5DE6\u8FB9\u7684\u83DC\u5355\uFF1BACLService\u63D0\u4F9B\u4E00\u4E2A\u5B8C\u6574\u7684\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\u7684\u670D\u52A1\uFF0C\u82E5\u9700\u8981\u652F\u6301\u8DEF\u7531\u5B88\u536B\uFF0C\u8BF7\u914D\u5408ACLService\u4E0ERoute Guard\u914D\u5408\u7B80\u4FBF\u5B9E\u73B0\u3002\u73FE\u5728\u6574\u5408\u4E86 Firebase \u8A8D\u8B49\u3002"),u()()(),l(5,"div",1)(6,"div",2)(7,"nz-card",3),f(8),wt(9,"json"),l(10,"button",4),f(11,"role-a"),u(),l(12,"button",5),f(13,"role-b"),u(),l(14,"button",5),f(15,"admin"),u(),l(16,"button",5),f(17,"user"),u()()()(),l(18,"div",1)(19,"div",2)(20,"nz-card",6)(21,"button",7),S("click",function(){return t.toggleFull()}),l(22,"span"),f(23),u()(),l(24,"p",8),f(25,"\u5168\u91CF\u7C7B\u6307\u7CFB\u7EDF\u7BA1\u7406\u5458\u89D2\u8272\uFF0C\u65E0\u4EFB\u4F55\u53D7\u9650\u3002"),u()()(),l(26,"div",2)(27,"nz-card",9)(28,"button",7),S("click",function(){return t.toggleRoleA()}),l(29,"span"),f(30),u()()()(),l(31,"div",2)(32,"nz-card",10)(33,"button",7),S("click",function(){return t.toggleRoleB()}),l(34,"span"),f(35),u()()()(),l(36,"div",2)(37,"nz-card",11)(38,"button",7),S("click",function(){return t.loadFirebaseUserRole()}),l(39,"span"),f(40,"\u8F09\u5165 Firebase \u6B0A\u9650"),u()(),l(41,"p",8),f(42),u(),l(43,"button",12),S("click",function(){return t.updateFirebaseUserRole("admin")}),l(44,"span"),f(45,"\u8A2D\u70BA Admin"),u()(),l(46,"button",7),S("click",function(){return t.updateFirebaseUserRole("user")}),l(47,"span"),f(48,"\u8A2D\u70BA User"),u()()()()()),e&2&&(m(5),h("nzGutter",8),m(),h("nzSpan",24),m(2),_e(" ACL\u539F\u59CB\u6570\u636E\uFF1A",xt(9,16,t.data)," "),m(2),h("acl","role-a"),m(2),h("acl","role-b"),m(2),h("acl","admin"),m(2),h("acl","user"),m(2),h("nzGutter",8),m(),h("nzSpan",6),m(4),_e("",t.full?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),m(3),h("nzSpan",6),m(4),_e("",t.roleA.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),m(),h("nzSpan",6),m(4),_e("",t.roleB.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),m(),h("nzSpan",6),m(6),_e("\u7576\u524D\u89D2\u8272: ",t.firebaseRole||"\u672A\u8F09\u5165"))},dependencies:[R,P,te,X,ae,re,ne,nn,T,he,F,ze,U,J,kt,It,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x,Ft],encapsulation:2});var eo=ti;var $n=new Uo("DC_STORE_STORAGE_TOKEN",{providedIn:"root",factory:()=>new bo}),bo=class{platform=N(So);get(n){return this.platform.isBrowser&&JSON.parse(localStorage.getItem(n)||"null")||null}set(n,e){return this.platform.isBrowser&&localStorage.setItem(n,JSON.stringify(e)),!0}remove(n){this.platform.isBrowser&&localStorage.removeItem(n)}},In=(()=>{class i{store=N($n);http=N(Li);platform=N(So);memory=new Map;notifyBuffer=new Map;meta=new Set;freqTick=3e3;freqTime;cog=N(Wt).merge("cache",{mode:"promise",reName:"",prefix:"",meta_key:"__cache_meta"});constructor(){this.platform.isBrowser&&(this.loadMeta(),this.startExpireNotify())}pushMeta(e){this.meta.has(e)||(this.meta.add(e),this.saveMeta())}removeMeta(e){this.meta.has(e)&&(this.meta.delete(e),this.saveMeta())}loadMeta(){let e=this.store.get(this.cog.meta_key);e&&e.v&&e.v.forEach(t=>this.meta.add(t))}saveMeta(){let e=[];this.meta.forEach(t=>e.push(t)),this.store.set(this.cog.meta_key,{v:e,e:0})}getMeta(){return this.meta}set(e,t,r={}){if(!this.platform.isBrowser)return;let p=0,{type:d,expire:g}=this.cog;r=Ae({type:d,expire:g},r),r.expire&&(p=pn(new Date,r.expire).valueOf());let o=r.emitNotify!==!1;if(!(t instanceof hi)){this.save(r.type,e,{v:t,e:p},o);return}return t.pipe(_i(a=>{this.save(r.type,e,{v:a,e:p},o)}))}save(e,t,r,p=!0){e==="m"?this.memory.set(t,r):(this.store.set(this.cog.prefix+t,r),this.pushMeta(t)),p&&this.runNotify(t,"set")}get(e,t={}){if(!this.platform.isBrowser)return null;let r=t.mode!=="none"&&this.cog.mode==="promise",p=this.memory.has(e)?this.memory.get(e):this.store.get(this.cog.prefix+e);return!p||p.e&&p.e>0&&p.e<new Date().valueOf()?r?(this.cog.request?this.cog.request(e):this.http.get(e)).pipe(ko(d=>on(d,this.cog.reName,d)),_i(d=>this.set(e,d,{type:t.type,expire:t.expire,emitNotify:t.emitNotify}))):null:r?Ci(p.v):p.v}getNone(e){return this.get(e,{mode:"none"})}tryGet(e,t,r={}){if(!this.platform.isBrowser)return null;let p=this.getNone(e);return p===null?t instanceof hi?this.set(e,t,r):(this.set(e,t,r),t):Ci(p)}has(e){return this.memory.has(e)||this.meta.has(e)}_remove(e,t){if(t&&this.runNotify(e,"remove"),this.memory.has(e)){this.memory.delete(e);return}this.store.remove(this.cog.prefix+e),this.removeMeta(e)}remove(e){this.platform.isBrowser&&this._remove(e,!0)}clear(){this.platform.isBrowser&&(this.notifyBuffer.forEach((e,t)=>this.runNotify(t,"remove")),this.memory.clear(),this.meta.forEach(e=>this.store.remove(this.cog.prefix+e)))}set freq(e){this.freqTick=Math.max(20,e),this.abortExpireNotify(),this.startExpireNotify()}startExpireNotify(){this.checkExpireNotify(),this.runExpireNotify()}runExpireNotify(){this.freqTime=setTimeout(()=>{this.checkExpireNotify(),this.runExpireNotify()},this.freqTick)}checkExpireNotify(){let e=[];this.notifyBuffer.forEach((t,r)=>{this.has(r)&&this.getNone(r)===null&&e.push(r)}),e.forEach(t=>{this.runNotify(t,"expire"),this._remove(t,!1)})}abortExpireNotify(){clearTimeout(this.freqTime)}runNotify(e,t){this.notifyBuffer.has(e)&&this.notifyBuffer.get(e).next({type:t,value:this.getNone(e)})}notify(e){if(!this.notifyBuffer.has(e)){let t=new Po(this.getNone(e));this.notifyBuffer.set(e,t)}return this.notifyBuffer.get(e).asObservable()}cancelNotify(e){this.notifyBuffer.has(e)&&(this.notifyBuffer.get(e).unsubscribe(),this.notifyBuffer.delete(e))}hasNotify(e){return this.notifyBuffer.has(e)}clearNotify(){this.notifyBuffer.forEach(e=>e.unsubscribe()),this.notifyBuffer.clear()}ngOnDestroy(){this.memory.clear(),this.abortExpireNotify(),this.clearNotify()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Lt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),xa=new Qo(()=>({}));var ii=class ii{constructor(){this.cache=N(In);this.msg=N(Nt);this.KEY="user"}set(){this.cache.set(this.KEY,+new Date)}get(){this.msg.success(this.cache.getNone(this.KEY))}};ii.\u0275fac=function(e){return new(e||ii)},ii.\u0275cmp=E({type:ii,selectors:[["app-cache"]],decls:10,vars:0,consts:[[1,"alain-default__content-title"],["href","https://ng-alain.com/components/cache","target","_blank"],["nzTitle","Service"],["nz-button","",3,"click"],["nz-button","",1,"ml-sm",3,"click"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," Cache \u7F13\u5B58, "),l(3,"a",1),f(4,"Document"),u()()(),l(5,"nz-card",2)(6,"button",3),S("click",function(){return t.set()}),f(7,"\u8BBE\u7F6E"),u(),l(8,"button",4),S("click",function(){return t.get()}),f(9,"\u83B7\u53D6"),u()())},dependencies:[R,P,te,X,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x],encapsulation:2});var to=ii;var kn=Ro(wo(),1);var Ln=(()=>{class i{el=N(Ai).nativeElement;_http=N(Wi);httpData;httpBody;httpMethod="get";httpUrl;fileName;pre;success=new Mi;error=new Mi;getDisposition(e){return(e||"").split(";").filter(r=>r.includes("=")).map(r=>{let p=r.split("="),d="UTF-8''",g=p[1];return g.startsWith(d)&&(g=g.substring(d.length)),{[p[0].trim()]:g}}).reduce((r,p)=>p,{})}isFileSaverSupported=!1;constructor(){try{this.isFileSaverSupported=!!new Blob}catch{}this.isFileSaverSupported||this.el.classList.add("down-file__not-support")}setDisabled(e){let t=this.el;t.disabled=e,t.classList[e?"add":"remove"]("down-file__disabled")}_click(e){return Dt(this,null,function*(){if(!this.isFileSaverSupported||typeof this.pre=="function"&&!(yield this.pre(e))){e.stopPropagation(),e.preventDefault();return}this.setDisabled(!0),this._http.request(this.httpMethod,this.httpUrl,{params:this.httpData||{},responseType:"blob",observe:"response",body:this.httpBody}).pipe(Oo(()=>this.setDisabled(!1))).subscribe({next:t=>{if(t.status!==200||t.body.size<=0){this.error.emit(t);return}let r=this.getDisposition(t.headers.get("content-disposition")),p=this.fileName;typeof p=="function"&&(p=p(t)),p=p||r["filename*"]||r.filename||t.headers.get("filename")||t.headers.get("x-filename"),(0,kn.saveAs)(t.body,decodeURI(p)),this.success.emit(t)},error:t=>this.error.emit(t)})})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Mo({type:i,selectors:[["","down-file",""]],hostBindings:function(t,r){t&1&&S("click",function(d){return r._click(d)})},inputs:{httpData:[0,"http-data","httpData"],httpBody:[0,"http-body","httpBody"],httpMethod:[0,"http-method","httpMethod"],httpUrl:[0,"http-url","httpUrl"],fileName:[0,"file-name","fileName"],pre:"pre"},outputs:{success:"success",error:"error"},exportAs:["downFile"]})}return i})();function Yn(i,n){if(i&1&&(l(0,"button",2),f(1),u()),i&2){let e=n.$implicit,t=v();h("http-url",Si("assets/tmp/demo",e))("http-data",t.data),m(),_e(" ",e," ")}}var oi=class oi{constructor(){this.fileTypes=[".xlsx",".docx",".pptx",".pdf"];this.data={otherdata:1,time:new Date}}};oi.\u0275fac=function(e){return new(e||oi)},oi.\u0275cmp=E({type:oi,selectors:[["app-down-file"]],decls:6,vars:0,consts:[[1,"alain-default__content-title"],["nzTitle","DEMO"],["nz-button","","down-file","","file-name","demo\u4E2D\u6587",1,"mr-sm",3,"http-data","http-url"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2,"Download a file"),u()(),l(3,"nz-card",1),De(4,Yn,2,4,"button",2,Tt),u()),e&2&&(m(4),Te(t.fileTypes))},dependencies:[R,P,te,X,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x,Ln],encapsulation:2});var io=oi;var Xn=i=>({params:i}),ni=class ni{constructor(){this.params={};this.url="/user";this.searchSchema={properties:{no:{type:"string",title:"\u7F16\u53F7"}}};this.columns=[{title:"\u7F16\u53F7",index:"no"},{title:"\u8C03\u7528\u6B21\u6570",type:"number",index:"callNo"},{title:"\u5934\u50CF",type:"img",width:"50px",index:"avatar"},{title:"\u65F6\u95F4",type:"date",index:"updatedAt"}]}};ni.\u0275fac=function(e){return new(e||ni)},ni.\u0275cmp=E({type:ni,selectors:[["app-delon-form"]],decls:5,vars:8,consts:[["st",""],[3,"title"],["mode","search",3,"formSubmit","formReset","schema","formData"],[3,"data","columns","req"]],template:function(e,t){if(e&1){let r=Re();fe(0,"page-header",1),l(1,"nz-card")(2,"sf",2),S("formSubmit",function(d){de(r);let g=yi(4);return ce(g.reset(d))})("formReset",function(){de(r);let d=yi(4);return ce(d.reset(t.params))}),u(),fe(3,"st",3,0),u()}e&2&&(h("title","Page Name"),m(2),h("schema",t.searchSchema)("formData",t.params),m(),h("data",t.url)("columns",t.columns)("req",Yo(6,Xn,t.params)))},dependencies:[R,P,te,Bn,X,Xt,ae,re,ne,Qi,T,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x],encapsulation:2});var oo=ni;var ri=class ri{};ri.\u0275fac=function(e){return new(e||ri)},ri.\u0275cmp=E({type:ri,selectors:[["app-guard-admin"]],decls:2,vars:0,template:function(e,t){e&1&&(Ri(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Aadmin\u9875\u9762"),Pi())},encapsulation:2});var no=ri;var ai=class ai{};ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275cmp=E({type:ai,selectors:[["app-guard-auth"]],decls:2,vars:0,template:function(e,t){e&1&&(Ri(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Auser1\u9875\u9762"),Pi())},encapsulation:2});var ro=ai;var On=()=>{let i=N(dn);return new hi(n=>{i.confirm({nzTitle:"\u786E\u8BA4\u8981\u79BB\u5F00\u5417\uFF1F",nzContent:"\u4F60\u5DF2\u7ECF\u586B\u5199\u4E86\u90E8\u5206\u8868\u5355\u79BB\u5F00\u4F1A\u653E\u5F03\u5DF2\u7ECF\u586B\u5199\u7684\u5185\u5BB9\u3002",nzOkText:"\u79BB\u5F00",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{n.next(!0),n.complete()},nzOnCancel:()=>{n.next(!1),n.complete()}})})};var Kn=()=>["/delon/guard/leave"],Qn=()=>["/delon/guard/auth"],er=()=>["/delon/guard/admin"],si=class si{constructor(){this.aclSrv=N(ji);this.menuSrv=N(Gi);this.router=N(tn);this.auth=N(qi);this.firestore=N(Zi)}get data(){return this.aclSrv.data}setRole(n){this.aclSrv.setFull(!1),typeof n=="boolean"?this.aclSrv.setFull(n):this.aclSrv.set({role:[n]}),this.menuSrv.resume(),this.router.navigate(["/delon/guard"])}loadFirebaseUserRole(){return Dt(this,null,function*(){let n=this.auth.currentUser;if(!n){console.log("\u6C92\u6709 Firebase \u7528\u6236");return}try{let e=yield $i(qt(this.firestore,"users",n.uid));if(e.exists()){let t=e.data(),r=t.role||"user",p=t.permissions||["read"];this.aclSrv.set({role:[r],ability:p}),this.menuSrv.resume(),this.router.navigate(["/delon/guard"]),console.log("\u8F09\u5165 Firebase \u7528\u6236\u6B0A\u9650:",{role:r,permissions:p})}}catch(e){console.error("\u8F09\u5165 Firebase \u7528\u6236\u6B0A\u9650\u5931\u6557:",e)}})}updateFirebaseUserRole(n){return Dt(this,null,function*(){let e=this.auth.currentUser;if(!e){console.log("\u6C92\u6709 Firebase \u7528\u6236");return}try{let t=qt(this.firestore,"users",e.uid),r=n==="admin"?["read","write","delete","admin"]:["read","write"];yield Yi(t,{role:n,permissions:r,updatedAt:new Date}),this.aclSrv.set({role:[n],ability:r}),this.menuSrv.resume(),this.router.navigate(["/delon/guard"]),console.log("\u66F4\u65B0 Firebase \u7528\u6236\u6B0A\u9650:",{role:n,permissions:r})}catch(t){console.error("\u66F4\u65B0 Firebase \u7528\u6236\u6B0A\u9650\u5931\u6557:",t)}})}};si.\u0275fac=function(e){return new(e||si)},si.\u0275cmp=E({type:si,selectors:[["app-guard"]],decls:38,vars:9,consts:[[1,"alain-default__content-title"],["nz-button","",3,"routerLink"],[1,"ml-sm"],["nz-button","",3,"click"],[1,"mb-lg"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," \u8DEF\u7531\u5B88\u536B (\u6574\u5408 Firebase) "),u()(),l(3,"nz-space-compact")(4,"button",1)(5,"span"),f(6,"\u79BB\u5F00\u786E\u8BA4\u9875"),u()()(),l(7,"nz-space-compact",2)(8,"button",3),S("click",function(){return t.setRole(!0)}),l(9,"span"),f(10,"\u8BBE\u7F6E\u7BA1\u7406\u5458"),u()(),l(11,"button",3),S("click",function(){return t.setRole("user1")}),l(12,"span"),f(13,"\u8BBE\u7F6E\u5458\u5DE51"),u()(),l(14,"button",3),S("click",function(){return t.setRole("user2")}),l(15,"span"),f(16,"\u8BBE\u7F6E\u5458\u5DE52"),u()()(),l(17,"nz-space-compact",2)(18,"button",1)(19,"span"),f(20,"\u9700\u8981user1"),u()(),l(21,"button",1)(22,"span"),f(23,"\u9700\u8981\u7BA1\u7406\u5458"),u()()(),l(24,"nz-space-compact",2)(25,"button",3),S("click",function(){return t.loadFirebaseUserRole()}),l(26,"span"),f(27,"\u8F09\u5165 Firebase \u6B0A\u9650"),u()(),l(28,"button",3),S("click",function(){return t.updateFirebaseUserRole("admin")}),l(29,"span"),f(30,"\u8A2D\u70BA Admin"),u()(),l(31,"button",3),S("click",function(){return t.updateFirebaseUserRole("user")}),l(32,"span"),f(33,"\u8A2D\u70BA User"),u()()(),l(34,"p",4),f(35),wt(36,"json"),u(),fe(37,"router-outlet")),e&2&&(m(4),h("routerLink",be(6,Kn)),m(14),h("routerLink",be(7,Qn)),m(3),h("routerLink",be(8,er)),m(14),_e("\u5F53\u524DACL\u4FE1\u606F\uFF1A",xt(36,4,t.data)))},dependencies:[R,P,Oi,en,te,X,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,j,ue,H,x,mn,Ft],encapsulation:2});var ao=si;var tr=()=>["/delon/guard"],li=class li{};li.\u0275fac=function(e){return new(e||li)},li.\u0275cmp=E({type:li,selectors:[["app-guard-leave"]],decls:5,vars:3,consts:[["nz-button","",3,"nzType","routerLink"]],template:function(e,t){e&1&&(l(0,"p"),f(1,"\u79BB\u5F00\u65F6\u9700\u8981\u786E\u8BA4"),u(),l(2,"button",0)(3,"span"),f(4,"\u6211\u8981\u79BB\u5F00"),u()()),e&2&&(m(2),h("nzType","primary")("routerLink",be(2,tr)))},dependencies:[R,P,Oi,te,X,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,j,ue,H,x],encapsulation:2});var so=li;var Vn=(()=>{class i{scriptSrv=N(Vi);cogSrv=N(Wt);defaultConfig;_cog;pending=!1;_lodop=null;_init=new zi;_events=new zi;printBuffer=[];constructor(){this.defaultConfig=this.cogSrv.merge("lodop",{url:"http://localhost:8443/CLodopfuncs.js",name:"CLODOP",companyName:"",checkMaxCount:100}),this.cog=this.defaultConfig}get cog(){return this._cog}set cog(e){this._cog=Ae(Ae({},this.defaultConfig),e)}get events(){return this._events.asObservable()}get lodop(){return this._lodop?Ci({ok:!0,lodop:this._lodop}):this.pending?this._init.asObservable():(this.request(),this._init.asObservable())}get printer(){this.check();let e=[],t=this._lodop.GET_PRINTER_COUNT();for(let r=0;r<t;r++)e.push(this._lodop.GET_PRINTER_NAME(r));return e}check(){if(!this._lodop)throw new Error("\u8BF7\u52A1\u5FC5\u5148\u8C03\u7528 lodop \u83B7\u53D6\u5BF9\u8C61")}request(){this.pending=!0;let e=new URL(this.cog.url);e.searchParams.set("name",this.cog.name);let t=e.toString(),r=this.cog.checkMaxCount,p=(g,o)=>{this._init.next({ok:g==="ok",status:g,error:o,lodop:this._lodop})},d=()=>{if(--r,this._lodop.webskt&&this._lodop.webskt.readyState===1)p("ok");else{if(r<0){p("check-limit");return}setTimeout(()=>d(),100)}};this.scriptSrv.loadScript(t).then(g=>{if(g.status!=="ok"){this.pending=!1,p("script-load-error",g[0]);return}let o=window;if(Object.prototype.hasOwnProperty.call(o,this.cog.name)&&(this._lodop=o[this.cog.name]),this._lodop===null){p("load-variable-name-error",{name:this.cog.name});return}this._lodop.SET_LICENSES(this.cog.companyName,this.cog.license,this.cog.licenseA,this.cog.licenseB),d()})}reset(){this._lodop=null,this.pending=!1,this.request()}attachCode(e,t,r){this.check(),r||(r=/LODOP\.([^(]+)\(([^\n]+)?\);/i),e.split(`
`).forEach(p=>{let d=r.exec(p.trim());if(!d)return;let g=this._lodop[d[1]];if(g){let o=null;try{o=new Function(`return [${d[2]}]`)()}catch{}if(o!=null&&Array.isArray(o)&&t)for(let a=0;a<o.length;a++)typeof o[a]=="string"&&(o[a]=o[a].replace(/{{(.*?)}}/g,(s,c)=>t[c.trim()]||""));g.apply(this._lodop,o)}})}design(){this.check();let e=this._lodop.PRINT_DESIGN();return new Promise(t=>{this._lodop.On_Return=(r,p)=>{e===r&&(this._lodop.On_Return=null,t(`${p}`))}})}printDo(){let e=this.printBuffer.shift();if(!e)return;this.attachCode(e.code,e.item,e.parser);let t=this._lodop.PRINT();this._lodop.On_Return=(r,p)=>{t===r&&(this._lodop.On_Return=null,this._events.next(Ae({ok:p===!0,error:p===!0?null:p},e)),this.printDo())}}print(e,t,r){this.check(),t&&this.printBuffer.push(...(Array.isArray(t)?t:[t]).map(p=>({code:e,parser:r,item:p}))),this.printDo()}ngOnDestroy(){this._init.unsubscribe(),this._events.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Lt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ir(i,n){i&1&&(f(0," \u8BF7\u5148\u4E0B\u8F7D "),l(1,"a",5),f(2,"Lodop\u63D2\u4EF6"),u(),f(3,"\u3002 "))}function or(i,n){if(i&1&&(l(0,"nz-alert",3),Me(1,ir,4,0,"ng-template",null,0,ki),u()),i&2){let e=yi(2);h("nzType","warning")("nzMessage",e)}}function nr(i,n){if(i&1&&fe(0,"nz-option",12),i&2){let e=n.$implicit;h("nzLabel",e)("nzValue",e)}}function rr(i,n){if(i&1&&fe(0,"nz-option",12),i&2){let e=n.$implicit;h("nzLabel",e)("nzValue",e)}}function ar(i,n){if(i&1){let e=Re();l(0,"form",4)(1,"nz-form-item",6)(2,"nz-form-label",7),f(3,"\u6253\u5370\u670D\u52A1\u5668"),u(),l(4,"nz-form-control",7)(5,"nz-input-group")(6,"div",8)(7,"input",9),Ee("ngModelChange",function(r){de(e);let p=v();return Se(p.cog.url,r)||(p.cog.url=r),ce(r)}),u()(),l(8,"div",8)(9,"button",10),S("click",function(){de(e);let r=v();return ce(r.reload(null))}),f(10,"\u91CD\u65B0\u52A0\u8F7D\u6253\u5370\u673A"),u()()()()(),l(11,"nz-form-item",6)(12,"nz-form-label",7),f(13,"\u6253\u5370\u673A"),u(),l(14,"nz-form-control",7)(15,"nz-select",11),Ee("ngModelChange",function(r){de(e);let p=v();return Se(p.cog.printer,r)||(p.cog.printer=r),ce(r)}),S("ngModelChange",function(r){de(e);let p=v();return ce(p.changePinter(r))}),De(16,nr,1,2,"nz-option",12,Tt),u()()(),l(18,"nz-form-item",6)(19,"nz-form-label",7),f(20,"\u7EB8\u5F20\u7C7B\u578B"),u(),l(21,"nz-form-control",7)(22,"nz-select",13),Ee("ngModelChange",function(r){de(e);let p=v();return Se(p.cog.paper,r)||(p.cog.paper=r),ce(r)}),De(23,rr,1,2,"nz-option",12,Tt),u()()(),l(25,"nz-form-item",6)(26,"nz-form-label",7),f(27,"\u6253\u5370\u5185\u5BB9"),u(),l(28,"nz-form-control",7)(29,"textarea",14),Ee("ngModelChange",function(r){de(e);let p=v();return Se(p.cog.html,r)||(p.cog.html=r),ce(r)}),u(),l(30,"div",15),f(31,"\u4EC5\u9650HTML\uFF0C\u66F4\u591A\u7C7B\u578B\u652F\u6301\u8BF7\u53C2\u8003\u5B98\u7F51"),u()()(),l(32,"nz-form-item",6)(33,"nz-form-control",16)(34,"button",17),S("click",function(){de(e);let r=v();return ce(r.print(!0))}),f(35,"\u6253\u5370\u9884\u89C8"),u(),l(36,"button",17),S("click",function(){de(e);let r=v();return ce(r.print())}),f(37,"\u76F4\u63A5\u6253\u5370"),u()()()()}if(i&2){let e=v();m(2),h("nzSm",6),m(2),h("nzSm",18),m(2),h("nzSpan",16),m(),ye("ngModel",e.cog.url),m(),h("nzSpan",8),m(4),h("nzSm",6),m(2),h("nzSm",18),m(),ye("ngModel",e.cog.printer),m(),Te(e.pinters),m(3),h("nzSm",6),m(2),h("nzSm",18),m(),ye("ngModel",e.cog.paper),m(),Te(e.papers),m(3),h("nzSm",6),m(2),h("nzSm",18),m(),ye("ngModel",e.cog.html),m(4),h("nzSm",18)("nzOffset",6),m(),h("nzLoading",e.printing),m(2),h("nzLoading",e.printing)}}var mi=class mi{constructor(){this.lodopSrv=N(Vn);this.msg=N(Nt);this.cog={url:"https://localhost:8443/CLodopfuncs.js",printer:"",paper:"",html:`
      <h1>Title</h1>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
    `};this.error=!1;this.lodop=null;this.pinters=[];this.papers=[];this.printing=!1;this.lodopSrv.lodop.subscribe(({lodop:n,ok:e})=>{if(!e){this.error=!0;return}this.error=!1,this.msg.success("\u6253\u5370\u673A\u52A0\u8F7D\u6210\u529F"),this.lodop=n,this.pinters=this.lodopSrv.printer})}reload(n={url:"https://localhost:8443/CLodopfuncs.js"}){this.pinters=[],this.papers=[],this.cog.printer="",this.cog.paper="",this.lodopSrv.cog=Ae(Ae({},this.cog),n),this.error=!1,n===null&&this.lodopSrv.reset()}changePinter(n){this.lodop!=null&&(this.papers=this.lodop.GET_PAGESIZES_LIST(n,`
`).split(`
`))}print(n=!1){let e=this.lodop;e.PRINT_INITA(10,20,810,610,"\u6D4B\u8BD5C-Lodop\u8FDC\u7A0B\u6253\u5370\u56DB\u6B65\u9AA4"),e.SET_PRINTER_INDEXA(this.cog.printer),e.SET_PRINT_PAGESIZE(0,0,0,this.cog.paper),e.ADD_PRINT_TEXT(1,1,300,200,"\u4E0B\u9762\u8F93\u51FA\u7684\u662F\u672C\u9875\u6E90\u4EE3\u7801\u53CA\u5176\u5C55\u73B0\u6548\u679C\uFF1A"),e.ADD_PRINT_TEXT(20,10,"90%","95%",this.cog.html),e.SET_PRINT_STYLEA(0,"ItemType",4),e.NEWPAGEA(),e.ADD_PRINT_HTM(20,10,"90%","95%",this.cog.html),n?e.PREVIEW():e.PRINT()}};mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275cmp=E({type:mi,selectors:[["app-print"]],decls:10,vars:2,consts:[["message",""],[1,"alain-default__content-title"],["href","https://ng-alain.com/components/lodop","target","_blank"],[3,"nzType","nzMessage"],["nz-form",""],["href","http://c-lodop.com/download.html","target","_blank"],["nz-row",""],["nz-col","",3,"nzSm"],["nz-col","",3,"nzSpan"],["nz-input","","nzPlaceHolder","https://localhost:8443/CLodopfuncs.js","name","url",3,"ngModelChange","ngModel"],["nz-button","",3,"click"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u6253\u5370\u673A","nzShowSearch","","nzAllowClear","","name","printer",2,"width","90%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u7EB8\u5F20\u7C7B\u578B","nzShowSearch","","nzAllowClear","","name","paper",2,"width","90%",3,"ngModelChange","ngModel"],["nz-input","","name","html","nzAutosize","",3,"ngModelChange","ngModel"],["nz-form-extra",""],["nz-col","",3,"nzSm","nzOffset"],["nz-button","",3,"click","nzLoading"]],template:function(e,t){e&1&&(l(0,"div",1)(1,"h1"),f(2," Lodop\u6253\u5370 "),l(3,"small"),f(4," \u66F4\u591A\u4F53\u9A8C\u8BF7\u81F3 "),l(5,"a",2),f(6,"NG-ALAIN.com"),u()()()(),l(7,"nz-card"),Ne(8,or,3,2,"nz-alert",3),Ne(9,ar,38,18,"form",4),u()),e&2&&(m(8),ve(t.error?8:-1),m(),ve(t.error?-1:9))},dependencies:[R,Yt,Bt,At,Zt,Rt,$t,P,te,X,ae,re,ne,T,he,F,ze,U,J,kt,It,k,V,pe,G,Xi,Ji,D,I,se,Rn,B,W,A,ie,$,Pt,Ki,wn,Y,Z,q,O,oe,me,ee,L,K,Kt,Jt,ei,Qt,le,w,Q,ge,j,ue,H,x],encapsulation:2});var lo=mi;var sr=["canvas"];function lr(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v(2);m(),Mt(e.nzStatusRender)}}function mr(i,n){if(i&1&&(l(0,"div",1),Me(1,lr,2,1,"ng-container",2),u()),i&2){let e=v();m(),h("nzStringTemplateOutlet",e.nzStatusRender)}}function pr(i,n){i&1&&fe(0,"nz-spin")}function ur(i,n){if(i&1){let e=Re();l(0,"div")(1,"p",3),f(2),u(),l(3,"button",4),S("click",function(){de(e);let r=v(2);return ce(r.reloadQRCode())}),fe(4,"nz-icon",5),l(5,"span"),f(6),u()()()}if(i&2){let e=v(2);m(2),Mt(e.locale.expired),m(4),Mt(e.locale.refresh)}}function dr(i,n){if(i&1&&(l(0,"div")(1,"p",3),f(2),u()()),i&2){let e=v(2);m(2),Mt(e.locale.scanned)}}function cr(i,n){if(i&1&&(l(0,"div",1),Ne(1,pr,1,0,"nz-spin")(2,ur,7,2,"div")(3,dr,3,1,"div"),u()),i&2){let e,t=v();m(),ve((e=t.nzStatus)==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function fr(i,n){i&1&&fe(0,"canvas",null,0)}var Ut;(function(i){let n=(()=>{class d{version;errorCorrectionLevel;static encodeText(o,a){let s=i.QrSegment.makeSegments(o);return d.encodeSegments(s,a)}static encodeBinary(o,a){let s=i.QrSegment.makeBytes(o);return d.encodeSegments([s],a)}static encodeSegments(o,a,s=1,c=40,z=-1,y=!0){if(!(d.MIN_VERSION<=s&&s<=c&&c<=d.MAX_VERSION)||z<-1||z>7)throw new RangeError("Invalid value");let C,_;for(C=s;;C++){let b=d.getNumDataCodewords(C,a)*8,xe=p.getTotalBits(o,C);if(xe<=b){_=xe;break}if(C>=c)throw new RangeError("Data too long")}for(let b of[d.Ecc.MEDIUM,d.Ecc.QUARTILE,d.Ecc.HIGH])y&&_<=d.getNumDataCodewords(C,b)*8&&(a=b);let M=[];for(let b of o){e(b.mode.modeBits,4,M),e(b.numChars,b.mode.numCharCountBits(C),M);for(let xe of b.getData())M.push(xe)}r(M.length==_);let we=d.getNumDataCodewords(C,a)*8;r(M.length<=we),e(0,Math.min(4,we-M.length),M),e(0,(8-M.length%8)%8,M),r(M.length%8==0);for(let b=236;M.length<we;b^=253)e(b,8,M);let Fe=[];for(;Fe.length*8<M.length;)Fe.push(0);return M.forEach((b,xe)=>Fe[xe>>>3]|=b<<7-(xe&7)),new d(C,a,Fe,z)}size;mask;modules=[];isFunction=[];constructor(o,a,s,c){if(this.version=o,this.errorCorrectionLevel=a,o<d.MIN_VERSION||o>d.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let z=[];for(let C=0;C<this.size;C++)z.push(!1);for(let C=0;C<this.size;C++)this.modules.push(z.slice()),this.isFunction.push(z.slice());this.drawFunctionPatterns();let y=this.addEccAndInterleave(s);if(this.drawCodewords(y),c==-1){let C=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);let M=this.getPenaltyScore();M<C&&(c=_,C=M),this.applyMask(_)}}r(c>=0&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}getModule(o,a){return o>=0&&o<this.size&&a>=0&&a<this.size&&this.modules[a][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let o=this.getAlignmentPatternPositions(),a=o.length;for(let s=0;s<a;s++)for(let c=0;c<a;c++)s==0&&c==0||s==0&&c==a-1||s==a-1&&c==0||this.drawAlignmentPattern(o[s],o[c]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){let a=this.errorCorrectionLevel.formatBits<<3|o,s=a;for(let z=0;z<10;z++)s=s<<1^(s>>>9)*1335;let c=(a<<10|s)^21522;r(c>>>15==0);for(let z=0;z<=5;z++)this.setFunctionModule(8,z,t(c,z));this.setFunctionModule(8,7,t(c,6)),this.setFunctionModule(8,8,t(c,7)),this.setFunctionModule(7,8,t(c,8));for(let z=9;z<15;z++)this.setFunctionModule(14-z,8,t(c,z));for(let z=0;z<8;z++)this.setFunctionModule(this.size-1-z,8,t(c,z));for(let z=8;z<15;z++)this.setFunctionModule(8,this.size-15+z,t(c,z));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let s=0;s<12;s++)o=o<<1^(o>>>11)*7973;let a=this.version<<12|o;r(a>>>18==0);for(let s=0;s<18;s++){let c=t(a,s),z=this.size-11+s%3,y=Math.floor(s/3);this.setFunctionModule(z,y,c),this.setFunctionModule(y,z,c)}}drawFinderPattern(o,a){for(let s=-4;s<=4;s++)for(let c=-4;c<=4;c++){let z=Math.max(Math.abs(c),Math.abs(s)),y=o+c,C=a+s;y>=0&&y<this.size&&C>=0&&C<this.size&&this.setFunctionModule(y,C,z!=2&&z!=4)}}drawAlignmentPattern(o,a){for(let s=-2;s<=2;s++)for(let c=-2;c<=2;c++)this.setFunctionModule(o+c,a+s,Math.max(Math.abs(c),Math.abs(s))!=1)}setFunctionModule(o,a,s){this.modules[a][o]=s,this.isFunction[a][o]=!0}addEccAndInterleave(o){let a=this.version,s=this.errorCorrectionLevel;if(o.length!=d.getNumDataCodewords(a,s))throw new RangeError("Invalid argument");let c=d.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][a],z=d.ECC_CODEWORDS_PER_BLOCK[s.ordinal][a],y=Math.floor(d.getNumRawDataModules(a)/8),C=c-y%c,_=Math.floor(y/c),M=[],we=d.reedSolomonComputeDivisor(z);for(let b=0,xe=0;b<c;b++){let Le=o.slice(xe,xe+_-z+(b<C?0:1));xe+=Le.length;let ho=d.reedSolomonComputeRemainder(Le,we);b<C&&Le.push(0),M.push(Le.concat(ho))}let Fe=[];for(let b=0;b<M[0].length;b++)M.forEach((xe,Le)=>{(b!=_-z||Le>=C)&&Fe.push(xe[b])});return r(Fe.length==y),Fe}drawCodewords(o){if(o.length!=Math.floor(d.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let c=0;c<this.size;c++)for(let z=0;z<2;z++){let y=s-z,_=(s+1&2)==0?this.size-1-c:c;!this.isFunction[_][y]&&a<o.length*8&&(this.modules[_][y]=t(o[a>>>3],7-(a&7)),a++)}}r(a==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let a=0;a<this.size;a++)for(let s=0;s<this.size;s++){let c;switch(o){case 0:c=(s+a)%2==0;break;case 1:c=a%2==0;break;case 2:c=s%3==0;break;case 3:c=(s+a)%3==0;break;case 4:c=(Math.floor(s/3)+Math.floor(a/2))%2==0;break;case 5:c=s*a%2+s*a%3==0;break;case 6:c=(s*a%2+s*a%3)%2==0;break;case 7:c=((s+a)%2+s*a%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[a][s]&&c&&(this.modules[a][s]=!this.modules[a][s])}}getPenaltyScore(){let o=0;for(let z=0;z<this.size;z++){let y=!1,C=0,_=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[z][M]==y?(C++,C==5?o+=d.PENALTY_N1:C>5&&o++):(this.finderPenaltyAddHistory(C,_),y||(o+=this.finderPenaltyCountPatterns(_)*d.PENALTY_N3),y=this.modules[z][M],C=1);o+=this.finderPenaltyTerminateAndCount(y,C,_)*d.PENALTY_N3}for(let z=0;z<this.size;z++){let y=!1,C=0,_=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[M][z]==y?(C++,C==5?o+=d.PENALTY_N1:C>5&&o++):(this.finderPenaltyAddHistory(C,_),y||(o+=this.finderPenaltyCountPatterns(_)*d.PENALTY_N3),y=this.modules[M][z],C=1);o+=this.finderPenaltyTerminateAndCount(y,C,_)*d.PENALTY_N3}for(let z=0;z<this.size-1;z++)for(let y=0;y<this.size-1;y++){let C=this.modules[z][y];C==this.modules[z][y+1]&&C==this.modules[z+1][y]&&C==this.modules[z+1][y+1]&&(o+=d.PENALTY_N2)}let a=0;for(let z of this.modules)a=z.reduce((y,C)=>y+(C?1:0),a);let s=this.size*this.size,c=Math.ceil(Math.abs(a*20-s*10)/s)-1;return r(c>=0&&c<=9),o+=c*d.PENALTY_N4,r(o>=0&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{let o=Math.floor(this.version/7)+2,a=Math.floor((this.version*8+o*3+5)/(o*4-4))*2,s=[6];for(let c=this.size-7;s.length<o;c-=a)s.splice(1,0,c);return s}}static getNumRawDataModules(o){if(o<d.MIN_VERSION||o>d.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*o+128)*o+64;if(o>=2){let s=Math.floor(o/7)+2;a-=(25*s-10)*s-55,o>=7&&(a-=36)}return r(a>=208&&a<=29648),a}static getNumDataCodewords(o,a){return Math.floor(d.getNumRawDataModules(o)/8)-d.ECC_CODEWORDS_PER_BLOCK[a.ordinal][o]*d.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let a=[];for(let c=0;c<o-1;c++)a.push(0);a.push(1);let s=1;for(let c=0;c<o;c++){for(let z=0;z<a.length;z++)a[z]=d.reedSolomonMultiply(a[z],s),z+1<a.length&&(a[z]^=a[z+1]);s=d.reedSolomonMultiply(s,2)}return a}static reedSolomonComputeRemainder(o,a){let s=a.map(c=>0);for(let c of o){let z=c^s.shift();s.push(0),a.forEach((y,C)=>s[C]^=d.reedSolomonMultiply(y,z))}return s}static reedSolomonMultiply(o,a){if(o>>>8||a>>>8)throw new RangeError("Byte out of range");let s=0;for(let c=7;c>=0;c--)s=s<<1^(s>>>7)*285,s^=(a>>>c&1)*o;return r(s>>>8==0),s}finderPenaltyCountPatterns(o){let a=o[1];r(a<=this.size*3);let s=a>0&&o[2]==a&&o[3]==a*3&&o[4]==a&&o[5]==a;return(s&&o[0]>=a*4&&o[6]>=a?1:0)+(s&&o[6]>=a*4&&o[0]>=a?1:0)}finderPenaltyTerminateAndCount(o,a,s){return o&&(this.finderPenaltyAddHistory(a,s),a=0),a+=this.size,this.finderPenaltyAddHistory(a,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(o,a){a[0]==0&&(o+=this.size),a.pop(),a.unshift(o)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return d})();i.QrCode=n;function e(d,g,o){if(g<0||g>31||d>>>g)throw new RangeError("Value out of range");for(let a=g-1;a>=0;a--)o.push(d>>>a&1)}function t(d,g){return(d>>>g&1)!=0}function r(d){if(!d)throw new Error("Assertion error")}let p=(()=>{class d{mode;numChars;bitData;static makeBytes(o){let a=[];for(let s of o)e(s,8,a);return new d(d.Mode.BYTE,o.length,a)}static makeNumeric(o){if(!d.isNumeric(o))throw new RangeError("String contains non-numeric characters");let a=[];for(let s=0;s<o.length;){let c=Math.min(o.length-s,3);e(parseInt(o.substring(s,s+c),10),c*3+1,a),s+=c}return new d(d.Mode.NUMERIC,o.length,a)}static makeAlphanumeric(o){if(!d.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a=[],s;for(s=0;s+2<=o.length;s+=2){let c=d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(s))*45;c+=d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(s+1)),e(c,11,a)}return s<o.length&&e(d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(s)),6,a),new d(d.Mode.ALPHANUMERIC,o.length,a)}static makeSegments(o){return o==""?[]:d.isNumeric(o)?[d.makeNumeric(o)]:d.isAlphanumeric(o)?[d.makeAlphanumeric(o)]:[d.makeBytes(d.toUtf8ByteArray(o))]}static makeEci(o){let a=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)e(o,8,a);else if(o<16384)e(2,2,a),e(o,14,a);else if(o<1e6)e(6,3,a),e(o,21,a);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,a)}static isNumeric(o){return d.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return d.ALPHANUMERIC_REGEX.test(o)}constructor(o,a,s){if(this.mode=o,this.numChars=a,this.bitData=s,a<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}getData(){return this.bitData.slice()}static getTotalBits(o,a){let s=0;for(let c of o){let z=c.mode.numCharCountBits(a);if(c.numChars>=1<<z)return 1/0;s+=4+z+c.bitData.length}return s}static toUtf8ByteArray(o){o=encodeURI(o);let a=[];for(let s=0;s<o.length;s++)o.charAt(s)!="%"?a.push(o.charCodeAt(s)):(a.push(parseInt(o.substring(s+1,s+3),16)),s+=2);return a}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return d})();i.QrSegment=p})(Ut||(Ut={}));(function(i){let n;(function(e){class t{ordinal;formatBits;static LOW=new t(0,1);static MEDIUM=new t(1,0);static QUARTILE=new t(2,3);static HIGH=new t(3,2);constructor(p,d){this.ordinal=p,this.formatBits=d}}e.Ecc=t})(n=i.QrCode||(i.QrCode={}))})(Ut||(Ut={}));(function(i){let n;(function(e){class t{modeBits;numBitsCharCount;static NUMERIC=new t(1,[10,12,14]);static ALPHANUMERIC=new t(2,[9,11,13]);static BYTE=new t(4,[8,16,16]);static KANJI=new t(8,[8,10,12]);static ECI=new t(7,[0,0,0]);constructor(p,d){this.modeBits=p,this.numBitsCharCount=d}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}}e.Mode=t})(n=i.QrSegment||(i.QrSegment={}))})(Ut||(Ut={}));var wi=Ut,hr={L:wi.QrCode.Ecc.LOW,M:wi.QrCode.Ecc.MEDIUM,Q:wi.QrCode.Ecc.QUARTILE,H:wi.QrCode.Ecc.HIGH},zr=160,gr=10,Cr=10,_r="#000000",Mr="#FFFFFF",Nr=40,vr="M",yr=(i,n=vr)=>i?wi.QrCode.encodeText(i,hr[n]):null;function Sr(i,n,e=zr,t=gr,r=Cr,p=_r,d=Mr,g=Nr,o){let a=i.getContext("2d"),s=Er(r);if(i.style.width=`${e}px`,i.style.height=`${e}px`,!n){a.fillStyle="rgba(0, 0, 0, 0)",a.fillRect(0,0,i.width,i.height);return}if(i.width=n.size*t+s[1]+s[3],i.height=n.size*t+s[0]+s[2],!o)Fo(a,i.width,i.height,t,d),xo(a,n,t,s,d,p);else{let c=new Image;c.src=o,c.crossOrigin="anonymous",c.width=g*(i.width/e),c.height=g*(i.width/e);let z=()=>{C(),Fo(a,i.width,i.height,t,d),xo(a,n,t,s,d,p);let _=i.width/2-g*(i.width/e)/2;a.fillRect(_,_,g*(i.width/e),g*(i.width/e)),a.drawImage(c,_,_,g*(i.width/e),g*(i.width/e))},y=()=>{C(),Fo(a,i.width,i.height,t,d),xo(a,n,t,s,d,p)},C=()=>{c.removeEventListener("load",z),c.removeEventListener("error",y)};c.addEventListener("load",z),c.addEventListener("error",y)}}function xo(i,n,e,t,r,p){for(let d=0;d<n.size;d++)for(let g=0;g<n.size;g++)i.fillStyle=n.getModule(g,d)?p:r,i.fillRect(t[3]+g*e,t[0]+d*e,e,e)}function Fo(i,n,e,t,r){i.fillStyle=r,i.fillRect(0,0,n*t,e*t)}function Er(i){return Array.isArray(i)?Array(4).fill(0).map((n,e)=>i[e%i.length]):[i,i,i,i]}var jn=(()=>{class i{i18n=N(un);el=N(Ai);cdr=N(Gt);destroyRef=N(Bi);isBrowser=Ko(N(Ho));canvas;nzValue="";nzPadding=0;nzColor="#000000";nzBgColor="#FFFFFF";nzSize=160;nzIcon="";nzIconSize=40;nzBordered=!0;nzStatus="active";nzLevel="M";nzStatusRender=null;nzRefresh=new Mi;locale;ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(Di(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(e){let{nzValue:t,nzIcon:r,nzLevel:p,nzSize:d,nzIconSize:g,nzColor:o,nzPadding:a,nzBgColor:s}=e;(t||r||p||d||g||o||a||s)&&this.canvas&&this.drawCanvasQRCode(),s&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Sr(this.canvas.nativeElement,yr(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-qrcode"]],viewQuery:function(t,r){if(t&1&&Ii(sr,5),t&2){let p;Ni(p=vi())&&(r.canvas=p.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(t,r){t&2&&jt("ant-qrcode-border",r.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",bi],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",bi],nzBordered:[2,"nzBordered","nzBordered",Ei],nzStatus:"nzStatus",nzLevel:"nzLevel",nzStatusRender:"nzStatusRender"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[Ht],decls:3,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"]],template:function(t,r){t&1&&(Ne(0,mr,2,1,"div",1)(1,cr,4,1,"div",1),Ne(2,fr,2,0,"canvas")),t&2&&(ve(r.nzStatusRender?0:r.nzStatus!=="active"?1:-1),m(2),ve(r.isBrowser?2:-1))},dependencies:[w,vn,T,he,F,D,Ui,Hi],encapsulation:2,changeDetection:0})}return i})();var xi=()=>({standalone:!0}),pi=class pi{constructor(){this.value="https://ng-alain.com/";this.background="#ffffff";this.foreground="#000000";this.level="L";this.mime="image/png";this.padding=10;this.size=220}};pi.\u0275fac=function(e){return new(e||pi)},pi.\u0275cmp=E({type:pi,selectors:[["app-qr"]],decls:44,vars:39,consts:[[1,"alain-default__content-title"],["href","https://ng.ant.design/components/qr-code","target","_blank"],[3,"nzGutter"],[1,"text-center",3,"nzSpan"],[3,"nzValue","nzBgColor","nzColor","nzLevel","nzSize","nzPadding"],[3,"nzSpan"],["nz-form",""],["nz-input","","type","color",2,"width","100px",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzValue","L","nzLabel","L"],["nzValue","M","nzLabel","M"],["nzValue","Q","nzLabel","Q"],["nzValue","H","nzLabel","H"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," \u4E8C\u7EF4\u7801 "),l(3,"a",1),f(4,"Document"),u()()(),l(5,"nz-card")(6,"nz-row",2)(7,"nz-col",3),fe(8,"nz-qrcode",4),u(),l(9,"nz-col",5)(10,"form",6)(11,"nz-form-item")(12,"nz-form-label",5),f(13,"\u80CC\u666F"),u(),l(14,"nz-form-control",5)(15,"nz-input-group")(16,"input",7),Ee("ngModelChange",function(p){return Se(t.background,p)||(t.background=p),p}),u()()()(),l(17,"nz-form-item")(18,"nz-form-label",5),f(19,"\u524D\u666F"),u(),l(20,"nz-form-control",5)(21,"nz-input-group")(22,"input",7),Ee("ngModelChange",function(p){return Se(t.foreground,p)||(t.foreground=p),p}),u()()()(),l(23,"nz-form-item")(24,"nz-form-label",5),f(25,"\u8BEF\u5DEE"),u(),l(26,"nz-form-control",5)(27,"nz-select",8),Ee("ngModelChange",function(p){return Se(t.level,p)||(t.level=p),p}),fe(28,"nz-option",9)(29,"nz-option",10)(30,"nz-option",11)(31,"nz-option",12),u()()(),l(32,"nz-form-item")(33,"nz-form-label",5),f(34,"\u5185\u8FB9\u8DDD"),u(),l(35,"nz-form-control",5)(36,"nz-input-number",13),Ee("ngModelChange",function(p){return Se(t.padding,p)||(t.padding=p),p}),u(),f(37,"px "),u()(),l(38,"nz-form-item")(39,"nz-form-label",5),f(40,"\u5927\u5C0F"),u(),l(41,"nz-form-control",5)(42,"nz-input-number",14),Ee("ngModelChange",function(p){return Se(t.size,p)||(t.size=p),p}),u(),f(43,"px "),u()()()()()()),e&2&&(m(6),h("nzGutter",24),m(),h("nzSpan",8),m(),h("nzValue",t.value)("nzBgColor",t.background)("nzColor",t.foreground)("nzLevel",t.level)("nzSize",t.size)("nzPadding",t.padding),m(),h("nzSpan",16),m(3),h("nzSpan",8),m(2),h("nzSpan",16),m(2),ye("ngModel",t.background),h("ngModelOptions",be(34,xi)),m(2),h("nzSpan",8),m(2),h("nzSpan",16),m(2),ye("ngModel",t.foreground),h("ngModelOptions",be(35,xi)),m(2),h("nzSpan",8),m(2),h("nzSpan",16),m(),ye("ngModel",t.level),h("ngModelOptions",be(36,xi)),m(6),h("nzSpan",8),m(2),h("nzSpan",16),m(),ye("ngModel",t.padding),h("ngModelOptions",be(37,xi))("nzMin",0)("nzMax",100),m(3),h("nzSpan",8),m(2),h("nzSpan",16),m(),ye("ngModel",t.size),h("ngModelOptions",be(38,xi))("nzMin",100)("nzMax",1e3)("nzStep",t.padding))},dependencies:[R,Yt,Bt,At,Zt,Rt,$t,P,te,X,ae,re,ne,T,F,U,J,kt,It,k,V,pe,G,Xi,Ji,D,I,se,B,W,A,ie,$,Pt,Ki,Y,xn,Z,q,O,oe,me,ee,L,K,Kt,Jt,ei,Qt,le,w,Q,ge,j,ue,H,x,jn],encapsulation:2});var mo=pi;var Un=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Vt({type:i});static \u0275inj=Ot({imports:[Jo]})}return i})();var br=["*"];function Dr(i,n){i&1&&vo(0)}function Tr(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v(3);m(),Mt(e.nzTitle)}}function wr(i,n){if(i&1&&(l(0,"div",2),Me(1,Tr,2,1,"ng-container",4),u()),i&2){let e=v(2);m(),h("nzStringTemplateOutlet",e.nzTitle)}}function xr(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v(3);m(),Mt(e.nzExtra)}}function Fr(i,n){if(i&1&&(l(0,"div",3),Me(1,xr,2,1,"ng-container",4),u()),i&2){let e=v(2);m(),h("nzStringTemplateOutlet",e.nzExtra)}}function Br(i,n){if(i&1&&(l(0,"div",0),Ne(1,wr,2,1,"div",2),Ne(2,Fr,2,1,"div",3),u()),i&2){let e=v();m(),ve(e.nzTitle?1:-1),m(),ve(e.nzExtra?2:-1)}}function Ar(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v(2).$implicit;m(),_e(" ",e.title," ")}}function Rr(i,n){}function Pr(i,n){if(i&1&&(l(0,"td",6)(1,"div",7)(2,"span",8),Me(3,Ar,2,1,"ng-container",4),u(),l(4,"span",9),Me(5,Rr,0,0,"ng-template",10),u()()()),i&2){let e=v().$implicit,t=v(3);h("colSpan",e.span),m(2),jt("ant-descriptions-item-no-colon",!t.nzColon),m(),h("nzStringTemplateOutlet",e.title),m(2),h("ngTemplateOutlet",e.content)}}function Ir(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v(2).$implicit;m(),_e(" ",e.title," ")}}function kr(i,n){}function Lr(i,n){if(i&1&&(l(0,"td",8),Me(1,Ir,2,1,"ng-container",4),u(),l(2,"td",11),Me(3,kr,0,0,"ng-template",10),u()),i&2){let e=v().$implicit;m(),h("nzStringTemplateOutlet",e.title),m(),h("colSpan",e.span*2-1),m(),h("ngTemplateOutlet",e.content)}}function Or(i,n){if(i&1&&Ne(0,Pr,6,5,"td",6)(1,Lr,4,3),i&2){let e=v(3);ve(e.nzBordered?1:0)}}function Vr(i,n){if(i&1&&(l(0,"tr",5),De(1,Or,2,1,null,null,yt),u()),i&2){let e=n.$implicit;m(),Te(e)}}function jr(i,n){if(i&1&&De(0,Vr,3,0,"tr",5,yt),i&2){let e=v();Te(e.itemMatrix)}}function Ur(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v().$implicit;m(),_e(" ",e.title," ")}}function Hr(i,n){if(i&1&&(l(0,"td",6)(1,"div",7)(2,"span",8),Me(3,Ur,2,1,"ng-container",4),u()()()),i&2){let e=n.$implicit,t=v(4);h("colSpan",e.span),m(2),jt("ant-descriptions-item-no-colon",!t.nzColon),m(),h("nzStringTemplateOutlet",e.title)}}function Gr(i,n){}function Wr(i,n){if(i&1&&(l(0,"td",6)(1,"div",7)(2,"span",9),Me(3,Gr,0,0,"ng-template",10),u()()()),i&2){let e=n.$implicit;h("colSpan",e.span),m(3),h("ngTemplateOutlet",e.content)}}function qr(i,n){if(i&1&&(l(0,"tr",5),De(1,Hr,4,4,"td",6,yt),u(),l(3,"tr",5),De(4,Wr,4,2,"td",6,yt),u()),i&2){let e=n.$implicit;m(),Te(e),m(3),Te(e)}}function Zr(i,n){if(i&1&&De(0,qr,6,0,null,null,yt),i&2){let e=v(2);Te(e.itemMatrix)}}function $r(i,n){if(i&1&&(St(0),f(1),Et()),i&2){let e=v().$implicit;m(),_e(" ",e.title," ")}}function Yr(i,n){if(i&1&&(l(0,"td",12),Me(1,$r,2,1,"ng-container",4),u()),i&2){let e=n.$implicit;h("colSpan",e.span),m(),h("nzStringTemplateOutlet",e.title)}}function Xr(i,n){}function Jr(i,n){if(i&1&&(l(0,"td",11),Me(1,Xr,0,0,"ng-template",10),u()),i&2){let e=n.$implicit;h("colSpan",e.span),m(),h("ngTemplateOutlet",e.content)}}function Kr(i,n){if(i&1&&(l(0,"tr",5),De(1,Yr,2,2,"td",12,yt),u(),l(3,"tr",5),De(4,Jr,2,2,"td",11,yt),u()),i&2){let e=n.$implicit;m(),Te(e),m(3),Te(e)}}function Qr(i,n){if(i&1&&De(0,Kr,6,0,null,null,yt),i&2){let e=v(2);Te(e.itemMatrix)}}function ea(i,n){if(i&1&&Ne(0,Zr,2,0)(1,Qr,2,0),i&2){let e=v();ve(e.nzBordered?1:0)}}var Bo=(()=>{class i{content;nzSpan=1;nzTitle="";inputChange$=new zi;ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-descriptions-item"]],viewQuery:function(t,r){if(t&1&&Ii(Wo,7),t&2){let p;Ni(p=vi())&&(r.content=p.first)}},inputs:{nzSpan:[2,"nzSpan","nzSpan",bi],nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[Ht],ngContentSelectors:br,decls:1,vars:0,template:function(t,r){t&1&&(No(),qo(0,Dr,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return i})(),ta="descriptions",ia={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},Ao=(()=>{var z;let i,n=[],e=[],t,r=[],p=[],d,g=[],o=[],a,s=[],c=[];return z=class{nzConfigService=N(sn);cdr=N(Gt);breakpointService=N(zn);directionality=N(rn);destroyRef=N(Bi);_nzModuleName=ta;items;nzBordered=vt(this,n,!1);nzLayout=(vt(this,e),"horizontal");nzColumn=vt(this,r,ia);nzSize=(vt(this,p),vt(this,g,"default"));nzTitle=(vt(this,o),"");nzExtra;nzColon=vt(this,s,!0);itemMatrix=(vt(this,c),[]);realColumn=3;dir="ltr";breakpoint=fn.md;ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(Di(this.destroyRef)).subscribe(C=>{this.dir=C})}ngOnChanges(C){C.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){let C=this.items.changes.pipe(Vo(this.items));_o(C,C.pipe(jo(()=>_o(...this.items.map(_=>_.inputChange$)).pipe(Lo(16)))),this.breakpointService.subscribe(hn).pipe(_i(_=>this.breakpoint=_))).pipe(Di(this.destroyRef)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}prepareMatrix(){if(!this.items)return;let C=[],_=0,M=this.realColumn=this.getColumn(),we=this.items.toArray(),Fe=we.length,b=[],xe=()=>{b.push(C),C=[],_=0};for(let Le=0;Le<Fe;Le++){let ho=we[Le],{nzTitle:zo,content:go,nzSpan:Fi}=ho;_+=Fi,_>=M?(_>M&&an(`"nzColumn" is ${M} but we have row length ${_}`),C.push({title:zo,content:go,span:M-(_-Fi)}),xe()):Le===Fe-1?(C.push({title:zo,content:go,span:M-(_-Fi)}),xe()):C.push({title:zo,content:go,span:Fi})}this.itemMatrix=b}getColumn(){return typeof this.nzColumn!="number"?this.nzColumn[this.breakpoint]:this.nzColumn}},(()=>{let C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[Ti()],t=[Ti()],d=[Ti()],a=[Ti()],gi(null,null,i,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:_=>"nzBordered"in _,get:_=>_.nzBordered,set:(_,M)=>{_.nzBordered=M}},metadata:C},n,e),gi(null,null,t,{kind:"field",name:"nzColumn",static:!1,private:!1,access:{has:_=>"nzColumn"in _,get:_=>_.nzColumn,set:(_,M)=>{_.nzColumn=M}},metadata:C},r,p),gi(null,null,d,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:_=>"nzSize"in _,get:_=>_.nzSize,set:(_,M)=>{_.nzSize=M}},metadata:C},g,o),gi(null,null,a,{kind:"field",name:"nzColon",static:!1,private:!1,access:{has:_=>"nzColon"in _,get:_=>_.nzColon,set:(_,M)=>{_.nzColon=M}},metadata:C},s,c),C&&Object.defineProperty(z,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),Co(z,"\u0275fac",function(_){return new(_||z)}),Co(z,"\u0275cmp",E({type:z,selectors:[["nz-descriptions"]],contentQueries:function(_,M,we){if(_&1&&$o(we,Bo,4),_&2){let Fe;Ni(Fe=vi())&&(M.items=Fe)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(_,M){_&2&&jt("ant-descriptions-bordered",M.nzBordered)("ant-descriptions-middle",M.nzSize==="middle")("ant-descriptions-small",M.nzSize==="small")("ant-descriptions-rtl",M.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",Ei],nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:[2,"nzColon","nzColon",Ei]},exportAs:["nzDescriptions"],features:[Ht],decls:6,vars:3,consts:[[1,"ant-descriptions-header"],[1,"ant-descriptions-view"],[1,"ant-descriptions-title"],[1,"ant-descriptions-extra"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-row"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(_,M){_&1&&(Ne(0,Br,3,2,"div",0),l(1,"div",1)(2,"table")(3,"tbody"),Ne(4,jr,2,0),Ne(5,ea,2,1),u()()()),_&2&&(ve(M.nzTitle||M.nzExtra?0:-1),m(4),ve(M.nzLayout==="horizontal"?4:-1),m(),ve(M.nzLayout==="vertical"?5:-1))},dependencies:[ln,Hi,Xo],encapsulation:2,changeDetection:0})),z})(),Hn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Vt({type:i});static \u0275inj=Ot({imports:[Ao]})}return i})();var na=()=>({show:!0,front:!1}),ra=()=>[0,0,0,0];function aa(i,n){if(i&1){let e=Re();l(0,"button",14),S("click",function(){de(e);let r=v();return ce(r.fullChange())}),fe(1,"span",15),f(2," \u5168\u87A2\u5E55 "),u()}}function sa(i,n){if(i&1&&fe(0,"g2-mini-bar",16),i&2){let e=v();h("data",e.events)("height",30)("padding",be(3,ra))}}var ui=class ui{constructor(){this.http=N(Wi);this.message=N(Nt);this.ps=20;this.total=200;this.args={_allow_anonymous:!0,userid:null};this.url="https://api.randomuser.me/?results=20";this.events=[];this.scroll={y:"230px"};this.columns=[{title:"id",index:"id.value",type:"checkbox"},{title:"Avatar",index:"picture.thumbnail",type:"img",width:80},{title:"Name",index:"name.first",width:150,format:n=>`${n.name.first} ${n.name.last}`,type:"link",click:n=>this.message.info(`${n.name.first}`)},{title:"Email",index:"email"},{title:"Gender",index:"gender",type:"yn",yn:{truth:"female",yes:"\u7537",no:"\u5973",mode:"text"},width:120},{title:"Events",render:"events",width:90},{title:"Registered",index:"registered.date",type:"date",width:170},{title:"Actions",width:120,buttons:[{text:"Edit",click:n=>this.message.info(`edit [${n.id.value}]`),iif:n=>n.gender==="female"},{text:"Delete",type:"del",click:n=>this.message.info(`deleted [${n.id.value}]`)}]}]}ngOnInit(){this.http.get("/chart/visit").subscribe(n=>this.events=n.slice(0,8))}fullChange(n){this.scroll=n?{y:"350px"}:{y:"230px"}}};ui.\u0275fac=function(e){return new(e||ui)},ui.\u0275cmp=E({type:ui,selectors:[["app-st"]],decls:23,vars:9,consts:[["extra",""],["st",""],[1,"st-demo"],[3,"title","home"],[3,"data","columns","total","page","scroll"],["st-row","events"],["nzTitle","Firebase \u6574\u5408\u72C0\u614B",1,"mt-lg"],[1,"firebase-status"],["nzTitle","\u8A8D\u8B49\u72C0\u614B",3,"nzColumn"],["nzTitle","Firebase Auth"],["nzColor","green"],["nzTitle","Firestore ACL"],["nzTitle","Google \u767B\u5165"],["nzTitle","\u6B0A\u9650\u63A7\u5236"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","fullscreen"],["color","#999","borderWidth","3","tooltipType","mini","theme","mini",3,"data","height","padding"]],template:function(e,t){e&1&&(l(0,"div",2)(1,"page-header",3),Me(2,aa,3,0,"ng-template",null,0,ki),u(),l(4,"nz-card")(5,"st",4,1),Me(7,sa,1,4,"ng-template",5),u()(),l(8,"nz-card",6)(9,"div",7)(10,"nz-descriptions",8)(11,"nz-descriptions-item",9)(12,"nz-tag",10),f(13,"\u5DF2\u6574\u5408"),u()(),l(14,"nz-descriptions-item",11)(15,"nz-tag",10),f(16,"\u5DF2\u6574\u5408"),u()(),l(17,"nz-descriptions-item",12)(18,"nz-tag",10),f(19,"\u5DF2\u6574\u5408"),u()(),l(20,"nz-descriptions-item",13)(21,"nz-tag",10),f(22,"\u5DF2\u6574\u5408"),u()()()()()()),e&2&&(m(),h("title","ST \u8868\u683C\u5143\u4EF6\u6F14\u793A")("home","home"),m(4),h("data",t.url)("columns",t.columns)("total",t.total)("page",be(8,na))("scroll",t.scroll),m(5),h("nzColumn",2))},dependencies:[R,P,te,X,Xt,Fn,ae,re,ne,Qi,T,he,F,ze,U,J,k,V,pe,G,D,Ui,I,se,B,W,A,ie,$,Y,Z,q,O,Cn,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x,Un,Pn,Hn,Ao,Bo],encapsulation:2});var po=ui;var Gn=()=>({standalone:!0}),di=class di{constructor(){this.messageSrv=N(Nt);this.format_str="this is ${name}";this.format_res="";this.format_obj=JSON.stringify({name:"asdf"});this.content=`time ${+new Date}

    \u4E2D\u6587\uFF01@#\uFFE5%\u2026\u2026&*`}onFormat(){let n=null;try{n=JSON.parse(this.format_obj)}catch{this.messageSrv.error("\u65E0\u6CD5\u4F7F\u7528 JSON.parse \u8F6C\u6362");return}this.format_res=_n(this.format_str,n,!0)}onYuan(n){this.yuan_res=An(n)}onCopy(){cn(`time ${+new Date}`).then(()=>this.messageSrv.success("success"))}};di.\u0275fac=function(e){return new(e||di)},di.\u0275cmp=E({type:di,selectors:[["app-util"]],decls:39,vars:23,consts:[[1,"alain-default__content-title"],[3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u5B57\u7B26\u4E32\u7C7B"],["nzType","inner","nzTitle","format"],["nz-form",""],[3,"nzSm"],["nz-input","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzSpan","nzOffset"],["nz-button","",3,"click"],["nzType","inner","nzTitle","yuan"],["type","number","nz-input","",3,"ngModelChange","ngModel"],[3,"innerHTML"],["nzTitle","\u5176\u5B83\u7C7B"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," \u5DE5\u5177\u96C6 "),l(3,"small"),f(4,"@delon/util \u65E5\u5E38\u7528\u6CD5\u3002"),u()()(),l(5,"nz-row",1)(6,"nz-col",2)(7,"nz-card",3)(8,"nz-card",4)(9,"form",5)(10,"nz-form-item")(11,"nz-form-label",6),f(12,"String"),u(),l(13,"nz-form-control",6)(14,"input",7),Ee("ngModelChange",function(p){return Se(t.format_str,p)||(t.format_str=p),p}),u()()(),l(15,"nz-form-item")(16,"nz-form-label",6),f(17,"Object"),u(),l(18,"nz-form-control",6)(19,"input",7),Ee("ngModelChange",function(p){return Se(t.format_obj,p)||(t.format_obj=p),p}),u()()(),l(20,"nz-form-item")(21,"nz-form-control",8)(22,"button",9),S("click",function(){return t.onFormat()}),f(23,"Run"),u()()(),l(24,"nz-form-item")(25,"nz-form-label",6),f(26,"Result"),u(),l(27,"nz-form-control",6),f(28),u()()()(),l(29,"nz-card",10)(30,"nz-row",1)(31,"nz-col",2)(32,"input",11),Ee("ngModelChange",function(p){return Se(t.yuan_str,p)||(t.yuan_str=p),p}),S("ngModelChange",function(p){return t.onYuan(p)}),u()(),l(33,"nz-col",2),fe(34,"div",12),u()()()()(),l(35,"nz-col",2)(36,"nz-card",13)(37,"button",9),S("click",function(){return t.onCopy()}),f(38,"Copy"),u()()()()),e&2&&(m(5),h("nzGutter",16),m(),h("nzSpan",12),m(5),h("nzSm",8),m(2),h("nzSm",16),m(),ye("ngModel",t.format_str),h("ngModelOptions",be(21,Gn)),m(2),h("nzSm",8),m(2),h("nzSm",16),m(),ye("ngModel",t.format_obj),h("ngModelOptions",be(22,Gn)),m(2),h("nzSpan",16)("nzOffset",8),m(4),h("nzSm",8),m(2),h("nzSm",16),m(),_e(" ",t.format_res," "),m(2),h("nzGutter",16),m(),h("nzSpan",12),m(),ye("ngModel",t.yuan_str),m(),h("nzSpan",12),m(),h("innerHTML",t.yuan_res,Go),m(),h("nzSpan",12))},dependencies:[R,Yt,Bt,gn,At,Zt,Rt,$t,P,te,X,ae,re,ne,T,he,F,ze,U,J,kt,It,k,V,pe,G,D,I,se,B,W,A,ie,$,Pt,Y,Z,q,O,oe,me,ee,L,K,Kt,Jt,ei,Qt,le,w,Q,ge,j,ue,H,x],encapsulation:2});var uo=di;var ci=class ci{constructor(){this.xlsx=N(Nn);this.users=Array(100).fill(0).map((n,e)=>({id:e+1,name:`name ${e+1}`,age:Math.ceil(Math.random()*10)+20}));this.columns=[{title:"\u7F16\u53F7",index:"id",type:"checkbox"},{title:"\u59D3\u540D",index:"name"},{title:"\u5E74\u9F84",index:"age"}]}url(){this.xlsx.import("./assets/tmp/demo.xlsx").then(n=>this.data=n)}change(n){let e=n.target.files[0];this.xlsx.import(e).then(t=>this.data=t)}download(){let n=[this.columns.map(e=>e.title)];this.users.forEach(e=>n.push(this.columns.map(t=>e[t.index]))),this.xlsx.export({sheets:[{data:n,name:"sheet name"}]})}};ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275cmp=E({type:ci,selectors:[["app-xlsx"]],decls:16,vars:6,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/xlsx","target","_blank"],["nzTitle","Import"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],[1,"mt-sm"],["nzTitle","Export"],[1,"mt-sm",3,"data","ps","columns"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," Import & Export excel file, "),l(3,"a",1),f(4,"Document"),u()()(),l(5,"nz-card",2)(6,"button",3),S("click",function(){return t.url()}),f(7,"Via Url"),u(),l(8,"input",4),S("change",function(p){return t.change(p)}),u(),l(9,"p",5),f(10),wt(11,"json"),u()(),l(12,"nz-card",6)(13,"button",3),S("click",function(){return t.download()}),f(14,"Export"),u(),fe(15,"st",7),u()),e&2&&(m(10),_e("result: ",xt(11,4,t.data)),m(5),h("data",t.users)("ps",3)("columns",t.columns))},dependencies:[R,P,te,X,Xt,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,A,ie,$,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x,Ft],encapsulation:2});var co=ci;var Wn=Ro(wo(),1);var qn=(()=>{class i{http=N(Li);lazy=N(Vi);ngZone=N(Zo);cogSrv=N(Wt);cog;constructor(){this.cog=this.cogSrv.merge("zip",{url:"https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js",utils:[]})}init(){return this.lazy.load([this.cog.url].concat(this.cog.utils))}check(e){if(!e)throw new Error("get instance via `ZipService.create()`")}read(e,t){return new Promise((r,p)=>{let d=g=>{this.ngZone.run(()=>r(g))};this.init().then(()=>{if(typeof e=="string"){this.http.request("GET",e,{responseType:"arraybuffer"}).subscribe({next:o=>{JSZip.loadAsync(o,t).then(a=>d(a))},error:o=>{p(o)}});return}let g=new FileReader;g.onload=o=>{JSZip.loadAsync(o.target.result,t).then(a=>d(a))},g.readAsBinaryString(e)})})}create(){return new Promise(e=>{this.init().then(()=>{let t=new JSZip;e(t)}).catch(()=>e(null))})}pushUrl(e,t,r){return this.check(e),new Promise((p,d)=>{this.http.request("GET",r,{responseType:"arraybuffer"}).subscribe({next:g=>{e.file(t,g),p()},error:g=>{d({url:r,error:g})}})})}save(e,t){this.check(e);let r=Ae({filename:"download.zip"},t);return new Promise((p,d)=>{e.generateAsync(Ae({type:"blob"},r.options),r.update).then(g=>{r.callback&&r.callback(g),(0,Wn.saveAs)(g,r.filename),p()},g=>{d(g)})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Lt({token:i,factory:i.\u0275fac,providedIn:"root"})}return Io([Mn()],i.prototype,"read",null),i})();function la(i,n){if(i&1&&(l(0,"li"),f(1),wt(2,"json"),u()),i&2){let e=n.$implicit;m(),Mt(xt(2,1,e))}}function ma(i,n){if(i&1){let e=Re();l(0,"nz-card",2)(1,"button",4),S("click",function(){de(e);let r=v();return ce(r.url())}),f(2,"Via Url"),u(),l(3,"input",5),S("change",function(r){de(e);let p=v();return ce(p.change(r))}),u(),l(4,"ol"),De(5,la,3,3,"li",null,Tt),u()()}if(i&2){let e=v();m(5),Te(e.list)}}function pa(i,n){if(i&1){let e=Re();l(0,"tr")(1,"td")(2,"input",9),Ee("ngModelChange",function(r){let p=de(e).$implicit;return Se(p.path,r)||(p.path=r),ce(r)}),u()(),l(3,"td")(4,"input",9),Ee("ngModelChange",function(r){let p=de(e).$implicit;return Se(p.url,r)||(p.url=r),ce(r)}),u()()()}if(i&2){let e=n.$implicit,t=n.$index;m(2),h("name",Si("path",t)),ye("ngModel",e.path),m(2),h("name",Si("url",t)),ye("ngModel",e.url)}}function ua(i,n){if(i&1){let e=Re();l(0,"nz-card",3)(1,"button",6),S("click",function(){de(e);let r=v();return ce(r.data.push({}))}),f(2,"new"),u(),l(3,"button",7),S("click",function(){de(e);let r=v();return ce(r.download())}),f(4,"download"),u(),l(5,"nz-table",8)(6,"thead")(7,"tr")(8,"th")(9,"span"),f(10,"path"),u()(),l(11,"th")(12,"span"),f(13,"url"),u()()()(),l(14,"tbody"),De(15,pa,5,6,"tr",null,Tt),u()()()}if(i&2){let e=v();m(),h("nzType","primary"),m(4),h("nzData",e.data)("nzFrontPagination",!1)("nzShowPagination",!1),m(10),Te(e.data)}}var fi=class fi{constructor(){this.zip=N(qn);this.msg=N(Nt);this.cdr=N(Gt);this.instance=null;this.data=[{path:"demo.docx",url:"https://ng-alain.com/assets/demo.docx"},{path:"\u5C0F\u7A0B\u5E8F\u6807\u5FD7.zip",url:"https://wximg.gtimg.com/shake_tv/mina/standard_logo.zip"}]}ngOnInit(){this.zip.create().then(n=>{this.instance=n,this.cdr.detectChanges()})}format(n){let e=n.files;this.list=Object.keys(e).map(t=>({name:t,dir:e[t].dir,date:e[t].date})),this.cdr.detectChanges()}url(){this.zip.read("./assets/tmp/demo.zip").then(n=>this.format(n))}change(n){let e=n.target.files[0];this.zip.read(e).then(t=>this.format(t))}download(){let n=[];this.data.forEach(e=>{n.push(this.zip.pushUrl(this.instance,e.path,e.url))}),Promise.all(n).then(()=>{this.zip.save(this.instance).then(()=>{this.msg.success("download success"),this.data=[]})},e=>{console.warn(e),this.msg.error(JSON.stringify(e))})}};fi.\u0275fac=function(e){return new(e||fi)},fi.\u0275cmp=E({type:fi,selectors:[["app-zip"]],decls:7,vars:2,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/zip","target","_blank"],["nzTitle","\u89E3\u538B"],["nzTitle","\u538B\u7F29"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],["nz-button","",3,"click","nzType"],["nz-button","",1,"ml-sm",3,"click"],[1,"mt-sm",3,"nzData","nzFrontPagination","nzShowPagination"],["nz-input","",3,"ngModelChange","ngModel","name"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),f(2," Read & Write zip file, "),l(3,"a",1),f(4,"Document"),u()()(),Ne(5,ma,7,0,"nz-card",2),Ne(6,ua,17,4,"nz-card",3)),e&2&&(m(5),ve(t.instance?5:-1),m(),ve(t.instance?6:-1))},dependencies:[R,Bt,At,Rt,P,te,X,ae,re,ne,T,he,F,ze,U,J,k,V,pe,G,D,I,se,B,W,bn,yn,Sn,Tn,En,Dn,A,ie,$,Pt,Y,Z,q,O,oe,me,ee,L,K,le,w,Q,ge,j,ue,H,x,Ft],encapsulation:2,changeDetection:0});var fo=fi;var hm=[{path:"st",component:po},{path:"util",component:uo},{path:"print",component:lo},{path:"acl",component:eo},{path:"guard",component:ao,children:[{path:"leave",component:so,canDeactivate:[On]},{path:"auth",component:ro,canActivate:[yo],data:{guard:"user1"}},{path:"admin",component:no,canActivate:[yo],data:{guard:"admin"}}]},{path:"cache",component:to},{path:"qr",component:mo},{path:"downfile",component:io},{path:"xlsx",component:co},{path:"zip",component:fo},{path:"form",component:oo}];export{hm as routes};
