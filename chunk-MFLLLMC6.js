import{b as $e,c as B,d as Re,e as Qe}from"./chunk-TVPAMTUS.js";import{a as j}from"./chunk-W2YKWTW6.js";import{a as Ue}from"./chunk-GECOFRQB.js";import{a as Pe,e as Q,f as He,r as Ke}from"./chunk-56KVT4S4.js";import{$ as M,Mc as le,Nc as ce,Oc as Ae,Pc as Fe,a as $,ba as Ve,da as Be,fa as R,o as Ie}from"./chunk-EIQVRW2S.js";import{Ea as G,Ed as de,Gb as X,Hb as Ne,Hc as ve,Ib as _,Jc as se,Kb as T,Kc as U,Lb as we,Nb as ee,Nc as Me,Oa as L,Ob as ne,Pa as Ce,Pb as z,Qb as N,Qc as ye,Ra as Se,Rb as w,Rc as Oe,Sb as k,Vb as te,Wb as H,Xb as A,Ya as _e,Zb as F,ac as I,db as g,dc as c,g as q,ga as O,gc as be,hb as Te,hc as Ee,ic as ie,id as V,jc as oe,kd as a,ld as Le,ma as fe,na as me,nc as re,oa as Y,oc as ae,pb as E,pc as f,q as P,qb as J,qc as K,r as y,sa as u,sb as ke,tb as De,vb as v,xb as h,ya as C,yb as xe,za as S}from"./chunk-A26OGSUO.js";import{g as W}from"./chunk-57BLH6QZ.js";var je=(()=>{class i{UNIQUE_WRAPPERS=["##==-open_tag-==##","##==-close_tag-==##"];transform(e,t,n,d){if(!t)return e;let m=new RegExp(t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$&"),n),D=e.replace(m,`${this.UNIQUE_WRAPPERS[0]}$&${this.UNIQUE_WRAPPERS[1]}`);return Ve(D).replace(new RegExp(this.UNIQUE_WRAPPERS[0],"g"),d?`<span class="${d}">`:"<span>").replace(new RegExp(this.UNIQUE_WRAPPERS[1],"g"),"</span>")}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=ke({name:"nzHighlight",type:i,pure:!0})}return i})();function sn(i,l){if(i&1&&te(0,"span"),i&2){let e=l.$index,t=c();f("ant-tree-indent-unit",!t.nzSelectMode)("ant-select-tree-indent-unit",t.nzSelectMode)("ant-select-tree-indent-unit-start",t.nzSelectMode&&t.nzIsStart[e])("ant-tree-indent-unit-start",!t.nzSelectMode&&t.nzIsStart[e])("ant-select-tree-indent-unit-end",t.nzSelectMode&&t.nzIsEnd[e])("ant-tree-indent-unit-end",!t.nzSelectMode&&t.nzIsEnd[e])}}var Ze=["builtin",""],he=(i,l)=>({$implicit:i,origin:l});function dn(i,l){if(i&1&&(H(0),k(1,"nz-icon",2),A()),i&2){let e=c(3);g(),f("ant-select-tree-switcher-icon",e.nzSelectMode)("ant-tree-switcher-icon",!e.nzSelectMode)}}function ln(i,l){if(i&1&&v(0,dn,2,4,"ng-container",1),i&2){let e=c(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,he,e.context,e.context.origin))}}function cn(i,l){i&1&&k(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function hn(i,l){if(i&1&&_(0,ln,1,5,"ng-container")(1,cn,1,1,"nz-icon",0),i&2){let e=c();T(e.isLoading?1:0)}}function zn(i,l){if(i&1&&k(0,"nz-icon",3),i&2){let e=c(4);z("nzType",e.isSwitcherOpen?"minus-square":"plus-square")}}function pn(i,l){i&1&&k(0,"nz-icon",4)}function gn(i,l){if(i&1&&(H(0),_(1,zn,1,1,"nz-icon",3)(2,pn,1,0,"nz-icon",4),A()),i&2){let e=c(3);g(),T(e.isShowLineIcon?1:2)}}function un(i,l){if(i&1&&v(0,gn,3,1,"ng-container",1),i&2){let e=c(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,he,e.context,e.context.origin))}}function fn(i,l){i&1&&k(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function mn(i,l){if(i&1&&_(0,un,1,5,"ng-container")(1,fn,1,1,"nz-icon",0),i&2){let e=c();T(e.isLoading?1:0)}}function Cn(i,l){}function Sn(i,l){if(i&1&&(N(0,"span")(1,"span"),k(2,"nz-icon",4),w()()),i&2){let e=c(2);f("ant-tree-icon__open",e.isSwitcherOpen)("ant-tree-icon__close",e.isSwitcherClose)("ant-tree-icon_loading",e.isLoading)("ant-select-tree-iconEle",e.selectMode)("ant-tree-iconEle",!e.selectMode),g(),f("ant-select-tree-iconEle",e.selectMode)("ant-select-tree-icon__customize",e.selectMode)("ant-tree-iconEle",!e.selectMode)("ant-tree-icon__customize",!e.selectMode),g(),z("nzType",e.icon)}}function _n(i,l){if(i&1&&(_(0,Sn,3,19,"span",2),k(1,"span",3),Me(2,"nzHighlight")),i&2){let e=c();T(e.icon&&e.showIcon?0:-1),g(),z("innerHTML",ye(2,2,e.title,e.matchedValue,"i","font-highlight"),_e)}}function Tn(i,l){if(i&1&&k(0,"nz-tree-drop-indicator",1),i&2){let e=c();z("dropPosition",e.dragPosition)("level",e.context.level)}}function kn(i,l){if(i&1){let e=F();N(0,"nz-tree-node-switcher",4),I("click",function(n){C(e);let d=c();return S(d.clickExpand(n))}),w()}if(i&2){let e=c();z("nzShowExpand",e.nzShowExpand)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzSelectMode",e.nzSelectMode)("context",e.nzTreeNode)("isLeaf",e.isLeaf)("isExpanded",e.isExpanded)("isLoading",e.isLoading)}}function Dn(i,l){if(i&1){let e=F();N(0,"nz-tree-node-checkbox",5),I("click",function(n){C(e);let d=c();return S(d.clickCheckbox(n))}),w()}if(i&2){let e=c();z("nzSelectMode",e.nzSelectMode)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisabled",e.isDisabled)("isDisableCheckbox",e.isDisableCheckbox)}}var xn=["nzTreeTemplate"],We=i=>({$implicit:i});function Nn(i,l){}function wn(i,l){if(i&1&&(H(0),v(1,Nn,0,0,"ng-template",9),A()),i&2){let e=l.$implicit;c(2);let t=re(9);g(),z("ngTemplateOutlet",t)("ngTemplateOutletContext",se(2,We,e))}}function bn(i,l){if(i&1&&(N(0,"cdk-virtual-scroll-viewport",7),v(1,wn,2,4,"ng-container",8),w()),i&2){let e=c();ae("height",e.nzVirtualHeight),f("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("itemSize",e.nzVirtualItemSize)("minBufferPx",e.nzVirtualMinBufferPx)("maxBufferPx",e.nzVirtualMaxBufferPx),g(),z("cdkVirtualForOf",e.nzFlattenNodes)("cdkVirtualForTrackBy",e.trackByFlattenNode)}}function En(i,l){}function vn(i,l){if(i&1&&v(0,En,0,0,"ng-template",9),i&2){let e=l.$implicit;c(2);let t=re(9);z("ngTemplateOutlet",t)("ngTemplateOutletContext",se(2,We,e))}}function Mn(i,l){if(i&1&&(N(0,"div",10),ee(1,vn,1,4,null,9,Ne().trackByFlattenNode,!0),w()),i&2){let e=c();f("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("@.disabled",e.beforeInit||!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@treeCollapseMotion",e.nzFlattenNodes.length),g(),ne(e.nzFlattenNodes)}}function yn(i,l){if(i&1){let e=F();N(0,"nz-tree-node",11),I("nzExpandChange",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzClick",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzDblClick",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzContextMenu",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzCheckboxChange",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDragStart",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDragEnter",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDragOver",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDragLeave",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDragEnd",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))})("nzOnDrop",function(n){C(e);let d=c();return S(d.eventTriggerChanged(n))}),w()}if(i&2){let e=l.$implicit,t=c();z("icon",e.icon)("title",e.title)("isLoading",e.isLoading)("isSelected",e.isSelected)("isDisabled",e.isDisabled)("isMatched",e.isMatched)("isExpanded",e.isExpanded)("isLeaf",e.isLeaf)("isStart",e.isStart)("isEnd",e.isEnd)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisableCheckbox",e.isDisableCheckbox)("isSelectable",e.isSelectable)("canHide",e.canHide)("nzTreeNode",e)("nzSelectMode",t.nzSelectMode)("nzShowLine",t.nzShowLine)("nzExpandedIcon",t.nzExpandedIcon)("nzDraggable",t.nzDraggable)("nzCheckable",t.nzCheckable)("nzShowExpand",t.nzShowExpand)("nzAsyncData",t.nzAsyncData)("nzSearchValue",t.nzSearchValue)("nzHideUnMatched",t.nzHideUnMatched)("nzBeforeDrop",t.nzBeforeDrop)("nzShowIcon",t.nzShowIcon)("nzTreeTemplate",t.nzTreeTemplate||t.nzTreeTemplateChild)}}var On=(()=>{class i{dropPosition;level=1;direction="ltr";style={};cdr=u(V);ngOnChanges(){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,t="ltr"){let d=t==="ltr"?"left":"right",m=t==="ltr"?"right":"left",D={[d]:"4px",[m]:"0px"};switch(e){case-1:D.top="-3px";break;case 1:D.bottom="-3px";break;case 0:D.bottom="-3px",D[d]="28px";break;default:D.display="none";break}this.style=D,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-drop-indicator"]],hostAttrs:[1,"ant-tree-drop-indicator"],hostVars:2,hostBindings:function(t,n){t&2&&K(n.style)},inputs:{dropPosition:"dropPosition",level:[2,"level","level",Le],direction:"direction"},exportAs:["nzTreeDropIndicator"],features:[L],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}return i})(),Ln=(()=>{class i{nzTreeLevel=0;nzIsStart=[];nzIsEnd=[];nzSelectMode=!1;listOfUnit=[];ngOnChanges(e){let{nzTreeLevel:t}=e;t&&(this.listOfUnit=[...new Array(t.currentValue||0)])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(t,n){t&2&&(X("aria-hidden",!0),f("ant-tree-indent",!n.nzSelectMode)("ant-select-tree-indent",n.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],features:[L],decls:2,vars:0,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end"]],template:function(t,n){t&1&&ee(0,sn,1,12,"span",0,we),t&2&&ne(n.listOfUnit)},encapsulation:2,changeDetection:0})}return i})(),In=(()=>{class i{nzSelectMode=!1;isChecked;isHalfChecked;isDisabled;isDisableCheckbox;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(t,n){t&2&&f("ant-select-tree-checkbox",n.nzSelectMode)("ant-select-tree-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-checkbox-disabled",n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))("ant-tree-checkbox",!n.nzSelectMode)("ant-tree-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-checkbox-disabled",!n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisabled:[2,"isDisabled","isDisabled",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a]},attrs:Ze,decls:1,vars:4,template:function(t,n){t&1&&te(0,"span"),t&2&&f("ant-tree-checkbox-inner",!n.nzSelectMode)("ant-select-tree-checkbox-inner",n.nzSelectMode)},encapsulation:2,changeDetection:0})}return i})(),qe=(()=>{class i{nzShowExpand;nzShowLine;nzExpandedIcon;nzSelectMode=!1;context;isLeaf;isLoading;isExpanded;get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(t,n){t&2&&f("ant-select-tree-switcher",n.nzSelectMode)("ant-select-tree-switcher-noop",n.nzSelectMode&&n.isLeaf)("ant-select-tree-switcher_open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-switcher_close",n.nzSelectMode&&n.isSwitcherClose)("ant-tree-switcher",!n.nzSelectMode)("ant-tree-switcher-noop",!n.nzSelectMode&&n.isLeaf)("ant-tree-switcher_open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-switcher_close",!n.nzSelectMode&&n.isSwitcherClose)},inputs:{nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:[2,"isLeaf","isLeaf",a],isLoading:[2,"isLoading","isLoading",a],isExpanded:[2,"isExpanded","isExpanded",a]},decls:2,vars:2,consts:[["nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nzType","caret-down"],[1,"ant-tree-switcher-line-icon",3,"nzType"],["nzType","file",1,"ant-tree-switcher-line-icon"]],template:function(t,n){t&1&&(_(0,hn,2,1),_(1,mn,2,1)),t&2&&(T(n.isShowSwitchIcon?0:-1),g(),T(n.nzShowLine?1:-1))},dependencies:[ce,le,Fe,Ae],encapsulation:2,changeDetection:0})}return i})(),Ye=(()=>{class i{cdr=u(V);searchValue;treeTemplate=null;draggable;showIcon;selectMode=!1;context;icon;title;isLoading;isSelected;isDisabled;isMatched;isExpanded;isLeaf;showIndicator=!0;dragPosition;get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}ngOnChanges(e){let{showIndicator:t,dragPosition:n}=e;(t||n)&&this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(t,n){t&2&&(X("title",n.title)("draggable",n.canDraggable)("aria-grabbed",n.canDraggable),f("draggable",n.canDraggable)("ant-select-tree-node-content-wrapper",n.selectMode)("ant-select-tree-node-content-wrapper-open",n.selectMode&&n.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",n.selectMode&&n.isSwitcherClose)("ant-select-tree-node-selected",n.selectMode&&n.isSelected)("ant-tree-node-content-wrapper",!n.selectMode)("ant-tree-node-content-wrapper-open",!n.selectMode&&n.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!n.selectMode&&n.isSwitcherClose)("ant-tree-node-selected",!n.selectMode&&n.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:[2,"draggable","draggable",a],showIcon:[2,"showIcon","showIcon",a],selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],showIndicator:"showIndicator",dragPosition:"dragPosition"},features:[L],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropPosition","level"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle"],[1,"ant-tree-title",3,"innerHTML"],[3,"nzType"]],template:function(t,n){t&1&&(v(0,Cn,0,0,"ng-template",0),_(1,_n,3,7),_(2,Tn,1,2,"nz-tree-drop-indicator",1)),t&2&&(z("ngTemplateOutlet",n.treeTemplate)("ngTemplateOutletContext",U(4,he,n.context,n.context.origin)),g(),T(n.treeTemplate?-1:1),g(),T(n.showIndicator?2:-1))},dependencies:[de,ce,le,On,je],encapsulation:2,changeDetection:0})}return i})(),Ge=(()=>{class i{noAnimation=u(j,{host:!0,optional:!0});nzTreeService=u(B);ngZone=u(xe);renderer=u(Te);el=u(Se).nativeElement;cdr=u(V);destroyRef=u(G);icon="";title="";isLoading=!1;isSelected=!1;isDisabled=!1;isMatched=!1;isExpanded;isLeaf;isChecked;isHalfChecked;isDisableCheckbox;isSelectable;canHide;isStart=[];isEnd=[];nzTreeNode;nzShowLine;nzShowExpand;nzCheckable;nzAsyncData;nzHideUnMatched=!1;nzNoAnimation=!1;nzSelectMode=!1;nzShowIcon=!1;nzExpandedIcon;nzTreeTemplate=null;nzBeforeDrop;nzSearchValue="";nzDraggable=!1;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;destroy$=new q;dragPos=2;dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"};draggingKey=null;showIndicator=!1;get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(t)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(t)}dblClick(e){e.preventDefault();let t=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(t)}contextMenu(e){e.preventDefault();let t=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(t)}clickCheckbox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckboxChange.emit(t)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(t=>{this.renderer.removeClass(this.el,t)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let t=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(t)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let t=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(t)})}handleDragOver(e){e.preventDefault();let t=this.nzTreeService.calcDropPosition(e);this.dragPos!==t&&(this.clearDragClass(),this.renderIndicator(t),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.el,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.el,"drop-target")));let n=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(n)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let t=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(t)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let t=this.nzTreeService.getSelectedNode();if(!t||t&&t.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let n=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),d=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(m=>{m&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n),this.nzOnDragEnd.emit(d)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let t=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(t)}})}handDragEvent(){this.nzDraggable?(this.destroy$=new q,M(this.el,"dragstart").pipe(O(this.destroy$)).subscribe(e=>this.handleDragStart(e)),M(this.el,"dragenter").pipe(O(this.destroy$)).subscribe(e=>this.handleDragEnter(e)),M(this.el,"dragover").pipe(O(this.destroy$)).subscribe(e=>this.handleDragOver(e)),M(this.el,"dragleave").pipe(O(this.destroy$)).subscribe(e=>this.handleDragLeave(e)),M(this.el,"drop").pipe(O(this.destroy$)).subscribe(e=>this.handleDragDrop(e)),M(this.el,"dragend").pipe(O(this.destroy$)).subscribe(e=>this.handleDragEnd(e))):(this.destroy$.next(),this.destroy$.complete())}markForCheck(){this.cdr.markForCheck()}constructor(){this.destroyRef.onDestroy(()=>{this.destroy$.next(),this.destroy$.complete()})}ngOnInit(){this.nzTreeNode.component=this,M(this.el,"mousedown").pipe($(this.destroyRef)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})}ngOnChanges(e){let{nzDraggable:t}=e;t&&this.handDragEvent()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(t,n){t&2&&(ae("display",n.displayStyle),f("ant-select-tree-treenode",n.nzSelectMode)("ant-select-tree-treenode-disabled",n.nzSelectMode&&n.isDisabled)("ant-select-tree-treenode-switcher-open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",n.nzSelectMode&&n.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-treenode-selected",n.nzSelectMode&&n.isSelected)("ant-select-tree-treenode-loading",n.nzSelectMode&&n.isLoading)("ant-tree-treenode",!n.nzSelectMode)("ant-tree-treenode-disabled",!n.nzSelectMode&&n.isDisabled)("ant-tree-treenode-switcher-open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-treenode-switcher-close",!n.nzSelectMode&&n.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-treenode-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-treenode-selected",!n.nzSelectMode&&n.isSelected)("ant-tree-treenode-loading",!n.nzSelectMode&&n.isLoading)("dragging",n.draggingKey===n.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a],isSelectable:[2,"isSelectable","isSelectable",a],canHide:[2,"canHide","canHide",a],isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:[2,"nzShowLine","nzShowLine",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:[2,"nzDraggable","nzDraggable",a]},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],features:[L],attrs:Ze,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"],[3,"dblclick","click","contextmenu","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition"],[3,"click","nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"click","nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"]],template:function(t,n){t&1&&(k(0,"nz-tree-indent",0),_(1,kn,1,8,"nz-tree-node-switcher",1),_(2,Dn,1,5,"nz-tree-node-checkbox",2),N(3,"nz-tree-node-title",3),I("dblclick",function(m){return n.dblClick(m)})("click",function(m){return n.clickSelect(m)})("contextmenu",function(m){return n.contextMenu(m)}),w()),t&2&&(z("nzTreeLevel",n.nzTreeNode.level)("nzSelectMode",n.nzSelectMode)("nzIsStart",n.isStart)("nzIsEnd",n.isEnd),g(),T(n.nzShowExpand?1:-1),g(),T(n.nzCheckable?2:-1),g(),z("icon",n.icon)("title",n.title)("isLoading",n.isLoading)("isSelected",n.isSelected)("isDisabled",n.isDisabled)("isMatched",n.isMatched)("isExpanded",n.isExpanded)("isLeaf",n.isLeaf)("searchValue",n.nzSearchValue)("treeTemplate",n.nzTreeTemplate)("draggable",n.nzDraggable)("showIcon",n.nzShowIcon)("selectMode",n.nzSelectMode)("context",n.nzTreeNode)("showIndicator",n.showIndicator)("dragPosition",n.dragPos))},dependencies:[Ln,qe,In,Ye],encapsulation:2,changeDetection:0})}return i})(),Je=(()=>{class i extends B{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ce(i)))(n||i)}})();static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})();function Vn(){let i=u(Re,{skipSelf:!0,optional:!0}),l=u(Je);return i??l}var Bn="tree",Pn=(()=>{var x;let i=Qe,l,e=[],t=[],n,d=[],m=[],D,ze=[],pe=[];return x=class extends i{_nzModuleName=Bn;noAnimation=u(j,{host:!0,optional:!0});nzConfigService=u(Be);cdr=u(V);directionality=u(Ie);destroyRef=u(G);nzShowIcon=y(this,e,!1);nzHideUnMatched=(y(this,t),y(this,d,!1));nzBlockNode=(y(this,m),y(this,ze,!1));nzExpandAll=(y(this,pe),!1);nzSelectMode=!1;nzCheckStrictly=!1;nzShowExpand=!0;nzShowLine=!1;nzCheckable=!1;nzAsyncData=!1;nzDraggable=!1;nzMultiple=!1;nzExpandedIcon;nzVirtualItemSize=28;nzVirtualMaxBufferPx=500;nzVirtualMinBufferPx=28;nzVirtualHeight=null;nzTreeTemplate;nzBeforeDrop;nzData=[];nzExpandedKeys=[];nzSelectedKeys=[];nzCheckedKeys=[];nzSearchValue="";nzSearchFunc;nzTreeTemplateChild;cdkVirtualScrollViewport;nzFlattenNodes=[];beforeInit=!0;dir="ltr";nzExpandedKeysChange=new h;nzSelectedKeysChange=new h;nzCheckedKeysChange=new h;nzSearchValueChange=new h;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0};HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"};onChange=()=>null;onTouched=()=>null;writeValue(r){this.handleNzData(r)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}renderTreeProperties(r){let o=!1,s=!1,{nzData:b,nzExpandedKeys:p,nzSelectedKeys:Xe,nzCheckedKeys:en,nzCheckStrictly:ge,nzExpandAll:ue,nzMultiple:nn,nzSearchValue:Z}=r;ue&&(o=!0,s=this.nzExpandAll),nn&&(this.nzTreeService.isMultiple=this.nzMultiple),ge&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),b&&this.handleNzData(this.nzData),en&&this.handleCheckedKeys(this.nzCheckedKeys),ge&&this.handleCheckedKeys(null),(p||ue)&&(o=!0,this.handleExpandedKeys(s||this.nzExpandedKeys)),Xe&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),Z&&(Z.firstChange&&!this.nzSearchValue||(o=!1,this.handleSearchValue(Z.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let tn=this.getExpandedNodeList().map(rn=>rn.key),on=o?s||this.nzExpandedKeys:tn;this.handleFlattenNodes(this.nzTreeService.rootNodes,on)}trackByFlattenNode(r,o){return o.key}handleNzData(r){if(Array.isArray(r)){let o=this.coerceTreeNodes(r);this.nzTreeService.initTree(o)}}handleFlattenNodes(r,o=[]){this.nzTreeService.flattenTreeData(r,o)}handleCheckedKeys(r){this.nzTreeService.conductCheck(r,this.nzCheckStrictly)}handleExpandedKeys(r=[]){this.nzTreeService.conductExpandedKeys(r)}handleSelectedKeys(r,o){this.nzTreeService.conductSelectedKeys(r,o)}handleSearchValue(r,o){let s=$e(this.nzTreeService.rootNodes,!0).map(p=>p.data),b=p=>o?o(p.origin):!!r&&p.title.toLowerCase().includes(r.toLowerCase());s.forEach(p=>{p.isMatched=b(p),p.canHide=!p.isMatched,p.isMatched?this.nzTreeService.expandNodeAllParentBySearch(p):(p.setExpanded(!1),this.nzTreeService.setExpandedNodeList(p)),this.nzTreeService.setMatchedNodeList(p)})}eventTriggerChanged(r){let o=r.node;switch(r.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(r);break;case"click":this.nzClick.emit(r);break;case"dblclick":this.nzDblClick.emit(r);break;case"contextmenu":this.nzContextMenu.emit(r);break;case"check":{this.nzTreeService.setCheckedNodeList(o),this.nzCheckStrictly||this.nzTreeService.conduct(o);let s=this.nzTreeService.formatEvent("check",o,r.event);this.nzCheckboxChange.emit(s);let b=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(b);break}case"dragstart":o.isExpanded&&(o.setExpanded(!o.isExpanded),this.renderTree()),this.nzOnDragStart.emit(r);break;case"dragenter":{let s=this.nzTreeService.getSelectedNode();s&&s.key!==o.key&&!o.isExpanded&&!o.isLeaf&&(o.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(r);break}case"dragover":this.nzOnDragOver.emit(r);break;case"dragleave":this.nzOnDragLeave.emit(r);break;case"dragend":this.nzOnDragEnd.emit(r);break;case"drop":this.renderTree(),this.nzOnDrop.emit(r);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(r=>r.key)),this.cdr.markForCheck()}constructor(){super(u(B))}ngOnInit(){this.nzTreeService.flattenNodes$.pipe($(this.destroyRef)).subscribe(r=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?r.filter(o=>!o.canHide):r,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe($(this.destroyRef)).subscribe(r=>{this.dir=r,this.cdr.detectChanges()})}ngOnChanges(r){this.renderTreeProperties(r)}ngAfterViewInit(){this.beforeInit=!1}},(()=>{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;l=[R()],n=[R()],D=[R()],P(null,null,l,{kind:"field",name:"nzShowIcon",static:!1,private:!1,access:{has:o=>"nzShowIcon"in o,get:o=>o.nzShowIcon,set:(o,s)=>{o.nzShowIcon=s}},metadata:r},e,t),P(null,null,n,{kind:"field",name:"nzHideUnMatched",static:!1,private:!1,access:{has:o=>"nzHideUnMatched"in o,get:o=>o.nzHideUnMatched,set:(o,s)=>{o.nzHideUnMatched=s}},metadata:r},d,m),P(null,null,D,{kind:"field",name:"nzBlockNode",static:!1,private:!1,access:{has:o=>"nzBlockNode"in o,get:o=>o.nzBlockNode,set:(o,s)=>{o.nzBlockNode=s}},metadata:r},ze,pe),r&&Object.defineProperty(x,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),W(x,"\u0275fac",function(o){return new(o||x)}),W(x,"\u0275cmp",E({type:x,selectors:[["nz-tree"]],contentQueries:function(o,s,b){if(o&1&&be(b,xn,7),o&2){let p;ie(p=oe())&&(s.nzTreeTemplateChild=p.first)}},viewQuery:function(o,s){if(o&1&&Ee(Q,5,Q),o&2){let b;ie(b=oe())&&(s.cdkVirtualScrollViewport=b.first)}},hostVars:20,hostBindings:function(o,s){o&2&&f("ant-select-tree",s.nzSelectMode)("ant-select-tree-show-line",s.nzSelectMode&&s.nzShowLine)("ant-select-tree-icon-hide",s.nzSelectMode&&!s.nzShowIcon)("ant-select-tree-block-node",s.nzSelectMode&&s.nzBlockNode)("ant-tree",!s.nzSelectMode)("ant-tree-rtl",s.dir==="rtl")("ant-tree-show-line",!s.nzSelectMode&&s.nzShowLine)("ant-tree-icon-hide",!s.nzSelectMode&&!s.nzShowIcon)("ant-tree-block-node",!s.nzSelectMode&&s.nzBlockNode)("draggable-tree",s.nzDraggable)},inputs:{nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzBlockNode:[2,"nzBlockNode","nzBlockNode",a],nzExpandAll:[2,"nzExpandAll","nzExpandAll",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzCheckStrictly:[2,"nzCheckStrictly","nzCheckStrictly",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzDraggable:[2,"nzDraggable","nzDraggable",a],nzMultiple:[2,"nzMultiple","nzMultiple",a],nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],features:[ve([Je,{provide:B,useFactory:Vn},{provide:Ue,useExisting:fe(()=>x),multi:!0}]),De,L],decls:10,vars:7,consts:[["nodeTemplate",""],[1,"ant-tree-treenode"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation"],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],["builtin","",3,"nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckboxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate"]],template:function(o,s){o&1&&(N(0,"div"),k(1,"input"),w(),N(2,"div",1)(3,"div",2),k(4,"div",3),w()(),N(5,"div",4),_(6,bn,2,11,"cdk-virtual-scroll-viewport",5)(7,Mn,3,7,"div",6),w(),v(8,yn,1,28,"ng-template",null,0,Oe)),o&2&&(g(),K(s.HIDDEN_STYLE),g(),K(s.HIDDEN_NODE_STYLE),g(3),f("ant-select-tree-list",s.nzSelectMode),g(),T(s.nzVirtualHeight?6:7))},dependencies:[Q,Pe,He,de,j,Ge],encapsulation:2,data:{animation:[Ke]},changeDetection:0})),x})(),gt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=J({type:i});static \u0275inj=Y({imports:[Pn,Ge,qe,Ye]})}return i})();export{Pn as a,gt as b};
