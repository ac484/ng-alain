import{y as v}from"./chunk-EIQVRW2S.js";import{Ea as u,d as c,g as b,na as i,sa as n}from"./chunk-A26OGSUO.js";var a=(()=>{class t{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}static \u0275fac=function(s){return new(s||t)};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),N=(()=>{class t{nzResizeObserverFactory=n(a);destroyRef=n(u);observedElements=new Map;constructor(){this.destroyRef.onDestroy(()=>this.observedElements.forEach((e,s)=>this.cleanupObserver(s)))}observe(e){let s=v(e);return new c(r=>{let d=this.observeElement(s).subscribe(r);return()=>{d.unsubscribe(),this.unobserveElement(s)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{let s=new b,r=this.nzResizeObserverFactory.create(o=>s.next(o));r&&r.observe(e),this.observedElements.set(e,{observer:r,stream:s,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){let{observer:s,stream:r}=this.observedElements.get(e);s&&s.disconnect(),r.complete(),this.observedElements.delete(e)}}static \u0275fac=function(s){return new(s||t)};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{N as a};
