import{X as An,Y as Dt,o as io}from"./chunk-BQTEA2KP.js";import"./chunk-VAGS5EVQ.js";import{a as qn}from"./chunk-QHNTRP34.js";import{c as Xn}from"./chunk-IG346NKG.js";import"./chunk-PKSFCZZE.js";import{d as De}from"./chunk-PDQ2LI5H.js";import{B as ie,F as ne,G as ao,H as re,K as ae,N as se,c as O,e as In,g as H,i as Ln,j as kn,k as On,l as Vn,m as Un,n as Gn,o as W,q,t as Z,u as Vt,v as Nt,w as J,y as Wn}from"./chunk-CIEYWLUO.js";import{A as I,Aa as vt,B as R,Ba as St,Ca as K,Da as ii,E as L,Ea as oi,Fa as ni,Ga as ri,Ha as Q,Ia as $n,Ja as te,L as k,M as Ft,N as V,Na as oe,Pa as Zn,Qa as le,R as U,S as Bn,Ta as me,W as Pn,Y as G,ab as pe,cb as de,e as wn,eb as ue,f as Dn,g as En,ga as j,i as kt,k as Et,l as Qt,ma as oo,n as ei,na as no,oa as $,p as At,pa as Rn,q as ti,qa as A,r as Fn,ra as jn,sa as Ot,ua as ro,xa as X,ya as Hn,za as Y}from"./chunk-DKDVSV6S.js";import{$d as _n,$i as eo,Ab as Fo,Ac as Yt,Ah as Ki,Ba as tn,Bb as Bo,Bc as Bi,Bd as hn,Bh as D,Cb as an,Cc as Pi,Ch as Qi,Cj as Ce,Db as $i,Dh as Nn,Dj as ee,Eb as Ei,Ei as Tn,F as Eo,Fb as Ai,Fd as Yi,Fi as B,Ga as a,Gd as Kt,Ha as on,Hc as Jt,Hd as Ii,I as Xo,Ic as Wi,Ih as vn,Jb as Ht,Jc as mn,Jh as Sn,Kc as qi,Kh as F,Lb as $t,Ld as Ji,Lh as ce,Mc as pn,Na as x,Nc as Lt,Nd as gn,O as Yo,Oa as jt,Ob as c,Od as Ri,Pa as Ao,Pb as be,Pd as Po,Qb as Me,Qc as dn,Rb as Zt,Rh as ve,Sb as Te,Sc as un,Ta as w,Tb as xe,Td as Cn,Th as ze,Ua as nn,Ub as we,Uh as E,Ui as P,V as Jo,Va as Di,W as Ko,Wa as rn,Xc as cn,Xh as yn,Y as wi,Zb as Fi,ba as Ut,bc as ge,c as yi,ca as Gt,cb as Se,cc as sn,cd as Zi,d as bi,da as Qo,e as Wo,eb as ye,fa as M,fb as Rt,gb as Pt,gc as xt,hb as Ee,hc as wt,hj as to,ib as Ae,ic as ln,jb as u,jc as Xt,ka as b,kb as s,la as T,lb as p,m as qo,mb as Ne,n as Ti,nb as ji,ni as bn,o as Bt,ob as Hi,qa as Ui,qb as bt,qd as fn,rb as Tt,s as xi,tb as fe,td as zn,tj as xn,ud as Xi,va as qt,wb as S,x as Zo,xa as Gi,xe as Mn,za as en,zb as N,ze as Li}from"./chunk-Q33MCYRT.js";import{a as Mt,d as sr,f as Ho,g as Do,i as $o}from"./chunk-57BLH6QZ.js";var Oo=sr((Lo,ko)=>{"use strict";(function(i,o){typeof define=="function"&&define.amd?define([],o):typeof Lo<"u"?o():(o(),i.FileSaver={})})(Lo,function(){"use strict";function i(g,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function o(g,n,l){var m=new XMLHttpRequest;m.open("GET",g),m.responseType="blob",m.onload=function(){f(m.response,n,l)},m.onerror=function(){console.error("could not download file")},m.send()}function e(g){var n=new XMLHttpRequest;n.open("HEAD",g,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function t(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(n)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,d=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(g,n,l){var m=r.URL||r.webkitURL,z=document.createElement("a");n=n||g.name||"download",z.download=n,z.rel="noopener",typeof g=="string"?(z.href=g,z.origin===location.origin?t(z):e(z.href)?o(g,n,l):t(z,z.target="_blank")):(z.href=m.createObjectURL(g),setTimeout(function(){m.revokeObjectURL(z.href)},4e4),setTimeout(function(){t(z)},0))}:"msSaveOrOpenBlob"in navigator?function(g,n,l){if(n=n||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(i(g,l),n);else if(e(g))o(g,n,l);else{var m=document.createElement("a");m.href=g,m.target="_blank",setTimeout(function(){t(m)})}}:function(g,n,l,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof g=="string")return o(g,n,l);var z=g.type==="application/octet-stream",h=/constructor/i.test(r.HTMLElement)||r.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||z&&h||d)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var Be=C.result;Be=y?Be:Be.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=Be:location=Be,m=null},C.readAsDataURL(g)}else{var _=r.URL||r.webkitURL,v=_.createObjectURL(g);m?m.location=v:location.href=v,m=null,setTimeout(function(){_.revokeObjectURL(v)},4e4)}});r.saveAs=f.saveAs=f,typeof ko<"u"&&(ko.exports=f)})});function lr(i,o){if(i&1){let e=fe();s(0,"div",16)(1,"button",17),S("click",function(){let r=b(e).$implicit,d=N();return T(d.setRole(r.id))}),c(2),p()()}if(i&2){let e=o.$implicit;a(2),Zt(" ",e.name," (",e.id,") ")}}function mr(i,o){if(i&1&&(s(0,"nz-tag",20),c(1),p()),i&2){let e=o.$implicit;a(),Me(" ",e," ")}}function pr(i,o){if(i&1&&(s(0,"div")(1,"p")(2,"strong"),c(3,"\u89D2\u8272\uFF1A"),p(),c(4),p(),s(5,"p")(6,"strong"),c(7,"\u6B0A\u9650\uFF1A"),p()(),w(8,mr,2,1,"nz-tag",18),s(9,"p",19)(10,"small"),c(11),xt(12,"date"),p()()()),i&2){let e=o.ngIf;a(4),be(e.roles.join(", ")||"\u7121"),a(4),u("ngForOf",e.permissions),a(3),Me("\u6700\u5F8C\u66F4\u65B0\uFF1A",ln(12,3,e.updatedAt,"medium"))}}function dr(i,o){i&1&&(s(0,"p",21),c(1,"\u8ACB\u5148\u767B\u5165\u4EE5\u67E5\u770B\u6B0A\u9650"),p())}var ai=class ai{constructor(){this.aclSrv=M(Ji);this.menuSrv=M(eo);this.auth=M(io);this.firebaseACLSrv=M(Dt);this.full=!1;this.availableRoles=[];this.currentUserACL$=this.firebaseACLSrv.userACL$}ngOnInit(){this.loadAvailableRoles()}get data(){return this.firebaseACLSrv.data}reMenu(){this.menuSrv.resume()}loadAvailableRoles(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.availableRoles=o})}toggleFull(){this.full=!this.full,this.aclSrv.setFull(this.full),this.reMenu()}setRole(o){let e=this.auth.currentUser;if(!e)return;let t=this.availableRoles.find(r=>r.id===o);t&&this.firebaseACLSrv.updateUserACL(e.uid,[o],t.permissions).subscribe(()=>{this.reMenu()})}clearACL(){let o=this.auth.currentUser;o&&this.firebaseACLSrv.updateUserACL(o.uid,[],[]).subscribe(()=>{this.reMenu()})}};ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275cmp=x({type:ai,selectors:[["app-acl"]],decls:42,vars:21,consts:[["noUser",""],[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u6B0A\u9650\u72C0\u614B"],[1,"mt-md"],["nz-button","","nzType","default",3,"acl"],["nz-button","","nzType","default",1,"ml-sm",3,"acl"],["nzTitle","\u5168\u91CF\u6B0A\u9650"],["nz-button","",3,"click","nzType"],[1,"pt-md","text-grey"],["nzTitle","\u89D2\u8272\u5207\u63DB"],["class","mb-sm",4,"ngFor","ngForOf"],["nz-button","","nzType","dashed","nzBlock","",1,"mt-md",3,"click"],["nzTitle","\u7576\u524D\u7528\u6236\u6B0A\u9650"],[4,"ngIf","ngIfElse"],[1,"mb-sm"],["nz-button","","nzType","default","nzBlock","",3,"click"],["class","mb-xs",4,"ngFor","ngForOf"],[1,"mt-md","text-grey"],[1,"mb-xs"],[1,"text-grey"]],template:function(e,t){if(e&1){let r=fe();s(0,"div",1)(1,"h1"),c(2," ACL \u6B0A\u9650\u63A7\u5236 (Firestore \u6574\u5408) "),s(3,"small"),c(4," \u6CE8\u610F\u89C0\u5BDF\u5DE6\u908A\u7684\u9078\u55AE\uFF1BACL \u670D\u52D9\u63D0\u4F9B\u5B8C\u6574\u7684\u57FA\u65BC\u89D2\u8272\u7684\u8A2A\u554F\u63A7\u5236\uFF0C\u73FE\u5728\u6574\u5408\u4E86 Firestore \u5F8C\u7AEF\u5B58\u5132\u3002 "),p()()(),s(5,"div",2)(6,"div",3)(7,"nz-card",4)(8,"p")(9,"strong"),c(10,"\u7576\u524D ACL \u8CC7\u6599\uFF1A"),p(),c(11),xt(12,"json"),p(),s(13,"div",5)(14,"button",6),c(15,"\u7528\u6236\u6B0A\u9650"),p(),s(16,"button",7),c(17,"\u8A8D\u8B49\u7528\u6236"),p(),s(18,"button",7),c(19,"\u7BA1\u7406\u54E1\u6B0A\u9650"),p(),s(20,"button",7),c(21,"\u5100\u8868\u677F\u8B80\u53D6"),p(),s(22,"button",7),c(23,"\u7BA1\u7406\u54E1\u8A2A\u554F"),p()()()()(),s(24,"div",2)(25,"div",3)(26,"nz-card",8)(27,"button",9),S("click",function(){return b(r),T(t.toggleFull())}),c(28),p(),s(29,"p",10),c(30,"\u5168\u91CF\u6B0A\u9650\u6307\u7CFB\u7D71\u7BA1\u7406\u54E1\u89D2\u8272\uFF0C\u7121\u4EFB\u4F55\u9650\u5236\u3002"),p()()(),s(31,"div",3)(32,"nz-card",11),w(33,lr,3,2,"div",12),s(34,"button",13),S("click",function(){return b(r),T(t.clearACL())}),c(35," \u6E05\u9664\u6B0A\u9650 "),p()()(),s(36,"div",3)(37,"nz-card",14),w(38,pr,13,6,"div",15),xt(39,"async"),w(40,dr,2,0,"ng-template",null,0,Xt),p()()()}if(e&2){let r=Ht(41);a(5),u("nzGutter",16),a(),u("nzSpan",24),a(5),be(wt(12,17,t.data)),a(3),u("acl","user"),a(2),u("acl","user1"),a(2),u("acl","admin"),a(2),u("acl","dashboard:read"),a(2),u("acl","admin:access"),a(2),u("nzGutter",16),a(),u("nzSpan",8),a(2),u("nzType",t.full?"primary":"default"),a(),Me(" ",t.full?"\u95DC\u9589":"\u958B\u555F","\u5168\u91CF\u6B0A\u9650 "),a(3),u("nzSpan",8),a(2),u("ngForOf",t.availableRoles),a(3),u("nzSpan",8),a(2),u("ngIf",wt(39,19,t.currentUserACL$))("ngIfElse",r)}},dependencies:[I,R,ie,J,se,ae,re,gn,E,ze,ce,ve,j,K,St,vt,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,Ft,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,Wi,Jt,Lt,qi,pn],encapsulation:2});var so=ai;function ur(i,o){if(i&1&&(s(0,"nz-tag",13),c(1),p()),i&2){let e=o.$implicit;a(),Me(" ",e," ")}}function cr(i,o){if(i&1){let e=fe();s(0,"div",6)(1,"nz-card",7)(2,"div",8)(3,"div",2)(4,"h4"),c(5),p(),s(6,"p",9),c(7),p(),s(8,"div"),w(9,ur,2,1,"nz-tag",10),p()(),s(10,"div",11)(11,"nz-switch",12),S("ngModelChange",function(r){let d=b(e).$implicit,f=N();return T(f.toggleRoleStatus(d.id,r))}),p()()()()()}if(i&2){let e=o.$implicit;a(3),u("nzSpan",18),a(2),Zt("",e.name," (",e.id,")"),a(2),be(e.description),a(2),u("ngForOf",e.permissions),a(),u("nzSpan",6),a(),u("ngModel",e.isActive)}}function fr(i,o){if(i&1){let e=fe();s(0,"div",6)(1,"nz-card",7)(2,"div",8)(3,"div",2)(4,"h4"),c(5),p(),s(6,"p",9),c(7),p(),s(8,"nz-tag"),c(9),p()(),s(10,"div",11)(11,"nz-switch",12),S("ngModelChange",function(r){let d=b(e).$implicit,f=N();return T(f.togglePermissionStatus(d.id,r))}),p()()()()()}if(i&2){let e=o.$implicit;a(3),u("nzSpan",18),a(2),Zt("",e.name," (",e.id,")"),a(2),be(e.description),a(2),Zt("",e.resource,":",e.action),a(),u("nzSpan",6),a(),u("ngModel",e.isActive)}}var si=class si{constructor(){this.firebaseACLSrv=M(Dt);this.message=M(De);this.roles=[];this.permissions=[]}ngOnInit(){this.loadData()}loadData(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.roles=o}),this.firebaseACLSrv.getPermissions().subscribe(o=>{this.permissions=o})}toggleRoleStatus(o,e){this.message.info(`\u89D2\u8272 ${o} \u72C0\u614B\u5DF2${e?"\u555F\u7528":"\u505C\u7528"}`)}togglePermissionStatus(o,e){this.message.info(`\u6B0A\u9650 ${o} \u72C0\u614B\u5DF2${e?"\u555F\u7528":"\u505C\u7528"}`)}};si.\u0275fac=function(e){return new(e||si)},si.\u0275cmp=x({type:si,selectors:[["app-acl-admin"]],decls:10,vars:5,consts:[[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u89D2\u8272\u7BA1\u7406"],["class","mb-md",4,"ngFor","ngForOf"],["nzTitle","\u6B0A\u9650\u7BA1\u7406"],[1,"mb-md"],["nzSize","small"],["nz-row",""],[1,"text-grey"],["class","mb-xs",4,"ngFor","ngForOf"],["nz-col","",1,"text-right",3,"nzSpan"],[3,"ngModelChange","ngModel"],[1,"mb-xs"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2,"ACL \u7BA1\u7406"),p()(),s(3,"div",1)(4,"div",2)(5,"nz-card",3),w(6,cr,12,7,"div",4),p()(),s(7,"div",2)(8,"nz-card",5),w(9,fr,12,8,"div",4),p()()()),e&2&&(a(3),u("nzGutter",16),a(),u("nzSpan",12),a(2),u("ngForOf",t.roles),a(),u("nzSpan",12),a(2),u("ngForOf",t.permissions))},dependencies:[I,Et,At,R,ie,J,se,ae,re,E,j,K,St,vt,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,Ft,ne,pe,te,$n,O,Q,me,A,ee,Ce,G,ue,H,F,Jt],encapsulation:2});var lo=si;var zr=()=>({show:!0});function hr(i,o){if(i&1){let e=fe();s(0,"button",4),S("click",function(){let r=b(e).$implicit,d=N();return T(d.editUser(r))}),c(1,"\u7DE8\u8F2F"),p(),s(2,"button",5),S("click",function(){let r=b(e).$implicit,d=N();return T(d.deleteUser(r))}),c(3,"\u522A\u9664"),p()}}var li=class li{constructor(){this.firebaseUserSrv=M(An);this.message=M(De);this.total=0;this.columns=[{title:"UID",index:"uid",width:200},{title:"Email",index:"email"},{title:"\u986F\u793A\u540D\u7A31",index:"displayName"},{title:"\u89D2\u8272",index:"role"},{title:"\u72C0\u614B",index:"isActive",type:"yn"},{title:"\u6700\u5F8C\u767B\u5165",index:"lastLoginAt",type:"date"},{title:"\u64CD\u4F5C",render:"actions",width:120}]}ngOnInit(){this.loadUsers()}loadUsers(){this.users$=this.firebaseUserSrv.getAllUsers(),this.users$.subscribe(o=>{this.total=o.length})}editUser(o){this.message.info(`\u7DE8\u8F2F\u7528\u6236: ${o.email}`)}deleteUser(o){this.message.info(`\u522A\u9664\u7528\u6236: ${o.email}`)}};li.\u0275fac=function(e){return new(e||li)},li.\u0275cmp=x({type:li,selectors:[["app-acl-users"]],decls:6,vars:5,consts:[["st",""],[1,"alain-default__content-title"],[3,"data","columns","total","page"],["st-row","actions"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link","nzDanger","",3,"click"]],template:function(e,t){e&1&&(s(0,"div",1)(1,"h1"),c(2,"\u7528\u6236\u7BA1\u7406"),p()(),s(3,"st",2,0),w(5,hr,4,0,"ng-template",3),p()),e&2&&(a(3),u("data",t.users$)("columns",t.columns)("total",t.total)("page",ge(4,zr)))},dependencies:[I,R,ie,J,Nt,Vt,se,ae,re,E,ze,ce,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,G,ue,H,F],encapsulation:2});var mo=li;var gr=()=>({show:!0});function Cr(i,o){if(i&1&&(s(0,"nz-tag",6),c(1),p()),i&2){let e=o.$implicit;a(),Me(" ",e," ")}}function _r(i,o){if(i&1&&w(0,Cr,2,1,"nz-tag",5),i&2){let e=o.$implicit;u("ngForOf",e.permissions)}}function Mr(i,o){if(i&1){let e=fe();s(0,"button",7),S("click",function(){let r=b(e).$implicit,d=N();return T(d.editRole(r))}),c(1,"\u7DE8\u8F2F"),p(),s(2,"button",8),S("click",function(){let r=b(e).$implicit,d=N();return T(d.deleteRole(r))}),c(3,"\u522A\u9664"),p()}}var mi=class mi{constructor(){this.firebaseACLSrv=M(Dt);this.message=M(De);this.total=0;this.columns=[{title:"ID",index:"id",width:150},{title:"\u540D\u7A31",index:"name"},{title:"\u63CF\u8FF0",index:"description"},{title:"\u6B0A\u9650",render:"permissions",width:300},{title:"\u72C0\u614B",index:"isActive",type:"yn"},{title:"\u5EFA\u7ACB\u6642\u9593",index:"createdAt",type:"date"},{title:"\u64CD\u4F5C",render:"actions",width:120}]}ngOnInit(){this.loadRoles()}loadRoles(){this.roles$=this.firebaseACLSrv.getRoles(),this.roles$.subscribe(o=>{this.total=o.length})}editRole(o){this.message.info(`\u7DE8\u8F2F\u89D2\u8272: ${o.name}`)}deleteRole(o){this.message.info(`\u522A\u9664\u89D2\u8272: ${o.name}`)}};mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275cmp=x({type:mi,selectors:[["app-acl-roles"]],decls:7,vars:5,consts:[["st",""],[1,"alain-default__content-title"],[3,"data","columns","total","page"],["st-row","permissions"],["st-row","actions"],["class","mb-xs",4,"ngFor","ngForOf"],[1,"mb-xs"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link","nzDanger","",3,"click"]],template:function(e,t){e&1&&(s(0,"div",1)(1,"h1"),c(2,"\u89D2\u8272\u7BA1\u7406"),p()(),s(3,"st",2,0),w(5,_r,1,1,"ng-template",3)(6,Mr,4,0,"ng-template",4),p()),e&2&&(a(3),u("data",t.roles$)("columns",t.columns)("total",t.total)("page",ge(4,gr)))},dependencies:[I,R,ie,J,Nt,Vt,se,ae,re,E,ze,ce,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,Ft,ne,pe,te,O,Q,me,A,ee,G,ue,H,F],encapsulation:2});var po=mi;var Nr=()=>({show:!0});function vr(i,o){if(i&1){let e=fe();s(0,"button",4),S("click",function(){let r=b(e).$implicit,d=N();return T(d.editPermission(r))}),c(1,"\u7DE8\u8F2F"),p(),s(2,"button",5),S("click",function(){let r=b(e).$implicit,d=N();return T(d.deletePermission(r))}),c(3,"\u522A\u9664"),p()}}var pi=class pi{constructor(){this.firebaseACLSrv=M(Dt);this.message=M(De);this.total=0;this.columns=[{title:"ID",index:"id",width:120},{title:"\u540D\u7A31",index:"name",width:150},{title:"\u63CF\u8FF0",index:"description",width:200},{title:"\u8CC7\u6E90",index:"resource",width:120},{title:"\u52D5\u4F5C",index:"action",width:120},{title:"\u72C0\u614B",index:"isActive",width:80,type:"tag",tag:{true:{text:"\u555F\u7528",color:"green"},false:{text:"\u505C\u7528",color:"red"}}},{title:"\u5EFA\u7ACB\u6642\u9593",index:"createdAt",width:150,type:"date"},{title:"\u64CD\u4F5C",width:120,buttons:[],className:"text-center"}]}ngOnInit(){this.loadPermissions()}loadPermissions(){this.permissions$=this.firebaseACLSrv.getPermissions(),this.permissions$.subscribe(o=>{this.total=o.length})}editPermission(o){this.message.info(`\u7DE8\u8F2F\u6B0A\u9650: ${o.name}`)}deletePermission(o){this.message.warning(`\u522A\u9664\u6B0A\u9650: ${o.name}`)}};pi.\u0275fac=function(e){return new(e||pi)},pi.\u0275cmp=x({type:pi,selectors:[["app-acl-permissions"]],decls:6,vars:5,consts:[["st",""],[1,"alain-default__content-title"],[3,"data","columns","total","page"],["st-row","actions"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link","nzDanger","",3,"click"]],template:function(e,t){e&1&&(s(0,"div",1)(1,"h1"),c(2,"\u6B0A\u9650\u7BA1\u7406"),p()(),s(3,"st",2,0),w(5,vr,4,0,"ng-template",3),p()),e&2&&(a(3),u("data",t.permissions$)("columns",t.columns)("total",t.total)("page",ge(4,Nr)))},dependencies:[I,R,ie,J,Nt,Vt,se,ae,re,E,ze,ce,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,G,ue,H,F],encapsulation:2});var uo=pi;var Sr=new Qo("DC_STORE_STORAGE_TOKEN",{providedIn:"root",factory:()=>new Ro}),Ro=class{platform=M(Po);get(o){return this.platform.isBrowser&&JSON.parse(localStorage.getItem(o)||"null")||null}set(o,e){return this.platform.isBrowser&&localStorage.setItem(o,JSON.stringify(e)),!0}remove(o){this.platform.isBrowser&&localStorage.removeItem(o)}},Yn=(()=>{class i{store=M(Sr);http=M(Zi);platform=M(Po);memory=new Map;notifyBuffer=new Map;meta=new Set;freqTick=3e3;freqTime;cog=M(Kt).merge("cache",{mode:"promise",reName:"",prefix:"",meta_key:"__cache_meta"});constructor(){this.platform.isBrowser&&(this.loadMeta(),this.startExpireNotify())}pushMeta(e){this.meta.has(e)||(this.meta.add(e),this.saveMeta())}removeMeta(e){this.meta.has(e)&&(this.meta.delete(e),this.saveMeta())}loadMeta(){let e=this.store.get(this.cog.meta_key);e&&e.v&&e.v.forEach(t=>this.meta.add(t))}saveMeta(){let e=[];this.meta.forEach(t=>e.push(t)),this.store.set(this.cog.meta_key,{v:e,e:0})}getMeta(){return this.meta}set(e,t,r={}){if(!this.platform.isBrowser)return;let d=0,{type:f,expire:g}=this.cog;r=Mt({type:f,expire:g},r),r.expire&&(d=yn(new Date,r.expire).valueOf());let n=r.emitNotify!==!1;if(!(t instanceof yi)){this.save(r.type,e,{v:t,e:d},n);return}return t.pipe(wi(l=>{this.save(r.type,e,{v:l,e:d},n)}))}save(e,t,r,d=!0){e==="m"?this.memory.set(t,r):(this.store.set(this.cog.prefix+t,r),this.pushMeta(t)),d&&this.runNotify(t,"set")}get(e,t={}){if(!this.platform.isBrowser)return null;let r=t.mode!=="none"&&this.cog.mode==="promise",d=this.memory.has(e)?this.memory.get(e):this.store.get(this.cog.prefix+e);return!d||d.e&&d.e>0&&d.e<new Date().valueOf()?r?(this.cog.request?this.cog.request(e):this.http.get(e)).pipe(Zo(f=>hn(f,this.cog.reName,f)),wi(f=>this.set(e,f,{type:t.type,expire:t.expire,emitNotify:t.emitNotify}))):null:r?xi(d.v):d.v}getNone(e){return this.get(e,{mode:"none"})}tryGet(e,t,r={}){if(!this.platform.isBrowser)return null;let d=this.getNone(e);return d===null?t instanceof yi?this.set(e,t,r):(this.set(e,t,r),t):xi(d)}has(e){return this.memory.has(e)||this.meta.has(e)}_remove(e,t){if(t&&this.runNotify(e,"remove"),this.memory.has(e)){this.memory.delete(e);return}this.store.remove(this.cog.prefix+e),this.removeMeta(e)}remove(e){this.platform.isBrowser&&this._remove(e,!0)}clear(){this.platform.isBrowser&&(this.notifyBuffer.forEach((e,t)=>this.runNotify(t,"remove")),this.memory.clear(),this.meta.forEach(e=>this.store.remove(this.cog.prefix+e)))}set freq(e){this.freqTick=Math.max(20,e),this.abortExpireNotify(),this.startExpireNotify()}startExpireNotify(){this.checkExpireNotify(),this.runExpireNotify()}runExpireNotify(){this.freqTime=setTimeout(()=>{this.checkExpireNotify(),this.runExpireNotify()},this.freqTick)}checkExpireNotify(){let e=[];this.notifyBuffer.forEach((t,r)=>{this.has(r)&&this.getNone(r)===null&&e.push(r)}),e.forEach(t=>{this.runNotify(t,"expire"),this._remove(t,!1)})}abortExpireNotify(){clearTimeout(this.freqTime)}runNotify(e,t){this.notifyBuffer.has(e)&&this.notifyBuffer.get(e).next({type:t,value:this.getNone(e)})}notify(e){if(!this.notifyBuffer.has(e)){let t=new Wo(this.getNone(e));this.notifyBuffer.set(e,t)}return this.notifyBuffer.get(e).asObservable()}cancelNotify(e){this.notifyBuffer.has(e)&&(this.notifyBuffer.get(e).unsubscribe(),this.notifyBuffer.delete(e))}hasNotify(e){return this.notifyBuffer.has(e)}clearNotify(){this.notifyBuffer.forEach(e=>e.unsubscribe()),this.notifyBuffer.clear()}ngOnDestroy(){this.memory.clear(),this.abortExpireNotify(),this.clearNotify()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xs=new cn(()=>({}));var di=class di{constructor(){this.cache=M(Yn);this.msg=M(De);this.KEY="user"}set(){this.cache.set(this.KEY,+new Date)}get(){this.msg.success(this.cache.getNone(this.KEY))}};di.\u0275fac=function(e){return new(e||di)},di.\u0275cmp=x({type:di,selectors:[["app-cache"]],decls:10,vars:0,consts:[[1,"alain-default__content-title"],["href","https://ng-alain.com/components/cache","target","_blank"],["nzTitle","Service"],["nz-button","",3,"click"],["nz-button","",1,"ml-sm",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2," Cache \u7F13\u5B58, "),s(3,"a",1),c(4,"Document"),p()()(),s(5,"nz-card",2)(6,"button",3),S("click",function(){return t.set()}),c(7,"\u8BBE\u7F6E"),p(),s(8,"button",4),S("click",function(){return t.get()}),c(9,"\u83B7\u53D6"),p()())},dependencies:[I,R,ie,J,se,ae,re,E,ze,ce,ve,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F],encapsulation:2});var co=di;var Jn=Ho(Oo(),1);var Kn=(()=>{class i{el=M(Gi).nativeElement;_http=M(to);httpData;httpBody;httpMethod="get";httpUrl;fileName;pre;success=new Di;error=new Di;getDisposition(e){return(e||"").split(";").filter(r=>r.includes("=")).map(r=>{let d=r.split("="),f="UTF-8''",g=d[1];return g.startsWith(f)&&(g=g.substring(f.length)),{[d[0].trim()]:g}}).reduce((r,d)=>d,{})}isFileSaverSupported=!1;constructor(){try{this.isFileSaverSupported=!!new Blob}catch{}this.isFileSaverSupported||this.el.classList.add("down-file__not-support")}setDisabled(e){let t=this.el;t.disabled=e,t.classList[e?"add":"remove"]("down-file__disabled")}_click(e){return $o(this,null,function*(){if(!this.isFileSaverSupported||typeof this.pre=="function"&&!(yield this.pre(e))){e.stopPropagation(),e.preventDefault();return}this.setDisabled(!0),this._http.request(this.httpMethod,this.httpUrl,{params:this.httpData||{},responseType:"blob",observe:"response",body:this.httpBody}).pipe(Yo(()=>this.setDisabled(!1))).subscribe({next:t=>{if(t.status!==200||t.body.size<=0){this.error.emit(t);return}let r=this.getDisposition(t.headers.get("content-disposition")),d=this.fileName;typeof d=="function"&&(d=d(t)),d=d||r["filename*"]||r.filename||t.headers.get("filename")||t.headers.get("x-filename"),(0,Jn.saveAs)(t.body,decodeURI(d)),this.success.emit(t)},error:t=>this.error.emit(t)})})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Ao({type:i,selectors:[["","down-file",""]],hostBindings:function(t,r){t&1&&S("click",function(f){return r._click(f)})},inputs:{httpData:[0,"http-data","httpData"],httpBody:[0,"http-body","httpBody"],httpMethod:[0,"http-method","httpMethod"],httpUrl:[0,"http-url","httpUrl"],fileName:[0,"file-name","fileName"],pre:"pre"},outputs:{success:"success",error:"error"},exportAs:["downFile"]})}return i})();function yr(i,o){if(i&1&&(s(0,"button",2),c(1),p()),i&2){let e=o.$implicit,t=N();u("http-url",Fi("assets/tmp/demo",e))("http-data",t.data),a(),Me(" ",e," ")}}var ui=class ui{constructor(){this.fileTypes=[".xlsx",".docx",".pptx",".pdf"];this.data={otherdata:1,time:new Date}}};ui.\u0275fac=function(e){return new(e||ui)},ui.\u0275cmp=x({type:ui,selectors:[["app-down-file"]],decls:6,vars:0,consts:[[1,"alain-default__content-title"],["nzTitle","DEMO"],["nz-button","","down-file","","file-name","demo\u4E2D\u6587",1,"mr-sm",3,"http-data","http-url"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2,"Download a file"),p()(),s(3,"nz-card",1),Ee(4,yr,2,4,"button",2,Rt),p()),e&2&&(a(4),Ae(t.fileTypes))},dependencies:[I,R,ie,J,se,ae,re,E,ze,ce,ve,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,Kn],encapsulation:2});var fo=ui;var br=i=>({params:i}),ci=class ci{constructor(){this.params={};this.url="/user";this.searchSchema={properties:{no:{type:"string",title:"\u7F16\u53F7"}}};this.columns=[{title:"\u7F16\u53F7",index:"no"},{title:"\u8C03\u7528\u6B21\u6570",type:"number",index:"callNo"},{title:"\u5934\u50CF",type:"img",width:"50px",index:"avatar"},{title:"\u65F6\u95F4",type:"date",index:"updatedAt"}]}};ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275cmp=x({type:ci,selectors:[["app-delon-form"]],decls:5,vars:8,consts:[["st",""],[3,"title"],["mode","search",3,"formSubmit","formReset","schema","formData"],[3,"data","columns","req"]],template:function(e,t){if(e&1){let r=fe();Ne(0,"page-header",1),s(1,"nz-card")(2,"sf",2),S("formSubmit",function(f){b(r);let g=Ht(4);return T(g.reset(f))})("formReset",function(){b(r);let f=Ht(4);return T(f.reset(t.params))}),p(),Ne(3,"st",3,0),p()}e&2&&(u("title","Page Name"),a(2),u("schema",t.searchSchema)("formData",t.params),a(),u("data",t.url)("columns",t.columns)("req",sn(6,br,t.params)))},dependencies:[I,R,ie,Wn,J,Nt,se,ae,re,ao,E,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F],encapsulation:2});var zo=ci;var fi=class fi{};fi.\u0275fac=function(e){return new(e||fi)},fi.\u0275cmp=x({type:fi,selectors:[["app-guard-admin"]],decls:2,vars:0,template:function(e,t){e&1&&(ji(0,"p"),c(1,"\u8FD9\u662F\u4E00\u4E2Aadmin\u9875\u9762"),Hi())},encapsulation:2});var ho=fi;var zi=class zi{};zi.\u0275fac=function(e){return new(e||zi)},zi.\u0275cmp=x({type:zi,selectors:[["app-guard-auth"]],decls:2,vars:0,template:function(e,t){e&1&&(ji(0,"p"),c(1,"\u8FD9\u662F\u4E00\u4E2Auser1\u9875\u9762"),Hi())},encapsulation:2});var go=zi;var Qn=()=>{let i=M(Tn);return new yi(o=>{i.confirm({nzTitle:"\u786E\u8BA4\u8981\u79BB\u5F00\u5417\uFF1F",nzContent:"\u4F60\u5DF2\u7ECF\u586B\u5199\u4E86\u90E8\u5206\u8868\u5355\u79BB\u5F00\u4F1A\u653E\u5F03\u5DF2\u7ECF\u586B\u5199\u7684\u5185\u5BB9\u3002",nzOkText:"\u79BB\u5F00",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{o.next(!0),o.complete()},nzOnCancel:()=>{o.next(!1),o.complete()}})})};var xr=()=>["/delon/guard/leave"],wr=()=>["/delon/guard/auth"],Dr=()=>["/delon/guard/admin"];function Er(i,o){i&1&&(s(0,"button",12),c(1," \u96E2\u958B\u78BA\u8A8D\u9801 "),p()),i&2&&u("routerLink",ge(1,xr))}function Ar(i,o){i&1&&(s(0,"button",12),c(1," \u9700\u8981 user1 \u6B0A\u9650 "),p()),i&2&&u("routerLink",ge(1,wr))}function Fr(i,o){i&1&&(s(0,"button",12),c(1," \u9700\u8981\u7BA1\u7406\u54E1\u6B0A\u9650 "),p()),i&2&&u("routerLink",ge(1,Dr))}function Br(i,o){if(i&1){let e=fe();s(0,"button",13),S("click",function(){b(e);let r=N();return T(r.setFull(!0))}),c(1," \u8A2D\u7F6E\u5168\u91CF\u6B0A\u9650 "),p()}}function Pr(i,o){if(i&1){let e=fe();s(0,"button",17),S("click",function(){b(e);let r=N().$implicit,d=N(2);return T(d.setRole(r.id))}),c(1),p()}if(i&2){let e=N().$implicit;a(),Me(" ",e.name," ")}}function Ir(i,o){i&1&&(bt(0),w(1,Pr,2,1,"button",16),Tt())}function Rr(i,o){if(i&1&&(s(0,"div")(1,"p",14)(2,"strong"),c(3,"\u53EF\u7528\u89D2\u8272\uFF1A"),p()(),s(4,"nz-space"),w(5,Ir,2,0,"ng-container",15),p()()),i&2){let e=N();a(5),u("ngForOf",e.availableRoles)}}function Lr(i,o){if(i&1){let e=fe();s(0,"button",18),S("click",function(){b(e);let r=N();return T(r.clearACL())}),c(1," \u6E05\u9664\u6B0A\u9650 "),p()}}function kr(i,o){if(i&1&&(s(0,"nz-tag",21),c(1),p()),i&2){let e=o.$implicit;a(),Me(" ",e," ")}}function Or(i,o){if(i&1&&(s(0,"div",19)(1,"p")(2,"strong"),c(3,"\u7528\u6236\u6B0A\u9650\uFF1A"),p()(),s(4,"p"),c(5),p(),s(6,"p"),c(7,"\u6B0A\u9650\uFF1A"),p(),w(8,kr,2,1,"nz-tag",20),p()),i&2){let e=o.ngIf;a(5),Me("\u89D2\u8272\uFF1A",e.roles.join(", ")||"\u7121"),a(3),u("ngForOf",e.permissions)}}var hi=class hi{constructor(){this.aclSrv=M(Ji);this.menuSrv=M(eo);this.router=M(zn);this.auth=M(io);this.firebaseACLSrv=M(Dt);this.availableRoles=[];this.currentUserACL$=this.firebaseACLSrv.userACL$}ngOnInit(){this.loadAvailableRoles()}get data(){return this.firebaseACLSrv.data}loadAvailableRoles(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.availableRoles=o})}setRole(o){let e=this.auth.currentUser;if(!e)return;let t=this.availableRoles.find(r=>r.id===o);t&&this.firebaseACLSrv.updateUserACL(e.uid,[o],t.permissions).subscribe(()=>{this.menuSrv.resume(),this.router.navigate(["/delon/guard"])})}setFull(o){this.aclSrv.setFull(o),this.menuSrv.resume(),this.router.navigate(["/delon/guard"])}clearACL(){let o=this.auth.currentUser;o&&this.firebaseACLSrv.updateUserACL(o.uid,[],[]).subscribe(()=>{this.menuSrv.resume(),this.router.navigate(["/delon/guard"])})}};hi.\u0275fac=function(e){return new(e||hi)},hi.\u0275cmp=x({type:hi,selectors:[["app-guard"]],decls:28,vars:11,consts:[[1,"alain-default__content-title"],["nz-row","",1,"mb-lg",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u8DEF\u7531\u6E2C\u8A66"],["nz-button","",3,"routerLink",4,"nzSpaceItem"],["nzTitle","\u6B0A\u9650\u63A7\u5236"],["nzDirection","vertical",2,"width","100%"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[4,"nzSpaceItem"],["nz-button","","nzType","dashed",3,"click",4,"nzSpaceItem"],["nzTitle","\u7576\u524D\u72C0\u614B"],["class","mt-md",4,"ngIf"],["nz-button","",3,"routerLink"],["nz-button","","nzType","primary",3,"click"],[1,"mb-sm"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","dashed",3,"click"],[1,"mt-md"],["class","mb-xs",4,"ngFor","ngForOf"],[1,"mb-xs"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2,"\u8DEF\u7531\u5B88\u885B (Firestore \u6574\u5408)"),p()(),s(3,"div",1)(4,"div",2)(5,"nz-card",3)(6,"nz-space"),w(7,Er,2,2,"button",4)(8,Ar,2,2,"button",4)(9,Fr,2,2,"button",4),p()()()(),s(10,"div",1)(11,"div",2)(12,"nz-card",5)(13,"nz-space",6),w(14,Br,2,0,"button",7)(15,Rr,6,1,"div",8)(16,Lr,2,0,"button",9),p()()(),s(17,"div",2)(18,"nz-card",10)(19,"p")(20,"strong"),c(21,"ACL \u8CC7\u6599\uFF1A"),p()(),s(22,"pre"),c(23),xt(24,"json"),p(),w(25,Or,9,2,"div",11),xt(26,"async"),p()()(),Ne(27,"router-outlet")),e&2&&(a(3),u("nzGutter",16),a(),u("nzSpan",24),a(6),u("nzGutter",16),a(),u("nzSpan",12),a(6),u("nzSpan",12),a(6),be(wt(24,7,t.data)),a(2),u("ngIf",wt(26,9,t.currentUserACL$)))},dependencies:[I,R,Xi,fn,ie,J,se,ae,re,E,ze,ce,ve,j,K,St,vt,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,Ft,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,Sn,vn,Wi,Jt,Lt,qi],encapsulation:2});var Co=hi;var Vr=()=>["/delon/guard"],gi=class gi{};gi.\u0275fac=function(e){return new(e||gi)},gi.\u0275cmp=x({type:gi,selectors:[["app-guard-leave"]],decls:5,vars:3,consts:[["nz-button","",3,"nzType","routerLink"]],template:function(e,t){e&1&&(s(0,"p"),c(1,"\u79BB\u5F00\u65F6\u9700\u8981\u786E\u8BA4"),p(),s(2,"button",0)(3,"span"),c(4,"\u6211\u8981\u79BB\u5F00"),p()()),e&2&&(a(2),u("nzType","primary")("routerLink",ge(2,Vr)))},dependencies:[I,R,Xi,ie,J,se,ae,re,E,ze,ce,ve,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,G,ue,H,F],encapsulation:2});var _o=gi;var er=(()=>{class i{scriptSrv=M(Yi);cogSrv=M(Kt);defaultConfig;_cog;pending=!1;_lodop=null;_init=new bi;_events=new bi;printBuffer=[];constructor(){this.defaultConfig=this.cogSrv.merge("lodop",{url:"http://localhost:8443/CLodopfuncs.js",name:"CLODOP",companyName:"",checkMaxCount:100}),this.cog=this.defaultConfig}get cog(){return this._cog}set cog(e){this._cog=Mt(Mt({},this.defaultConfig),e)}get events(){return this._events.asObservable()}get lodop(){return this._lodop?xi({ok:!0,lodop:this._lodop}):this.pending?this._init.asObservable():(this.request(),this._init.asObservable())}get printer(){this.check();let e=[],t=this._lodop.GET_PRINTER_COUNT();for(let r=0;r<t;r++)e.push(this._lodop.GET_PRINTER_NAME(r));return e}check(){if(!this._lodop)throw new Error("\u8BF7\u52A1\u5FC5\u5148\u8C03\u7528 lodop \u83B7\u53D6\u5BF9\u8C61")}request(){this.pending=!0;let e=new URL(this.cog.url);e.searchParams.set("name",this.cog.name);let t=e.toString(),r=this.cog.checkMaxCount,d=(g,n)=>{this._init.next({ok:g==="ok",status:g,error:n,lodop:this._lodop})},f=()=>{if(--r,this._lodop.webskt&&this._lodop.webskt.readyState===1)d("ok");else{if(r<0){d("check-limit");return}setTimeout(()=>f(),100)}};this.scriptSrv.loadScript(t).then(g=>{if(g.status!=="ok"){this.pending=!1,d("script-load-error",g[0]);return}let n=window;if(Object.prototype.hasOwnProperty.call(n,this.cog.name)&&(this._lodop=n[this.cog.name]),this._lodop===null){d("load-variable-name-error",{name:this.cog.name});return}this._lodop.SET_LICENSES(this.cog.companyName,this.cog.license,this.cog.licenseA,this.cog.licenseB),f()})}reset(){this._lodop=null,this.pending=!1,this.request()}attachCode(e,t,r){this.check(),r||(r=/LODOP\.([^(]+)\(([^\n]+)?\);/i),e.split(`
`).forEach(d=>{let f=r.exec(d.trim());if(!f)return;let g=this._lodop[f[1]];if(g){let n=null;try{n=new Function(`return [${f[2]}]`)()}catch{}if(n!=null&&Array.isArray(n)&&t)for(let l=0;l<n.length;l++)typeof n[l]=="string"&&(n[l]=n[l].replace(/{{(.*?)}}/g,(m,z)=>t[z.trim()]||""));g.apply(this._lodop,n)}})}design(){this.check();let e=this._lodop.PRINT_DESIGN();return new Promise(t=>{this._lodop.On_Return=(r,d)=>{e===r&&(this._lodop.On_Return=null,t(`${d}`))}})}printDo(){let e=this.printBuffer.shift();if(!e)return;this.attachCode(e.code,e.item,e.parser);let t=this._lodop.PRINT();this._lodop.On_Return=(r,d)=>{t===r&&(this._lodop.On_Return=null,this._events.next(Mt({ok:d===!0,error:d===!0?null:d},e)),this.printDo())}}print(e,t,r){this.check(),t&&this.printBuffer.push(...(Array.isArray(t)?t:[t]).map(d=>({code:e,parser:r,item:d}))),this.printDo()}ngOnDestroy(){this._init.unsubscribe(),this._events.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ur(i,o){i&1&&(c(0," \u8BF7\u5148\u4E0B\u8F7D "),s(1,"a",5),c(2,"Lodop\u63D2\u4EF6"),p(),c(3,"\u3002 "))}function Gr(i,o){if(i&1&&(s(0,"nz-alert",3),w(1,Ur,4,0,"ng-template",null,0,Xt),p()),i&2){let e=Ht(2);u("nzType","warning")("nzMessage",e)}}function jr(i,o){if(i&1&&Ne(0,"nz-option",12),i&2){let e=o.$implicit;u("nzLabel",e)("nzValue",e)}}function Hr(i,o){if(i&1&&Ne(0,"nz-option",12),i&2){let e=o.$implicit;u("nzLabel",e)("nzValue",e)}}function $r(i,o){if(i&1){let e=fe();s(0,"form",4)(1,"nz-form-item",6)(2,"nz-form-label",7),c(3,"\u6253\u5370\u670D\u52A1\u5668"),p(),s(4,"nz-form-control",7)(5,"nz-input-group")(6,"div",8)(7,"input",9),we("ngModelChange",function(r){b(e);let d=N();return xe(d.cog.url,r)||(d.cog.url=r),T(r)}),p()(),s(8,"div",8)(9,"button",10),S("click",function(){b(e);let r=N();return T(r.reload(null))}),c(10,"\u91CD\u65B0\u52A0\u8F7D\u6253\u5370\u673A"),p()()()()(),s(11,"nz-form-item",6)(12,"nz-form-label",7),c(13,"\u6253\u5370\u673A"),p(),s(14,"nz-form-control",7)(15,"nz-select",11),we("ngModelChange",function(r){b(e);let d=N();return xe(d.cog.printer,r)||(d.cog.printer=r),T(r)}),S("ngModelChange",function(r){b(e);let d=N();return T(d.changePinter(r))}),Ee(16,jr,1,2,"nz-option",12,Rt),p()()(),s(18,"nz-form-item",6)(19,"nz-form-label",7),c(20,"\u7EB8\u5F20\u7C7B\u578B"),p(),s(21,"nz-form-control",7)(22,"nz-select",13),we("ngModelChange",function(r){b(e);let d=N();return xe(d.cog.paper,r)||(d.cog.paper=r),T(r)}),Ee(23,Hr,1,2,"nz-option",12,Rt),p()()(),s(25,"nz-form-item",6)(26,"nz-form-label",7),c(27,"\u6253\u5370\u5185\u5BB9"),p(),s(28,"nz-form-control",7)(29,"textarea",14),we("ngModelChange",function(r){b(e);let d=N();return xe(d.cog.html,r)||(d.cog.html=r),T(r)}),p(),s(30,"div",15),c(31,"\u4EC5\u9650HTML\uFF0C\u66F4\u591A\u7C7B\u578B\u652F\u6301\u8BF7\u53C2\u8003\u5B98\u7F51"),p()()(),s(32,"nz-form-item",6)(33,"nz-form-control",16)(34,"button",17),S("click",function(){b(e);let r=N();return T(r.print(!0))}),c(35,"\u6253\u5370\u9884\u89C8"),p(),s(36,"button",17),S("click",function(){b(e);let r=N();return T(r.print())}),c(37,"\u76F4\u63A5\u6253\u5370"),p()()()()}if(i&2){let e=N();a(2),u("nzSm",6),a(2),u("nzSm",18),a(2),u("nzSpan",16),a(),Te("ngModel",e.cog.url),a(),u("nzSpan",8),a(4),u("nzSm",6),a(2),u("nzSm",18),a(),Te("ngModel",e.cog.printer),a(),Ae(e.pinters),a(3),u("nzSm",6),a(2),u("nzSm",18),a(),Te("ngModel",e.cog.paper),a(),Ae(e.papers),a(3),u("nzSm",6),a(2),u("nzSm",18),a(),Te("ngModel",e.cog.html),a(4),u("nzSm",18)("nzOffset",6),a(),u("nzLoading",e.printing),a(2),u("nzLoading",e.printing)}}var Ci=class Ci{constructor(){this.lodopSrv=M(er);this.msg=M(De);this.cog={url:"https://localhost:8443/CLodopfuncs.js",printer:"",paper:"",html:`
      <h1>Title</h1>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
    `};this.error=!1;this.lodop=null;this.pinters=[];this.papers=[];this.printing=!1;this.lodopSrv.lodop.subscribe(({lodop:o,ok:e})=>{if(!e){this.error=!0;return}this.error=!1,this.msg.success("\u6253\u5370\u673A\u52A0\u8F7D\u6210\u529F"),this.lodop=o,this.pinters=this.lodopSrv.printer})}reload(o={url:"https://localhost:8443/CLodopfuncs.js"}){this.pinters=[],this.papers=[],this.cog.printer="",this.cog.paper="",this.lodopSrv.cog=Mt(Mt({},this.cog),o),this.error=!1,o===null&&this.lodopSrv.reset()}changePinter(o){this.lodop!=null&&(this.papers=this.lodop.GET_PAGESIZES_LIST(o,`
`).split(`
`))}print(o=!1){let e=this.lodop;e.PRINT_INITA(10,20,810,610,"\u6D4B\u8BD5C-Lodop\u8FDC\u7A0B\u6253\u5370\u56DB\u6B65\u9AA4"),e.SET_PRINTER_INDEXA(this.cog.printer),e.SET_PRINT_PAGESIZE(0,0,0,this.cog.paper),e.ADD_PRINT_TEXT(1,1,300,200,"\u4E0B\u9762\u8F93\u51FA\u7684\u662F\u672C\u9875\u6E90\u4EE3\u7801\u53CA\u5176\u5C55\u73B0\u6548\u679C\uFF1A"),e.ADD_PRINT_TEXT(20,10,"90%","95%",this.cog.html),e.SET_PRINT_STYLEA(0,"ItemType",4),e.NEWPAGEA(),e.ADD_PRINT_HTM(20,10,"90%","95%",this.cog.html),o?e.PREVIEW():e.PRINT()}};Ci.\u0275fac=function(e){return new(e||Ci)},Ci.\u0275cmp=x({type:Ci,selectors:[["app-print"]],decls:10,vars:2,consts:[["message",""],[1,"alain-default__content-title"],["href","https://ng-alain.com/components/lodop","target","_blank"],[3,"nzType","nzMessage"],["nz-form",""],["href","http://c-lodop.com/download.html","target","_blank"],["nz-row",""],["nz-col","",3,"nzSm"],["nz-col","",3,"nzSpan"],["nz-input","","nzPlaceHolder","https://localhost:8443/CLodopfuncs.js","name","url",3,"ngModelChange","ngModel"],["nz-button","",3,"click"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u6253\u5370\u673A","nzShowSearch","","nzAllowClear","","name","printer",2,"width","90%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u7EB8\u5F20\u7C7B\u578B","nzShowSearch","","nzAllowClear","","name","paper",2,"width","90%",3,"ngModelChange","ngModel"],["nz-input","","name","html","nzAutosize","",3,"ngModelChange","ngModel"],["nz-form-extra",""],["nz-col","",3,"nzSm","nzOffset"],["nz-button","",3,"click","nzLoading"]],template:function(e,t){e&1&&(s(0,"div",1)(1,"h1"),c(2," Lodop\u6253\u5370 "),s(3,"small"),c(4," \u66F4\u591A\u4F53\u9A8C\u8BF7\u81F3 "),s(5,"a",2),c(6,"NG-ALAIN.com"),p()()()(),s(7,"nz-card"),Se(8,Gr,3,2,"nz-alert",3),Se(9,$r,38,18,"form",4),p()),e&2&&(a(8),ye(t.error?8:-1),a(),ye(t.error?-1:9))},dependencies:[I,ti,kt,Et,Qt,At,ei,R,ie,J,se,ae,re,E,ze,ce,ve,j,K,St,vt,k,U,de,$,oo,no,D,L,le,Zn,B,W,P,oe,X,Ot,ro,jn,Y,Z,q,V,ne,pe,te,O,Q,oi,ii,ri,ni,me,A,ee,Ce,G,ue,H,F],encapsulation:2});var Mo=Ci;var Wr=["canvas"];function qr(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N(2);a(),be(e.nzStatusRender)}}function Zr(i,o){if(i&1&&(s(0,"div",1),w(1,qr,2,1,"ng-container",2),p()),i&2){let e=N();a(),u("nzStringTemplateOutlet",e.nzStatusRender)}}function Xr(i,o){i&1&&Ne(0,"nz-spin")}function Yr(i,o){if(i&1){let e=fe();s(0,"div")(1,"p",3),c(2),p(),s(3,"button",4),S("click",function(){b(e);let r=N(2);return T(r.reloadQRCode())}),Ne(4,"nz-icon",5),s(5,"span"),c(6),p()()()}if(i&2){let e=N(2);a(2),be(e.locale.expired),a(4),be(e.locale.refresh)}}function Jr(i,o){if(i&1&&(s(0,"div")(1,"p",3),c(2),p()()),i&2){let e=N(2);a(2),be(e.locale.scanned)}}function Kr(i,o){if(i&1&&(s(0,"div",1),Se(1,Xr,1,0,"nz-spin")(2,Yr,7,2,"div")(3,Jr,3,1,"div"),p()),i&2){let e,t=N();a(),ye((e=t.nzStatus)==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function Qr(i,o){i&1&&Ne(0,"canvas",null,0)}var Wt;(function(i){let o=(()=>{class f{version;errorCorrectionLevel;static encodeText(n,l){let m=i.QrSegment.makeSegments(n);return f.encodeSegments(m,l)}static encodeBinary(n,l){let m=i.QrSegment.makeBytes(n);return f.encodeSegments([m],l)}static encodeSegments(n,l,m=1,z=40,h=-1,y=!0){if(!(f.MIN_VERSION<=m&&m<=z&&z<=f.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let C,_;for(C=m;;C++){let he=f.getNumDataCodewords(C,l)*8,Pe=d.getTotalBits(n,C);if(Pe<=he){_=Pe;break}if(C>=z)throw new RangeError("Data too long")}for(let he of[f.Ecc.MEDIUM,f.Ecc.QUARTILE,f.Ecc.HIGH])y&&_<=f.getNumDataCodewords(C,he)*8&&(l=he);let v=[];for(let he of n){e(he.mode.modeBits,4,v),e(he.numChars,he.mode.numCharCountBits(C),v);for(let Pe of he.getData())v.push(Pe)}r(v.length==_);let Be=f.getNumDataCodewords(C,l)*8;r(v.length<=Be),e(0,Math.min(4,Be-v.length),v),e(0,(8-v.length%8)%8,v),r(v.length%8==0);for(let he=236;v.length<Be;he^=253)e(he,8,v);let Ct=[];for(;Ct.length*8<v.length;)Ct.push(0);return v.forEach((he,Pe)=>Ct[Pe>>>3]|=he<<7-(Pe&7)),new f(C,l,Ct,h)}size;mask;modules=[];isFunction=[];constructor(n,l,m,z){if(this.version=n,this.errorCorrectionLevel=l,n<f.MIN_VERSION||n>f.MAX_VERSION)throw new RangeError("Version value out of range");if(z<-1||z>7)throw new RangeError("Mask value out of range");this.size=n*4+17;let h=[];for(let C=0;C<this.size;C++)h.push(!1);for(let C=0;C<this.size;C++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();let y=this.addEccAndInterleave(m);if(this.drawCodewords(y),z==-1){let C=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);let v=this.getPenaltyScore();v<C&&(z=_,C=v),this.applyMask(_)}}r(z>=0&&z<=7),this.mask=z,this.applyMask(z),this.drawFormatBits(z),this.isFunction=[]}getModule(n,l){return n>=0&&n<this.size&&l>=0&&l<this.size&&this.modules[l][n]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let n=this.getAlignmentPatternPositions(),l=n.length;for(let m=0;m<l;m++)for(let z=0;z<l;z++)m==0&&z==0||m==0&&z==l-1||m==l-1&&z==0||this.drawAlignmentPattern(n[m],n[z]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(n){let l=this.errorCorrectionLevel.formatBits<<3|n,m=l;for(let h=0;h<10;h++)m=m<<1^(m>>>9)*1335;let z=(l<<10|m)^21522;r(z>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,t(z,h));this.setFunctionModule(8,7,t(z,6)),this.setFunctionModule(8,8,t(z,7)),this.setFunctionModule(7,8,t(z,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,t(z,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,t(z,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,t(z,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let n=this.version;for(let m=0;m<12;m++)n=n<<1^(n>>>11)*7973;let l=this.version<<12|n;r(l>>>18==0);for(let m=0;m<18;m++){let z=t(l,m),h=this.size-11+m%3,y=Math.floor(m/3);this.setFunctionModule(h,y,z),this.setFunctionModule(y,h,z)}}drawFinderPattern(n,l){for(let m=-4;m<=4;m++)for(let z=-4;z<=4;z++){let h=Math.max(Math.abs(z),Math.abs(m)),y=n+z,C=l+m;y>=0&&y<this.size&&C>=0&&C<this.size&&this.setFunctionModule(y,C,h!=2&&h!=4)}}drawAlignmentPattern(n,l){for(let m=-2;m<=2;m++)for(let z=-2;z<=2;z++)this.setFunctionModule(n+z,l+m,Math.max(Math.abs(z),Math.abs(m))!=1)}setFunctionModule(n,l,m){this.modules[l][n]=m,this.isFunction[l][n]=!0}addEccAndInterleave(n){let l=this.version,m=this.errorCorrectionLevel;if(n.length!=f.getNumDataCodewords(l,m))throw new RangeError("Invalid argument");let z=f.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][l],h=f.ECC_CODEWORDS_PER_BLOCK[m.ordinal][l],y=Math.floor(f.getNumRawDataModules(l)/8),C=z-y%z,_=Math.floor(y/z),v=[],Be=f.reedSolomonComputeDivisor(h);for(let he=0,Pe=0;he<z;he++){let yt=n.slice(Pe,Pe+_-h+(he<C?0:1));Pe+=yt.length;let To=f.reedSolomonComputeRemainder(yt,Be);he<C&&yt.push(0),v.push(yt.concat(To))}let Ct=[];for(let he=0;he<v[0].length;he++)v.forEach((Pe,yt)=>{(he!=_-h||yt>=C)&&Ct.push(Pe[he])});return r(Ct.length==y),Ct}drawCodewords(n){if(n.length!=Math.floor(f.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let l=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let z=0;z<this.size;z++)for(let h=0;h<2;h++){let y=m-h,_=(m+1&2)==0?this.size-1-z:z;!this.isFunction[_][y]&&l<n.length*8&&(this.modules[_][y]=t(n[l>>>3],7-(l&7)),l++)}}r(l==n.length*8)}applyMask(n){if(n<0||n>7)throw new RangeError("Mask value out of range");for(let l=0;l<this.size;l++)for(let m=0;m<this.size;m++){let z;switch(n){case 0:z=(m+l)%2==0;break;case 1:z=l%2==0;break;case 2:z=m%3==0;break;case 3:z=(m+l)%3==0;break;case 4:z=(Math.floor(m/3)+Math.floor(l/2))%2==0;break;case 5:z=m*l%2+m*l%3==0;break;case 6:z=(m*l%2+m*l%3)%2==0;break;case 7:z=((m+l)%2+m*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][m]&&z&&(this.modules[l][m]=!this.modules[l][m])}}getPenaltyScore(){let n=0;for(let h=0;h<this.size;h++){let y=!1,C=0,_=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[h][v]==y?(C++,C==5?n+=f.PENALTY_N1:C>5&&n++):(this.finderPenaltyAddHistory(C,_),y||(n+=this.finderPenaltyCountPatterns(_)*f.PENALTY_N3),y=this.modules[h][v],C=1);n+=this.finderPenaltyTerminateAndCount(y,C,_)*f.PENALTY_N3}for(let h=0;h<this.size;h++){let y=!1,C=0,_=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][h]==y?(C++,C==5?n+=f.PENALTY_N1:C>5&&n++):(this.finderPenaltyAddHistory(C,_),y||(n+=this.finderPenaltyCountPatterns(_)*f.PENALTY_N3),y=this.modules[v][h],C=1);n+=this.finderPenaltyTerminateAndCount(y,C,_)*f.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let y=0;y<this.size-1;y++){let C=this.modules[h][y];C==this.modules[h][y+1]&&C==this.modules[h+1][y]&&C==this.modules[h+1][y+1]&&(n+=f.PENALTY_N2)}let l=0;for(let h of this.modules)l=h.reduce((y,C)=>y+(C?1:0),l);let m=this.size*this.size,z=Math.ceil(Math.abs(l*20-m*10)/m)-1;return r(z>=0&&z<=9),n+=z*f.PENALTY_N4,r(n>=0&&n<=2568888),n}getAlignmentPatternPositions(){if(this.version==1)return[];{let n=Math.floor(this.version/7)+2,l=Math.floor((this.version*8+n*3+5)/(n*4-4))*2,m=[6];for(let z=this.size-7;m.length<n;z-=l)m.splice(1,0,z);return m}}static getNumRawDataModules(n){if(n<f.MIN_VERSION||n>f.MAX_VERSION)throw new RangeError("Version number out of range");let l=(16*n+128)*n+64;if(n>=2){let m=Math.floor(n/7)+2;l-=(25*m-10)*m-55,n>=7&&(l-=36)}return r(l>=208&&l<=29648),l}static getNumDataCodewords(n,l){return Math.floor(f.getNumRawDataModules(n)/8)-f.ECC_CODEWORDS_PER_BLOCK[l.ordinal][n]*f.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][n]}static reedSolomonComputeDivisor(n){if(n<1||n>255)throw new RangeError("Degree out of range");let l=[];for(let z=0;z<n-1;z++)l.push(0);l.push(1);let m=1;for(let z=0;z<n;z++){for(let h=0;h<l.length;h++)l[h]=f.reedSolomonMultiply(l[h],m),h+1<l.length&&(l[h]^=l[h+1]);m=f.reedSolomonMultiply(m,2)}return l}static reedSolomonComputeRemainder(n,l){let m=l.map(z=>0);for(let z of n){let h=z^m.shift();m.push(0),l.forEach((y,C)=>m[C]^=f.reedSolomonMultiply(y,h))}return m}static reedSolomonMultiply(n,l){if(n>>>8||l>>>8)throw new RangeError("Byte out of range");let m=0;for(let z=7;z>=0;z--)m=m<<1^(m>>>7)*285,m^=(l>>>z&1)*n;return r(m>>>8==0),m}finderPenaltyCountPatterns(n){let l=n[1];r(l<=this.size*3);let m=l>0&&n[2]==l&&n[3]==l*3&&n[4]==l&&n[5]==l;return(m&&n[0]>=l*4&&n[6]>=l?1:0)+(m&&n[6]>=l*4&&n[0]>=l?1:0)}finderPenaltyTerminateAndCount(n,l,m){return n&&(this.finderPenaltyAddHistory(l,m),l=0),l+=this.size,this.finderPenaltyAddHistory(l,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(n,l){l[0]==0&&(n+=this.size),l.pop(),l.unshift(n)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return f})();i.QrCode=o;function e(f,g,n){if(g<0||g>31||f>>>g)throw new RangeError("Value out of range");for(let l=g-1;l>=0;l--)n.push(f>>>l&1)}function t(f,g){return(f>>>g&1)!=0}function r(f){if(!f)throw new Error("Assertion error")}let d=(()=>{class f{mode;numChars;bitData;static makeBytes(n){let l=[];for(let m of n)e(m,8,l);return new f(f.Mode.BYTE,n.length,l)}static makeNumeric(n){if(!f.isNumeric(n))throw new RangeError("String contains non-numeric characters");let l=[];for(let m=0;m<n.length;){let z=Math.min(n.length-m,3);e(parseInt(n.substring(m,m+z),10),z*3+1,l),m+=z}return new f(f.Mode.NUMERIC,n.length,l)}static makeAlphanumeric(n){if(!f.isAlphanumeric(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");let l=[],m;for(m=0;m+2<=n.length;m+=2){let z=f.ALPHANUMERIC_CHARSET.indexOf(n.charAt(m))*45;z+=f.ALPHANUMERIC_CHARSET.indexOf(n.charAt(m+1)),e(z,11,l)}return m<n.length&&e(f.ALPHANUMERIC_CHARSET.indexOf(n.charAt(m)),6,l),new f(f.Mode.ALPHANUMERIC,n.length,l)}static makeSegments(n){return n==""?[]:f.isNumeric(n)?[f.makeNumeric(n)]:f.isAlphanumeric(n)?[f.makeAlphanumeric(n)]:[f.makeBytes(f.toUtf8ByteArray(n))]}static makeEci(n){let l=[];if(n<0)throw new RangeError("ECI assignment value out of range");if(n<128)e(n,8,l);else if(n<16384)e(2,2,l),e(n,14,l);else if(n<1e6)e(6,3,l),e(n,21,l);else throw new RangeError("ECI assignment value out of range");return new f(f.Mode.ECI,0,l)}static isNumeric(n){return f.NUMERIC_REGEX.test(n)}static isAlphanumeric(n){return f.ALPHANUMERIC_REGEX.test(n)}constructor(n,l,m){if(this.mode=n,this.numChars=l,this.bitData=m,l<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}getData(){return this.bitData.slice()}static getTotalBits(n,l){let m=0;for(let z of n){let h=z.mode.numCharCountBits(l);if(z.numChars>=1<<h)return 1/0;m+=4+h+z.bitData.length}return m}static toUtf8ByteArray(n){n=encodeURI(n);let l=[];for(let m=0;m<n.length;m++)n.charAt(m)!="%"?l.push(n.charCodeAt(m)):(l.push(parseInt(n.substring(m+1,m+3),16)),m+=2);return l}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return f})();i.QrSegment=d})(Wt||(Wt={}));(function(i){let o;(function(e){class t{ordinal;formatBits;static LOW=new t(0,1);static MEDIUM=new t(1,0);static QUARTILE=new t(2,3);static HIGH=new t(3,2);constructor(d,f){this.ordinal=d,this.formatBits=f}}e.Ecc=t})(o=i.QrCode||(i.QrCode={}))})(Wt||(Wt={}));(function(i){let o;(function(e){class t{modeBits;numBitsCharCount;static NUMERIC=new t(1,[10,12,14]);static ALPHANUMERIC=new t(2,[9,11,13]);static BYTE=new t(4,[8,16,16]);static KANJI=new t(8,[8,10,12]);static ECI=new t(7,[0,0,0]);constructor(d,f){this.modeBits=d,this.numBitsCharCount=f}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}}e.Mode=t})(o=i.QrSegment||(i.QrSegment={}))})(Wt||(Wt={}));var ki=Wt,ea={L:ki.QrCode.Ecc.LOW,M:ki.QrCode.Ecc.MEDIUM,Q:ki.QrCode.Ecc.QUARTILE,H:ki.QrCode.Ecc.HIGH},ta=160,ia=10,oa=10,na="#000000",ra="#FFFFFF",aa=40,sa="M",la=(i,o=sa)=>i?ki.QrCode.encodeText(i,ea[o]):null;function ma(i,o,e=ta,t=ia,r=oa,d=na,f=ra,g=aa,n){let l=i.getContext("2d"),m=pa(r);if(i.style.width=`${e}px`,i.style.height=`${e}px`,!o){l.fillStyle="rgba(0, 0, 0, 0)",l.fillRect(0,0,i.width,i.height);return}if(i.width=o.size*t+m[1]+m[3],i.height=o.size*t+m[0]+m[2],!n)Uo(l,i.width,i.height,t,f),Vo(l,o,t,m,f,d);else{let z=new Image;z.src=n,z.crossOrigin="anonymous",z.width=g*(i.width/e),z.height=g*(i.width/e);let h=()=>{C(),Uo(l,i.width,i.height,t,f),Vo(l,o,t,m,f,d);let _=i.width/2-g*(i.width/e)/2;l.fillRect(_,_,g*(i.width/e),g*(i.width/e)),l.drawImage(z,_,_,g*(i.width/e),g*(i.width/e))},y=()=>{C(),Uo(l,i.width,i.height,t,f),Vo(l,o,t,m,f,d)},C=()=>{z.removeEventListener("load",h),z.removeEventListener("error",y)};z.addEventListener("load",h),z.addEventListener("error",y)}}function Vo(i,o,e,t,r,d){for(let f=0;f<o.size;f++)for(let g=0;g<o.size;g++)i.fillStyle=o.getModule(g,f)?d:r,i.fillRect(t[3]+g*e,t[0]+f*e,e,e)}function Uo(i,o,e,t,r){i.fillStyle=r,i.fillRect(0,0,o*t,e*t)}function pa(i){return Array.isArray(i)?Array(4).fill(0).map((o,e)=>i[e%i.length]):[i,i,i,i]}var tr=(()=>{class i{i18n=M(bn);el=M(Gi);cdr=M(Yt);destroyRef=M(Ui);isBrowser=un(M(en));canvas;nzValue="";nzPadding=0;nzColor="#000000";nzBgColor="#FFFFFF";nzSize=160;nzIcon="";nzIconSize=40;nzBordered=!0;nzStatus="active";nzLevel="M";nzStatusRender=null;nzRefresh=new Di;locale;ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(Ii(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(e){let{nzValue:t,nzIcon:r,nzLevel:d,nzSize:f,nzIconSize:g,nzColor:n,nzPadding:l,nzBgColor:m}=e;(t||r||d||f||g||n||l||m)&&this.canvas&&this.drawCanvasQRCode(),m&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&ma(this.canvas.nativeElement,la(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["nz-qrcode"]],viewQuery:function(t,r){if(t&1&&$i(Wr,5),t&2){let d;Ei(d=Ai())&&(r.canvas=d.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(t,r){t&2&&$t("ant-qrcode-border",r.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",Pi],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",Pi],nzBordered:[2,"nzBordered","nzBordered",Bi],nzStatus:"nzStatus",nzLevel:"nzLevel",nzStatusRender:"nzStatusRender"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[qt],decls:3,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"]],template:function(t,r){t&1&&(Se(0,Zr,2,1,"div",1)(1,Kr,4,1,"div",1),Se(2,Qr,2,0,"canvas")),t&2&&(ye(r.nzStatusRender?0:r.nzStatus!=="active"?1:-1),a(2),ye(r.isBrowser?2:-1))},dependencies:[A,Rn,E,ze,ce,D,Ki,Qi],encapsulation:2,changeDetection:0})}return i})();var Oi=()=>({standalone:!0}),_i=class _i{constructor(){this.value="https://ng-alain.com/";this.background="#ffffff";this.foreground="#000000";this.level="L";this.mime="image/png";this.padding=10;this.size=220}};_i.\u0275fac=function(e){return new(e||_i)},_i.\u0275cmp=x({type:_i,selectors:[["app-qr"]],decls:44,vars:39,consts:[[1,"alain-default__content-title"],["href","https://ng.ant.design/components/qr-code","target","_blank"],[3,"nzGutter"],[1,"text-center",3,"nzSpan"],[3,"nzValue","nzBgColor","nzColor","nzLevel","nzSize","nzPadding"],[3,"nzSpan"],["nz-form",""],["nz-input","","type","color",2,"width","100px",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzValue","L","nzLabel","L"],["nzValue","M","nzLabel","M"],["nzValue","Q","nzLabel","Q"],["nzValue","H","nzLabel","H"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2," \u4E8C\u7EF4\u7801 "),s(3,"a",1),c(4,"Document"),p()()(),s(5,"nz-card")(6,"nz-row",2)(7,"nz-col",3),Ne(8,"nz-qrcode",4),p(),s(9,"nz-col",5)(10,"form",6)(11,"nz-form-item")(12,"nz-form-label",5),c(13,"\u80CC\u666F"),p(),s(14,"nz-form-control",5)(15,"nz-input-group")(16,"input",7),we("ngModelChange",function(d){return xe(t.background,d)||(t.background=d),d}),p()()()(),s(17,"nz-form-item")(18,"nz-form-label",5),c(19,"\u524D\u666F"),p(),s(20,"nz-form-control",5)(21,"nz-input-group")(22,"input",7),we("ngModelChange",function(d){return xe(t.foreground,d)||(t.foreground=d),d}),p()()()(),s(23,"nz-form-item")(24,"nz-form-label",5),c(25,"\u8BEF\u5DEE"),p(),s(26,"nz-form-control",5)(27,"nz-select",8),we("ngModelChange",function(d){return xe(t.level,d)||(t.level=d),d}),Ne(28,"nz-option",9)(29,"nz-option",10)(30,"nz-option",11)(31,"nz-option",12),p()()(),s(32,"nz-form-item")(33,"nz-form-label",5),c(34,"\u5185\u8FB9\u8DDD"),p(),s(35,"nz-form-control",5)(36,"nz-input-number",13),we("ngModelChange",function(d){return xe(t.padding,d)||(t.padding=d),d}),p(),c(37,"px "),p()(),s(38,"nz-form-item")(39,"nz-form-label",5),c(40,"\u5927\u5C0F"),p(),s(41,"nz-form-control",5)(42,"nz-input-number",14),we("ngModelChange",function(d){return xe(t.size,d)||(t.size=d),d}),p(),c(43,"px "),p()()()()()()),e&2&&(a(6),u("nzGutter",24),a(),u("nzSpan",8),a(),u("nzValue",t.value)("nzBgColor",t.background)("nzColor",t.foreground)("nzLevel",t.level)("nzSize",t.size)("nzPadding",t.padding),a(),u("nzSpan",16),a(3),u("nzSpan",8),a(2),u("nzSpan",16),a(2),Te("ngModel",t.background),u("ngModelOptions",ge(34,Oi)),a(2),u("nzSpan",8),a(2),u("nzSpan",16),a(2),Te("ngModel",t.foreground),u("ngModelOptions",ge(35,Oi)),a(2),u("nzSpan",8),a(2),u("nzSpan",16),a(),Te("ngModel",t.level),u("ngModelOptions",ge(36,Oi)),a(6),u("nzSpan",8),a(2),u("nzSpan",16),a(),Te("ngModel",t.padding),u("ngModelOptions",ge(37,Oi))("nzMin",0)("nzMax",100),a(3),u("nzSpan",8),a(2),u("nzSpan",16),a(),Te("ngModel",t.size),u("ngModelOptions",ge(38,Oi))("nzMin",100)("nzMax",1e3)("nzStep",t.padding))},dependencies:[I,ti,kt,Et,Qt,At,ei,R,ie,J,se,ae,re,E,ce,j,K,St,vt,k,U,de,$,oo,no,D,L,le,B,W,P,oe,X,Ot,ro,Y,Hn,Z,q,V,ne,pe,te,O,Q,oi,ii,ri,ni,me,A,ee,Ce,G,ue,H,F,tr],encapsulation:2});var No=_i;var ir=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=jt({type:i});static \u0275inj=Gt({imports:[dn]})}return i})();var da=["*"];function ua(i,o){i&1&&Bo(0)}function ca(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N(3);a(),be(e.nzTitle)}}function fa(i,o){if(i&1&&(s(0,"div",2),w(1,ca,2,1,"ng-container",4),p()),i&2){let e=N(2);a(),u("nzStringTemplateOutlet",e.nzTitle)}}function za(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N(3);a(),be(e.nzExtra)}}function ha(i,o){if(i&1&&(s(0,"div",3),w(1,za,2,1,"ng-container",4),p()),i&2){let e=N(2);a(),u("nzStringTemplateOutlet",e.nzExtra)}}function ga(i,o){if(i&1&&(s(0,"div",0),Se(1,fa,2,1,"div",2),Se(2,ha,2,1,"div",3),p()),i&2){let e=N();a(),ye(e.nzTitle?1:-1),a(),ye(e.nzExtra?2:-1)}}function Ca(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N(2).$implicit;a(),Me(" ",e.title," ")}}function _a(i,o){}function Ma(i,o){if(i&1&&(s(0,"td",6)(1,"div",7)(2,"span",8),w(3,Ca,2,1,"ng-container",4),p(),s(4,"span",9),w(5,_a,0,0,"ng-template",10),p()()()),i&2){let e=N().$implicit,t=N(3);u("colSpan",e.span),a(2),$t("ant-descriptions-item-no-colon",!t.nzColon),a(),u("nzStringTemplateOutlet",e.title),a(2),u("ngTemplateOutlet",e.content)}}function Na(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N(2).$implicit;a(),Me(" ",e.title," ")}}function va(i,o){}function Sa(i,o){if(i&1&&(s(0,"td",8),w(1,Na,2,1,"ng-container",4),p(),s(2,"td",11),w(3,va,0,0,"ng-template",10),p()),i&2){let e=N().$implicit;a(),u("nzStringTemplateOutlet",e.title),a(),u("colSpan",e.span*2-1),a(),u("ngTemplateOutlet",e.content)}}function ya(i,o){if(i&1&&Se(0,Ma,6,5,"td",6)(1,Sa,4,3),i&2){let e=N(3);ye(e.nzBordered?1:0)}}function ba(i,o){if(i&1&&(s(0,"tr",5),Ee(1,ya,2,1,null,null,Pt),p()),i&2){let e=o.$implicit;a(),Ae(e)}}function Ta(i,o){if(i&1&&Ee(0,ba,3,0,"tr",5,Pt),i&2){let e=N();Ae(e.itemMatrix)}}function xa(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N().$implicit;a(),Me(" ",e.title," ")}}function wa(i,o){if(i&1&&(s(0,"td",6)(1,"div",7)(2,"span",8),w(3,xa,2,1,"ng-container",4),p()()()),i&2){let e=o.$implicit,t=N(4);u("colSpan",e.span),a(2),$t("ant-descriptions-item-no-colon",!t.nzColon),a(),u("nzStringTemplateOutlet",e.title)}}function Da(i,o){}function Ea(i,o){if(i&1&&(s(0,"td",6)(1,"div",7)(2,"span",9),w(3,Da,0,0,"ng-template",10),p()()()),i&2){let e=o.$implicit;u("colSpan",e.span),a(3),u("ngTemplateOutlet",e.content)}}function Aa(i,o){if(i&1&&(s(0,"tr",5),Ee(1,wa,4,4,"td",6,Pt),p(),s(3,"tr",5),Ee(4,Ea,4,2,"td",6,Pt),p()),i&2){let e=o.$implicit;a(),Ae(e),a(3),Ae(e)}}function Fa(i,o){if(i&1&&Ee(0,Aa,6,0,null,null,Pt),i&2){let e=N(2);Ae(e.itemMatrix)}}function Ba(i,o){if(i&1&&(bt(0),c(1),Tt()),i&2){let e=N().$implicit;a(),Me(" ",e.title," ")}}function Pa(i,o){if(i&1&&(s(0,"td",12),w(1,Ba,2,1,"ng-container",4),p()),i&2){let e=o.$implicit;u("colSpan",e.span),a(),u("nzStringTemplateOutlet",e.title)}}function Ia(i,o){}function Ra(i,o){if(i&1&&(s(0,"td",11),w(1,Ia,0,0,"ng-template",10),p()),i&2){let e=o.$implicit;u("colSpan",e.span),a(),u("ngTemplateOutlet",e.content)}}function La(i,o){if(i&1&&(s(0,"tr",5),Ee(1,Pa,2,2,"td",12,Pt),p(),s(3,"tr",5),Ee(4,Ra,2,2,"td",11,Pt),p()),i&2){let e=o.$implicit;a(),Ae(e),a(3),Ae(e)}}function ka(i,o){if(i&1&&Ee(0,La,6,0,null,null,Pt),i&2){let e=N(2);Ae(e.itemMatrix)}}function Oa(i,o){if(i&1&&Se(0,Fa,2,0)(1,ka,2,0),i&2){let e=N();ye(e.nzBordered?1:0)}}var Go=(()=>{class i{content;nzSpan=1;nzTitle="";inputChange$=new bi;ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["nz-descriptions-item"]],viewQuery:function(t,r){if(t&1&&$i(on,7),t&2){let d;Ei(d=Ai())&&(r.content=d.first)}},inputs:{nzSpan:[2,"nzSpan","nzSpan",Pi],nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[qt],ngContentSelectors:da,decls:1,vars:0,template:function(t,r){t&1&&(Fo(),nn(0,ua,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return i})(),Va="descriptions",Ua={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},jo=(()=>{var h;let i,o=[],e=[],t,r=[],d=[],f,g=[],n=[],l,m=[],z=[];return h=class{nzConfigService=M(Mn);cdr=M(Yt);breakpointService=M(En);directionality=M(Cn);destroyRef=M(Ui);_nzModuleName=Va;items;nzBordered=Bt(this,o,!1);nzLayout=(Bt(this,e),"horizontal");nzColumn=Bt(this,r,Ua);nzSize=(Bt(this,d),Bt(this,g,"default"));nzTitle=(Bt(this,n),"");nzExtra;nzColon=Bt(this,m,!0);itemMatrix=(Bt(this,z),[]);realColumn=3;dir="ltr";breakpoint=wn.md;ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(Ii(this.destroyRef)).subscribe(C=>{this.dir=C})}ngOnChanges(C){C.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){let C=this.items.changes.pipe(Jo(this.items));Eo(C,C.pipe(Ko(()=>Eo(...this.items.map(_=>_.inputChange$)).pipe(Xo(16)))),this.breakpointService.subscribe(Dn).pipe(wi(_=>this.breakpoint=_))).pipe(Ii(this.destroyRef)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}prepareMatrix(){if(!this.items)return;let C=[],_=0,v=this.realColumn=this.getColumn(),Be=this.items.toArray(),Ct=Be.length,he=[],Pe=()=>{he.push(C),C=[],_=0};for(let yt=0;yt<Ct;yt++){let To=Be[yt],{nzTitle:xo,content:wo,nzSpan:Vi}=To;_+=Vi,_>=v?(_>v&&_n(`"nzColumn" is ${v} but we have row length ${_}`),C.push({title:xo,content:wo,span:v-(_-Vi)}),Pe()):yt===Ct-1?(C.push({title:xo,content:wo,span:v-(_-Vi)}),Pe()):C.push({title:xo,content:wo,span:Vi})}this.itemMatrix=he}getColumn(){return typeof this.nzColumn!="number"?this.nzColumn[this.breakpoint]:this.nzColumn}},(()=>{let C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[Li()],t=[Li()],f=[Li()],l=[Li()],Ti(null,null,i,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:_=>"nzBordered"in _,get:_=>_.nzBordered,set:(_,v)=>{_.nzBordered=v}},metadata:C},o,e),Ti(null,null,t,{kind:"field",name:"nzColumn",static:!1,private:!1,access:{has:_=>"nzColumn"in _,get:_=>_.nzColumn,set:(_,v)=>{_.nzColumn=v}},metadata:C},r,d),Ti(null,null,f,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:_=>"nzSize"in _,get:_=>_.nzSize,set:(_,v)=>{_.nzSize=v}},metadata:C},g,n),Ti(null,null,l,{kind:"field",name:"nzColon",static:!1,private:!1,access:{has:_=>"nzColon"in _,get:_=>_.nzColon,set:(_,v)=>{_.nzColon=v}},metadata:C},m,z),C&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),Do(h,"\u0275fac",function(_){return new(_||h)}),Do(h,"\u0275cmp",x({type:h,selectors:[["nz-descriptions"]],contentQueries:function(_,v,Be){if(_&1&&an(Be,Go,4),_&2){let Ct;Ei(Ct=Ai())&&(v.items=Ct)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(_,v){_&2&&$t("ant-descriptions-bordered",v.nzBordered)("ant-descriptions-middle",v.nzSize==="middle")("ant-descriptions-small",v.nzSize==="small")("ant-descriptions-rtl",v.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",Bi],nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:[2,"nzColon","nzColon",Bi]},exportAs:["nzDescriptions"],features:[qt],decls:6,vars:3,consts:[[1,"ant-descriptions-header"],[1,"ant-descriptions-view"],[1,"ant-descriptions-title"],[1,"ant-descriptions-extra"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-row"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(_,v){_&1&&(Se(0,ga,3,2,"div",0),s(1,"div",1)(2,"table")(3,"tbody"),Se(4,Ta,2,0),Se(5,Oa,2,1),p()()()),_&2&&(ye(v.nzTitle||v.nzExtra?0:-1),a(4),ye(v.nzLayout==="horizontal"?4:-1),a(),ye(v.nzLayout==="vertical"?5:-1))},dependencies:[Nn,Qi,mn],encapsulation:2,changeDetection:0})),h})(),or=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=jt({type:i});static \u0275inj=Gt({imports:[jo]})}return i})();var ja=()=>({show:!0,front:!1}),Ha=()=>[0,0,0,0];function $a(i,o){if(i&1){let e=fe();s(0,"button",14),S("click",function(){b(e);let r=N();return T(r.fullChange())}),Ne(1,"span",15),c(2," \u5168\u87A2\u5E55 "),p()}}function Wa(i,o){if(i&1&&Ne(0,"g2-mini-bar",16),i&2){let e=N();u("data",e.events)("height",30)("padding",ge(3,Ha))}}var Mi=class Mi{constructor(){this.http=M(to);this.message=M(De);this.ps=20;this.total=200;this.args={_allow_anonymous:!0,userid:null};this.url="https://api.randomuser.me/?results=20";this.events=[];this.scroll={y:"230px"};this.columns=[{title:"id",index:"id.value",type:"checkbox"},{title:"Avatar",index:"picture.thumbnail",type:"img",width:80},{title:"Name",index:"name.first",width:150,format:o=>`${o.name.first} ${o.name.last}`,type:"link",click:o=>this.message.info(`${o.name.first}`)},{title:"Email",index:"email"},{title:"Gender",index:"gender",type:"yn",yn:{truth:"female",yes:"\u7537",no:"\u5973",mode:"text"},width:120},{title:"Events",render:"events",width:90},{title:"Registered",index:"registered.date",type:"date",width:170},{title:"Actions",width:120,buttons:[{text:"Edit",click:o=>this.message.info(`edit [${o.id.value}]`),iif:o=>o.gender==="female"},{text:"Delete",type:"del",click:o=>this.message.info(`deleted [${o.id.value}]`)}]}]}ngOnInit(){this.http.get("/chart/visit").subscribe(o=>this.events=o.slice(0,8))}fullChange(o){this.scroll=o?{y:"350px"}:{y:"230px"}}};Mi.\u0275fac=function(e){return new(e||Mi)},Mi.\u0275cmp=x({type:Mi,selectors:[["app-st"]],decls:23,vars:9,consts:[["extra",""],["st",""],[1,"st-demo"],[3,"title","home"],[3,"data","columns","total","page","scroll"],["st-row","events"],["nzTitle","Firebase \u6574\u5408\u72C0\u614B",1,"mt-lg"],[1,"firebase-status"],["nzTitle","\u8A8D\u8B49\u72C0\u614B",3,"nzColumn"],["nzTitle","Firebase Auth"],["nzColor","green"],["nzTitle","Firestore ACL"],["nzTitle","Google \u767B\u5165"],["nzTitle","\u6B0A\u9650\u63A7\u5236"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","fullscreen"],["color","#999","borderWidth","3","tooltipType","mini","theme","mini",3,"data","height","padding"]],template:function(e,t){e&1&&(s(0,"div",2)(1,"page-header",3),w(2,$a,3,0,"ng-template",null,0,Xt),p(),s(4,"nz-card")(5,"st",4,1),w(7,Wa,1,4,"ng-template",5),p()(),s(8,"nz-card",6)(9,"div",7)(10,"nz-descriptions",8)(11,"nz-descriptions-item",9)(12,"nz-tag",10),c(13,"\u5DF2\u6574\u5408"),p()(),s(14,"nz-descriptions-item",11)(15,"nz-tag",10),c(16,"\u5DF2\u6574\u5408"),p()(),s(17,"nz-descriptions-item",12)(18,"nz-tag",10),c(19,"\u5DF2\u6574\u5408"),p()(),s(20,"nz-descriptions-item",13)(21,"nz-tag",10),c(22,"\u5DF2\u6574\u5408"),p()()()()()()),e&2&&(a(),u("title","ST \u8868\u683C\u5143\u4EF6\u6F14\u793A")("home","home"),a(4),u("data",t.url)("columns",t.columns)("total",t.total)("page",ge(8,ja))("scroll",t.scroll),a(5),u("nzColumn",2))},dependencies:[I,R,ie,J,Nt,Vt,se,ae,re,ao,E,ze,ce,ve,j,K,k,U,de,$,D,Ki,L,le,B,W,P,oe,X,Y,Z,q,V,Ft,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,ir,Xn,or,jo,Go],encapsulation:2});var vo=Mi;var nr=()=>({standalone:!0}),Ni=class Ni{constructor(){this.messageSrv=M(De);this.format_str="this is ${name}";this.format_res="";this.format_obj=JSON.stringify({name:"asdf"});this.content=`time ${+new Date}

    \u4E2D\u6587\uFF01@#\uFFE5%\u2026\u2026&*`}onFormat(){let o=null;try{o=JSON.parse(this.format_obj)}catch{this.messageSrv.error("\u65E0\u6CD5\u4F7F\u7528 JSON.parse \u8F6C\u6362");return}this.format_res=Bn(this.format_str,o,!0)}onYuan(o){this.yuan_res=qn(o)}onCopy(){xn(`time ${+new Date}`).then(()=>this.messageSrv.success("success"))}};Ni.\u0275fac=function(e){return new(e||Ni)},Ni.\u0275cmp=x({type:Ni,selectors:[["app-util"]],decls:39,vars:23,consts:[[1,"alain-default__content-title"],[3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u5B57\u7B26\u4E32\u7C7B"],["nzType","inner","nzTitle","format"],["nz-form",""],[3,"nzSm"],["nz-input","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzSpan","nzOffset"],["nz-button","",3,"click"],["nzType","inner","nzTitle","yuan"],["type","number","nz-input","",3,"ngModelChange","ngModel"],[3,"innerHTML"],["nzTitle","\u5176\u5B83\u7C7B"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2," \u5DE5\u5177\u96C6 "),s(3,"small"),c(4,"@delon/util \u65E5\u5E38\u7528\u6CD5\u3002"),p()()(),s(5,"nz-row",1)(6,"nz-col",2)(7,"nz-card",3)(8,"nz-card",4)(9,"form",5)(10,"nz-form-item")(11,"nz-form-label",6),c(12,"String"),p(),s(13,"nz-form-control",6)(14,"input",7),we("ngModelChange",function(d){return xe(t.format_str,d)||(t.format_str=d),d}),p()()(),s(15,"nz-form-item")(16,"nz-form-label",6),c(17,"Object"),p(),s(18,"nz-form-control",6)(19,"input",7),we("ngModelChange",function(d){return xe(t.format_obj,d)||(t.format_obj=d),d}),p()()(),s(20,"nz-form-item")(21,"nz-form-control",8)(22,"button",9),S("click",function(){return t.onFormat()}),c(23,"Run"),p()()(),s(24,"nz-form-item")(25,"nz-form-label",6),c(26,"Result"),p(),s(27,"nz-form-control",6),c(28),p()()()(),s(29,"nz-card",10)(30,"nz-row",1)(31,"nz-col",2)(32,"input",11),we("ngModelChange",function(d){return xe(t.yuan_str,d)||(t.yuan_str=d),d}),S("ngModelChange",function(d){return t.onYuan(d)}),p()(),s(33,"nz-col",2),Ne(34,"div",12),p()()()()(),s(35,"nz-col",2)(36,"nz-card",13)(37,"button",9),S("click",function(){return t.onCopy()}),c(38,"Copy"),p()()()()),e&2&&(a(5),u("nzGutter",16),a(),u("nzSpan",12),a(5),u("nzSm",8),a(2),u("nzSm",16),a(),Te("ngModel",t.format_str),u("ngModelOptions",ge(21,nr)),a(2),u("nzSm",8),a(2),u("nzSm",16),a(),Te("ngModel",t.format_obj),u("ngModelOptions",ge(22,nr)),a(2),u("nzSpan",16)("nzOffset",8),a(4),u("nzSm",8),a(2),u("nzSm",16),a(),Me(" ",t.format_res," "),a(2),u("nzGutter",16),a(),u("nzSpan",12),a(),Te("ngModel",t.yuan_str),a(),u("nzSpan",12),a(),u("innerHTML",t.yuan_res,tn),a(),u("nzSpan",12))},dependencies:[I,ti,kt,Fn,Et,Qt,At,ei,R,ie,J,se,ae,re,E,ze,ce,ve,j,K,St,vt,k,U,de,$,D,L,le,B,W,P,oe,X,Ot,Y,Z,q,V,ne,pe,te,O,Q,oi,ii,ri,ni,me,A,ee,Ce,G,ue,H,F],encapsulation:2});var So=Ni;var vi=class vi{constructor(){this.xlsx=M(In);this.users=Array(100).fill(0).map((o,e)=>({id:e+1,name:`name ${e+1}`,age:Math.ceil(Math.random()*10)+20}));this.columns=[{title:"\u7F16\u53F7",index:"id",type:"checkbox"},{title:"\u59D3\u540D",index:"name"},{title:"\u5E74\u9F84",index:"age"}]}url(){this.xlsx.import("./assets/tmp/demo.xlsx").then(o=>this.data=o)}change(o){let e=o.target.files[0];this.xlsx.import(e).then(t=>this.data=t)}download(){let o=[this.columns.map(e=>e.title)];this.users.forEach(e=>o.push(this.columns.map(t=>e[t.index]))),this.xlsx.export({sheets:[{data:o,name:"sheet name"}]})}};vi.\u0275fac=function(e){return new(e||vi)},vi.\u0275cmp=x({type:vi,selectors:[["app-xlsx"]],decls:16,vars:6,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/xlsx","target","_blank"],["nzTitle","Import"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],[1,"mt-sm"],["nzTitle","Export"],[1,"mt-sm",3,"data","ps","columns"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2," Import & Export excel file, "),s(3,"a",1),c(4,"Document"),p()()(),s(5,"nz-card",2)(6,"button",3),S("click",function(){return t.url()}),c(7,"Via Url"),p(),s(8,"input",4),S("change",function(d){return t.change(d)}),p(),s(9,"p",5),c(10),xt(11,"json"),p()(),s(12,"nz-card",6)(13,"button",3),S("click",function(){return t.download()}),c(14,"Export"),p(),Ne(15,"st",7),p()),e&2&&(a(10),Me("result: ",wt(11,4,t.data)),a(5),u("data",t.users)("ps",3)("columns",t.columns))},dependencies:[I,R,ie,J,Nt,se,ae,re,E,ze,ce,ve,j,K,k,U,de,$,D,L,le,B,W,P,oe,X,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,Lt],encapsulation:2});var yo=vi;var rr=Ho(Oo(),1);var ar=(()=>{class i{http=M(Zi);lazy=M(Yi);ngZone=M(rn);cogSrv=M(Kt);cog;constructor(){this.cog=this.cogSrv.merge("zip",{url:"https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js",utils:[]})}init(){return this.lazy.load([this.cog.url].concat(this.cog.utils))}check(e){if(!e)throw new Error("get instance via `ZipService.create()`")}read(e,t){return new Promise((r,d)=>{let f=g=>{this.ngZone.run(()=>r(g))};this.init().then(()=>{if(typeof e=="string"){this.http.request("GET",e,{responseType:"arraybuffer"}).subscribe({next:n=>{JSZip.loadAsync(n,t).then(l=>f(l))},error:n=>{d(n)}});return}let g=new FileReader;g.onload=n=>{JSZip.loadAsync(n.target.result,t).then(l=>f(l))},g.readAsBinaryString(e)})})}create(){return new Promise(e=>{this.init().then(()=>{let t=new JSZip;e(t)}).catch(()=>e(null))})}pushUrl(e,t,r){return this.check(e),new Promise((d,f)=>{this.http.request("GET",r,{responseType:"arraybuffer"}).subscribe({next:g=>{e.file(t,g),d()},error:g=>{f({url:r,error:g})}})})}save(e,t){this.check(e);let r=Mt({filename:"download.zip"},t);return new Promise((d,f)=>{e.generateAsync(Mt({type:"blob"},r.options),r.update).then(g=>{r.callback&&r.callback(g),(0,rr.saveAs)(g,r.filename),d()},g=>{f(g)})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return qo([Pn()],i.prototype,"read",null),i})();function qa(i,o){if(i&1&&(s(0,"li"),c(1),xt(2,"json"),p()),i&2){let e=o.$implicit;a(),be(wt(2,1,e))}}function Za(i,o){if(i&1){let e=fe();s(0,"nz-card",2)(1,"button",4),S("click",function(){b(e);let r=N();return T(r.url())}),c(2,"Via Url"),p(),s(3,"input",5),S("change",function(r){b(e);let d=N();return T(d.change(r))}),p(),s(4,"ol"),Ee(5,qa,3,3,"li",null,Rt),p()()}if(i&2){let e=N();a(5),Ae(e.list)}}function Xa(i,o){if(i&1){let e=fe();s(0,"tr")(1,"td")(2,"input",9),we("ngModelChange",function(r){let d=b(e).$implicit;return xe(d.path,r)||(d.path=r),T(r)}),p()(),s(3,"td")(4,"input",9),we("ngModelChange",function(r){let d=b(e).$implicit;return xe(d.url,r)||(d.url=r),T(r)}),p()()()}if(i&2){let e=o.$implicit,t=o.$index;a(2),u("name",Fi("path",t)),Te("ngModel",e.path),a(2),u("name",Fi("url",t)),Te("ngModel",e.url)}}function Ya(i,o){if(i&1){let e=fe();s(0,"nz-card",3)(1,"button",6),S("click",function(){b(e);let r=N();return T(r.data.push({}))}),c(2,"new"),p(),s(3,"button",7),S("click",function(){b(e);let r=N();return T(r.download())}),c(4,"download"),p(),s(5,"nz-table",8)(6,"thead")(7,"tr")(8,"th")(9,"span"),c(10,"path"),p()(),s(11,"th")(12,"span"),c(13,"url"),p()()()(),s(14,"tbody"),Ee(15,Xa,5,6,"tr",null,Rt),p()()()}if(i&2){let e=N();a(),u("nzType","primary"),a(4),u("nzData",e.data)("nzFrontPagination",!1)("nzShowPagination",!1),a(10),Ae(e.data)}}var Si=class Si{constructor(){this.zip=M(ar);this.msg=M(De);this.cdr=M(Yt);this.instance=null;this.data=[{path:"demo.docx",url:"https://ng-alain.com/assets/demo.docx"},{path:"\u5C0F\u7A0B\u5E8F\u6807\u5FD7.zip",url:"https://wximg.gtimg.com/shake_tv/mina/standard_logo.zip"}]}ngOnInit(){this.zip.create().then(o=>{this.instance=o,this.cdr.detectChanges()})}format(o){let e=o.files;this.list=Object.keys(e).map(t=>({name:t,dir:e[t].dir,date:e[t].date})),this.cdr.detectChanges()}url(){this.zip.read("./assets/tmp/demo.zip").then(o=>this.format(o))}change(o){let e=o.target.files[0];this.zip.read(e).then(t=>this.format(t))}download(){let o=[];this.data.forEach(e=>{o.push(this.zip.pushUrl(this.instance,e.path,e.url))}),Promise.all(o).then(()=>{this.zip.save(this.instance).then(()=>{this.msg.success("download success"),this.data=[]})},e=>{console.warn(e),this.msg.error(JSON.stringify(e))})}};Si.\u0275fac=function(e){return new(e||Si)},Si.\u0275cmp=x({type:Si,selectors:[["app-zip"]],decls:7,vars:2,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/zip","target","_blank"],["nzTitle","\u89E3\u538B"],["nzTitle","\u538B\u7F29"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],["nz-button","",3,"click","nzType"],["nz-button","",1,"ml-sm",3,"click"],[1,"mt-sm",3,"nzData","nzFrontPagination","nzShowPagination"],["nz-input","",3,"ngModelChange","ngModel","name"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1"),c(2," Read & Write zip file, "),s(3,"a",1),c(4,"Document"),p()()(),Se(5,Za,7,0,"nz-card",2),Se(6,Ya,17,4,"nz-card",3)),e&2&&(a(5),ye(t.instance?5:-1),a(),ye(t.instance?6:-1))},dependencies:[I,kt,Et,At,R,ie,J,se,ae,re,E,ze,ce,ve,j,K,k,U,de,$,D,L,le,B,W,Vn,Ln,kn,Gn,On,Un,P,oe,X,Ot,Y,Z,q,V,ne,pe,te,O,Q,me,A,ee,Ce,G,ue,H,F,Lt],encapsulation:2,changeDetection:0});var bo=Si;var Gp=[{path:"acl",component:so,data:{title:"ACL"}},{path:"acl-admin",component:lo,data:{title:"ACL Admin"}},{path:"acl-users",component:mo,canActivate:[Ri],data:{title:"\u7528\u6236\u7BA1\u7406",guard:"admin"}},{path:"acl-roles",component:po,canActivate:[Ri],data:{title:"\u89D2\u8272\u7BA1\u7406",guard:"admin"}},{path:"acl-permissions",component:uo,canActivate:[Ri],data:{title:"\u6B0A\u9650\u7BA1\u7406",guard:"admin"}},{path:"cache",component:co,data:{title:"Cache"}},{path:"downfile",component:fo,data:{title:"Down File"}},{path:"form",component:zo,data:{title:"Form"}},{path:"guard",component:Co,data:{title:"Route Guard"}},{path:"guard/auth",component:go,data:{title:"Guard Auth"}},{path:"guard/admin",component:ho,canActivate:[Ri],data:{title:"Guard Admin",guard:"admin"}},{path:"guard/leave",component:_o,canDeactivate:[Qn],data:{title:"Guard Leave"}},{path:"print",component:Mo,data:{title:"Print"}},{path:"qr",component:No,data:{title:"QR"}},{path:"st",component:vo,data:{title:"ST"}},{path:"util",component:So,data:{title:"Util"}},{path:"xlsx",component:yo,data:{title:"Xlsx"}},{path:"zip",component:bo,data:{title:"Zip"}}];export{Gp as routes};
