import{I as Xt,o as Ki}from"./chunk-7GHDPPLN.js";import"./chunk-VAGS5EVQ.js";import{a as Vn}from"./chunk-SXYIBZUM.js";import{c as Gn}from"./chunk-YUKGQROF.js";import"./chunk-45UFCUUT.js";import{d as Oe}from"./chunk-O5RH6STM.js";import{B as oe,F as re,G as io,H as ae,K as se,N as le,c as V,e as Tn,g as W,i as wn,j as Dn,k as Fn,l as An,m as Bn,n as In,o as q,q as Z,t as Y,u as Ln,v as ei,w as K,y as On}from"./chunk-TENDRTO2.js";import{A as P,Aa as Ve,B as L,Ba as je,Ca as Q,Da as ti,E as k,Ea as ii,Fa as oi,Ga as ni,Ha as ee,Ia as kn,Ja as ie,L as O,M as Pt,N as j,Na as ne,Pa as jn,Qa as me,R as G,S as bn,Ta as pe,W as xn,Y as H,ab as ue,cb as de,e as Nn,eb as ce,f as vn,g as Sn,ga as U,i as Rt,k as Et,l as Jt,ma as Qi,n as Kt,na as eo,oa as $,p as wt,pa as En,q as Qt,qa as F,r as yn,ra as Rn,sa as Lt,ua as to,xa as X,ya as Pn,za as J}from"./chunk-CUMLGEPE.js";import{$ as kt,$b as Ee,Ab as Ko,Ac as Di,Ah as Yi,Aj as ze,Bb as Vi,Bh as fn,Bj as te,Cb as xi,Ci as _n,Db as Ti,Dd as Wi,Di as I,E as So,Ea as l,Ed as Yt,Fa as Yo,Fc as Zt,Fd as Fi,Gc as ji,Gh as zn,H as Go,Hb as jt,Hc as tn,Hh as hn,Ic as Gi,Ih as B,Jb as Gt,Jd as $i,Jh as fe,Kc as on,La as b,Lc as It,Ld as pn,Ma as Vt,Mb as f,Md as qi,N as Ho,Na as yo,Nb as ye,Nd as To,Ob as _e,Oc as nn,Pb as Wt,Ph as Ne,Qb as be,Qc as rn,Ra as E,Rb as xe,Rd as un,Rh as Ce,Sa as Xo,Sb as Te,Sh as D,Si as R,T as Uo,Ta as bi,U as Wo,Ua as Jo,Vc as an,Vh as gn,W as yi,Xb as Ei,Zd as dn,Zi as Xi,aa as Ot,ab as ve,ac as Qo,ad as Hi,ba as $o,c as Mi,cb as Se,d as Ni,da as M,db as Bt,e as Oo,eb as Ft,ec as bt,fb as we,fc as Tt,fj as Ji,gb as De,gc as en,hb as d,hc as $t,ia as x,ib as m,ja as T,jb as p,kb as he,lb as ki,li as Cn,m as Vo,mb as Oi,n as vi,o as Dt,oa as Pi,ob as St,od as sn,pb as yt,rb as ge,rd as ln,rj as Mn,s as Si,sd as Ui,ta as Ut,ub as y,va as Li,ve as cn,w as jo,xa as qo,xb as v,xe as Ai,yb as bo,yc as qt,yh as Zi,za as Zo,zb as xo,zc as wi,zd as mn,zh as w}from"./chunk-BFD6XHBD.js";import{a as ke,d as er,f as Lo,g as vo,i as ko}from"./chunk-57BLH6QZ.js";var Ao=er((Do,Fo)=>{"use strict";(function(i,o){typeof define=="function"&&define.amd?define([],o):typeof Do<"u"?o():(o(),i.FileSaver={})})(Do,function(){"use strict";function i(g,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function o(g,n,a){var s=new XMLHttpRequest;s.open("GET",g),s.responseType="blob",s.onload=function(){c(s.response,n,a)},s.onerror=function(){console.error("could not download file")},s.send()}function e(g){var n=new XMLHttpRequest;n.open("HEAD",g,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function t(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(n)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,u=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(g,n,a){var s=r.URL||r.webkitURL,z=document.createElement("a");n=n||g.name||"download",z.download=n,z.rel="noopener",typeof g=="string"?(z.href=g,z.origin===location.origin?t(z):e(z.href)?o(g,n,a):t(z,z.target="_blank")):(z.href=s.createObjectURL(g),setTimeout(function(){s.revokeObjectURL(z.href)},4e4),setTimeout(function(){t(z)},0))}:"msSaveOrOpenBlob"in navigator?function(g,n,a){if(n=n||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(i(g,a),n);else if(e(g))o(g,n,a);else{var s=document.createElement("a");s.href=g,s.target="_blank",setTimeout(function(){t(s)})}}:function(g,n,a,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof g=="string")return o(g,n,a);var z=g.type==="application/octet-stream",h=/constructor/i.test(r.HTMLElement)||r.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||z&&h||u)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var Fe=C.result;Fe=S?Fe:Fe.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=Fe:location=Fe,s=null},C.readAsDataURL(g)}else{var _=r.URL||r.webkitURL,N=_.createObjectURL(g);s?s.location=N:location.href=N,s=null,setTimeout(function(){_.revokeObjectURL(N)},4e4)}});r.saveAs=c.saveAs=c,typeof Fo<"u"&&(Fo.exports=c)})});function tr(i,o){if(i&1){let e=ge();m(0,"div",16)(1,"button",17),y("click",function(){let r=x(e).$implicit,u=v();return T(u.setRole(r.id))}),f(2),p()()}if(i&2){let e=o.$implicit;l(2),Wt(" ",e.name," (",e.id,") ")}}function ir(i,o){if(i&1&&(m(0,"nz-tag",20),f(1),p()),i&2){let e=o.$implicit;l(),_e(" ",e," ")}}function or(i,o){if(i&1&&(m(0,"div")(1,"p")(2,"strong"),f(3,"\u89D2\u8272\uFF1A"),p(),f(4),p(),m(5,"p")(6,"strong"),f(7,"\u6B0A\u9650\uFF1A"),p()(),E(8,ir,2,1,"nz-tag",18),m(9,"p",19)(10,"small"),f(11),bt(12,"date"),p()()()),i&2){let e=o.ngIf;l(4),ye(e.roles.join(", ")||"\u7121"),l(4),d("ngForOf",e.permissions),l(3),_e("\u6700\u5F8C\u66F4\u65B0\uFF1A",en(12,3,e.updatedAt,"medium"))}}function nr(i,o){i&1&&(m(0,"p",21),f(1,"\u8ACB\u5148\u767B\u5165\u4EE5\u67E5\u770B\u6B0A\u9650"),p())}var ri=class ri{constructor(){this.aclSrv=M($i);this.menuSrv=M(Xi);this.auth=M(Ki);this.firebaseACLSrv=M(Xt);this.full=!1;this.availableRoles=[];this.currentUserACL$=this.firebaseACLSrv.userACL$}ngOnInit(){this.loadAvailableRoles()}get data(){return this.firebaseACLSrv.data}reMenu(){this.menuSrv.resume()}loadAvailableRoles(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.availableRoles=o})}toggleFull(){this.full=!this.full,this.aclSrv.setFull(this.full),this.reMenu()}setRole(o){let e=this.auth.currentUser;if(!e)return;let t=this.availableRoles.find(r=>r.id===o);t&&this.firebaseACLSrv.updateUserACL(e.uid,[o],t.permissions).subscribe(()=>{this.reMenu()})}clearACL(){let o=this.auth.currentUser;o&&this.firebaseACLSrv.updateUserACL(o.uid,[],[]).subscribe(()=>{this.reMenu()})}};ri.\u0275fac=function(e){return new(e||ri)},ri.\u0275cmp=b({type:ri,selectors:[["app-acl"]],decls:42,vars:21,consts:[["noUser",""],[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u6B0A\u9650\u72C0\u614B"],[1,"mt-md"],["nz-button","","nzType","default",3,"acl"],["nz-button","","nzType","default",1,"ml-sm",3,"acl"],["nzTitle","\u5168\u91CF\u6B0A\u9650"],["nz-button","",3,"click","nzType"],[1,"pt-md","text-grey"],["nzTitle","\u89D2\u8272\u5207\u63DB"],["class","mb-sm",4,"ngFor","ngForOf"],["nz-button","","nzType","dashed","nzBlock","",1,"mt-md",3,"click"],["nzTitle","\u7576\u524D\u7528\u6236\u6B0A\u9650"],[4,"ngIf","ngIfElse"],[1,"mb-sm"],["nz-button","","nzType","default","nzBlock","",3,"click"],["class","mb-xs",4,"ngFor","ngForOf"],[1,"mt-md","text-grey"],[1,"mb-xs"],[1,"text-grey"]],template:function(e,t){if(e&1){let r=ge();m(0,"div",1)(1,"h1"),f(2," ACL \u6B0A\u9650\u63A7\u5236 (Firestore \u6574\u5408) "),m(3,"small"),f(4," \u6CE8\u610F\u89C0\u5BDF\u5DE6\u908A\u7684\u9078\u55AE\uFF1BACL \u670D\u52D9\u63D0\u4F9B\u5B8C\u6574\u7684\u57FA\u65BC\u89D2\u8272\u7684\u8A2A\u554F\u63A7\u5236\uFF0C\u73FE\u5728\u6574\u5408\u4E86 Firestore \u5F8C\u7AEF\u5B58\u5132\u3002 "),p()()(),m(5,"div",2)(6,"div",3)(7,"nz-card",4)(8,"p")(9,"strong"),f(10,"\u7576\u524D ACL \u8CC7\u6599\uFF1A"),p(),f(11),bt(12,"json"),p(),m(13,"div",5)(14,"button",6),f(15,"\u7528\u6236\u6B0A\u9650"),p(),m(16,"button",7),f(17,"\u8A8D\u8B49\u7528\u6236"),p(),m(18,"button",7),f(19,"\u7BA1\u7406\u54E1\u6B0A\u9650"),p(),m(20,"button",7),f(21,"\u5100\u8868\u677F\u8B80\u53D6"),p(),m(22,"button",7),f(23,"\u7BA1\u7406\u54E1\u8A2A\u554F"),p()()()()(),m(24,"div",2)(25,"div",3)(26,"nz-card",8)(27,"button",9),y("click",function(){return x(r),T(t.toggleFull())}),f(28),p(),m(29,"p",10),f(30,"\u5168\u91CF\u6B0A\u9650\u6307\u7CFB\u7D71\u7BA1\u7406\u54E1\u89D2\u8272\uFF0C\u7121\u4EFB\u4F55\u9650\u5236\u3002"),p()()(),m(31,"div",3)(32,"nz-card",11),E(33,tr,3,2,"div",12),m(34,"button",13),y("click",function(){return x(r),T(t.clearACL())}),f(35," \u6E05\u9664\u6B0A\u9650 "),p()()(),m(36,"div",3)(37,"nz-card",14),E(38,or,13,6,"div",15),bt(39,"async"),E(40,nr,2,0,"ng-template",null,0,$t),p()()()}if(e&2){let r=jt(41);l(5),d("nzGutter",16),l(),d("nzSpan",24),l(5),ye(Tt(12,17,t.data)),l(3),d("acl","user"),l(2),d("acl","user1"),l(2),d("acl","admin"),l(2),d("acl","dashboard:read"),l(2),d("acl","admin:access"),l(2),d("nzGutter",16),l(),d("nzSpan",8),l(2),d("nzType",t.full?"primary":"default"),l(),_e(" ",t.full?"\u95DC\u9589":"\u958B\u555F","\u5168\u91CF\u6B0A\u9650 "),l(3),d("nzSpan",8),l(2),d("ngForOf",t.availableRoles),l(3),d("nzSpan",8),l(2),d("ngIf",Tt(39,19,t.currentUserACL$))("ngIfElse",r)}},dependencies:[P,L,oe,K,le,se,ae,pn,D,Ce,fe,Ne,U,Q,je,Ve,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,Pt,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,ji,Zt,It,Gi,on],encapsulation:2});var oo=ri;function rr(i,o){if(i&1&&(m(0,"nz-tag",13),f(1),p()),i&2){let e=o.$implicit;l(),_e(" ",e," ")}}function ar(i,o){if(i&1){let e=ge();m(0,"div",6)(1,"nz-card",7)(2,"div",8)(3,"div",2)(4,"h4"),f(5),p(),m(6,"p",9),f(7),p(),m(8,"div"),E(9,rr,2,1,"nz-tag",10),p()(),m(10,"div",11)(11,"nz-switch",12),y("ngModelChange",function(r){let u=x(e).$implicit,c=v();return T(c.toggleRoleStatus(u.id,r))}),p()()()()()}if(i&2){let e=o.$implicit;l(3),d("nzSpan",18),l(2),Wt("",e.name," (",e.id,")"),l(2),ye(e.description),l(2),d("ngForOf",e.permissions),l(),d("nzSpan",6),l(),d("ngModel",e.isActive)}}function sr(i,o){if(i&1){let e=ge();m(0,"div",6)(1,"nz-card",7)(2,"div",8)(3,"div",2)(4,"h4"),f(5),p(),m(6,"p",9),f(7),p(),m(8,"nz-tag"),f(9),p()(),m(10,"div",11)(11,"nz-switch",12),y("ngModelChange",function(r){let u=x(e).$implicit,c=v();return T(c.togglePermissionStatus(u.id,r))}),p()()()()()}if(i&2){let e=o.$implicit;l(3),d("nzSpan",18),l(2),Wt("",e.name," (",e.id,")"),l(2),ye(e.description),l(2),Wt("",e.resource,":",e.action),l(),d("nzSpan",6),l(),d("ngModel",e.isActive)}}var ai=class ai{constructor(){this.firebaseACLSrv=M(Xt);this.message=M(Oe);this.roles=[];this.permissions=[]}ngOnInit(){this.loadData()}loadData(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.roles=o}),this.firebaseACLSrv.getPermissions().subscribe(o=>{this.permissions=o})}toggleRoleStatus(o,e){this.message.info(`\u89D2\u8272 ${o} \u72C0\u614B\u5DF2${e?"\u555F\u7528":"\u505C\u7528"}`)}togglePermissionStatus(o,e){this.message.info(`\u6B0A\u9650 ${o} \u72C0\u614B\u5DF2${e?"\u555F\u7528":"\u505C\u7528"}`)}};ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275cmp=b({type:ai,selectors:[["app-acl-admin"]],decls:10,vars:5,consts:[[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u89D2\u8272\u7BA1\u7406"],["class","mb-md",4,"ngFor","ngForOf"],["nzTitle","\u6B0A\u9650\u7BA1\u7406"],[1,"mb-md"],["nzSize","small"],["nz-row",""],[1,"text-grey"],["class","mb-xs",4,"ngFor","ngForOf"],["nz-col","",1,"text-right",3,"nzSpan"],[3,"ngModelChange","ngModel"],[1,"mb-xs"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2,"ACL \u7BA1\u7406"),p()(),m(3,"div",1)(4,"div",2)(5,"nz-card",3),E(6,ar,12,7,"div",4),p()(),m(7,"div",2)(8,"nz-card",5),E(9,sr,12,8,"div",4),p()()()),e&2&&(l(3),d("nzGutter",16),l(),d("nzSpan",12),l(2),d("ngForOf",t.roles),l(),d("nzSpan",12),l(2),d("ngForOf",t.permissions))},dependencies:[P,Et,wt,L,oe,K,le,se,ae,D,U,Q,je,Ve,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,Pt,re,ue,ie,kn,V,ee,pe,F,te,ze,H,ce,W,B,Zt],encapsulation:2});var no=ai;var lr=new $o("DC_STORE_STORAGE_TOKEN",{providedIn:"root",factory:()=>new wo}),wo=class{platform=M(To);get(o){return this.platform.isBrowser&&JSON.parse(localStorage.getItem(o)||"null")||null}set(o,e){return this.platform.isBrowser&&localStorage.setItem(o,JSON.stringify(e)),!0}remove(o){this.platform.isBrowser&&localStorage.removeItem(o)}},Hn=(()=>{class i{store=M(lr);http=M(Hi);platform=M(To);memory=new Map;notifyBuffer=new Map;meta=new Set;freqTick=3e3;freqTime;cog=M(Yt).merge("cache",{mode:"promise",reName:"",prefix:"",meta_key:"__cache_meta"});constructor(){this.platform.isBrowser&&(this.loadMeta(),this.startExpireNotify())}pushMeta(e){this.meta.has(e)||(this.meta.add(e),this.saveMeta())}removeMeta(e){this.meta.has(e)&&(this.meta.delete(e),this.saveMeta())}loadMeta(){let e=this.store.get(this.cog.meta_key);e&&e.v&&e.v.forEach(t=>this.meta.add(t))}saveMeta(){let e=[];this.meta.forEach(t=>e.push(t)),this.store.set(this.cog.meta_key,{v:e,e:0})}getMeta(){return this.meta}set(e,t,r={}){if(!this.platform.isBrowser)return;let u=0,{type:c,expire:g}=this.cog;r=ke({type:c,expire:g},r),r.expire&&(u=gn(new Date,r.expire).valueOf());let n=r.emitNotify!==!1;if(!(t instanceof Mi)){this.save(r.type,e,{v:t,e:u},n);return}return t.pipe(yi(a=>{this.save(r.type,e,{v:a,e:u},n)}))}save(e,t,r,u=!0){e==="m"?this.memory.set(t,r):(this.store.set(this.cog.prefix+t,r),this.pushMeta(t)),u&&this.runNotify(t,"set")}get(e,t={}){if(!this.platform.isBrowser)return null;let r=t.mode!=="none"&&this.cog.mode==="promise",u=this.memory.has(e)?this.memory.get(e):this.store.get(this.cog.prefix+e);return!u||u.e&&u.e>0&&u.e<new Date().valueOf()?r?(this.cog.request?this.cog.request(e):this.http.get(e)).pipe(jo(c=>mn(c,this.cog.reName,c)),yi(c=>this.set(e,c,{type:t.type,expire:t.expire,emitNotify:t.emitNotify}))):null:r?Si(u.v):u.v}getNone(e){return this.get(e,{mode:"none"})}tryGet(e,t,r={}){if(!this.platform.isBrowser)return null;let u=this.getNone(e);return u===null?t instanceof Mi?this.set(e,t,r):(this.set(e,t,r),t):Si(u)}has(e){return this.memory.has(e)||this.meta.has(e)}_remove(e,t){if(t&&this.runNotify(e,"remove"),this.memory.has(e)){this.memory.delete(e);return}this.store.remove(this.cog.prefix+e),this.removeMeta(e)}remove(e){this.platform.isBrowser&&this._remove(e,!0)}clear(){this.platform.isBrowser&&(this.notifyBuffer.forEach((e,t)=>this.runNotify(t,"remove")),this.memory.clear(),this.meta.forEach(e=>this.store.remove(this.cog.prefix+e)))}set freq(e){this.freqTick=Math.max(20,e),this.abortExpireNotify(),this.startExpireNotify()}startExpireNotify(){this.checkExpireNotify(),this.runExpireNotify()}runExpireNotify(){this.freqTime=setTimeout(()=>{this.checkExpireNotify(),this.runExpireNotify()},this.freqTick)}checkExpireNotify(){let e=[];this.notifyBuffer.forEach((t,r)=>{this.has(r)&&this.getNone(r)===null&&e.push(r)}),e.forEach(t=>{this.runNotify(t,"expire"),this._remove(t,!1)})}abortExpireNotify(){clearTimeout(this.freqTime)}runNotify(e,t){this.notifyBuffer.has(e)&&this.notifyBuffer.get(e).next({type:t,value:this.getNone(e)})}notify(e){if(!this.notifyBuffer.has(e)){let t=new Oo(this.getNone(e));this.notifyBuffer.set(e,t)}return this.notifyBuffer.get(e).asObservable()}cancelNotify(e){this.notifyBuffer.has(e)&&(this.notifyBuffer.get(e).unsubscribe(),this.notifyBuffer.delete(e))}hasNotify(e){return this.notifyBuffer.has(e)}clearNotify(){this.notifyBuffer.forEach(e=>e.unsubscribe()),this.notifyBuffer.clear()}ngOnDestroy(){this.memory.clear(),this.abortExpireNotify(),this.clearNotify()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=kt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cs=new an(()=>({}));var si=class si{constructor(){this.cache=M(Hn);this.msg=M(Oe);this.KEY="user"}set(){this.cache.set(this.KEY,+new Date)}get(){this.msg.success(this.cache.getNone(this.KEY))}};si.\u0275fac=function(e){return new(e||si)},si.\u0275cmp=b({type:si,selectors:[["app-cache"]],decls:10,vars:0,consts:[[1,"alain-default__content-title"],["href","https://ng-alain.com/components/cache","target","_blank"],["nzTitle","Service"],["nz-button","",3,"click"],["nz-button","",1,"ml-sm",3,"click"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2," Cache \u7F13\u5B58, "),m(3,"a",1),f(4,"Document"),p()()(),m(5,"nz-card",2)(6,"button",3),y("click",function(){return t.set()}),f(7,"\u8BBE\u7F6E"),p(),m(8,"button",4),y("click",function(){return t.get()}),f(9,"\u83B7\u53D6"),p()())},dependencies:[P,L,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B],encapsulation:2});var ro=si;var Un=Lo(Ao(),1);var Wn=(()=>{class i{el=M(Li).nativeElement;_http=M(Ji);httpData;httpBody;httpMethod="get";httpUrl;fileName;pre;success=new bi;error=new bi;getDisposition(e){return(e||"").split(";").filter(r=>r.includes("=")).map(r=>{let u=r.split("="),c="UTF-8''",g=u[1];return g.startsWith(c)&&(g=g.substring(c.length)),{[u[0].trim()]:g}}).reduce((r,u)=>u,{})}isFileSaverSupported=!1;constructor(){try{this.isFileSaverSupported=!!new Blob}catch{}this.isFileSaverSupported||this.el.classList.add("down-file__not-support")}setDisabled(e){let t=this.el;t.disabled=e,t.classList[e?"add":"remove"]("down-file__disabled")}_click(e){return ko(this,null,function*(){if(!this.isFileSaverSupported||typeof this.pre=="function"&&!(yield this.pre(e))){e.stopPropagation(),e.preventDefault();return}this.setDisabled(!0),this._http.request(this.httpMethod,this.httpUrl,{params:this.httpData||{},responseType:"blob",observe:"response",body:this.httpBody}).pipe(Ho(()=>this.setDisabled(!1))).subscribe({next:t=>{if(t.status!==200||t.body.size<=0){this.error.emit(t);return}let r=this.getDisposition(t.headers.get("content-disposition")),u=this.fileName;typeof u=="function"&&(u=u(t)),u=u||r["filename*"]||r.filename||t.headers.get("filename")||t.headers.get("x-filename"),(0,Un.saveAs)(t.body,decodeURI(u)),this.success.emit(t)},error:t=>this.error.emit(t)})})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=yo({type:i,selectors:[["","down-file",""]],hostBindings:function(t,r){t&1&&y("click",function(c){return r._click(c)})},inputs:{httpData:[0,"http-data","httpData"],httpBody:[0,"http-body","httpBody"],httpMethod:[0,"http-method","httpMethod"],httpUrl:[0,"http-url","httpUrl"],fileName:[0,"file-name","fileName"],pre:"pre"},outputs:{success:"success",error:"error"},exportAs:["downFile"]})}return i})();function mr(i,o){if(i&1&&(m(0,"button",2),f(1),p()),i&2){let e=o.$implicit,t=v();d("http-url",Ei("assets/tmp/demo",e))("http-data",t.data),l(),_e(" ",e," ")}}var li=class li{constructor(){this.fileTypes=[".xlsx",".docx",".pptx",".pdf"];this.data={otherdata:1,time:new Date}}};li.\u0275fac=function(e){return new(e||li)},li.\u0275cmp=b({type:li,selectors:[["app-down-file"]],decls:6,vars:0,consts:[[1,"alain-default__content-title"],["nzTitle","DEMO"],["nz-button","","down-file","","file-name","demo\u4E2D\u6587",1,"mr-sm",3,"http-data","http-url"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2,"Download a file"),p()(),m(3,"nz-card",1),we(4,mr,2,4,"button",2,Bt),p()),e&2&&(l(4),De(t.fileTypes))},dependencies:[P,L,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,Wn],encapsulation:2});var ao=li;var pr=i=>({params:i}),mi=class mi{constructor(){this.params={};this.url="/user";this.searchSchema={properties:{no:{type:"string",title:"\u7F16\u53F7"}}};this.columns=[{title:"\u7F16\u53F7",index:"no"},{title:"\u8C03\u7528\u6B21\u6570",type:"number",index:"callNo"},{title:"\u5934\u50CF",type:"img",width:"50px",index:"avatar"},{title:"\u65F6\u95F4",type:"date",index:"updatedAt"}]}};mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275cmp=b({type:mi,selectors:[["app-delon-form"]],decls:5,vars:8,consts:[["st",""],[3,"title"],["mode","search",3,"formSubmit","formReset","schema","formData"],[3,"data","columns","req"]],template:function(e,t){if(e&1){let r=ge();he(0,"page-header",1),m(1,"nz-card")(2,"sf",2),y("formSubmit",function(c){x(r);let g=jt(4);return T(g.reset(c))})("formReset",function(){x(r);let c=jt(4);return T(c.reset(t.params))}),p(),he(3,"st",3,0),p()}e&2&&(d("title","Page Name"),l(2),d("schema",t.searchSchema)("formData",t.params),l(),d("data",t.url)("columns",t.columns)("req",Qo(6,pr,t.params)))},dependencies:[P,L,oe,On,K,ei,le,se,ae,io,D,U,Q,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B],encapsulation:2});var so=mi;var pi=class pi{};pi.\u0275fac=function(e){return new(e||pi)},pi.\u0275cmp=b({type:pi,selectors:[["app-guard-admin"]],decls:2,vars:0,template:function(e,t){e&1&&(ki(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Aadmin\u9875\u9762"),Oi())},encapsulation:2});var lo=pi;var ui=class ui{};ui.\u0275fac=function(e){return new(e||ui)},ui.\u0275cmp=b({type:ui,selectors:[["app-guard-auth"]],decls:2,vars:0,template:function(e,t){e&1&&(ki(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Auser1\u9875\u9762"),Oi())},encapsulation:2});var mo=ui;var $n=()=>{let i=M(_n);return new Mi(o=>{i.confirm({nzTitle:"\u786E\u8BA4\u8981\u79BB\u5F00\u5417\uFF1F",nzContent:"\u4F60\u5DF2\u7ECF\u586B\u5199\u4E86\u90E8\u5206\u8868\u5355\u79BB\u5F00\u4F1A\u653E\u5F03\u5DF2\u7ECF\u586B\u5199\u7684\u5185\u5BB9\u3002",nzOkText:"\u79BB\u5F00",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{o.next(!0),o.complete()},nzOnCancel:()=>{o.next(!1),o.complete()}})})};var dr=()=>["/delon/guard/leave"],cr=()=>["/delon/guard/auth"],fr=()=>["/delon/guard/admin"];function zr(i,o){i&1&&(m(0,"button",12),f(1," \u96E2\u958B\u78BA\u8A8D\u9801 "),p()),i&2&&d("routerLink",Ee(1,dr))}function hr(i,o){i&1&&(m(0,"button",12),f(1," \u9700\u8981 user1 \u6B0A\u9650 "),p()),i&2&&d("routerLink",Ee(1,cr))}function gr(i,o){i&1&&(m(0,"button",12),f(1," \u9700\u8981\u7BA1\u7406\u54E1\u6B0A\u9650 "),p()),i&2&&d("routerLink",Ee(1,fr))}function Cr(i,o){if(i&1){let e=ge();m(0,"button",13),y("click",function(){x(e);let r=v();return T(r.setFull(!0))}),f(1," \u8A2D\u7F6E\u5168\u91CF\u6B0A\u9650 "),p()}}function _r(i,o){if(i&1){let e=ge();m(0,"button",17),y("click",function(){x(e);let r=v().$implicit,u=v(2);return T(u.setRole(r.id))}),f(1),p()}if(i&2){let e=v().$implicit;l(),_e(" ",e.name," ")}}function Mr(i,o){i&1&&(St(0),E(1,_r,2,1,"button",16),yt())}function Nr(i,o){if(i&1&&(m(0,"div")(1,"p",14)(2,"strong"),f(3,"\u53EF\u7528\u89D2\u8272\uFF1A"),p()(),m(4,"nz-space"),E(5,Mr,2,0,"ng-container",15),p()()),i&2){let e=v();l(5),d("ngForOf",e.availableRoles)}}function vr(i,o){if(i&1){let e=ge();m(0,"button",18),y("click",function(){x(e);let r=v();return T(r.clearACL())}),f(1," \u6E05\u9664\u6B0A\u9650 "),p()}}function Sr(i,o){if(i&1&&(m(0,"nz-tag",21),f(1),p()),i&2){let e=o.$implicit;l(),_e(" ",e," ")}}function yr(i,o){if(i&1&&(m(0,"div",19)(1,"p")(2,"strong"),f(3,"\u7528\u6236\u6B0A\u9650\uFF1A"),p()(),m(4,"p"),f(5),p(),m(6,"p"),f(7,"\u6B0A\u9650\uFF1A"),p(),E(8,Sr,2,1,"nz-tag",20),p()),i&2){let e=o.ngIf;l(5),_e("\u89D2\u8272\uFF1A",e.roles.join(", ")||"\u7121"),l(3),d("ngForOf",e.permissions)}}var di=class di{constructor(){this.aclSrv=M($i);this.menuSrv=M(Xi);this.router=M(ln);this.auth=M(Ki);this.firebaseACLSrv=M(Xt);this.availableRoles=[];this.currentUserACL$=this.firebaseACLSrv.userACL$}ngOnInit(){this.loadAvailableRoles()}get data(){return this.firebaseACLSrv.data}loadAvailableRoles(){this.firebaseACLSrv.getRoles().subscribe(o=>{this.availableRoles=o})}setRole(o){let e=this.auth.currentUser;if(!e)return;let t=this.availableRoles.find(r=>r.id===o);t&&this.firebaseACLSrv.updateUserACL(e.uid,[o],t.permissions).subscribe(()=>{this.menuSrv.resume(),this.router.navigate(["/delon/guard"])})}setFull(o){this.aclSrv.setFull(o),this.menuSrv.resume(),this.router.navigate(["/delon/guard"])}clearACL(){let o=this.auth.currentUser;o&&this.firebaseACLSrv.updateUserACL(o.uid,[],[]).subscribe(()=>{this.menuSrv.resume(),this.router.navigate(["/delon/guard"])})}};di.\u0275fac=function(e){return new(e||di)},di.\u0275cmp=b({type:di,selectors:[["app-guard"]],decls:28,vars:11,consts:[[1,"alain-default__content-title"],["nz-row","",1,"mb-lg",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u8DEF\u7531\u6E2C\u8A66"],["nz-button","",3,"routerLink",4,"nzSpaceItem"],["nzTitle","\u6B0A\u9650\u63A7\u5236"],["nzDirection","vertical",2,"width","100%"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[4,"nzSpaceItem"],["nz-button","","nzType","dashed",3,"click",4,"nzSpaceItem"],["nzTitle","\u7576\u524D\u72C0\u614B"],["class","mt-md",4,"ngIf"],["nz-button","",3,"routerLink"],["nz-button","","nzType","primary",3,"click"],[1,"mb-sm"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","dashed",3,"click"],[1,"mt-md"],["class","mb-xs",4,"ngFor","ngForOf"],[1,"mb-xs"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2,"\u8DEF\u7531\u5B88\u885B (Firestore \u6574\u5408)"),p()(),m(3,"div",1)(4,"div",2)(5,"nz-card",3)(6,"nz-space"),E(7,zr,2,2,"button",4)(8,hr,2,2,"button",4)(9,gr,2,2,"button",4),p()()()(),m(10,"div",1)(11,"div",2)(12,"nz-card",5)(13,"nz-space",6),E(14,Cr,2,0,"button",7)(15,Nr,6,1,"div",8)(16,vr,2,0,"button",9),p()()(),m(17,"div",2)(18,"nz-card",10)(19,"p")(20,"strong"),f(21,"ACL \u8CC7\u6599\uFF1A"),p()(),m(22,"pre"),f(23),bt(24,"json"),p(),E(25,yr,9,2,"div",11),bt(26,"async"),p()()(),he(27,"router-outlet")),e&2&&(l(3),d("nzGutter",16),l(),d("nzSpan",24),l(6),d("nzGutter",16),l(),d("nzSpan",12),l(6),d("nzSpan",12),l(6),ye(Tt(24,7,t.data)),l(2),d("ngIf",Tt(26,9,t.currentUserACL$)))},dependencies:[P,L,Ui,sn,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,je,Ve,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,Pt,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,hn,zn,ji,Zt,It,Gi],encapsulation:2});var po=di;var br=()=>["/delon/guard"],ci=class ci{};ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275cmp=b({type:ci,selectors:[["app-guard-leave"]],decls:5,vars:3,consts:[["nz-button","",3,"nzType","routerLink"]],template:function(e,t){e&1&&(m(0,"p"),f(1,"\u79BB\u5F00\u65F6\u9700\u8981\u786E\u8BA4"),p(),m(2,"button",0)(3,"span"),f(4,"\u6211\u8981\u79BB\u5F00"),p()()),e&2&&(l(2),d("nzType","primary")("routerLink",Ee(2,br)))},dependencies:[P,L,Ui,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,H,ce,W,B],encapsulation:2});var uo=ci;var qn=(()=>{class i{scriptSrv=M(Wi);cogSrv=M(Yt);defaultConfig;_cog;pending=!1;_lodop=null;_init=new Ni;_events=new Ni;printBuffer=[];constructor(){this.defaultConfig=this.cogSrv.merge("lodop",{url:"http://localhost:8443/CLodopfuncs.js",name:"CLODOP",companyName:"",checkMaxCount:100}),this.cog=this.defaultConfig}get cog(){return this._cog}set cog(e){this._cog=ke(ke({},this.defaultConfig),e)}get events(){return this._events.asObservable()}get lodop(){return this._lodop?Si({ok:!0,lodop:this._lodop}):this.pending?this._init.asObservable():(this.request(),this._init.asObservable())}get printer(){this.check();let e=[],t=this._lodop.GET_PRINTER_COUNT();for(let r=0;r<t;r++)e.push(this._lodop.GET_PRINTER_NAME(r));return e}check(){if(!this._lodop)throw new Error("\u8BF7\u52A1\u5FC5\u5148\u8C03\u7528 lodop \u83B7\u53D6\u5BF9\u8C61")}request(){this.pending=!0;let e=new URL(this.cog.url);e.searchParams.set("name",this.cog.name);let t=e.toString(),r=this.cog.checkMaxCount,u=(g,n)=>{this._init.next({ok:g==="ok",status:g,error:n,lodop:this._lodop})},c=()=>{if(--r,this._lodop.webskt&&this._lodop.webskt.readyState===1)u("ok");else{if(r<0){u("check-limit");return}setTimeout(()=>c(),100)}};this.scriptSrv.loadScript(t).then(g=>{if(g.status!=="ok"){this.pending=!1,u("script-load-error",g[0]);return}let n=window;if(Object.prototype.hasOwnProperty.call(n,this.cog.name)&&(this._lodop=n[this.cog.name]),this._lodop===null){u("load-variable-name-error",{name:this.cog.name});return}this._lodop.SET_LICENSES(this.cog.companyName,this.cog.license,this.cog.licenseA,this.cog.licenseB),c()})}reset(){this._lodop=null,this.pending=!1,this.request()}attachCode(e,t,r){this.check(),r||(r=/LODOP\.([^(]+)\(([^\n]+)?\);/i),e.split(`
`).forEach(u=>{let c=r.exec(u.trim());if(!c)return;let g=this._lodop[c[1]];if(g){let n=null;try{n=new Function(`return [${c[2]}]`)()}catch{}if(n!=null&&Array.isArray(n)&&t)for(let a=0;a<n.length;a++)typeof n[a]=="string"&&(n[a]=n[a].replace(/{{(.*?)}}/g,(s,z)=>t[z.trim()]||""));g.apply(this._lodop,n)}})}design(){this.check();let e=this._lodop.PRINT_DESIGN();return new Promise(t=>{this._lodop.On_Return=(r,u)=>{e===r&&(this._lodop.On_Return=null,t(`${u}`))}})}printDo(){let e=this.printBuffer.shift();if(!e)return;this.attachCode(e.code,e.item,e.parser);let t=this._lodop.PRINT();this._lodop.On_Return=(r,u)=>{t===r&&(this._lodop.On_Return=null,this._events.next(ke({ok:u===!0,error:u===!0?null:u},e)),this.printDo())}}print(e,t,r){this.check(),t&&this.printBuffer.push(...(Array.isArray(t)?t:[t]).map(u=>({code:e,parser:r,item:u}))),this.printDo()}ngOnDestroy(){this._init.unsubscribe(),this._events.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=kt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xr(i,o){i&1&&(f(0," \u8BF7\u5148\u4E0B\u8F7D "),m(1,"a",5),f(2,"Lodop\u63D2\u4EF6"),p(),f(3,"\u3002 "))}function Tr(i,o){if(i&1&&(m(0,"nz-alert",3),E(1,xr,4,0,"ng-template",null,0,$t),p()),i&2){let e=jt(2);d("nzType","warning")("nzMessage",e)}}function Er(i,o){if(i&1&&he(0,"nz-option",12),i&2){let e=o.$implicit;d("nzLabel",e)("nzValue",e)}}function wr(i,o){if(i&1&&he(0,"nz-option",12),i&2){let e=o.$implicit;d("nzLabel",e)("nzValue",e)}}function Dr(i,o){if(i&1){let e=ge();m(0,"form",4)(1,"nz-form-item",6)(2,"nz-form-label",7),f(3,"\u6253\u5370\u670D\u52A1\u5668"),p(),m(4,"nz-form-control",7)(5,"nz-input-group")(6,"div",8)(7,"input",9),Te("ngModelChange",function(r){x(e);let u=v();return xe(u.cog.url,r)||(u.cog.url=r),T(r)}),p()(),m(8,"div",8)(9,"button",10),y("click",function(){x(e);let r=v();return T(r.reload(null))}),f(10,"\u91CD\u65B0\u52A0\u8F7D\u6253\u5370\u673A"),p()()()()(),m(11,"nz-form-item",6)(12,"nz-form-label",7),f(13,"\u6253\u5370\u673A"),p(),m(14,"nz-form-control",7)(15,"nz-select",11),Te("ngModelChange",function(r){x(e);let u=v();return xe(u.cog.printer,r)||(u.cog.printer=r),T(r)}),y("ngModelChange",function(r){x(e);let u=v();return T(u.changePinter(r))}),we(16,Er,1,2,"nz-option",12,Bt),p()()(),m(18,"nz-form-item",6)(19,"nz-form-label",7),f(20,"\u7EB8\u5F20\u7C7B\u578B"),p(),m(21,"nz-form-control",7)(22,"nz-select",13),Te("ngModelChange",function(r){x(e);let u=v();return xe(u.cog.paper,r)||(u.cog.paper=r),T(r)}),we(23,wr,1,2,"nz-option",12,Bt),p()()(),m(25,"nz-form-item",6)(26,"nz-form-label",7),f(27,"\u6253\u5370\u5185\u5BB9"),p(),m(28,"nz-form-control",7)(29,"textarea",14),Te("ngModelChange",function(r){x(e);let u=v();return xe(u.cog.html,r)||(u.cog.html=r),T(r)}),p(),m(30,"div",15),f(31,"\u4EC5\u9650HTML\uFF0C\u66F4\u591A\u7C7B\u578B\u652F\u6301\u8BF7\u53C2\u8003\u5B98\u7F51"),p()()(),m(32,"nz-form-item",6)(33,"nz-form-control",16)(34,"button",17),y("click",function(){x(e);let r=v();return T(r.print(!0))}),f(35,"\u6253\u5370\u9884\u89C8"),p(),m(36,"button",17),y("click",function(){x(e);let r=v();return T(r.print())}),f(37,"\u76F4\u63A5\u6253\u5370"),p()()()()}if(i&2){let e=v();l(2),d("nzSm",6),l(2),d("nzSm",18),l(2),d("nzSpan",16),l(),be("ngModel",e.cog.url),l(),d("nzSpan",8),l(4),d("nzSm",6),l(2),d("nzSm",18),l(),be("ngModel",e.cog.printer),l(),De(e.pinters),l(3),d("nzSm",6),l(2),d("nzSm",18),l(),be("ngModel",e.cog.paper),l(),De(e.papers),l(3),d("nzSm",6),l(2),d("nzSm",18),l(),be("ngModel",e.cog.html),l(4),d("nzSm",18)("nzOffset",6),l(),d("nzLoading",e.printing),l(2),d("nzLoading",e.printing)}}var fi=class fi{constructor(){this.lodopSrv=M(qn);this.msg=M(Oe);this.cog={url:"https://localhost:8443/CLodopfuncs.js",printer:"",paper:"",html:`
      <h1>Title</h1>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
    `};this.error=!1;this.lodop=null;this.pinters=[];this.papers=[];this.printing=!1;this.lodopSrv.lodop.subscribe(({lodop:o,ok:e})=>{if(!e){this.error=!0;return}this.error=!1,this.msg.success("\u6253\u5370\u673A\u52A0\u8F7D\u6210\u529F"),this.lodop=o,this.pinters=this.lodopSrv.printer})}reload(o={url:"https://localhost:8443/CLodopfuncs.js"}){this.pinters=[],this.papers=[],this.cog.printer="",this.cog.paper="",this.lodopSrv.cog=ke(ke({},this.cog),o),this.error=!1,o===null&&this.lodopSrv.reset()}changePinter(o){this.lodop!=null&&(this.papers=this.lodop.GET_PAGESIZES_LIST(o,`
`).split(`
`))}print(o=!1){let e=this.lodop;e.PRINT_INITA(10,20,810,610,"\u6D4B\u8BD5C-Lodop\u8FDC\u7A0B\u6253\u5370\u56DB\u6B65\u9AA4"),e.SET_PRINTER_INDEXA(this.cog.printer),e.SET_PRINT_PAGESIZE(0,0,0,this.cog.paper),e.ADD_PRINT_TEXT(1,1,300,200,"\u4E0B\u9762\u8F93\u51FA\u7684\u662F\u672C\u9875\u6E90\u4EE3\u7801\u53CA\u5176\u5C55\u73B0\u6548\u679C\uFF1A"),e.ADD_PRINT_TEXT(20,10,"90%","95%",this.cog.html),e.SET_PRINT_STYLEA(0,"ItemType",4),e.NEWPAGEA(),e.ADD_PRINT_HTM(20,10,"90%","95%",this.cog.html),o?e.PREVIEW():e.PRINT()}};fi.\u0275fac=function(e){return new(e||fi)},fi.\u0275cmp=b({type:fi,selectors:[["app-print"]],decls:10,vars:2,consts:[["message",""],[1,"alain-default__content-title"],["href","https://ng-alain.com/components/lodop","target","_blank"],[3,"nzType","nzMessage"],["nz-form",""],["href","http://c-lodop.com/download.html","target","_blank"],["nz-row",""],["nz-col","",3,"nzSm"],["nz-col","",3,"nzSpan"],["nz-input","","nzPlaceHolder","https://localhost:8443/CLodopfuncs.js","name","url",3,"ngModelChange","ngModel"],["nz-button","",3,"click"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u6253\u5370\u673A","nzShowSearch","","nzAllowClear","","name","printer",2,"width","90%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u7EB8\u5F20\u7C7B\u578B","nzShowSearch","","nzAllowClear","","name","paper",2,"width","90%",3,"ngModelChange","ngModel"],["nz-input","","name","html","nzAutosize","",3,"ngModelChange","ngModel"],["nz-form-extra",""],["nz-col","",3,"nzSm","nzOffset"],["nz-button","",3,"click","nzLoading"]],template:function(e,t){e&1&&(m(0,"div",1)(1,"h1"),f(2," Lodop\u6253\u5370 "),m(3,"small"),f(4," \u66F4\u591A\u4F53\u9A8C\u8BF7\u81F3 "),m(5,"a",2),f(6,"NG-ALAIN.com"),p()()()(),m(7,"nz-card"),ve(8,Tr,3,2,"nz-alert",3),ve(9,Dr,38,18,"form",4),p()),e&2&&(l(8),Se(t.error?8:-1),l(),Se(t.error?-1:9))},dependencies:[P,Qt,Rt,Et,Jt,wt,Kt,L,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,je,Ve,O,G,de,$,Qi,eo,w,k,me,jn,I,q,R,ne,X,Lt,to,Rn,J,Y,Z,j,re,ue,ie,V,ee,ii,ti,ni,oi,pe,F,te,ze,H,ce,W,B],encapsulation:2});var co=fi;var Fr=["canvas"];function Ar(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v(2);l(),ye(e.nzStatusRender)}}function Br(i,o){if(i&1&&(m(0,"div",1),E(1,Ar,2,1,"ng-container",2),p()),i&2){let e=v();l(),d("nzStringTemplateOutlet",e.nzStatusRender)}}function Ir(i,o){i&1&&he(0,"nz-spin")}function Rr(i,o){if(i&1){let e=ge();m(0,"div")(1,"p",3),f(2),p(),m(3,"button",4),y("click",function(){x(e);let r=v(2);return T(r.reloadQRCode())}),he(4,"nz-icon",5),m(5,"span"),f(6),p()()()}if(i&2){let e=v(2);l(2),ye(e.locale.expired),l(4),ye(e.locale.refresh)}}function Pr(i,o){if(i&1&&(m(0,"div")(1,"p",3),f(2),p()()),i&2){let e=v(2);l(2),ye(e.locale.scanned)}}function Lr(i,o){if(i&1&&(m(0,"div",1),ve(1,Ir,1,0,"nz-spin")(2,Rr,7,2,"div")(3,Pr,3,1,"div"),p()),i&2){let e,t=v();l(),Se((e=t.nzStatus)==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function kr(i,o){i&1&&he(0,"canvas",null,0)}var Ht;(function(i){let o=(()=>{class c{version;errorCorrectionLevel;static encodeText(n,a){let s=i.QrSegment.makeSegments(n);return c.encodeSegments(s,a)}static encodeBinary(n,a){let s=i.QrSegment.makeBytes(n);return c.encodeSegments([s],a)}static encodeSegments(n,a,s=1,z=40,h=-1,S=!0){if(!(c.MIN_VERSION<=s&&s<=z&&z<=c.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let C,_;for(C=s;;C++){let A=c.getNumDataCodewords(C,a)*8,Ae=u.getTotalBits(n,C);if(Ae<=A){_=Ae;break}if(C>=z)throw new RangeError("Data too long")}for(let A of[c.Ecc.MEDIUM,c.Ecc.QUARTILE,c.Ecc.HIGH])S&&_<=c.getNumDataCodewords(C,A)*8&&(a=A);let N=[];for(let A of n){e(A.mode.modeBits,4,N),e(A.numChars,A.mode.numCharCountBits(C),N);for(let Ae of A.getData())N.push(Ae)}r(N.length==_);let Fe=c.getNumDataCodewords(C,a)*8;r(N.length<=Fe),e(0,Math.min(4,Fe-N.length),N),e(0,(8-N.length%8)%8,N),r(N.length%8==0);for(let A=236;N.length<Fe;A^=253)e(A,8,N);let Be=[];for(;Be.length*8<N.length;)Be.push(0);return N.forEach((A,Ae)=>Be[Ae>>>3]|=A<<7-(Ae&7)),new c(C,a,Be,h)}size;mask;modules=[];isFunction=[];constructor(n,a,s,z){if(this.version=n,this.errorCorrectionLevel=a,n<c.MIN_VERSION||n>c.MAX_VERSION)throw new RangeError("Version value out of range");if(z<-1||z>7)throw new RangeError("Mask value out of range");this.size=n*4+17;let h=[];for(let C=0;C<this.size;C++)h.push(!1);for(let C=0;C<this.size;C++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();let S=this.addEccAndInterleave(s);if(this.drawCodewords(S),z==-1){let C=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);let N=this.getPenaltyScore();N<C&&(z=_,C=N),this.applyMask(_)}}r(z>=0&&z<=7),this.mask=z,this.applyMask(z),this.drawFormatBits(z),this.isFunction=[]}getModule(n,a){return n>=0&&n<this.size&&a>=0&&a<this.size&&this.modules[a][n]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let n=this.getAlignmentPatternPositions(),a=n.length;for(let s=0;s<a;s++)for(let z=0;z<a;z++)s==0&&z==0||s==0&&z==a-1||s==a-1&&z==0||this.drawAlignmentPattern(n[s],n[z]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(n){let a=this.errorCorrectionLevel.formatBits<<3|n,s=a;for(let h=0;h<10;h++)s=s<<1^(s>>>9)*1335;let z=(a<<10|s)^21522;r(z>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,t(z,h));this.setFunctionModule(8,7,t(z,6)),this.setFunctionModule(8,8,t(z,7)),this.setFunctionModule(7,8,t(z,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,t(z,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,t(z,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,t(z,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let n=this.version;for(let s=0;s<12;s++)n=n<<1^(n>>>11)*7973;let a=this.version<<12|n;r(a>>>18==0);for(let s=0;s<18;s++){let z=t(a,s),h=this.size-11+s%3,S=Math.floor(s/3);this.setFunctionModule(h,S,z),this.setFunctionModule(S,h,z)}}drawFinderPattern(n,a){for(let s=-4;s<=4;s++)for(let z=-4;z<=4;z++){let h=Math.max(Math.abs(z),Math.abs(s)),S=n+z,C=a+s;S>=0&&S<this.size&&C>=0&&C<this.size&&this.setFunctionModule(S,C,h!=2&&h!=4)}}drawAlignmentPattern(n,a){for(let s=-2;s<=2;s++)for(let z=-2;z<=2;z++)this.setFunctionModule(n+z,a+s,Math.max(Math.abs(z),Math.abs(s))!=1)}setFunctionModule(n,a,s){this.modules[a][n]=s,this.isFunction[a][n]=!0}addEccAndInterleave(n){let a=this.version,s=this.errorCorrectionLevel;if(n.length!=c.getNumDataCodewords(a,s))throw new RangeError("Invalid argument");let z=c.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][a],h=c.ECC_CODEWORDS_PER_BLOCK[s.ordinal][a],S=Math.floor(c.getNumRawDataModules(a)/8),C=z-S%z,_=Math.floor(S/z),N=[],Fe=c.reedSolomonComputeDivisor(h);for(let A=0,Ae=0;A<z;A++){let vt=n.slice(Ae,Ae+_-h+(A<C?0:1));Ae+=vt.length;let _o=c.reedSolomonComputeRemainder(vt,Fe);A<C&&vt.push(0),N.push(vt.concat(_o))}let Be=[];for(let A=0;A<N[0].length;A++)N.forEach((Ae,vt)=>{(A!=_-h||vt>=C)&&Be.push(Ae[A])});return r(Be.length==S),Be}drawCodewords(n){if(n.length!=Math.floor(c.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let z=0;z<this.size;z++)for(let h=0;h<2;h++){let S=s-h,_=(s+1&2)==0?this.size-1-z:z;!this.isFunction[_][S]&&a<n.length*8&&(this.modules[_][S]=t(n[a>>>3],7-(a&7)),a++)}}r(a==n.length*8)}applyMask(n){if(n<0||n>7)throw new RangeError("Mask value out of range");for(let a=0;a<this.size;a++)for(let s=0;s<this.size;s++){let z;switch(n){case 0:z=(s+a)%2==0;break;case 1:z=a%2==0;break;case 2:z=s%3==0;break;case 3:z=(s+a)%3==0;break;case 4:z=(Math.floor(s/3)+Math.floor(a/2))%2==0;break;case 5:z=s*a%2+s*a%3==0;break;case 6:z=(s*a%2+s*a%3)%2==0;break;case 7:z=((s+a)%2+s*a%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[a][s]&&z&&(this.modules[a][s]=!this.modules[a][s])}}getPenaltyScore(){let n=0;for(let h=0;h<this.size;h++){let S=!1,C=0,_=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[h][N]==S?(C++,C==5?n+=c.PENALTY_N1:C>5&&n++):(this.finderPenaltyAddHistory(C,_),S||(n+=this.finderPenaltyCountPatterns(_)*c.PENALTY_N3),S=this.modules[h][N],C=1);n+=this.finderPenaltyTerminateAndCount(S,C,_)*c.PENALTY_N3}for(let h=0;h<this.size;h++){let S=!1,C=0,_=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][h]==S?(C++,C==5?n+=c.PENALTY_N1:C>5&&n++):(this.finderPenaltyAddHistory(C,_),S||(n+=this.finderPenaltyCountPatterns(_)*c.PENALTY_N3),S=this.modules[N][h],C=1);n+=this.finderPenaltyTerminateAndCount(S,C,_)*c.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let S=0;S<this.size-1;S++){let C=this.modules[h][S];C==this.modules[h][S+1]&&C==this.modules[h+1][S]&&C==this.modules[h+1][S+1]&&(n+=c.PENALTY_N2)}let a=0;for(let h of this.modules)a=h.reduce((S,C)=>S+(C?1:0),a);let s=this.size*this.size,z=Math.ceil(Math.abs(a*20-s*10)/s)-1;return r(z>=0&&z<=9),n+=z*c.PENALTY_N4,r(n>=0&&n<=2568888),n}getAlignmentPatternPositions(){if(this.version==1)return[];{let n=Math.floor(this.version/7)+2,a=Math.floor((this.version*8+n*3+5)/(n*4-4))*2,s=[6];for(let z=this.size-7;s.length<n;z-=a)s.splice(1,0,z);return s}}static getNumRawDataModules(n){if(n<c.MIN_VERSION||n>c.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*n+128)*n+64;if(n>=2){let s=Math.floor(n/7)+2;a-=(25*s-10)*s-55,n>=7&&(a-=36)}return r(a>=208&&a<=29648),a}static getNumDataCodewords(n,a){return Math.floor(c.getNumRawDataModules(n)/8)-c.ECC_CODEWORDS_PER_BLOCK[a.ordinal][n]*c.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][n]}static reedSolomonComputeDivisor(n){if(n<1||n>255)throw new RangeError("Degree out of range");let a=[];for(let z=0;z<n-1;z++)a.push(0);a.push(1);let s=1;for(let z=0;z<n;z++){for(let h=0;h<a.length;h++)a[h]=c.reedSolomonMultiply(a[h],s),h+1<a.length&&(a[h]^=a[h+1]);s=c.reedSolomonMultiply(s,2)}return a}static reedSolomonComputeRemainder(n,a){let s=a.map(z=>0);for(let z of n){let h=z^s.shift();s.push(0),a.forEach((S,C)=>s[C]^=c.reedSolomonMultiply(S,h))}return s}static reedSolomonMultiply(n,a){if(n>>>8||a>>>8)throw new RangeError("Byte out of range");let s=0;for(let z=7;z>=0;z--)s=s<<1^(s>>>7)*285,s^=(a>>>z&1)*n;return r(s>>>8==0),s}finderPenaltyCountPatterns(n){let a=n[1];r(a<=this.size*3);let s=a>0&&n[2]==a&&n[3]==a*3&&n[4]==a&&n[5]==a;return(s&&n[0]>=a*4&&n[6]>=a?1:0)+(s&&n[6]>=a*4&&n[0]>=a?1:0)}finderPenaltyTerminateAndCount(n,a,s){return n&&(this.finderPenaltyAddHistory(a,s),a=0),a+=this.size,this.finderPenaltyAddHistory(a,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(n,a){a[0]==0&&(n+=this.size),a.pop(),a.unshift(n)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return c})();i.QrCode=o;function e(c,g,n){if(g<0||g>31||c>>>g)throw new RangeError("Value out of range");for(let a=g-1;a>=0;a--)n.push(c>>>a&1)}function t(c,g){return(c>>>g&1)!=0}function r(c){if(!c)throw new Error("Assertion error")}let u=(()=>{class c{mode;numChars;bitData;static makeBytes(n){let a=[];for(let s of n)e(s,8,a);return new c(c.Mode.BYTE,n.length,a)}static makeNumeric(n){if(!c.isNumeric(n))throw new RangeError("String contains non-numeric characters");let a=[];for(let s=0;s<n.length;){let z=Math.min(n.length-s,3);e(parseInt(n.substring(s,s+z),10),z*3+1,a),s+=z}return new c(c.Mode.NUMERIC,n.length,a)}static makeAlphanumeric(n){if(!c.isAlphanumeric(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a=[],s;for(s=0;s+2<=n.length;s+=2){let z=c.ALPHANUMERIC_CHARSET.indexOf(n.charAt(s))*45;z+=c.ALPHANUMERIC_CHARSET.indexOf(n.charAt(s+1)),e(z,11,a)}return s<n.length&&e(c.ALPHANUMERIC_CHARSET.indexOf(n.charAt(s)),6,a),new c(c.Mode.ALPHANUMERIC,n.length,a)}static makeSegments(n){return n==""?[]:c.isNumeric(n)?[c.makeNumeric(n)]:c.isAlphanumeric(n)?[c.makeAlphanumeric(n)]:[c.makeBytes(c.toUtf8ByteArray(n))]}static makeEci(n){let a=[];if(n<0)throw new RangeError("ECI assignment value out of range");if(n<128)e(n,8,a);else if(n<16384)e(2,2,a),e(n,14,a);else if(n<1e6)e(6,3,a),e(n,21,a);else throw new RangeError("ECI assignment value out of range");return new c(c.Mode.ECI,0,a)}static isNumeric(n){return c.NUMERIC_REGEX.test(n)}static isAlphanumeric(n){return c.ALPHANUMERIC_REGEX.test(n)}constructor(n,a,s){if(this.mode=n,this.numChars=a,this.bitData=s,a<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}getData(){return this.bitData.slice()}static getTotalBits(n,a){let s=0;for(let z of n){let h=z.mode.numCharCountBits(a);if(z.numChars>=1<<h)return 1/0;s+=4+h+z.bitData.length}return s}static toUtf8ByteArray(n){n=encodeURI(n);let a=[];for(let s=0;s<n.length;s++)n.charAt(s)!="%"?a.push(n.charCodeAt(s)):(a.push(parseInt(n.substring(s+1,s+3),16)),s+=2);return a}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return c})();i.QrSegment=u})(Ht||(Ht={}));(function(i){let o;(function(e){class t{ordinal;formatBits;static LOW=new t(0,1);static MEDIUM=new t(1,0);static QUARTILE=new t(2,3);static HIGH=new t(3,2);constructor(u,c){this.ordinal=u,this.formatBits=c}}e.Ecc=t})(o=i.QrCode||(i.QrCode={}))})(Ht||(Ht={}));(function(i){let o;(function(e){class t{modeBits;numBitsCharCount;static NUMERIC=new t(1,[10,12,14]);static ALPHANUMERIC=new t(2,[9,11,13]);static BYTE=new t(4,[8,16,16]);static KANJI=new t(8,[8,10,12]);static ECI=new t(7,[0,0,0]);constructor(u,c){this.modeBits=u,this.numBitsCharCount=c}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}}e.Mode=t})(o=i.QrSegment||(i.QrSegment={}))})(Ht||(Ht={}));var Bi=Ht,Or={L:Bi.QrCode.Ecc.LOW,M:Bi.QrCode.Ecc.MEDIUM,Q:Bi.QrCode.Ecc.QUARTILE,H:Bi.QrCode.Ecc.HIGH},Vr=160,jr=10,Gr=10,Hr="#000000",Ur="#FFFFFF",Wr=40,$r="M",qr=(i,o=$r)=>i?Bi.QrCode.encodeText(i,Or[o]):null;function Zr(i,o,e=Vr,t=jr,r=Gr,u=Hr,c=Ur,g=Wr,n){let a=i.getContext("2d"),s=Yr(r);if(i.style.width=`${e}px`,i.style.height=`${e}px`,!o){a.fillStyle="rgba(0, 0, 0, 0)",a.fillRect(0,0,i.width,i.height);return}if(i.width=o.size*t+s[1]+s[3],i.height=o.size*t+s[0]+s[2],!n)Io(a,i.width,i.height,t,c),Bo(a,o,t,s,c,u);else{let z=new Image;z.src=n,z.crossOrigin="anonymous",z.width=g*(i.width/e),z.height=g*(i.width/e);let h=()=>{C(),Io(a,i.width,i.height,t,c),Bo(a,o,t,s,c,u);let _=i.width/2-g*(i.width/e)/2;a.fillRect(_,_,g*(i.width/e),g*(i.width/e)),a.drawImage(z,_,_,g*(i.width/e),g*(i.width/e))},S=()=>{C(),Io(a,i.width,i.height,t,c),Bo(a,o,t,s,c,u)},C=()=>{z.removeEventListener("load",h),z.removeEventListener("error",S)};z.addEventListener("load",h),z.addEventListener("error",S)}}function Bo(i,o,e,t,r,u){for(let c=0;c<o.size;c++)for(let g=0;g<o.size;g++)i.fillStyle=o.getModule(g,c)?u:r,i.fillRect(t[3]+g*e,t[0]+c*e,e,e)}function Io(i,o,e,t,r){i.fillStyle=r,i.fillRect(0,0,o*t,e*t)}function Yr(i){return Array.isArray(i)?Array(4).fill(0).map((o,e)=>i[e%i.length]):[i,i,i,i]}var Zn=(()=>{class i{i18n=M(Cn);el=M(Li);cdr=M(qt);destroyRef=M(Pi);isBrowser=rn(M(qo));canvas;nzValue="";nzPadding=0;nzColor="#000000";nzBgColor="#FFFFFF";nzSize=160;nzIcon="";nzIconSize=40;nzBordered=!0;nzStatus="active";nzLevel="M";nzStatusRender=null;nzRefresh=new bi;locale;ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(Fi(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(e){let{nzValue:t,nzIcon:r,nzLevel:u,nzSize:c,nzIconSize:g,nzColor:n,nzPadding:a,nzBgColor:s}=e;(t||r||u||c||g||n||a||s)&&this.canvas&&this.drawCanvasQRCode(),s&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Zr(this.canvas.nativeElement,qr(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["nz-qrcode"]],viewQuery:function(t,r){if(t&1&&Vi(Fr,5),t&2){let u;xi(u=Ti())&&(r.canvas=u.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(t,r){t&2&&Gt("ant-qrcode-border",r.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",Di],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",Di],nzBordered:[2,"nzBordered","nzBordered",wi],nzStatus:"nzStatus",nzLevel:"nzLevel",nzStatusRender:"nzStatusRender"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[Ut],decls:3,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"]],template:function(t,r){t&1&&(ve(0,Br,2,1,"div",1)(1,Lr,4,1,"div",1),ve(2,kr,2,0,"canvas")),t&2&&(Se(r.nzStatusRender?0:r.nzStatus!=="active"?1:-1),l(2),Se(r.isBrowser?2:-1))},dependencies:[F,En,D,Ce,fe,w,Zi,Yi],encapsulation:2,changeDetection:0})}return i})();var Ii=()=>({standalone:!0}),zi=class zi{constructor(){this.value="https://ng-alain.com/";this.background="#ffffff";this.foreground="#000000";this.level="L";this.mime="image/png";this.padding=10;this.size=220}};zi.\u0275fac=function(e){return new(e||zi)},zi.\u0275cmp=b({type:zi,selectors:[["app-qr"]],decls:44,vars:39,consts:[[1,"alain-default__content-title"],["href","https://ng.ant.design/components/qr-code","target","_blank"],[3,"nzGutter"],[1,"text-center",3,"nzSpan"],[3,"nzValue","nzBgColor","nzColor","nzLevel","nzSize","nzPadding"],[3,"nzSpan"],["nz-form",""],["nz-input","","type","color",2,"width","100px",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzValue","L","nzLabel","L"],["nzValue","M","nzLabel","M"],["nzValue","Q","nzLabel","Q"],["nzValue","H","nzLabel","H"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2," \u4E8C\u7EF4\u7801 "),m(3,"a",1),f(4,"Document"),p()()(),m(5,"nz-card")(6,"nz-row",2)(7,"nz-col",3),he(8,"nz-qrcode",4),p(),m(9,"nz-col",5)(10,"form",6)(11,"nz-form-item")(12,"nz-form-label",5),f(13,"\u80CC\u666F"),p(),m(14,"nz-form-control",5)(15,"nz-input-group")(16,"input",7),Te("ngModelChange",function(u){return xe(t.background,u)||(t.background=u),u}),p()()()(),m(17,"nz-form-item")(18,"nz-form-label",5),f(19,"\u524D\u666F"),p(),m(20,"nz-form-control",5)(21,"nz-input-group")(22,"input",7),Te("ngModelChange",function(u){return xe(t.foreground,u)||(t.foreground=u),u}),p()()()(),m(23,"nz-form-item")(24,"nz-form-label",5),f(25,"\u8BEF\u5DEE"),p(),m(26,"nz-form-control",5)(27,"nz-select",8),Te("ngModelChange",function(u){return xe(t.level,u)||(t.level=u),u}),he(28,"nz-option",9)(29,"nz-option",10)(30,"nz-option",11)(31,"nz-option",12),p()()(),m(32,"nz-form-item")(33,"nz-form-label",5),f(34,"\u5185\u8FB9\u8DDD"),p(),m(35,"nz-form-control",5)(36,"nz-input-number",13),Te("ngModelChange",function(u){return xe(t.padding,u)||(t.padding=u),u}),p(),f(37,"px "),p()(),m(38,"nz-form-item")(39,"nz-form-label",5),f(40,"\u5927\u5C0F"),p(),m(41,"nz-form-control",5)(42,"nz-input-number",14),Te("ngModelChange",function(u){return xe(t.size,u)||(t.size=u),u}),p(),f(43,"px "),p()()()()()()),e&2&&(l(6),d("nzGutter",24),l(),d("nzSpan",8),l(),d("nzValue",t.value)("nzBgColor",t.background)("nzColor",t.foreground)("nzLevel",t.level)("nzSize",t.size)("nzPadding",t.padding),l(),d("nzSpan",16),l(3),d("nzSpan",8),l(2),d("nzSpan",16),l(2),be("ngModel",t.background),d("ngModelOptions",Ee(34,Ii)),l(2),d("nzSpan",8),l(2),d("nzSpan",16),l(2),be("ngModel",t.foreground),d("ngModelOptions",Ee(35,Ii)),l(2),d("nzSpan",8),l(2),d("nzSpan",16),l(),be("ngModel",t.level),d("ngModelOptions",Ee(36,Ii)),l(6),d("nzSpan",8),l(2),d("nzSpan",16),l(),be("ngModel",t.padding),d("ngModelOptions",Ee(37,Ii))("nzMin",0)("nzMax",100),l(3),d("nzSpan",8),l(2),d("nzSpan",16),l(),be("ngModel",t.size),d("ngModelOptions",Ee(38,Ii))("nzMin",100)("nzMax",1e3)("nzStep",t.padding))},dependencies:[P,Qt,Rt,Et,Jt,wt,Kt,L,oe,K,le,se,ae,D,fe,U,Q,je,Ve,O,G,de,$,Qi,eo,w,k,me,I,q,R,ne,X,Lt,to,J,Pn,Y,Z,j,re,ue,ie,V,ee,ii,ti,ni,oi,pe,F,te,ze,H,ce,W,B,Zn],encapsulation:2});var fo=zi;var Yn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Vt({type:i});static \u0275inj=Ot({imports:[nn]})}return i})();var Xr=["*"];function Jr(i,o){i&1&&xo(0)}function Kr(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v(3);l(),ye(e.nzTitle)}}function Qr(i,o){if(i&1&&(m(0,"div",2),E(1,Kr,2,1,"ng-container",4),p()),i&2){let e=v(2);l(),d("nzStringTemplateOutlet",e.nzTitle)}}function ea(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v(3);l(),ye(e.nzExtra)}}function ta(i,o){if(i&1&&(m(0,"div",3),E(1,ea,2,1,"ng-container",4),p()),i&2){let e=v(2);l(),d("nzStringTemplateOutlet",e.nzExtra)}}function ia(i,o){if(i&1&&(m(0,"div",0),ve(1,Qr,2,1,"div",2),ve(2,ta,2,1,"div",3),p()),i&2){let e=v();l(),Se(e.nzTitle?1:-1),l(),Se(e.nzExtra?2:-1)}}function oa(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v(2).$implicit;l(),_e(" ",e.title," ")}}function na(i,o){}function ra(i,o){if(i&1&&(m(0,"td",6)(1,"div",7)(2,"span",8),E(3,oa,2,1,"ng-container",4),p(),m(4,"span",9),E(5,na,0,0,"ng-template",10),p()()()),i&2){let e=v().$implicit,t=v(3);d("colSpan",e.span),l(2),Gt("ant-descriptions-item-no-colon",!t.nzColon),l(),d("nzStringTemplateOutlet",e.title),l(2),d("ngTemplateOutlet",e.content)}}function aa(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v(2).$implicit;l(),_e(" ",e.title," ")}}function sa(i,o){}function la(i,o){if(i&1&&(m(0,"td",8),E(1,aa,2,1,"ng-container",4),p(),m(2,"td",11),E(3,sa,0,0,"ng-template",10),p()),i&2){let e=v().$implicit;l(),d("nzStringTemplateOutlet",e.title),l(),d("colSpan",e.span*2-1),l(),d("ngTemplateOutlet",e.content)}}function ma(i,o){if(i&1&&ve(0,ra,6,5,"td",6)(1,la,4,3),i&2){let e=v(3);Se(e.nzBordered?1:0)}}function pa(i,o){if(i&1&&(m(0,"tr",5),we(1,ma,2,1,null,null,Ft),p()),i&2){let e=o.$implicit;l(),De(e)}}function ua(i,o){if(i&1&&we(0,pa,3,0,"tr",5,Ft),i&2){let e=v();De(e.itemMatrix)}}function da(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v().$implicit;l(),_e(" ",e.title," ")}}function ca(i,o){if(i&1&&(m(0,"td",6)(1,"div",7)(2,"span",8),E(3,da,2,1,"ng-container",4),p()()()),i&2){let e=o.$implicit,t=v(4);d("colSpan",e.span),l(2),Gt("ant-descriptions-item-no-colon",!t.nzColon),l(),d("nzStringTemplateOutlet",e.title)}}function fa(i,o){}function za(i,o){if(i&1&&(m(0,"td",6)(1,"div",7)(2,"span",9),E(3,fa,0,0,"ng-template",10),p()()()),i&2){let e=o.$implicit;d("colSpan",e.span),l(3),d("ngTemplateOutlet",e.content)}}function ha(i,o){if(i&1&&(m(0,"tr",5),we(1,ca,4,4,"td",6,Ft),p(),m(3,"tr",5),we(4,za,4,2,"td",6,Ft),p()),i&2){let e=o.$implicit;l(),De(e),l(3),De(e)}}function ga(i,o){if(i&1&&we(0,ha,6,0,null,null,Ft),i&2){let e=v(2);De(e.itemMatrix)}}function Ca(i,o){if(i&1&&(St(0),f(1),yt()),i&2){let e=v().$implicit;l(),_e(" ",e.title," ")}}function _a(i,o){if(i&1&&(m(0,"td",12),E(1,Ca,2,1,"ng-container",4),p()),i&2){let e=o.$implicit;d("colSpan",e.span),l(),d("nzStringTemplateOutlet",e.title)}}function Ma(i,o){}function Na(i,o){if(i&1&&(m(0,"td",11),E(1,Ma,0,0,"ng-template",10),p()),i&2){let e=o.$implicit;d("colSpan",e.span),l(),d("ngTemplateOutlet",e.content)}}function va(i,o){if(i&1&&(m(0,"tr",5),we(1,_a,2,2,"td",12,Ft),p(),m(3,"tr",5),we(4,Na,2,2,"td",11,Ft),p()),i&2){let e=o.$implicit;l(),De(e),l(3),De(e)}}function Sa(i,o){if(i&1&&we(0,va,6,0,null,null,Ft),i&2){let e=v(2);De(e.itemMatrix)}}function ya(i,o){if(i&1&&ve(0,ga,2,0)(1,Sa,2,0),i&2){let e=v();Se(e.nzBordered?1:0)}}var Ro=(()=>{class i{content;nzSpan=1;nzTitle="";inputChange$=new Ni;ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["nz-descriptions-item"]],viewQuery:function(t,r){if(t&1&&Vi(Yo,7),t&2){let u;xi(u=Ti())&&(r.content=u.first)}},inputs:{nzSpan:[2,"nzSpan","nzSpan",Di],nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[Ut],ngContentSelectors:Xr,decls:1,vars:0,template:function(t,r){t&1&&(bo(),Xo(0,Jr,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return i})(),ba="descriptions",xa={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},Po=(()=>{var h;let i,o=[],e=[],t,r=[],u=[],c,g=[],n=[],a,s=[],z=[];return h=class{nzConfigService=M(cn);cdr=M(qt);breakpointService=M(Sn);directionality=M(un);destroyRef=M(Pi);_nzModuleName=ba;items;nzBordered=Dt(this,o,!1);nzLayout=(Dt(this,e),"horizontal");nzColumn=Dt(this,r,xa);nzSize=(Dt(this,u),Dt(this,g,"default"));nzTitle=(Dt(this,n),"");nzExtra;nzColon=Dt(this,s,!0);itemMatrix=(Dt(this,z),[]);realColumn=3;dir="ltr";breakpoint=Nn.md;ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(Fi(this.destroyRef)).subscribe(C=>{this.dir=C})}ngOnChanges(C){C.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){let C=this.items.changes.pipe(Uo(this.items));So(C,C.pipe(Wo(()=>So(...this.items.map(_=>_.inputChange$)).pipe(Go(16)))),this.breakpointService.subscribe(vn).pipe(yi(_=>this.breakpoint=_))).pipe(Fi(this.destroyRef)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}prepareMatrix(){if(!this.items)return;let C=[],_=0,N=this.realColumn=this.getColumn(),Fe=this.items.toArray(),Be=Fe.length,A=[],Ae=()=>{A.push(C),C=[],_=0};for(let vt=0;vt<Be;vt++){let _o=Fe[vt],{nzTitle:Mo,content:No,nzSpan:Ri}=_o;_+=Ri,_>=N?(_>N&&dn(`"nzColumn" is ${N} but we have row length ${_}`),C.push({title:Mo,content:No,span:N-(_-Ri)}),Ae()):vt===Be-1?(C.push({title:Mo,content:No,span:N-(_-Ri)}),Ae()):C.push({title:Mo,content:No,span:Ri})}this.itemMatrix=A}getColumn(){return typeof this.nzColumn!="number"?this.nzColumn[this.breakpoint]:this.nzColumn}},(()=>{let C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[Ai()],t=[Ai()],c=[Ai()],a=[Ai()],vi(null,null,i,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:_=>"nzBordered"in _,get:_=>_.nzBordered,set:(_,N)=>{_.nzBordered=N}},metadata:C},o,e),vi(null,null,t,{kind:"field",name:"nzColumn",static:!1,private:!1,access:{has:_=>"nzColumn"in _,get:_=>_.nzColumn,set:(_,N)=>{_.nzColumn=N}},metadata:C},r,u),vi(null,null,c,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:_=>"nzSize"in _,get:_=>_.nzSize,set:(_,N)=>{_.nzSize=N}},metadata:C},g,n),vi(null,null,a,{kind:"field",name:"nzColon",static:!1,private:!1,access:{has:_=>"nzColon"in _,get:_=>_.nzColon,set:(_,N)=>{_.nzColon=N}},metadata:C},s,z),C&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),vo(h,"\u0275fac",function(_){return new(_||h)}),vo(h,"\u0275cmp",b({type:h,selectors:[["nz-descriptions"]],contentQueries:function(_,N,Fe){if(_&1&&Ko(Fe,Ro,4),_&2){let Be;xi(Be=Ti())&&(N.items=Be)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(_,N){_&2&&Gt("ant-descriptions-bordered",N.nzBordered)("ant-descriptions-middle",N.nzSize==="middle")("ant-descriptions-small",N.nzSize==="small")("ant-descriptions-rtl",N.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",wi],nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:[2,"nzColon","nzColon",wi]},exportAs:["nzDescriptions"],features:[Ut],decls:6,vars:3,consts:[[1,"ant-descriptions-header"],[1,"ant-descriptions-view"],[1,"ant-descriptions-title"],[1,"ant-descriptions-extra"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-row"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(_,N){_&1&&(ve(0,ia,3,2,"div",0),m(1,"div",1)(2,"table")(3,"tbody"),ve(4,ua,2,0),ve(5,ya,2,1),p()()()),_&2&&(Se(N.nzTitle||N.nzExtra?0:-1),l(4),Se(N.nzLayout==="horizontal"?4:-1),l(),Se(N.nzLayout==="vertical"?5:-1))},dependencies:[fn,Yi,tn],encapsulation:2,changeDetection:0})),h})(),Xn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Vt({type:i});static \u0275inj=Ot({imports:[Po]})}return i})();var Ea=()=>({show:!0,front:!1}),wa=()=>[0,0,0,0];function Da(i,o){if(i&1){let e=ge();m(0,"button",14),y("click",function(){x(e);let r=v();return T(r.fullChange())}),he(1,"span",15),f(2," \u5168\u87A2\u5E55 "),p()}}function Fa(i,o){if(i&1&&he(0,"g2-mini-bar",16),i&2){let e=v();d("data",e.events)("height",30)("padding",Ee(3,wa))}}var hi=class hi{constructor(){this.http=M(Ji);this.message=M(Oe);this.ps=20;this.total=200;this.args={_allow_anonymous:!0,userid:null};this.url="https://api.randomuser.me/?results=20";this.events=[];this.scroll={y:"230px"};this.columns=[{title:"id",index:"id.value",type:"checkbox"},{title:"Avatar",index:"picture.thumbnail",type:"img",width:80},{title:"Name",index:"name.first",width:150,format:o=>`${o.name.first} ${o.name.last}`,type:"link",click:o=>this.message.info(`${o.name.first}`)},{title:"Email",index:"email"},{title:"Gender",index:"gender",type:"yn",yn:{truth:"female",yes:"\u7537",no:"\u5973",mode:"text"},width:120},{title:"Events",render:"events",width:90},{title:"Registered",index:"registered.date",type:"date",width:170},{title:"Actions",width:120,buttons:[{text:"Edit",click:o=>this.message.info(`edit [${o.id.value}]`),iif:o=>o.gender==="female"},{text:"Delete",type:"del",click:o=>this.message.info(`deleted [${o.id.value}]`)}]}]}ngOnInit(){this.http.get("/chart/visit").subscribe(o=>this.events=o.slice(0,8))}fullChange(o){this.scroll=o?{y:"350px"}:{y:"230px"}}};hi.\u0275fac=function(e){return new(e||hi)},hi.\u0275cmp=b({type:hi,selectors:[["app-st"]],decls:23,vars:9,consts:[["extra",""],["st",""],[1,"st-demo"],[3,"title","home"],[3,"data","columns","total","page","scroll"],["st-row","events"],["nzTitle","Firebase \u6574\u5408\u72C0\u614B",1,"mt-lg"],[1,"firebase-status"],["nzTitle","\u8A8D\u8B49\u72C0\u614B",3,"nzColumn"],["nzTitle","Firebase Auth"],["nzColor","green"],["nzTitle","Firestore ACL"],["nzTitle","Google \u767B\u5165"],["nzTitle","\u6B0A\u9650\u63A7\u5236"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","fullscreen"],["color","#999","borderWidth","3","tooltipType","mini","theme","mini",3,"data","height","padding"]],template:function(e,t){e&1&&(m(0,"div",2)(1,"page-header",3),E(2,Da,3,0,"ng-template",null,0,$t),p(),m(4,"nz-card")(5,"st",4,1),E(7,Fa,1,4,"ng-template",5),p()(),m(8,"nz-card",6)(9,"div",7)(10,"nz-descriptions",8)(11,"nz-descriptions-item",9)(12,"nz-tag",10),f(13,"\u5DF2\u6574\u5408"),p()(),m(14,"nz-descriptions-item",11)(15,"nz-tag",10),f(16,"\u5DF2\u6574\u5408"),p()(),m(17,"nz-descriptions-item",12)(18,"nz-tag",10),f(19,"\u5DF2\u6574\u5408"),p()(),m(20,"nz-descriptions-item",13)(21,"nz-tag",10),f(22,"\u5DF2\u6574\u5408"),p()()()()()()),e&2&&(l(),d("title","ST \u8868\u683C\u5143\u4EF6\u6F14\u793A")("home","home"),l(4),d("data",t.url)("columns",t.columns)("total",t.total)("page",Ee(8,Ea))("scroll",t.scroll),l(5),d("nzColumn",2))},dependencies:[P,L,oe,K,ei,Ln,le,se,ae,io,D,Ce,fe,Ne,U,Q,O,G,de,$,w,Zi,k,me,I,q,R,ne,X,J,Y,Z,j,Pt,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,Yn,Gn,Xn,Po,Ro],encapsulation:2});var zo=hi;var Jn=()=>({standalone:!0}),gi=class gi{constructor(){this.messageSrv=M(Oe);this.format_str="this is ${name}";this.format_res="";this.format_obj=JSON.stringify({name:"asdf"});this.content=`time ${+new Date}

    \u4E2D\u6587\uFF01@#\uFFE5%\u2026\u2026&*`}onFormat(){let o=null;try{o=JSON.parse(this.format_obj)}catch{this.messageSrv.error("\u65E0\u6CD5\u4F7F\u7528 JSON.parse \u8F6C\u6362");return}this.format_res=bn(this.format_str,o,!0)}onYuan(o){this.yuan_res=Vn(o)}onCopy(){Mn(`time ${+new Date}`).then(()=>this.messageSrv.success("success"))}};gi.\u0275fac=function(e){return new(e||gi)},gi.\u0275cmp=b({type:gi,selectors:[["app-util"]],decls:39,vars:23,consts:[[1,"alain-default__content-title"],[3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u5B57\u7B26\u4E32\u7C7B"],["nzType","inner","nzTitle","format"],["nz-form",""],[3,"nzSm"],["nz-input","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzSpan","nzOffset"],["nz-button","",3,"click"],["nzType","inner","nzTitle","yuan"],["type","number","nz-input","",3,"ngModelChange","ngModel"],[3,"innerHTML"],["nzTitle","\u5176\u5B83\u7C7B"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2," \u5DE5\u5177\u96C6 "),m(3,"small"),f(4,"@delon/util \u65E5\u5E38\u7528\u6CD5\u3002"),p()()(),m(5,"nz-row",1)(6,"nz-col",2)(7,"nz-card",3)(8,"nz-card",4)(9,"form",5)(10,"nz-form-item")(11,"nz-form-label",6),f(12,"String"),p(),m(13,"nz-form-control",6)(14,"input",7),Te("ngModelChange",function(u){return xe(t.format_str,u)||(t.format_str=u),u}),p()()(),m(15,"nz-form-item")(16,"nz-form-label",6),f(17,"Object"),p(),m(18,"nz-form-control",6)(19,"input",7),Te("ngModelChange",function(u){return xe(t.format_obj,u)||(t.format_obj=u),u}),p()()(),m(20,"nz-form-item")(21,"nz-form-control",8)(22,"button",9),y("click",function(){return t.onFormat()}),f(23,"Run"),p()()(),m(24,"nz-form-item")(25,"nz-form-label",6),f(26,"Result"),p(),m(27,"nz-form-control",6),f(28),p()()()(),m(29,"nz-card",10)(30,"nz-row",1)(31,"nz-col",2)(32,"input",11),Te("ngModelChange",function(u){return xe(t.yuan_str,u)||(t.yuan_str=u),u}),y("ngModelChange",function(u){return t.onYuan(u)}),p()(),m(33,"nz-col",2),he(34,"div",12),p()()()()(),m(35,"nz-col",2)(36,"nz-card",13)(37,"button",9),y("click",function(){return t.onCopy()}),f(38,"Copy"),p()()()()),e&2&&(l(5),d("nzGutter",16),l(),d("nzSpan",12),l(5),d("nzSm",8),l(2),d("nzSm",16),l(),be("ngModel",t.format_str),d("ngModelOptions",Ee(21,Jn)),l(2),d("nzSm",8),l(2),d("nzSm",16),l(),be("ngModel",t.format_obj),d("ngModelOptions",Ee(22,Jn)),l(2),d("nzSpan",16)("nzOffset",8),l(4),d("nzSm",8),l(2),d("nzSm",16),l(),_e(" ",t.format_res," "),l(2),d("nzGutter",16),l(),d("nzSpan",12),l(),be("ngModel",t.yuan_str),l(),d("nzSpan",12),l(),d("innerHTML",t.yuan_res,Zo),l(),d("nzSpan",12))},dependencies:[P,Qt,Rt,yn,Et,Jt,wt,Kt,L,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,je,Ve,O,G,de,$,w,k,me,I,q,R,ne,X,Lt,J,Y,Z,j,re,ue,ie,V,ee,ii,ti,ni,oi,pe,F,te,ze,H,ce,W,B],encapsulation:2});var ho=gi;var Ci=class Ci{constructor(){this.xlsx=M(Tn);this.users=Array(100).fill(0).map((o,e)=>({id:e+1,name:`name ${e+1}`,age:Math.ceil(Math.random()*10)+20}));this.columns=[{title:"\u7F16\u53F7",index:"id",type:"checkbox"},{title:"\u59D3\u540D",index:"name"},{title:"\u5E74\u9F84",index:"age"}]}url(){this.xlsx.import("./assets/tmp/demo.xlsx").then(o=>this.data=o)}change(o){let e=o.target.files[0];this.xlsx.import(e).then(t=>this.data=t)}download(){let o=[this.columns.map(e=>e.title)];this.users.forEach(e=>o.push(this.columns.map(t=>e[t.index]))),this.xlsx.export({sheets:[{data:o,name:"sheet name"}]})}};Ci.\u0275fac=function(e){return new(e||Ci)},Ci.\u0275cmp=b({type:Ci,selectors:[["app-xlsx"]],decls:16,vars:6,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/xlsx","target","_blank"],["nzTitle","Import"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],[1,"mt-sm"],["nzTitle","Export"],[1,"mt-sm",3,"data","ps","columns"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2," Import & Export excel file, "),m(3,"a",1),f(4,"Document"),p()()(),m(5,"nz-card",2)(6,"button",3),y("click",function(){return t.url()}),f(7,"Via Url"),p(),m(8,"input",4),y("change",function(u){return t.change(u)}),p(),m(9,"p",5),f(10),bt(11,"json"),p()(),m(12,"nz-card",6)(13,"button",3),y("click",function(){return t.download()}),f(14,"Export"),p(),he(15,"st",7),p()),e&2&&(l(10),_e("result: ",Tt(11,4,t.data)),l(5),d("data",t.users)("ps",3)("columns",t.columns))},dependencies:[P,L,oe,K,ei,le,se,ae,D,Ce,fe,Ne,U,Q,O,G,de,$,w,k,me,I,q,R,ne,X,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,It],encapsulation:2});var go=Ci;var Kn=Lo(Ao(),1);var Qn=(()=>{class i{http=M(Hi);lazy=M(Wi);ngZone=M(Jo);cogSrv=M(Yt);cog;constructor(){this.cog=this.cogSrv.merge("zip",{url:"https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js",utils:[]})}init(){return this.lazy.load([this.cog.url].concat(this.cog.utils))}check(e){if(!e)throw new Error("get instance via `ZipService.create()`")}read(e,t){return new Promise((r,u)=>{let c=g=>{this.ngZone.run(()=>r(g))};this.init().then(()=>{if(typeof e=="string"){this.http.request("GET",e,{responseType:"arraybuffer"}).subscribe({next:n=>{JSZip.loadAsync(n,t).then(a=>c(a))},error:n=>{u(n)}});return}let g=new FileReader;g.onload=n=>{JSZip.loadAsync(n.target.result,t).then(a=>c(a))},g.readAsBinaryString(e)})})}create(){return new Promise(e=>{this.init().then(()=>{let t=new JSZip;e(t)}).catch(()=>e(null))})}pushUrl(e,t,r){return this.check(e),new Promise((u,c)=>{this.http.request("GET",r,{responseType:"arraybuffer"}).subscribe({next:g=>{e.file(t,g),u()},error:g=>{c({url:r,error:g})}})})}save(e,t){this.check(e);let r=ke({filename:"download.zip"},t);return new Promise((u,c)=>{e.generateAsync(ke({type:"blob"},r.options),r.update).then(g=>{r.callback&&r.callback(g),(0,Kn.saveAs)(g,r.filename),u()},g=>{c(g)})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=kt({token:i,factory:i.\u0275fac,providedIn:"root"})}return Vo([xn()],i.prototype,"read",null),i})();function Aa(i,o){if(i&1&&(m(0,"li"),f(1),bt(2,"json"),p()),i&2){let e=o.$implicit;l(),ye(Tt(2,1,e))}}function Ba(i,o){if(i&1){let e=ge();m(0,"nz-card",2)(1,"button",4),y("click",function(){x(e);let r=v();return T(r.url())}),f(2,"Via Url"),p(),m(3,"input",5),y("change",function(r){x(e);let u=v();return T(u.change(r))}),p(),m(4,"ol"),we(5,Aa,3,3,"li",null,Bt),p()()}if(i&2){let e=v();l(5),De(e.list)}}function Ia(i,o){if(i&1){let e=ge();m(0,"tr")(1,"td")(2,"input",9),Te("ngModelChange",function(r){let u=x(e).$implicit;return xe(u.path,r)||(u.path=r),T(r)}),p()(),m(3,"td")(4,"input",9),Te("ngModelChange",function(r){let u=x(e).$implicit;return xe(u.url,r)||(u.url=r),T(r)}),p()()()}if(i&2){let e=o.$implicit,t=o.$index;l(2),d("name",Ei("path",t)),be("ngModel",e.path),l(2),d("name",Ei("url",t)),be("ngModel",e.url)}}function Ra(i,o){if(i&1){let e=ge();m(0,"nz-card",3)(1,"button",6),y("click",function(){x(e);let r=v();return T(r.data.push({}))}),f(2,"new"),p(),m(3,"button",7),y("click",function(){x(e);let r=v();return T(r.download())}),f(4,"download"),p(),m(5,"nz-table",8)(6,"thead")(7,"tr")(8,"th")(9,"span"),f(10,"path"),p()(),m(11,"th")(12,"span"),f(13,"url"),p()()()(),m(14,"tbody"),we(15,Ia,5,6,"tr",null,Bt),p()()()}if(i&2){let e=v();l(),d("nzType","primary"),l(4),d("nzData",e.data)("nzFrontPagination",!1)("nzShowPagination",!1),l(10),De(e.data)}}var _i=class _i{constructor(){this.zip=M(Qn);this.msg=M(Oe);this.cdr=M(qt);this.instance=null;this.data=[{path:"demo.docx",url:"https://ng-alain.com/assets/demo.docx"},{path:"\u5C0F\u7A0B\u5E8F\u6807\u5FD7.zip",url:"https://wximg.gtimg.com/shake_tv/mina/standard_logo.zip"}]}ngOnInit(){this.zip.create().then(o=>{this.instance=o,this.cdr.detectChanges()})}format(o){let e=o.files;this.list=Object.keys(e).map(t=>({name:t,dir:e[t].dir,date:e[t].date})),this.cdr.detectChanges()}url(){this.zip.read("./assets/tmp/demo.zip").then(o=>this.format(o))}change(o){let e=o.target.files[0];this.zip.read(e).then(t=>this.format(t))}download(){let o=[];this.data.forEach(e=>{o.push(this.zip.pushUrl(this.instance,e.path,e.url))}),Promise.all(o).then(()=>{this.zip.save(this.instance).then(()=>{this.msg.success("download success"),this.data=[]})},e=>{console.warn(e),this.msg.error(JSON.stringify(e))})}};_i.\u0275fac=function(e){return new(e||_i)},_i.\u0275cmp=b({type:_i,selectors:[["app-zip"]],decls:7,vars:2,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/zip","target","_blank"],["nzTitle","\u89E3\u538B"],["nzTitle","\u538B\u7F29"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],["nz-button","",3,"click","nzType"],["nz-button","",1,"ml-sm",3,"click"],[1,"mt-sm",3,"nzData","nzFrontPagination","nzShowPagination"],["nz-input","",3,"ngModelChange","ngModel","name"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"h1"),f(2," Read & Write zip file, "),m(3,"a",1),f(4,"Document"),p()()(),ve(5,Ba,7,0,"nz-card",2),ve(6,Ra,17,4,"nz-card",3)),e&2&&(l(5),Se(t.instance?5:-1),l(),Se(t.instance?6:-1))},dependencies:[P,Rt,Et,wt,L,oe,K,le,se,ae,D,Ce,fe,Ne,U,Q,O,G,de,$,w,k,me,I,q,An,wn,Dn,In,Fn,Bn,R,ne,X,Lt,J,Y,Z,j,re,ue,ie,V,ee,pe,F,te,ze,H,ce,W,B,It],encapsulation:2,changeDetection:0});var Co=_i;var op=[{path:"st",component:zo},{path:"util",component:ho},{path:"print",component:co},{path:"acl",component:oo},{path:"acl-admin",component:no,canActivate:[qi],data:{guard:"admin"}},{path:"guard",component:po,children:[{path:"leave",component:uo,canDeactivate:[$n]},{path:"auth",component:mo,canActivate:[qi],data:{guard:"user1"}},{path:"admin",component:lo,canActivate:[qi],data:{guard:"admin"}}]},{path:"cache",component:ro},{path:"qr",component:fo},{path:"downfile",component:ao},{path:"xlsx",component:go},{path:"zip",component:Co},{path:"form",component:so}];export{op as routes};
