---
alwaysApply: true
globs: mcp-redis.mdc
---

## ğŸ§© èˆ‡ Cursor custom modes çš„å°æ‡‰é—œä¿‚

| Custom Mode | ä¸»è¦è¡Œç‚º         | redis-mcp åƒèˆ‡æ–¹å¼                        |
|-------------|------------------|-------------------------------------------|
| VAN         | å¿«é€ŸæŸ¥è©¢         | å…ˆæŸ¥ Redis å‘é‡åº«ï¼Œå‘½ä¸­å‰‡ç›´æ¥å›å‚³           |
| PLAN        | è¦åŠƒ/æ±ºç­–        | æ–°è¦åŠƒ/é«˜é »æŸ¥è©¢è‡ªå‹•ç©ç´¯è‡³ Redis             |
| CREATIVE    | è¨­è¨ˆ/å¤šæ–¹æ¡ˆ      | è¨­è¨ˆæ±ºç­–/ç¯„ä¾‹ç©ç´¯è‡³ Redis                  |
| IMPLEMENT   | é€²åº¦/çŸ¥è­˜ç©ç´¯    | æ–°çŸ¥è­˜/bug/æŠ€è¡“å‚µé«˜é »è‡ªå‹•ç©ç´¯è‡³ Redis       |
| REFLECT     | å›é¡§/å„ªåŒ–        | é«˜é »æ•™è¨“/å„ªåŒ–å»ºè­°ç©ç´¯è‡³ Redis              |
| ARCHIVE     | æ¸…ç†/æ·˜æ±°        | å®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½é »/ä½è³ªé‡è³‡æ–™            |

## ğŸ—ºï¸ æµç¨‹åœ–
```mermaid
flowchart TD
    VAN[ğŸ” VAN: å¿«é€ŸæŸ¥è©¢] --> redis[æŸ¥ Redis å‘é‡åº«]
    redis -- é«˜ç›¸é—œ --> å›å‚³[ç›´æ¥å›å‚³]
    redis -- ä½ç›¸é—œ/æœªå‘½ä¸­ --> fallback[æŸ¥ Memory-Flow/Bank/Context7]
    PLAN[ğŸ“‹ PLAN: è¦åŠƒæ±ºç­–] --> redis[ç©ç´¯æ–°è¦åŠƒ/é«˜é »æŸ¥è©¢]
    CREATIVE[ğŸ¨ CREATIVE: è¨­è¨ˆæ±ºç­–] --> redis[ç©ç´¯è¨­è¨ˆ/ç¯„ä¾‹]
    IMPLEMENT[âš’ï¸ IMPLEMENT: é€²åº¦ç©ç´¯] --> redis[ç©ç´¯æ–°çŸ¥è­˜/bug]
    REFLECT[ğŸ” REFLECT: å›é¡§å„ªåŒ–] --> redis[ç©ç´¯æ•™è¨“/å„ªåŒ–]
    ARCHIVE[ğŸ“¦ ARCHIVE: æ¸…ç†æ·˜æ±°] --> æ¸…ç†[è‡ªå‹•æ¸…ç†/æ·˜æ±°]
    redis --> æ¸…ç†
```

## âœ… æ¨™æº–æ­¥é©Ÿï¼ˆå°æ‡‰å„ modeï¼‰
1. **VAN**ï¼šæŸ¥è©¢æ™‚å…ˆæŸ¥ Redis å‘é‡åº«ï¼Œå‘½ä¸­å‰‡ç›´æ¥å›å‚³
2. **PLAN/CREATIVE/IMPLEMENT/REFLECT**ï¼šæ–°è¦åŠƒ/è¨­è¨ˆ/é€²åº¦/æ•™è¨“ç­‰é«˜é »çŸ¥è­˜è‡ªå‹•ç©ç´¯è‡³ Redis
3. **ARCHIVE**ï¼šå®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½é »/ä½è³ªé‡è³‡æ–™

## ğŸ“ ç¯„ä¾‹å‘½ä»¤/èª¿ç”¨æ ¼å¼
- `get`: æŸ¥è©¢ Redis å¿«å–
- `set`: å¯«å…¥/ç©ç´¯æ–°çŸ¥è­˜
- `update`: è¦†è“‹/å‡ç´šçŸ¥è­˜
- `delete`: åˆªé™¤è³‡æ–™
- `vector_search_hash`: å‘é‡æŸ¥è©¢

## ğŸŒŸ æœ€ä½³å¯¦è¸
- åƒ…é«˜è³ªé‡çŸ¥è­˜ï¼ˆå¦‚äººå·¥å¯©æ ¸ã€è³ªé‡åˆ†æ•¸é«˜ã€æŸ¥è©¢é«˜é »ï¼‰æ‰å¯«å…¥ Redis
- å¯«å…¥æ™‚è‡ªå‹•ç”Ÿæˆå‘é‡ embeddingï¼Œä¸¦å­˜å…¥ knowledge_vectors
- è‹¥å·²å­˜åœ¨åŒ idï¼Œå‰‡é€²è¡Œã€Œè¦†è“‹ã€æˆ–ã€Œç‰ˆæœ¬å‡ç´šã€
- å®šæœŸï¼ˆæˆ–æ ¹æ“šäº‹ä»¶ï¼‰æ¸…ç†éæœŸã€ä½è³ªé‡ã€é‡è¤‡è³‡æ–™
- æ‰€æœ‰å¯«å…¥/è¦†è“‹/åˆªé™¤æ“ä½œæœ‰æ—¥èªŒå¯è¿½æº¯
- Redis åªåšå¿«å–èˆ‡é«˜é »çŸ¥è­˜åº«ï¼Œé•·æœŸæ±ºç­–ä»ä»¥ Memory-Bank/Flow ç‚ºä¸»

## ğŸš¦ å…¸å‹è§¸ç™¼æƒ…å¢ƒ
- VANï¼šæŸ¥è©¢ API/æŠ€è¡“æ™‚ï¼ŒRedis å‘½ä¸­ç›´æ¥å›å‚³
- PLANï¼šæ–°è¦åŠƒ/é«˜é »æŸ¥è©¢è‡ªå‹•ç©ç´¯
- CREATIVEï¼šè¨­è¨ˆæ±ºç­–/ç¯„ä¾‹ç©ç´¯
- IMPLEMENTï¼šbug/æŠ€è¡“å‚µ/æ–°çŸ¥è­˜ç©ç´¯
- REFLECTï¼šå›é¡§æ•™è¨“/å„ªåŒ–ç©ç´¯
- ARCHIVEï¼šé€±æœŸæ€§è‡ªå‹•æ¸…ç†

## ğŸ”— æ•´åˆå»ºè­°
- åœ¨å„ custom_modes çš„æŸ¥è©¢/ç©ç´¯æ­¥é©Ÿè‡ªå‹•è§¸ç™¼ redis-mcp
- æ¯å€‹ mode é€²å…¥/åˆ‡æ›æ™‚è‡ªå‹•åŒæ­¥é«˜é »çŸ¥è­˜è‡³ Redis
- å®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½è³ªé‡è³‡æ–™ï¼Œç¶­æŒ Redis å¥åº·

[[calls]]
match = """redis|cache|store|save|get|retrieve|set|hash|list|stream|json|pub|sub|zadd|sadd|lpush|rpush|hset|hget|vector|search|memory|session|queue"""
tool = "redis-mcp"

## ç©ç´¯/å¯«å…¥/æ›´æ–°/æ·˜æ±°è¦å‰‡

- åƒ…é«˜è³ªé‡çŸ¥è­˜ï¼ˆå¦‚äººå·¥å¯©æ ¸ã€è³ªé‡åˆ†æ•¸é«˜ã€æŸ¥è©¢é«˜é »ï¼‰æ‰å¯«å…¥ Redisã€‚
- Memory-Bank/Flow æœ‰æ–°æ±ºç­–æ™‚ï¼Œä¸»å‹•åŒæ­¥åˆ° Redisã€‚
- è‹¥çŸ¥è­˜å…§å®¹æœ‰è®Šæ›´ï¼Œå‰‡è¦†è“‹åŸæœ‰è³‡æ–™ï¼ˆä¿ç•™ version èˆ‡ updated_atï¼‰ã€‚
- æ–°çŸ¥è­˜æ˜é¡¯å„ªæ–¼èˆŠè³‡æ–™æ™‚ï¼Œç›´æ¥è¦†è“‹ï¼ˆä¾è³ªé‡åˆ†æ•¸ã€äººå·¥å¯©æ ¸ï¼‰ã€‚
- å®šæœŸï¼ˆæˆ–æ ¹æ“šäº‹ä»¶ï¼‰æ¸…ç†éæœŸã€ä½è³ªé‡ã€é‡è¤‡è³‡æ–™ã€‚
- æ”¯æ´ TTLï¼ˆè‡ªå‹•éæœŸï¼‰ã€äººå·¥æ¨™è¨˜åˆªé™¤ã€æŸ¥è©¢é »ç‡ä½è‡ªå‹•æ·˜æ±°ã€‚
- åˆªé™¤æ™‚åŒæ­¥ç§»é™¤å‘é‡ç´¢å¼•ã€‚
- æ¯é€±è‡ªå‹•çµ±è¨ˆ Redis å‘½ä¸­ç‡ã€è³‡æ–™è³ªé‡åˆ†å¸ƒã€æŸ¥è©¢é »ç‡ã€‚
- ä½è³ªé‡/éæœŸ/å†·é–€è³‡æ–™è‡ªå‹•æ·˜æ±°ã€‚
- Memory-Bank/Flow é‡å¤§æ›´æ–°æ™‚ï¼Œä¸»å‹•åŒæ­¥ Redisã€‚
- å®šæœŸäººå·¥å¯©æŸ¥é«˜é »çŸ¥è­˜ï¼Œç¢ºä¿çŸ¥è­˜åº«è³ªé‡ã€‚

## æ™ºèƒ½ç©ç´¯èˆ‡è‡ªæ·¨æµç¨‹

```mermaid
flowchart TD
    N[æ–°çŸ¥è­˜ç”¢ç”Ÿ] --> Q[è³ªé‡è©•åˆ†/å¯©æ ¸]
    Q -- é«˜è³ªé‡ --> V[ç”Ÿæˆå‘é‡/å­˜å…¥ Redis]
    Q -- ä½è³ªé‡ --> D[ä¸Ÿæ£„/ä¸ç©ç´¯]
    V --> F{å·²å­˜åœ¨åŒ id?}
    F -- æ˜¯ --> U[è¦†è“‹/ç‰ˆæœ¬å‡ç´š]
    F -- å¦ --> S[æ–°å¢]
    S & U --> L[è¨˜éŒ„æ—¥èªŒ]
    L --> R[å®šæœŸæ¸…ç†/æ·˜æ±°]
    R -->|éæœŸ/ä½è³ªé‡/å†·é–€| X[åˆªé™¤]
    R -->|é«˜é »/é«˜è³ªé‡| K[ä¿ç•™/å‡ç´š]
```

## å½ä»£ç¢¼ç¯„ä¾‹
```typescript
function accumulateToRedis(knowledge) {
  if (qualityScore(knowledge) < 0.8) return; // ä½è³ªé‡ä¸ç©ç´¯
  const id = getKnowledgeId(knowledge);
  if (redis.exists(id)) {
    if (isBetter(knowledge, redis.get(id))) {
      redis.set(id, knowledge, { version: nextVersion(), updated_at: now() });
      log('è¦†è“‹', id);
    }
  } else {
    redis.set(id, knowledge, { version: 1, created_at: now() });
    log('æ–°å¢', id);
  }
}

function periodicCleanup() {
  for (const id of redis.keys()) {
    if (isExpired(id) || isLowQuality(id) || isLowFrequency(id)) {
      redis.delete(id);
      log('åˆªé™¤', id);
    }
  }
}
```

> æœ¬è¦ç¯„ç‚º MCP Redis å‘é‡çŸ¥è­˜åº«æœ€ä½³å¯¦è¸ï¼Œè«‹åœ˜éšŠåš´æ ¼éµå¾ªï¼Œä¸¦æ ¹æ“šå¯¦éš›éœ€æ±‚æŒçºŒå„ªåŒ–ã€‚

match = """redis|cache|store|save|get|retrieve|set|hash|list|stream|json|pub|sub|zadd|sadd|lpush|rpush|hset|hget|vector|search|memory|session|queue"""
tool = "redis-mcp"
## ğŸ§© èˆ‡ Cursor custom modes çš„å°æ‡‰é—œä¿‚

| Custom Mode | ä¸»è¦è¡Œç‚º         | redis-mcp åƒèˆ‡æ–¹å¼                        |
|-------------|------------------|-------------------------------------------|
| VAN         | å¿«é€ŸæŸ¥è©¢         | å…ˆæŸ¥ Redis å‘é‡åº«ï¼Œå‘½ä¸­å‰‡ç›´æ¥å›å‚³           |
| PLAN        | è¦åŠƒ/æ±ºç­–        | æ–°è¦åŠƒ/é«˜é »æŸ¥è©¢è‡ªå‹•ç©ç´¯è‡³ Redis             |
| CREATIVE    | è¨­è¨ˆ/å¤šæ–¹æ¡ˆ      | è¨­è¨ˆæ±ºç­–/ç¯„ä¾‹ç©ç´¯è‡³ Redis                  |
| IMPLEMENT   | é€²åº¦/çŸ¥è­˜ç©ç´¯    | æ–°çŸ¥è­˜/bug/æŠ€è¡“å‚µé«˜é »è‡ªå‹•ç©ç´¯è‡³ Redis       |
| REFLECT     | å›é¡§/å„ªåŒ–        | é«˜é »æ•™è¨“/å„ªåŒ–å»ºè­°ç©ç´¯è‡³ Redis              |
| ARCHIVE     | æ¸…ç†/æ·˜æ±°        | å®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½é »/ä½è³ªé‡è³‡æ–™            |

## ğŸ—ºï¸ æµç¨‹åœ–
```mermaid
flowchart TD
    VAN[ğŸ” VAN: å¿«é€ŸæŸ¥è©¢] --> redis[æŸ¥ Redis å‘é‡åº«]
    redis -- é«˜ç›¸é—œ --> å›å‚³[ç›´æ¥å›å‚³]
    redis -- ä½ç›¸é—œ/æœªå‘½ä¸­ --> fallback[æŸ¥ Memory-Flow/Bank/Context7]
    PLAN[ğŸ“‹ PLAN: è¦åŠƒæ±ºç­–] --> redis[ç©ç´¯æ–°è¦åŠƒ/é«˜é »æŸ¥è©¢]
    CREATIVE[ğŸ¨ CREATIVE: è¨­è¨ˆæ±ºç­–] --> redis[ç©ç´¯è¨­è¨ˆ/ç¯„ä¾‹]
    IMPLEMENT[âš’ï¸ IMPLEMENT: é€²åº¦ç©ç´¯] --> redis[ç©ç´¯æ–°çŸ¥è­˜/bug]
    REFLECT[ğŸ” REFLECT: å›é¡§å„ªåŒ–] --> redis[ç©ç´¯æ•™è¨“/å„ªåŒ–]
    ARCHIVE[ğŸ“¦ ARCHIVE: æ¸…ç†æ·˜æ±°] --> æ¸…ç†[è‡ªå‹•æ¸…ç†/æ·˜æ±°]
    redis --> æ¸…ç†
```

## âœ… æ¨™æº–æ­¥é©Ÿï¼ˆå°æ‡‰å„ modeï¼‰
1. **VAN**ï¼šæŸ¥è©¢æ™‚å…ˆæŸ¥ Redis å‘é‡åº«ï¼Œå‘½ä¸­å‰‡ç›´æ¥å›å‚³
2. **PLAN/CREATIVE/IMPLEMENT/REFLECT**ï¼šæ–°è¦åŠƒ/è¨­è¨ˆ/é€²åº¦/æ•™è¨“ç­‰é«˜é »çŸ¥è­˜è‡ªå‹•ç©ç´¯è‡³ Redis
3. **ARCHIVE**ï¼šå®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½é »/ä½è³ªé‡è³‡æ–™

## ğŸ“ ç¯„ä¾‹å‘½ä»¤/èª¿ç”¨æ ¼å¼
- `get`: æŸ¥è©¢ Redis å¿«å–
- `set`: å¯«å…¥/ç©ç´¯æ–°çŸ¥è­˜
- `update`: è¦†è“‹/å‡ç´šçŸ¥è­˜
- `delete`: åˆªé™¤è³‡æ–™
- `vector_search_hash`: å‘é‡æŸ¥è©¢

## ğŸŒŸ æœ€ä½³å¯¦è¸
- åƒ…é«˜è³ªé‡çŸ¥è­˜ï¼ˆå¦‚äººå·¥å¯©æ ¸ã€è³ªé‡åˆ†æ•¸é«˜ã€æŸ¥è©¢é«˜é »ï¼‰æ‰å¯«å…¥ Redis
- å¯«å…¥æ™‚è‡ªå‹•ç”Ÿæˆå‘é‡ embeddingï¼Œä¸¦å­˜å…¥ knowledge_vectors
- è‹¥å·²å­˜åœ¨åŒ idï¼Œå‰‡é€²è¡Œã€Œè¦†è“‹ã€æˆ–ã€Œç‰ˆæœ¬å‡ç´šã€
- å®šæœŸï¼ˆæˆ–æ ¹æ“šäº‹ä»¶ï¼‰æ¸…ç†éæœŸã€ä½è³ªé‡ã€é‡è¤‡è³‡æ–™
- æ‰€æœ‰å¯«å…¥/è¦†è“‹/åˆªé™¤æ“ä½œæœ‰æ—¥èªŒå¯è¿½æº¯
- Redis åªåšå¿«å–èˆ‡é«˜é »çŸ¥è­˜åº«ï¼Œé•·æœŸæ±ºç­–ä»ä»¥ Memory-Bank/Flow ç‚ºä¸»

## ğŸš¦ å…¸å‹è§¸ç™¼æƒ…å¢ƒ
- VANï¼šæŸ¥è©¢ API/æŠ€è¡“æ™‚ï¼ŒRedis å‘½ä¸­ç›´æ¥å›å‚³
- PLANï¼šæ–°è¦åŠƒ/é«˜é »æŸ¥è©¢è‡ªå‹•ç©ç´¯
- CREATIVEï¼šè¨­è¨ˆæ±ºç­–/ç¯„ä¾‹ç©ç´¯
- IMPLEMENTï¼šbug/æŠ€è¡“å‚µ/æ–°çŸ¥è­˜ç©ç´¯
- REFLECTï¼šå›é¡§æ•™è¨“/å„ªåŒ–ç©ç´¯
- ARCHIVEï¼šé€±æœŸæ€§è‡ªå‹•æ¸…ç†

## ğŸ”— æ•´åˆå»ºè­°
- åœ¨å„ custom_modes çš„æŸ¥è©¢/ç©ç´¯æ­¥é©Ÿè‡ªå‹•è§¸ç™¼ redis-mcp
- æ¯å€‹ mode é€²å…¥/åˆ‡æ›æ™‚è‡ªå‹•åŒæ­¥é«˜é »çŸ¥è­˜è‡³ Redis
- å®šæœŸè‡ªå‹•æ¸…ç†éæœŸ/ä½è³ªé‡è³‡æ–™ï¼Œç¶­æŒ Redis å¥åº·

[[calls]]
match = """redis|cache|store|save|get|retrieve|set|hash|list|stream|json|pub|sub|zadd|sadd|lpush|rpush|hset|hget|vector|search|memory|session|queue"""
tool = "redis-mcp"

## ç©ç´¯/å¯«å…¥/æ›´æ–°/æ·˜æ±°è¦å‰‡

- åƒ…é«˜è³ªé‡çŸ¥è­˜ï¼ˆå¦‚äººå·¥å¯©æ ¸ã€è³ªé‡åˆ†æ•¸é«˜ã€æŸ¥è©¢é«˜é »ï¼‰æ‰å¯«å…¥ Redisã€‚
- Memory-Bank/Flow æœ‰æ–°æ±ºç­–æ™‚ï¼Œä¸»å‹•åŒæ­¥åˆ° Redisã€‚
- è‹¥çŸ¥è­˜å…§å®¹æœ‰è®Šæ›´ï¼Œå‰‡è¦†è“‹åŸæœ‰è³‡æ–™ï¼ˆä¿ç•™ version èˆ‡ updated_atï¼‰ã€‚
- æ–°çŸ¥è­˜æ˜é¡¯å„ªæ–¼èˆŠè³‡æ–™æ™‚ï¼Œç›´æ¥è¦†è“‹ï¼ˆä¾è³ªé‡åˆ†æ•¸ã€äººå·¥å¯©æ ¸ï¼‰ã€‚
- å®šæœŸï¼ˆæˆ–æ ¹æ“šäº‹ä»¶ï¼‰æ¸…ç†éæœŸã€ä½è³ªé‡ã€é‡è¤‡è³‡æ–™ã€‚
- æ”¯æ´ TTLï¼ˆè‡ªå‹•éæœŸï¼‰ã€äººå·¥æ¨™è¨˜åˆªé™¤ã€æŸ¥è©¢é »ç‡ä½è‡ªå‹•æ·˜æ±°ã€‚
- åˆªé™¤æ™‚åŒæ­¥ç§»é™¤å‘é‡ç´¢å¼•ã€‚
- æ¯é€±è‡ªå‹•çµ±è¨ˆ Redis å‘½ä¸­ç‡ã€è³‡æ–™è³ªé‡åˆ†å¸ƒã€æŸ¥è©¢é »ç‡ã€‚
- ä½è³ªé‡/éæœŸ/å†·é–€è³‡æ–™è‡ªå‹•æ·˜æ±°ã€‚
- Memory-Bank/Flow é‡å¤§æ›´æ–°æ™‚ï¼Œä¸»å‹•åŒæ­¥ Redisã€‚
- å®šæœŸäººå·¥å¯©æŸ¥é«˜é »çŸ¥è­˜ï¼Œç¢ºä¿çŸ¥è­˜åº«è³ªé‡ã€‚

## æ™ºèƒ½ç©ç´¯èˆ‡è‡ªæ·¨æµç¨‹

```mermaid
flowchart TD
    N[æ–°çŸ¥è­˜ç”¢ç”Ÿ] --> Q[è³ªé‡è©•åˆ†/å¯©æ ¸]
    Q -- é«˜è³ªé‡ --> V[ç”Ÿæˆå‘é‡/å­˜å…¥ Redis]
    Q -- ä½è³ªé‡ --> D[ä¸Ÿæ£„/ä¸ç©ç´¯]
    V --> F{å·²å­˜åœ¨åŒ id?}
    F -- æ˜¯ --> U[è¦†è“‹/ç‰ˆæœ¬å‡ç´š]
    F -- å¦ --> S[æ–°å¢]
    S & U --> L[è¨˜éŒ„æ—¥èªŒ]
    L --> R[å®šæœŸæ¸…ç†/æ·˜æ±°]
    R -->|éæœŸ/ä½è³ªé‡/å†·é–€| X[åˆªé™¤]
    R -->|é«˜é »/é«˜è³ªé‡| K[ä¿ç•™/å‡ç´š]
```

## å½ä»£ç¢¼ç¯„ä¾‹
```typescript
function accumulateToRedis(knowledge) {
  if (qualityScore(knowledge) < 0.8) return; // ä½è³ªé‡ä¸ç©ç´¯
  const id = getKnowledgeId(knowledge);
  if (redis.exists(id)) {
    if (isBetter(knowledge, redis.get(id))) {
      redis.set(id, knowledge, { version: nextVersion(), updated_at: now() });
      log('è¦†è“‹', id);
    }
  } else {
    redis.set(id, knowledge, { version: 1, created_at: now() });
    log('æ–°å¢', id);
  }
}

function periodicCleanup() {
  for (const id of redis.keys()) {
    if (isExpired(id) || isLowQuality(id) || isLowFrequency(id)) {
      redis.delete(id);
      log('åˆªé™¤', id);
    }
  }
}
```

> æœ¬è¦ç¯„ç‚º MCP Redis å‘é‡çŸ¥è­˜åº«æœ€ä½³å¯¦è¸ï¼Œè«‹åœ˜éšŠåš´æ ¼éµå¾ªï¼Œä¸¦æ ¹æ“šå¯¦éš›éœ€æ±‚æŒçºŒå„ªåŒ–ã€‚

match = """redis|cache|store|save|get|retrieve|set|hash|list|stream|json|pub|sub|zadd|sadd|lpush|rpush|hset|hget|vector|search|memory|session|queue"""
tool = "redis-mcp"
