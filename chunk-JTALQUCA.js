import{$b as G,Da as N,Ea as C,Gc as F,L as B,M as T,Ra as w,Re as A,af as O,dc as U,df as b,ec as _,ee as d,g,gb as D,ie as X,jd as R,je as Y,kd as z,na as $,oa as P,ob as W,oc as H,pb as k,qb as I,sa as a,wb as f,xb as y}from"./chunk-REO3NWNY.js";import{a as p,b as E}from"./chunk-57BLH6QZ.js";var q=["*"];function j(i){return A(i)?i.touches[0]||i.changedTouches[0]:i}var x=(()=>{class i{document=a(N);ngZone=a(y);listeners=new Map;handleMouseDownOutsideAngular$=new g;documentMouseUpOutsideAngular$=new g;documentMouseMoveOutsideAngular$=new g;mouseEnteredOutsideAngular$=new g;startResizing(e){let t=A(e);this.clearListeners();let n=t?"touchmove":"mousemove",o=t?"touchend":"mouseup",s=l=>{this.documentMouseMoveOutsideAngular$.next(l)},r=l=>{this.documentMouseUpOutsideAngular$.next(l),this.clearListeners()};this.listeners.set(n,s),this.listeners.set(o,r),this.ngZone.runOutsideAngular(()=>{this.listeners.forEach((l,h)=>{this.document.addEventListener(h,l)})})}clearListeners(){this.listeners.forEach((e,t)=>{this.document.removeEventListener(t,e)}),this.listeners.clear()}ngOnDestroy(){this.handleMouseDownOutsideAngular$.complete(),this.documentMouseUpOutsideAngular$.complete(),this.documentMouseMoveOutsideAngular$.complete(),this.mouseEnteredOutsideAngular$.complete(),this.clearListeners()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=$({token:i,factory:i.\u0275fac})}return i})(),fe=(()=>{class i{elementRef=a(w);renderer=a(D);nzResizableService=a(x);platform=a(X);ngZone=a(y);destroyRef=a(C);nzBounds="parent";nzMaxHeight;nzMaxWidth;nzMinHeight=40;nzMinWidth=40;nzGridColumnCount=-1;nzMaxColumn=-1;nzMinColumn=-1;nzLockAspectRatio=!1;nzPreview=!1;nzDisabled=!1;nzResize=new f;nzResizeEnd=new f;nzResizeStart=new f;resizing=!1;elRect;currentHandleEvent=null;ghostElement=null;el;sizeCache=null;constructor(){this.nzResizableService.handleMouseDownOutsideAngular$.pipe(d()).subscribe(e=>{this.nzDisabled||(this.resizing=!0,this.nzResizableService.startResizing(e.mouseEvent),this.currentHandleEvent=e,this.nzResizeStart.observers.length&&this.ngZone.run(()=>this.nzResizeStart.emit({mouseEvent:e.mouseEvent,direction:e.direction})),this.elRect=this.el.getBoundingClientRect())}),this.nzResizableService.documentMouseUpOutsideAngular$.pipe(d(),T(Boolean)).subscribe(e=>{this.resizing&&(this.resizing=!1,this.nzResizableService.documentMouseUpOutsideAngular$.next(null),this.endResize(e))}),this.nzResizableService.documentMouseMoveOutsideAngular$.pipe(d()).subscribe(e=>{this.resizing&&this.resize(e)})}setPosition(){let e=getComputedStyle(this.el).position;(e==="static"||!e)&&this.renderer.setStyle(this.el,"position","relative")}calcSize(e,t,n){let o,s,r,l,h=0,c=0,u=this.nzMinWidth,v=1/0,M=1/0;if(this.nzBounds==="parent"){let m=this.renderer.parentNode(this.el);if(m instanceof HTMLElement){let L=m.getBoundingClientRect();v=L.width,M=L.height}}else if(this.nzBounds==="window")typeof window<"u"&&(v=window.innerWidth,M=window.innerHeight);else if(this.nzBounds&&this.nzBounds.nativeElement&&this.nzBounds.nativeElement instanceof HTMLElement){let m=this.nzBounds.nativeElement.getBoundingClientRect();v=m.width,M=m.height}return r=O(this.nzMaxWidth,v),l=O(this.nzMaxHeight,M),this.nzGridColumnCount!==-1&&(c=r/this.nzGridColumnCount,u=this.nzMinColumn!==-1?c*this.nzMinColumn:u,r=this.nzMaxColumn!==-1?c*this.nzMaxColumn:r),n!==-1?/(left|right)/i.test(this.currentHandleEvent.direction)?(o=Math.min(Math.max(e,u),r),s=Math.min(Math.max(o/n,this.nzMinHeight),l),(s>=l||s<=this.nzMinHeight)&&(o=Math.min(Math.max(s*n,u),r))):(s=Math.min(Math.max(t,this.nzMinHeight),l),o=Math.min(Math.max(s*n,u),r),(o>=r||o<=u)&&(s=Math.min(Math.max(o/n,this.nzMinHeight),l))):(o=Math.min(Math.max(e,u),r),s=Math.min(Math.max(t,this.nzMinHeight),l)),this.nzGridColumnCount!==-1&&(h=Math.round(o/c),o=h*c),{col:h,width:o,height:s}}resize(e){let t=this.elRect,n=j(e),o=j(this.currentHandleEvent.mouseEvent),s=t.width,r=t.height,l=this.nzLockAspectRatio?s/r:-1;switch(this.currentHandleEvent.direction){case"bottomRight":s=n.clientX-t.left,r=n.clientY-t.top;break;case"bottomLeft":s=t.width+o.clientX-n.clientX,r=n.clientY-t.top;break;case"topRight":s=n.clientX-t.left,r=t.height+o.clientY-n.clientY;break;case"topLeft":s=t.width+o.clientX-n.clientX,r=t.height+o.clientY-n.clientY;break;case"top":r=t.height+o.clientY-n.clientY;break;case"right":s=n.clientX-t.left;break;case"bottom":r=n.clientY-t.top;break;case"left":s=t.width+o.clientX-n.clientX}let h=this.calcSize(s,r,l);this.sizeCache=p({},h),this.nzResize.observers.length&&this.ngZone.run(()=>{this.nzResize.emit(E(p({},h),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.nzPreview&&this.previewResize(h)}endResize(e){this.removeGhostElement();let t=this.sizeCache?p({},this.sizeCache):{width:this.elRect.width,height:this.elRect.height};this.nzResizeEnd.observers.length&&this.ngZone.run(()=>{this.nzResizeEnd.emit(E(p({},t),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.sizeCache=null,this.currentHandleEvent=null}previewResize({width:e,height:t}){this.createGhostElement(),this.renderer.setStyle(this.ghostElement,"width",`${e}px`),this.renderer.setStyle(this.ghostElement,"height",`${t}px`)}createGhostElement(){this.ghostElement||(this.ghostElement=this.renderer.createElement("div"),this.renderer.setAttribute(this.ghostElement,"class","nz-resizable-preview")),this.renderer.appendChild(this.el,this.ghostElement)}removeGhostElement(){this.ghostElement&&this.renderer.removeChild(this.el,this.ghostElement)}ngAfterViewInit(){this.platform.isBrowser&&(this.el=this.elementRef.nativeElement,this.setPosition(),b(this.el,"mouseenter").pipe(d(this.destroyRef)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!0)}),b(this.el,"mouseleave").pipe(d(this.destroyRef)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!1)}))}ngOnDestroy(){this.ghostElement=null,this.sizeCache=null}static \u0275fac=function(t){return new(t||i)};static \u0275dir=I({type:i,selectors:[["","nz-resizable",""]],hostAttrs:[1,"nz-resizable"],hostVars:4,hostBindings:function(t,n){t&2&&H("nz-resizable-resizing",n.resizing)("nz-resizable-disabled",n.nzDisabled)},inputs:{nzBounds:"nzBounds",nzMaxHeight:"nzMaxHeight",nzMaxWidth:"nzMaxWidth",nzMinHeight:[2,"nzMinHeight","nzMinHeight",z],nzMinWidth:[2,"nzMinWidth","nzMinWidth",z],nzGridColumnCount:[2,"nzGridColumnCount","nzGridColumnCount",z],nzMaxColumn:[2,"nzMaxColumn","nzMaxColumn",z],nzMinColumn:[2,"nzMinColumn","nzMinColumn",z],nzLockAspectRatio:[2,"nzLockAspectRatio","nzLockAspectRatio",R],nzPreview:[2,"nzPreview","nzPreview",R],nzDisabled:[2,"nzDisabled","nzDisabled",R]},outputs:{nzResize:"nzResize",nzResizeEnd:"nzResizeEnd",nzResizeStart:"nzResizeStart"},exportAs:["nzResizable"],features:[F([x])]})}return i})(),S=class{direction;mouseEvent;constructor(V,e){this.direction=V,this.mouseEvent=e}},Z=Y({passive:!0}),be=(()=>{class i{nzResizableService=a(x);renderer=a(D);el=a(w).nativeElement;destroyRef=a(C);nzDirection="bottomRight";nzCursorType="window";nzMouseDown=new f;ngOnInit(){this.nzResizableService.mouseEnteredOutsideAngular$.pipe(d(this.destroyRef)).subscribe(e=>{e?this.renderer.addClass(this.el,"nz-resizable-handle-box-hover"):this.renderer.removeClass(this.el,"nz-resizable-handle-box-hover")}),B(b(this.el,"mousedown",Z),b(this.el,"touchstart",Z)).pipe(d(this.destroyRef)).subscribe(e=>{this.nzResizableService.handleMouseDownOutsideAngular$.next(new S(this.nzDirection,e))})}onPointerDown(e){e.target.setPointerCapture(e.pointerId)}onPointerUp(e){e.target.releasePointerCapture(e.pointerId)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=W({type:i,selectors:[["nz-resize-handle"],["","nz-resize-handle",""]],hostAttrs:[1,"nz-resizable-handle"],hostVars:20,hostBindings:function(t,n){t&1&&G("pointerdown",function(s){return n.onPointerDown(s)})("pointerup",function(s){return n.onPointerUp(s)}),t&2&&H("nz-resizable-handle-top",n.nzDirection==="top")("nz-resizable-handle-right",n.nzDirection==="right")("nz-resizable-handle-bottom",n.nzDirection==="bottom")("nz-resizable-handle-left",n.nzDirection==="left")("nz-resizable-handle-topRight",n.nzDirection==="topRight")("nz-resizable-handle-bottomRight",n.nzDirection==="bottomRight")("nz-resizable-handle-bottomLeft",n.nzDirection==="bottomLeft")("nz-resizable-handle-topLeft",n.nzDirection==="topLeft")("nz-resizable-handle-cursor-type-grid",n.nzCursorType==="grid")("nz-resizable-handle-cursor-type-window",n.nzCursorType==="window")},inputs:{nzDirection:"nzDirection",nzCursorType:"nzCursorType"},outputs:{nzMouseDown:"nzMouseDown"},exportAs:["nzResizeHandle"],ngContentSelectors:q,decls:1,vars:0,template:function(t,n){t&1&&(U(),_(0))},encapsulation:2,changeDetection:0})}return i})();var ve=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=k({type:i});static \u0275inj=P({})}return i})();export{j as a,fe as b,be as c,ve as d};
